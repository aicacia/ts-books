import{S as a,i as t,s as e,e as l,c as s,a as r,d as o,b as c,f as n,E as i,I as h,J as u,t as f,g as d,G as m,k as p,n as v,h as b,K as g,L as E,M as k,N as w,O as y,P as B,j as N,H as $,m as I,o as j,v as O,r as T,w as x}from"../../chunks/vendor-53195a77.js";import{B as q,b as U}from"../../chunks/books-8632c77b.js";function D(a,t,e){const l=a.slice();return l[7]=t[e],l}function J(a,t,e){const l=a.slice();return l[10]=t[e][0],l[11]=t[e][1],l}function L(a){let t,e,f,d;return{c(){t=l("div"),e=l("input"),this.h()},l(a){t=s(a,"DIV",{class:!0});var l=r(t);e=s(l,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0,required:!0}),l.forEach(o),this.h()},h(){c(e,"type","text"),c(e,"class","form-control"),c(e,"placeholder","New Book Name"),c(e,"aria-label","New Book Name"),e.required=!0,c(t,"class","col-auto")},m(l,s){n(l,t,s),i(t,e),h(e,a[0]),f||(d=u(e,"input",a[4]),f=!0)},p(a,t){1&t&&e.value!==a[0]&&h(e,a[0])},d(a){a&&o(t),f=!1,d()}}}function V(a){let t,e,c=a[10]+"";return{c(){t=l("option"),e=f(c),this.h()},l(a){t=s(a,"OPTION",{value:!0});var l=r(t);e=d(l,c),l.forEach(o),this.h()},h(){t.__value=a[11],t.value=t.__value},m(a,l){n(a,t,l),i(t,e)},p:m,d(a){a&&o(t)}}}function _(a){let t,e,h,u,m,g,E,k,w,y=a[7].name+"";return{c(){t=l("li"),e=l("div"),h=l("h3"),u=f(y),m=p(),g=l("a"),E=f("Edit"),w=p(),this.h()},l(a){t=s(a,"LI",{class:!0});var l=r(t);e=s(l,"DIV",{class:!0});var c=r(e);h=s(c,"H3",{class:!0});var n=r(h);u=d(n,y),n.forEach(o),c.forEach(o),m=v(l),g=s(l,"A",{role:!0,class:!0,"aria-label":!0,href:!0});var i=r(g);E=d(i,"Edit"),i.forEach(o),w=v(l),l.forEach(o),this.h()},h(){c(h,"class","fw-bold"),c(e,"class","ms-2 me-auto"),c(g,"role","button"),c(g,"class","btn btn-primary"),c(g,"aria-label","Update"),c(g,"href",k=`/books/${a[7].id}`),c(t,"class","list-group-item d-flex justify-content-between align-items-start")},m(a,l){n(a,t,l),i(t,e),i(e,h),i(h,u),i(t,m),i(t,g),i(g,E),i(t,w)},p(a,t){6&t&&y!==(y=a[7].name+"")&&b(u,y),6&t&&k!==(k=`/books/${a[7].id}`)&&c(g,"href",k)},d(a){a&&o(t)}}}function C(a){let t,e,h,b,y,B,N,$,I,j,O,T,x=a[1]!==q.Journal&&L(a),U=Object.entries(q),C=[];for(let l=0;l<U.length;l+=1)C[l]=V(J(a,U,l));let P=a[2].books.rows.filter(a[6]),H=[];for(let l=0;l<P.length;l+=1)H[l]=_(D(a,P,l));return{c(){t=l("form"),x&&x.c(),e=p(),h=l("div"),b=l("select");for(let a=0;a<C.length;a+=1)C[a].c();y=p(),B=l("div"),N=l("button"),$=f("Create Book"),I=p(),j=l("ul");for(let a=0;a<H.length;a+=1)H[a].c();this.h()},l(a){t=s(a,"FORM",{action:!0,class:!0});var l=r(t);x&&x.l(l),e=v(l),h=s(l,"DIV",{class:!0});var c=r(h);b=s(c,"SELECT",{class:!0,placeholder:!0,"aria-label":!0,required:!0});var n=r(b);for(let t=0;t<C.length;t+=1)C[t].l(n);n.forEach(o),c.forEach(o),y=v(l),B=s(l,"DIV",{class:!0});var i=r(B);N=s(i,"BUTTON",{type:!0,class:!0,"aria-label":!0});var u=r(N);$=d(u,"Create Book"),u.forEach(o),i.forEach(o),l.forEach(o),I=v(a),j=s(a,"UL",{class:!0});var f=r(j);for(let t=0;t<H.length;t+=1)H[t].l(f);f.forEach(o),this.h()},h(){c(b,"class","form-select"),c(b,"placeholder","New Book Type"),c(b,"aria-label","New Book Type"),b.required=!0,void 0===a[1]&&g((()=>a[5].call(b))),c(h,"class","col-auto"),c(N,"type","submit"),c(N,"class","btn btn-primary"),c(N,"aria-label","Update"),c(B,"class","col-auto"),c(t,"action","javascript:void(0);"),c(t,"class","row mt-4"),c(j,"class","list-group mt-4")},m(l,s){n(l,t,s),x&&x.m(t,null),i(t,e),i(t,h),i(h,b);for(let a=0;a<C.length;a+=1)C[a].m(b,null);E(b,a[1]),i(t,y),i(t,B),i(B,N),i(N,$),n(l,I,s),n(l,j,s);for(let a=0;a<H.length;a+=1)H[a].m(j,null);O||(T=[u(b,"change",a[5]),u(N,"click",a[3])],O=!0)},p(a,[l]){if(a[1]!==q.Journal?x?x.p(a,l):(x=L(a),x.c(),x.m(t,e)):x&&(x.d(1),x=null),0&l){let t;for(U=Object.entries(q),t=0;t<U.length;t+=1){const e=J(a,U,t);C[t]?C[t].p(e,l):(C[t]=V(e),C[t].c(),C[t].m(b,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=U.length}if(2&l&&E(b,a[1]),6&l){let t;for(P=a[2].books.rows.filter(a[6]),t=0;t<P.length;t+=1){const e=D(a,P,t);H[t]?H[t].p(e,l):(H[t]=_(e),H[t].c(),H[t].m(j,null))}for(;t<H.length;t+=1)H[t].d(1);H.length=P.length}},i:m,o:m,d(a){a&&o(t),x&&x.d(),k(C,a),a&&o(I),a&&o(j),k(H,a),O=!1,w(T)}}}function P(a,t,e){let l,s;y(a,U,(a=>e(2,l=a)));let r=q.Journal;return[s,r,l,function(){U.createBook(r,s)},function(){s=this.value,e(0,s)},function(){r=B(this),e(1,r)},a=>a.type===r]}class H extends a{constructor(a){super(),t(this,a,P,C,e,{})}}function M(a){let t,e,l;return e=new H({}),{c(){t=p(),N(e.$$.fragment),this.h()},l(a){$('[data-svelte="svelte-gx7tqy"]',document.head).forEach(o),t=v(a),I(e.$$.fragment,a),this.h()},h(){document.title="Books"},m(a,s){n(a,t,s),j(e,a,s),l=!0},p:m,i(a){l||(O(e.$$.fragment,a),l=!0)},o(a){T(e.$$.fragment,a),l=!1},d(a){a&&o(t),x(e,a)}}}export default class extends a{constructor(a){super(),t(this,a,null,M,e,{})}}
