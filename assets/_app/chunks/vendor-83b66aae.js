function t(){}function e(t,e){for(const r in e)t[r]=e[r];return t}function r(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(r)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...r){if(null==e)return t;const n=e.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}function u(t){let e;return a(t,(t=>e=t))(),e}function c(t,e,r){t.$$.on_destroy.push(a(e,r))}function l(t,e,r,n){if(t){const o=h(t,e,r,n);return t[0](o)}}function h(t,r,n,o){return t[1]&&o?e(n.ctx.slice(),t[1](o(r))):n.ctx}function f(t,e,r,n,o,i,s){const a=function(t,e,r,n){if(t[2]&&n){const o=t[2](n(r));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],r=Math.max(e.dirty.length,o.length);for(let n=0;n<r;n+=1)t[n]=e.dirty[n]|o[n];return t}return e.dirty|o}return e.dirty}(e,n,o,i);if(a){const o=h(e,r,n,s);t.p(o,a)}}function d(t,e){t.appendChild(e)}function p(t,e,r){t.insertBefore(e,r||null)}function g(t){t.parentNode.removeChild(t)}function y(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function b(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function _(){return v(" ")}function m(){return v("")}function w(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function I(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function k(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function E(t){return Array.from(t.childNodes)}function x(t,e,r,n){for(let o=0;o<t.length;o+=1){const n=t[o];if(n.nodeName===e){let e=0;const i=[];for(;e<n.attributes.length;){const t=n.attributes[e++];r[t.name]||i.push(t.name)}for(let t=0;t<i.length;t++)n.removeAttribute(i[t]);return t.splice(o,1)[0]}}return n?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):b(e)}function S(t,e){for(let r=0;r<t.length;r+=1){const n=t[r];if(3===n.nodeType)return n.data=""+e,t.splice(r,1)[0]}return v(e)}function A(t){return S(t," ")}function O(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e){t.value=null==e?"":e}function R(t,e){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e)return void(n.selected=!0)}}function C(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function U(t,e=document.body){return Array.from(e.querySelectorAll(t))}let T;function L(t){T=t}function B(){if(!T)throw new Error("Function called outside component initialization");return T}function N(t){B().$$.before_update.push(t)}function z(t){B().$$.on_mount.push(t)}function M(t){B().$$.after_update.push(t)}function D(t){B().$$.on_destroy.push(t)}function $(){const t=B();return(e,r)=>{const n=t.$$.callbacks[e];if(n){const o=function(t,e){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!1,e),r}(e,r);n.slice().forEach((e=>{e.call(t,o)}))}}}function V(t,e){B().$$.context.set(t,e)}const q=[],P=[],F=[],K=[],H=Promise.resolve();let Z=!1;function G(t){F.push(t)}let W=!1;const Y=new Set;function J(){if(!W){W=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];L(e),X(e.$$)}for(L(null),q.length=0;P.length;)P.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];Y.has(e)||(Y.add(e),e())}F.length=0}while(q.length);for(;K.length;)K.pop()();Z=!1,W=!1,Y.clear()}}function X(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(G)}}const Q=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function rt(){tt.r||o(tt.c),tt=tt.p}function nt(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function ot(t,e,r,n){if(t&&t.o){if(Q.has(t))return;Q.add(t),tt.c.push((()=>{Q.delete(t),n&&(r&&t.d(1),n())})),t.o(e)}}function it(t,e){const r={},n={},o={$$scope:1};let i=t.length;for(;i--;){const s=t[i],a=e[i];if(a){for(const t in s)t in a||(n[t]=1);for(const t in a)o[t]||(r[t]=a[t],o[t]=1);t[i]=a}else for(const t in s)o[t]=1}for(const s in n)s in r||(r[s]=void 0);return r}function st(t){return"object"==typeof t&&null!==t?t:{}}function at(t){t&&t.c()}function ut(t,e){t&&t.l(e)}function ct(t,e,n,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:l}=t.$$;a&&a.m(e,n),s||G((()=>{const e=u.map(r).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]})),l.forEach(G)}function lt(t,e){const r=t.$$;null!==r.fragment&&(o(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function ht(t,e){-1===t.$$.dirty[0]&&(q.push(t),Z||(Z=!0,H.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(e,r,i,s,a,u,c=[-1]){const l=T;L(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:r.context||[]),callbacks:n(),dirty:c,skip_bound:!1};let f=!1;if(h.ctx=i?i(e,r.props||{},((t,r,...n)=>{const o=n.length?n[0]:r;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),f&&ht(e,t)),r})):[],h.update(),f=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),r.target){if(r.hydrate){const t=E(r.target);h.fragment&&h.fragment.l(t),t.forEach(g)}else h.fragment&&h.fragment.c();r.intro&&nt(e.$$.fragment),ct(e,r.target,r.anchor,r.customElement),J()}L(l)}class dt{$destroy(){lt(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt=[];function gt(e,r=t){let n;const o=[];function i(t){if(s(e,t)&&(e=t,n)){const t=!pt.length;for(let r=0;r<o.length;r+=1){const t=o[r];t[1](),pt.push(t,e)}if(t){for(let t=0;t<pt.length;t+=2)pt[t][0](pt[t+1]);pt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,a=t){const u=[s,a];return o.push(u),1===o.length&&(n=r(i)||t),s(e),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(n(),n=null)}}}}var yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vt(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}var _t={exports:{}},mt={exports:{}},wt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(wt){var It=new Uint8Array(16);mt.exports=function(){return wt(It),It}}else{var kt=new Array(16);mt.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),kt[e]=t>>>((3&e)<<3)&255;return kt}}for(var Et=[],xt=0;xt<256;++xt)Et[xt]=(xt+256).toString(16).substr(1);var St=function(t,e){var r=e||0,n=Et;return[n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]]].join("")},At=mt.exports,Ot=St;const jt=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||At)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||Ot(o)};function Rt(){return jt().replace(/-/g,"")}let Ct=Rt;function Ut(){return Ct()}Ut.setFactory=t=>{Ct=t},Ut.reset=()=>{Ct=Rt};var Tt=Ut;var Lt={OPTIONS:Symbol("_options"),CACHE:Symbol("_cache"),STATE:Symbol("_state"),OBJECT_ID:Symbol("_objectId"),CONFLICTS:Symbol("_conflicts"),CHANGE:Symbol("_change"),ELEM_IDS:Symbol("_elemIds")};function Bt(t){return"object"==typeof t&&null!==t}var Nt={isObject:Bt,copyObject:function(t){if(!Bt(t))return{};let e={};for(let r of Object.keys(t))e[r]=t[r];return e},parseOpId:function(t){const e=/^(\d+)@(.*)$/.exec(t||"");if(!e)throw new RangeError(`Not a valid opId: ${t}`);return{counter:parseInt(e[1],10),actorId:e[2]}},equalBytes:function(t,e){if(!(t instanceof Uint8Array&&e instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}};const{OBJECT_ID:zt}=Lt,{isObject:Mt}=Nt;class Dt{constructor(t){if("string"==typeof t){return $t(void 0,[...t].map((t=>({value:t}))))}if(Array.isArray(t)){return $t(void 0,t.map((t=>({value:t}))))}if(void 0===t)return $t(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${t}`)}get length(){return this.elems.length}get(t){const e=this.elems[t].value;if(this.context&&Mt(e)){const r=e[zt],n=this.path.concat([{key:t,objectId:r}]);return this.context.instantiateObject(n,r)}return e}getElemId(t){return this.elems[t].elemId}[Symbol.iterator](){let t=this.elems,e=-1;return{next:()=>(e+=1,e<t.length?{done:!1,value:t[e].value}:{done:!0})}}toString(){let t="";for(const e of this.elems)"string"==typeof e.value&&(t+=e.value);return t}toSpans(){let t=[],e="";for(const r of this.elems)"string"==typeof r.value?e+=r.value:(e.length>0&&(t.push(e),e=""),t.push(r.value));return e.length>0&&t.push(e),t}toJSON(){return this.toString()}getWriteable(t,e){if(!this[zt])throw new RangeError("getWriteable() requires the objectId to be set");const r=$t(this[zt],this.elems);return r.context=t,r.path=e,r}set(t,e){if(this.context)this.context.setListIndex(this.path,t,e);else{if(this[zt])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems[t].value=e}return this}insertAt(t,...e){if(this.context)this.context.splice(this.path,t,0,e);else{if(this[zt])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,0,...e.map((t=>({value:t}))))}return this}deleteAt(t,e=1){if(this.context)this.context.splice(this.path,t,e,[]);else{if(this[zt])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,e)}return this}}for(let Hl of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])Dt.prototype[Hl]=function(...t){return[...this][Hl](...t)};function $t(t,e){const r=Object.create(Dt.prototype);return r[zt]=t,r.elems=e,r}var Vt={Text:Dt,instantiateText:$t};const{OBJECT_ID:qt,CONFLICTS:Pt}=Lt,{isObject:Ft,copyObject:Kt}=Nt;function Ht(t,e,r){for(let n of t)if(e[n]!==r[n]){if("number"==typeof e[n]&&"number"==typeof r[n])return e[n]-r[n];{const t=""+e[n],o=""+r[n];if(t===o)continue;return t<o?-1:1}}return 0}class Zt{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(t){return this.entries[t]}get ids(){return Object.keys(this.entries).filter((t=>{const e=this.entries[t];return Ft(e)&&e.id===t}))}get count(){return this.ids.length}get rows(){return this.ids.map((t=>this.byId(t)))}filter(t,e){return this.rows.filter(t,e)}find(t,e){return this.rows.find(t,e)}map(t,e){return this.rows.map(t,e)}sort(t){if("function"==typeof t)return this.rows.sort(t);if("string"==typeof t)return this.rows.sort(((e,r)=>Ht([t],e,r)));if(Array.isArray(t))return this.rows.sort(((e,r)=>Ht(t,e,r)));if(void 0===t)return this.rows.sort(((t,e)=>Ht(["id"],t,e)));throw new TypeError(`Unsupported sorting argument: ${t}`)}[Symbol.iterator](){let t=this.rows,e=-1;return{next:()=>(e+=1,e<t.length?{done:!1,value:t[e]}:{done:!0})}}_clone(){if(!this[qt])throw new RangeError("clone() requires the objectId to be set");return Wt(this[qt],Kt(this.entries),Kt(this.opIds))}_set(t,e,r){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");Ft(e)&&!Array.isArray(e)&&Object.defineProperty(e,"id",{value:t,enumerable:!0}),this.entries[t]=e,this.opIds[t]=r}remove(t){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[t],delete this.opIds[t]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(t,e){if(!this[qt])throw new RangeError("getWriteable() requires the objectId to be set");const r=Object.create(Gt.prototype);return r[qt]=this[qt],r.context=t,r.entries=this.entries,r.opIds=this.opIds,r.path=e,r}toJSON(){const t={};for(let e of this.ids)t[e]=this.byId(e);return t}}class Gt extends Zt{byId(t){if(Ft(this.entries[t])&&this.entries[t].id===t){const e=this.entries[t][qt],r=this.path.concat([{key:t,objectId:e}]);return this.context.instantiateObject(r,e,["id"])}}add(t){return this.context.addTableRow(this.path,t)}remove(t){if(!Ft(this.entries[t])||this.entries[t].id!==t)throw new RangeError(`There is no row with ID ${t} in this table`);this.context.deleteTableRow(this.path,t,this.opIds[t])}}function Wt(t,e,r){const n=Object.create(Zt.prototype);if(!t)throw new RangeError("instantiateTable requires an objectId to be given");return n[qt]=t,n[Pt]=Object.freeze({}),n.entries=e||{},n.opIds=r||{},n}var Yt={Table:Zt,instantiateTable:Wt};class Jt{constructor(t){this.value=t||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}}class Xt extends Jt{increment(t){return t="number"==typeof t?t:1,this.context.increment(this.path,this.key,t),this.value+=t,this.value}decrement(t){return this.increment("number"==typeof t?-t:-1)}}var Qt={Counter:Jt,getWriteableCounter:function(t,e,r,n,o){const i=Object.create(Xt.prototype);return i.value=t,i.context=e,i.path=r,i.objectId=n,i.key=o,i}};const{isObject:te,copyObject:ee,parseOpId:re}=Nt,{OBJECT_ID:ne,CONFLICTS:oe,ELEM_IDS:ie}=Lt,{instantiateText:se}=Vt,{instantiateTable:ae}=Yt,{Counter:ue}=Qt;function ce(t,e,r){if(t.objectId)return e&&e[ne]!==t.objectId&&(e=void 0),pe(t,e,r);if("timestamp"===t.datatype)return new Date(t.value);if("counter"===t.datatype)return new ue(t.value);if(void 0!==t.datatype)throw new TypeError(`Unknown datatype: ${t.datatype}`);return t.value}function le(t,e){const r=/^(\d+)@(.*)$/,n=r.test(t)?re(t):{counter:0,actorId:t},o=r.test(e)?re(e):{counter:0,actorId:e};return n.counter<o.counter?-1:n.counter>o.counter?1:n.actorId<o.actorId?-1:n.actorId>o.actorId?1:0}function he(t,e){const r=ee(t),n=ee(t?t[oe]:void 0);return Object.defineProperty(r,ne,{value:e}),Object.defineProperty(r,oe,{value:n}),r}function fe(t,e,r){const n=t.objectId;r[n]||(r[n]=he(e,n));const o=r[n];return function(t,e,r,n){if(t)for(let o of Object.keys(t)){const i={},s=Object.keys(t[o]).sort(le).reverse();for(let e of s){const s=t[o][e];r[o]&&r[o][e]?i[e]=ce(s,r[o][e],n):i[e]=ce(s,void 0,n)}0===s.length?(delete e[o],delete r[o]):(e[o]=i[s[0]],r[o]=i)}}(t.props,o,o[oe],r),o}function de(t,e,r){const n=t.objectId;r[n]||(r[n]=function(t,e){const r=t?t.slice():[],n=t&&t[oe]?t[oe].slice():[],o=t&&t[ie]?t[ie].slice():[];return Object.defineProperty(r,ne,{value:e}),Object.defineProperty(r,oe,{value:n}),Object.defineProperty(r,ie,{value:o}),r}(e,n));const o=r[n],i=o[oe],s=o[ie];for(let a=0;a<t.edits.length;a++){const e=t.edits[a];if("insert"===e.action||"update"===e.action){const n=i[e.index]&&i[e.index][e.opId];let u=ce(e.value,n,r),c={[e.opId]:u};for(;a<t.edits.length-1&&t.edits[a+1].index===e.index&&"update"===t.edits[a+1].action;){a++;const e=t.edits[a],n=i[e.index]&&i[e.index][e.opId];u=ce(e.value,n,r),c[e.opId]=u}"insert"===e.action?(o.splice(e.index,0,u),i.splice(e.index,0,c),s.splice(e.index,0,e.elemId)):(o[e.index]=u,i[e.index]=c)}else if("multi-insert"===e.action){const t=re(e.elemId),r=[],n=[],a=[];e.values.forEach(((e,o)=>{const i=`${t.counter+o}@${t.actorId}`;n.push(e),a.push({[i]:{value:e,type:"value"}}),r.push(i)})),o.splice(e.index,0,...n),i.splice(e.index,0,...a),s.splice(e.index,0,...r)}else"remove"===e.action&&(o.splice(e.index,e.count),i.splice(e.index,e.count),s.splice(e.index,e.count))}return o}function pe(t,e,r){if(te(e)&&(!t.props||0===Object.keys(t.props).length)&&(!t.edits||0===t.edits.length)&&!r[t.objectId])return e;if("map"===t.type)return fe(t,e,r);if("table"===t.type)return function(t,e,r){const n=t.objectId;r[n]||(r[n]=e?e._clone():ae(n));const o=r[n];for(let i of Object.keys(t.props||{})){const e=Object.keys(t.props[i]);if(0===e.length)o.remove(i);else{if(1!==e.length)throw new RangeError("Conflicts are not supported on properties of a table");{const n=t.props[i][e[0]];o._set(i,ce(n,o.byId(i),r),e[0])}}}return o}(t,e,r);if("list"===t.type)return de(t,e,r);if("text"===t.type)return function(t,e,r){const n=t.objectId;let o;o=r[n]?r[n].elems:e?e.elems.slice():[];for(const i of t.edits)if("insert"===i.action){const t=ce(i.value,void 0,r),e={elemId:i.elemId,pred:[i.opId],value:t};o.splice(i.index,0,e)}else if("multi-insert"===i.action){const t=re(i.elemId),e=i.values.map(((e,r)=>{const n=`${t.counter+r}@${t.actorId}`;return{elemId:n,pred:[n],value:e}}));o.splice(i.index,0,...e)}else if("update"===i.action){const t=o[i.index].elemId,e=ce(i.value,o[i.index].value,r);o[i.index]={elemId:t,pred:[i.opId],value:e}}else"remove"===i.action&&o.splice(i.index,i.count);return r[n]=se(n,o),r[n]}(t,e,r);throw new TypeError(`Unknown object type: ${t.type}`)}var ge={interpretPatch:pe,cloneRootObject:function(t){if("_root"!==t[ne])throw new RangeError(`Not the root object: ${t[ne]}`);return he(t,"_root")}};const{OBJECT_ID:ye,CHANGE:be,STATE:ve}=Lt,{Text:_e}=Vt,{Table:me}=Yt;function we(t){if("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),"number"!=typeof t)throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(t));if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}const Ie={get(t,e){const{context:r,objectId:n,path:o}=t;return e===ye?n:e===be?r:e===ve?{actorId:r.actorId}:r.getObjectField(o,n,e)},set(t,e,r){const{context:n,path:o,readonly:i}=t;if(Array.isArray(i)&&i.indexOf(e)>=0)throw new RangeError(`Object property "${e}" cannot be modified`);return n.setMapKey(o,e,r),!0},deleteProperty(t,e){const{context:r,path:n,readonly:o}=t;if(Array.isArray(o)&&o.indexOf(e)>=0)throw new RangeError(`Object property "${e}" cannot be modified`);return r.deleteMapKey(n,e),!0},has(t,e){const{context:r,objectId:n}=t;return[ye,be].includes(e)||e in r.getObject(n)},getOwnPropertyDescriptor(t,e){const{context:r,objectId:n}=t;if(e in r.getObject(n))return{configurable:!0,enumerable:!0,value:r.getObjectField(n,e)}},ownKeys(t){const{context:e,objectId:r}=t;return Object.keys(e.getObject(r))}},ke={get(t,e){const[r,n,o]=t;return e===Symbol.iterator?r.getObject(n)[Symbol.iterator]:e===ye?n:e===be?r:"length"===e?r.getObject(n).length:"string"==typeof e&&/^[0-9]+$/.test(e)?r.getObjectField(o,n,we(e)):function(t,e,r){const n={deleteAt(e,n){return t.splice(r,we(e),n||1,[]),this},fill(n,o,i){let s=t.getObject(e);for(let e=we(o||0);e<we(i||s.length);e++)t.setListIndex(r,e,n);return this},indexOf(r,n=0){const o=r[ye];if(o){const r=t.getObject(e);for(let t=n;t<r.length;t++)if(r[t][ye]===o)return t;return-1}return t.getObject(e).indexOf(r,n)},insertAt(e,...n){return t.splice(r,we(e),0,n),this},pop(){let n=t.getObject(e);if(0==n.length)return;const o=t.getObjectField(r,e,n.length-1);return t.splice(r,n.length-1,1,[]),o},push(...n){let o=t.getObject(e);return t.splice(r,o.length,0,n),t.getObject(e).length},shift(){if(0==t.getObject(e).length)return;const n=t.getObjectField(r,e,0);return t.splice(r,0,1,[]),n},splice(n,o,...i){let s=t.getObject(e);n=we(n),(void 0===o||o>s.length-n)&&(o=s.length-n);const a=[];for(let u=0;u<o;u++)a.push(t.getObjectField(r,e,n+u));return t.splice(r,n,o,i),a},unshift:(...n)=>(t.splice(r,0,0,n),t.getObject(e).length)};for(let o of["entries","keys","values"]){let r=t.getObject(e);n[o]=()=>r[o]()}for(let o of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])n[o]=(...n)=>t.getObject(e).map(((n,o)=>t.getObjectField(r,e,o)))[o](...n);return n}(r,n,o)[e]},set(t,e,r){const[n,,o]=t;return n.setListIndex(o,we(e),r),!0},deleteProperty(t,e){const[r,,n]=t;return r.splice(n,we(e),1,[]),!0},has(t,e){const[r,n]=t;return"string"==typeof e&&/^[0-9]+$/.test(e)?we(e)<r.getObject(n).length:["length",ye,be].includes(e)},getOwnPropertyDescriptor(t,e){const[r,n]=t,o=r.getObject(n);if("length"===e)return{writable:!0,value:o.length};if(e===ye)return{configurable:!1,enumerable:!1,value:n};if("string"==typeof e&&/^[0-9]+$/.test(e)){const t=we(e);if(t<o.length)return{configurable:!0,enumerable:!0,value:r.getObjectField(n,t)}}},ownKeys(t){const[e,r]=t,n=e.getObject(r);let o=["length"];for(let i of Object.keys(n))o.push(i);return o}};function Ee(t,e,r,n){return new Proxy({context:t,objectId:e,path:r,readonly:n},Ie)}function xe(t,e,r){const n=this.getObject(e);return Array.isArray(n)?function(t,e,r){return new Proxy([t,e,r],ke)}(this,e,t):n instanceof _e||n instanceof me?n.getWriteable(this,t):Ee(this,e,t,r)}var Se={rootObjectProxy:function(t){return t.instantiateObject=xe,Ee(t,"_root",[])}};const{CACHE:Ae,OBJECT_ID:Oe,CONFLICTS:je,ELEM_IDS:Re,STATE:Ce}=Lt,{interpretPatch:Ue}=ge,{Text:Te}=Vt,{Table:Le}=Yt,{Counter:Be,getWriteableCounter:Ne}=Qt,{isObject:ze,parseOpId:Me}=Nt,De=Tt;function $e(t,e){return t instanceof Le?[t.opIds[e]]:t instanceof Te?t.elems[e].pred:t[je]&&t[je][e]?Object.keys(t[je][e]):[]}function Ve(t,e,r=!1){if(r){if(0===e)return"_head";e-=1}if(t[Re])return t[Re][e];if(t.getElemId)return t.getElemId(e);throw new RangeError(`Cannot find elemId at list index ${e}`)}var qe={Context:class{constructor(t,e,r){this.actorId=e,this.maxOp=t[Ce].maxOp,this.cache=t[Ae],this.updated={},this.ops=[],this.applyPatch=r||Ue}addOp(t){this.ops.push(t)}nextOpId(){let t=this.maxOp+1;for(const e of this.ops)"set"===e.action&&e.values?t+=e.values.length:"del"===e.action&&e.multiOp?t+=e.multiOp:t+=1;return`${t}@${this.actorId}`}getValueDescription(t){if(!["object","boolean","number","string"].includes(typeof t))throw new TypeError("Unsupported type of value: "+typeof t);if(ze(t)){if(t instanceof Date)return{type:"value",value:t.getTime(),datatype:"timestamp"};if(t instanceof Be)return{type:"value",value:t.value,datatype:"counter"};{const e=t[Oe],r=this.getObjectType(e);if(!e)throw new RangeError(`Object ${JSON.stringify(t)} has no objectId`);return"list"===r||"text"===r?{objectId:e,type:r,edits:[]}:{objectId:e,type:r,props:{}}}}return{type:"value",value:t}}getValuesDescriptions(t,e,r){if(e instanceof Le){const t=e.byId(r);return t?{[r]:this.getValueDescription(t)}:{}}if(e instanceof Te){const t=e.get(r),n=e.getElemId(r);return t?{[n]:this.getValueDescription(t)}:{}}{const n=e[je][r],o={};if(!n)throw new RangeError(`No children at key ${r} of path ${JSON.stringify(t)}`);for(let t of Object.keys(n))o[t]=this.getValueDescription(n[t]);return o}}getPropertyValue(t,e,r){return t instanceof Le?t.byId(e):t instanceof Te?t.get(e):t[je][e][r]}getSubpatch(t,e){if(0==e.length)return t;let r=t,n=this.getObject("_root");for(let o of e){let t=this.getValuesDescriptions(e,n,o.key);if(r.props)r.props[o.key]||(r.props[o.key]=t);else if(r.edits)for(const e of Object.keys(t))r.edits.push({action:"update",index:o.key,opId:e,value:t[e]});let i=null;for(let e of Object.keys(t))t[e].objectId===o.objectId&&(i=e);if(!i)throw new RangeError(`Cannot find path object with objectId ${o.objectId}`);r=t[i],n=this.getPropertyValue(n,o.key,i)}return r}getObject(t){const e=this.updated[t]||this.cache[t];if(!e)throw new RangeError(`Target object does not exist: ${t}`);return e}getObjectType(t){if("_root"===t)return"map";const e=this.getObject(t);return e instanceof Te?"text":e instanceof Le?"table":Array.isArray(e)?"list":"map"}getObjectField(t,e,r){if(!["string","number"].includes(typeof r))return;const n=this.getObject(e);if(n[r]instanceof Be)return Ne(n[r].value,this,t,e,r);if(ze(n[r])){const e=n[r][Oe],o=t.concat([{key:r,objectId:e}]);return this.instantiateObject(o,e)}return n[r]}createNestedObjects(t,e,r,n,o,i){if(r[Oe])throw new RangeError("Cannot create a reference to an existing document object");const s=this.nextOpId();if(r instanceof Te){this.addOp(i?{action:"makeText",obj:t,elemId:i,insert:n,pred:o}:{action:"makeText",obj:t,key:e,insert:n,pred:o});const a={objectId:s,type:"text",edits:[]};return this.insertListItems(a,0,[...r],!0),a}if(r instanceof Le){if(r.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(i?{action:"makeTable",obj:t,elemId:i,insert:n,pred:o}:{action:"makeTable",obj:t,key:e,insert:n,pred:o}),{objectId:s,type:"table",props:{}}}if(Array.isArray(r)){this.addOp(i?{action:"makeList",obj:t,elemId:i,insert:n,pred:o}:{action:"makeList",obj:t,key:e,insert:n,pred:o});const a={objectId:s,type:"list",edits:[]};return this.insertListItems(a,0,r,!0),a}{this.addOp(i?{action:"makeMap",obj:t,elemId:i,insert:n,pred:o}:{action:"makeMap",obj:t,key:e,insert:n,pred:o});let a={};for(let t of Object.keys(r).sort()){const e=this.nextOpId(),n=this.setValue(s,t,r[t],!1,[]);a[t]={[e]:n}}return{objectId:s,type:"map",props:a}}}setValue(t,e,r,n,o,i){if(!t)throw new RangeError("setValue needs an objectId");if(""===e)throw new RangeError("The key of a map entry must not be an empty string");if(!ze(r)||r instanceof Date||r instanceof Be){const s=this.getValueDescription(r),a={action:"set",obj:t,insert:n,value:s.value,pred:o};return i?a.elemId=i:a.key=e,s.datatype&&(a.datatype=s.datatype),this.addOp(a),s}return this.createNestedObjects(t,e,r,n,o,i)}applyAtPath(t,e){let r={objectId:"_root",type:"map",props:{}};e(this.getSubpatch(r,t)),this.applyPatch(r,this.cache._root,this.updated)}setMapKey(t,e,r){if("string"!=typeof e)throw new RangeError("The key of a map entry must be a string, not "+typeof e);const n=0===t.length?"_root":t[t.length-1].objectId,o=this.getObject(n);if(o[e]instanceof Be)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(o[e]!==r||Object.keys(o[je][e]||{}).length>1||void 0===r)&&this.applyAtPath(t,(t=>{const i=$e(o,e),s=this.nextOpId(),a=this.setValue(n,e,r,!1,i);t.props[e]={[s]:a}}))}deleteMapKey(t,e){const r=0===t.length?"_root":t[t.length-1].objectId,n=this.getObject(r);if(void 0!==n[e]){const o=$e(n,e);this.addOp({action:"del",obj:r,key:e,insert:!1,pred:o}),this.applyAtPath(t,(t=>{t.props[e]={}}))}}insertListItems(t,e,r,n){const o=n?[]:this.getObject(t.objectId);if(e<0||e>o.length)throw new RangeError(`List index ${e} is out of bounds for list of length ${o.length}`);let i=Ve(o,e,!0);if(r.every((t=>"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t))&&r.length>1){let n=this.nextOpId();this.addOp({action:"set",obj:t.objectId,elemId:i,insert:!0,values:r,pred:[]}),t.edits.push({action:"multi-insert",elemId:n,index:e,values:r})}else for(let s=0;s<r.length;s++){let n=this.nextOpId();const o=this.setValue(t.objectId,e+s,r[s],!0,[],i);i=n,t.edits.push({action:"insert",index:e+s,elemId:i,opId:i,value:o})}}setListIndex(t,e,r){const n=0===t.length?"_root":t[t.length-1].objectId,o=this.getObject(n);if(e===o.length)return this.splice(t,e,0,[r]);if(e<0||e>o.length)throw new RangeError(`List index ${e} is out of bounds for list of length ${o.length}`);if(o[e]instanceof Be)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(o[e]!==r||Object.keys(o[je][e]||{}).length>1||void 0===r)&&this.applyAtPath(t,(t=>{const i=$e(o,e),s=this.nextOpId(),a=this.setValue(n,e,r,!1,i,Ve(o,e));t.edits.push({action:"update",index:e,opId:s,value:a})}))}splice(t,e,r,n){const o=0===t.length?"_root":t[t.length-1].objectId;let i=this.getObject(o);if(e<0||r<0||e>i.length-r)throw new RangeError(`${r} deletions starting at index ${e} are out of bounds for list of length ${i.length}`);if(0===r&&0===n.length)return;let s={objectId:"_root",type:"map",props:{}},a=this.getSubpatch(s,t);if(r>0){let n,s,u;for(let a=0;a<r;a++){if(this.getObjectField(t,o,e+a)instanceof Be)throw new TypeError("Unsupported operation: deleting a counter from a list");const r=Ve(i,e+a),c=Me(r),l=$e(i,e+a),h=1===l.length?Me(l[0]):void 0;n&&s&&u&&h&&s.actorId===c.actorId&&s.counter+1===c.counter&&u.actorId===h.actorId&&u.counter+1===h.counter?n.multiOp=(n.multiOp||1)+1:(n&&this.addOp(n),n={action:"del",obj:o,elemId:r,insert:!1,pred:l}),s=c,u=h}this.addOp(n),a.edits.push({action:"remove",index:e,count:r})}n.length>0&&this.insertListItems(a,e,n,!1),this.applyPatch(s,this.cache._root,this.updated)}addTableRow(t,e){if(!ze(e)||Array.isArray(e))throw new TypeError("A table row must be an object");if(e[Oe])throw new TypeError("Cannot reuse an existing object as table row");if(e.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');const r=De(),n=this.setValue(t[t.length-1].objectId,r,e,!1,[]);return this.applyAtPath(t,(t=>{t.props[r]={[n.objectId]:n}})),r}deleteTableRow(t,e,r){const n=t[t.length-1].objectId;this.getObject(n).byId(e)&&(this.addOp({action:"del",obj:n,key:e,insert:!1,pred:[r]}),this.applyAtPath(t,(t=>{t.props[e]={}})))}increment(t,e,r){const n=0===t.length?"_root":t[t.length-1].objectId,o=this.getObject(n);if(!(o[e]instanceof Be))throw new TypeError("Only counter values can be incremented");const i=this.getObjectType(n),s=o[e].value+r,a=this.nextOpId(),u=$e(o,e);if("list"===i||"text"===i){const t=Ve(o,e,!1);this.addOp({action:"inc",obj:n,elemId:t,value:r,insert:!1,pred:u})}else this.addOp({action:"inc",obj:n,key:e,value:r,insert:!1,pred:u});this.applyAtPath(t,(t=>{"list"===i||"text"===i?t.edits.push({action:"update",index:e,opId:a,value:{value:s,datatype:"counter"}}):t.props[e]={[a]:{value:s,datatype:"counter"}}}))}}};const{OBJECT_ID:Pe,CONFLICTS:Fe}=Lt;var Ke={Observable:class{constructor(){this.observers={}}patchCallback(t,e,r,n,o){this._objectUpdate(t.diffs,e,r,n,o)}_objectUpdate(t,e,r,n,o){if(t.objectId){if(this.observers[t.objectId])for(let i of this.observers[t.objectId])i(t,e,r,n,o);if("map"===t.type&&t.props)for(const i of Object.keys(t.props))for(const s of Object.keys(t.props[i]))this._objectUpdate(t.props[i][s],e&&e[Fe]&&e[Fe][i]&&e[Fe][i][s],r&&r[Fe]&&r[Fe][i]&&r[Fe][i][s],n,o);else if("table"===t.type&&t.props)for(const i of Object.keys(t.props))for(const s of Object.keys(t.props[i]))this._objectUpdate(t.props[i][s],e&&e.byId(i),r&&r.byId(i),n,o);else if("list"===t.type&&t.edits){let i=0;for(const s of t.edits)"insert"===s.action?(i-=1,this._objectUpdate(s.value,void 0,r&&r[Fe]&&r[Fe][s.index]&&r[Fe][s.index][s.elemId],n,o)):"multi-insert"===s.action?i-=s.values.length:"update"===s.action?this._objectUpdate(s.value,e&&e[Fe]&&e[Fe][s.index+i]&&e[Fe][s.index+i][s.opId],r&&r[Fe]&&r[Fe][s.index]&&r[Fe][s.index][s.opId],n,o):"remove"===s.action&&(i+=s.count)}else if("text"===t.type&&t.edits){let i=0;for(const s of t.edits)"insert"===s.action?(i-=1,this._objectUpdate(s.value,void 0,r&&r.get(s.index),n,o)):"multi-insert"===s.action?i-=s.values.length:"update"===s.action?this._objectUpdate(s.value,e&&e.get(s.index+i),r&&r.get(s.index),n,o):"remove"===s.action&&(i+=s.count)}}}observe(t,e){const r=t[Pe];if(!r)throw new TypeError("The observed object must be part of an Automerge document");this.observers[r]||(this.observers[r]=[]),this.observers[r].push(e)}}};const{OPTIONS:He,CACHE:Ze,STATE:Ge,OBJECT_ID:We,CONFLICTS:Ye,CHANGE:Je,ELEM_IDS:Xe}=Lt,{isObject:Qe,copyObject:tr}=Nt,er=Tt,{interpretPatch:rr,cloneRootObject:nr}=ge,{rootObjectProxy:or}=Se,{Context:ir}=qe,{Text:sr}=Vt,{Table:ar}=Yt,{Counter:ur}=Qt,{Observable:cr}=Ke;function lr(t){if("string"!=typeof t)throw new TypeError("Unsupported type of actorId: "+typeof t);if(!/^[0-9a-f]+$/.test(t))throw new RangeError("actorId must consist only of lowercase hex digits");if(t.length%2!=0)throw new RangeError("actorId must consist of an even number of digits")}function hr(t,e,r){let n=e._root;if(n||(n=nr(t[Ze]._root),e._root=n),Object.defineProperty(n,He,{value:t[He]}),Object.defineProperty(n,Ze,{value:e}),Object.defineProperty(n,Ge,{value:r}),t[He].freeze)for(let o of Object.keys(e))e[o]instanceof ar?e[o]._freeze():e[o]instanceof sr?(Object.freeze(e[o].elems),Object.freeze(e[o])):(Object.freeze(e[o]),Object.freeze(e[o][Ye]));for(let o of Object.keys(t[Ze]))e[o]||(e[o]=t[Ze][o]);return t[He].freeze&&Object.freeze(e),n}function fr(t,e,r){const n=yr(t);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");const o=tr(t[Ge]);o.seq+=1;const i={actor:n,seq:o.seq,startOp:o.maxOp+1,deps:o.deps,time:r&&"number"==typeof r.time?r.time:Math.round((new Date).getTime()/1e3),message:r&&"string"==typeof r.message?r.message:"",ops:e.ops};if(t[He].backend){const[e,n,s]=t[He].backend.applyLocalChange(o.backendState,i);o.backendState=e,o.lastLocalChange=s;const a=dr(t,n,o,!0),u=r&&r.patchCallback||t[He].patchCallback;return u&&u(n,t,a,!0,[s]),[a,i]}{const r={actor:n,seq:i.seq,before:t};return o.requests=o.requests.concat([r]),o.maxOp=o.maxOp+function(t){let e=0;for(const r of t)"set"===r.action&&r.values?e+=r.values.length:e+=1;return e}(i.ops),o.deps=[],[hr(t,e?e.updated:{},o),i]}}function dr(t,e,r,n){const o=yr(t),i={};if(rr(e.diffs,t,i),n){if(!e.clock)throw new RangeError("patch is missing clock field");e.clock[o]&&e.clock[o]>r.seq&&(r.seq=e.clock[o]),r.clock=e.clock,r.deps=e.deps,r.maxOp=Math.max(r.maxOp,e.maxOp)}return hr(t,i,r)}function pr(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!Qe(t))throw new TypeError(`Unsupported value for init() options: ${t}`);if(t.deferActorId||(void 0===t.actorId&&(t.actorId=er()),lr(t.actorId)),t.observable){const e=t.patchCallback,r=t.observable;t.patchCallback=(t,n,o,i,s)=>{e&&e(t,n,o,i,s),r.patchCallback(t,n,o,i,s)}}const e={},r={_root:e},n={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return t.backend&&(n.backendState=t.backend.init(),n.lastLocalChange=null),Object.defineProperty(e,We,{value:"_root"}),Object.defineProperty(e,He,{value:Object.freeze(t)}),Object.defineProperty(e,Ye,{value:Object.freeze({})}),Object.defineProperty(e,Ze,{value:Object.freeze(r)}),Object.defineProperty(e,Ge,{value:Object.freeze(n)}),Object.freeze(e)}function gr(t,e,r){if("_root"!==t[We])throw new TypeError("The first argument to Automerge.change must be the document root");if(t[Je])throw new TypeError("Calls to Automerge.change cannot be nested");if("function"==typeof e&&void 0===r&&([e,r]=[r,e]),"string"==typeof e&&(e={message:e}),void 0!==e&&!Qe(e))throw new TypeError("Unsupported type of options");const n=yr(t);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");const o=new ir(t,n);return r(or(o)),0===Object.keys(o.updated).length?[t,null]:fr(t,o,e)}function yr(t){return t[Ge].actorId||t[He].actorId}var br={init:pr,from:function(t,e){return gr(pr(e),"Initialization",(e=>Object.assign(e,t)))},change:gr,emptyChange:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!Qe(e))throw new TypeError("Unsupported type of options");const r=yr(t);if(!r)throw new Error("Actor ID must be initialized with setActorId() before making a change");return fr(t,new ir(t,r),e)},applyPatch:function(t,e,r){const n=tr(t[Ge]);if(t[He].backend){if(!r)throw new RangeError("applyPatch must be called with the updated backend state");return n.backendState=r,dr(t,e,n,!0)}let o;if(n.requests.length>0)if(o=n.requests[0].before,e.actor===yr(t)){if(n.requests[0].seq!==e.seq)throw new RangeError(`Mismatched sequence number: patch ${e.seq} does not match next request ${n.requests[0].seq}`);n.requests=n.requests.slice(1)}else n.requests=n.requests.slice();else o=t,n.requests=[];let i=dr(o,e,n,!0);return 0===n.requests.length?i:(n.requests[0]=tr(n.requests[0]),n.requests[0].before=i,hr(t,{},n))},getObjectId:function(t){return t[We]},getObjectById:function(t,e){if(t[Je])throw new TypeError("Cannot use getObjectById in a change callback");return t[Ze][e]},getActorId:yr,setActorId:function(t,e){return lr(e),hr(t,{},Object.assign({},t[Ge],{actorId:e}))},getConflicts:function(t,e){if(t[Ye]&&t[Ye][e]&&Object.keys(t[Ye][e]).length>1)return t[Ye][e]},getLastLocalChange:function(t){return t[Ge]&&t[Ge].lastLocalChange?t[Ge].lastLocalChange:null},getBackendState:function(t){return t[Ge].backendState},getElementIds:function(t){return t instanceof sr?t.elems.map((t=>t.elemId)):t[Xe]},Text:sr,Table:ar,Counter:ur,Observable:cr},vr={},_r={},mr={},wr={};function Ir(t){let e=t.length;for(;--e>=0;)t[e]=0}const kr=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Er=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Sr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ar=new Array(576);Ir(Ar);const Or=new Array(60);Ir(Or);const jr=new Array(512);Ir(jr);const Rr=new Array(256);Ir(Rr);const Cr=new Array(29);Ir(Cr);const Ur=new Array(30);function Tr(t,e,r,n,o){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=t&&t.length}let Lr,Br,Nr;function zr(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}Ir(Ur);const Mr=t=>t<256?jr[t]:jr[256+(t>>>7)],Dr=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},$r=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,Dr(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},Vr=(t,e,r)=>{$r(t,r[2*e],r[2*e+1])},qr=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},Pr=(t,e,r)=>{const n=new Array(16);let o,i,s=0;for(o=1;o<=15;o++)n[o]=s=s+r[o-1]<<1;for(i=0;i<=e;i++){let e=t[2*i+1];0!==e&&(t[2*i]=qr(n[e]++,e))}},Fr=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},Kr=t=>{t.bi_valid>8?Dr(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Hr=(t,e,r,n)=>{const o=2*e,i=2*r;return t[o]<t[i]||t[o]===t[i]&&n[e]<=n[r]},Zr=(t,e,r)=>{const n=t.heap[r];let o=r<<1;for(;o<=t.heap_len&&(o<t.heap_len&&Hr(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!Hr(e,n,t.heap[o],t.depth));)t.heap[r]=t.heap[o],r=o,o<<=1;t.heap[r]=n},Gr=(t,e,r)=>{let n,o,i,s,a=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===n?Vr(t,o,e):(i=Rr[o],Vr(t,i+256+1,e),s=kr[i],0!==s&&(o-=Cr[i],$r(t,o,s)),n--,i=Mr(n),Vr(t,i,r),s=Er[i],0!==s&&(n-=Ur[i],$r(t,n,s)))}while(a<t.last_lit);Vr(t,256,e)},Wr=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,o=e.stat_desc.has_stree,i=e.stat_desc.elems;let s,a,u,c=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<i;s++)0!==r[2*s]?(t.heap[++t.heap_len]=c=s,t.depth[s]=0):r[2*s+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[2*u]=1,t.depth[u]=0,t.opt_len--,o&&(t.static_len-=n[2*u+1]);for(e.max_code=c,s=t.heap_len>>1;s>=1;s--)Zr(t,r,s);u=i;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Zr(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,r[2*u]=r[2*s]+r[2*a],t.depth[u]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,r[2*s+1]=r[2*a+1]=u,t.heap[1]=u++,Zr(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,o=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length;let c,l,h,f,d,p,g=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(r[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)l=t.heap[c],f=r[2*r[2*l+1]+1]+1,f>u&&(f=u,g++),r[2*l+1]=f,l>n||(t.bl_count[f]++,d=0,l>=a&&(d=s[l-a]),p=r[2*l],t.opt_len+=p*(f+d),i&&(t.static_len+=p*(o[2*l+1]+d)));if(0!==g){do{for(f=u-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[u]--,g-=2}while(g>0);for(f=u;0!==f;f--)for(l=t.bl_count[f];0!==l;)h=t.heap[--c],h>n||(r[2*h+1]!==f&&(t.opt_len+=(f-r[2*h+1])*r[2*h],r[2*h+1]=f),l--)}})(t,e),Pr(r,c,t.bl_count)},Yr=(t,e,r)=>{let n,o,i=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=e[2*(n+1)+1],++a<u&&o===s||(a<c?t.bl_tree[2*o]+=a:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4))},Jr=(t,e,r)=>{let n,o,i=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(o=s,s=e[2*(n+1)+1],!(++a<u&&o===s)){if(a<c)do{Vr(t,o,t.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(Vr(t,o,t.bl_tree),a--),Vr(t,16,t.bl_tree),$r(t,a-3,2)):a<=10?(Vr(t,17,t.bl_tree),$r(t,a-3,3)):(Vr(t,18,t.bl_tree),$r(t,a-11,7));a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4)}};let Xr=!1;const Qr=(t,e,r,n)=>{$r(t,0+(n?1:0),3),((t,e,r,n)=>{Kr(t),n&&(Dr(t,r),Dr(t,~r)),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r,!0)};wr._tr_init=t=>{Xr||((()=>{let t,e,r,n,o;const i=new Array(16);for(r=0,n=0;n<28;n++)for(Cr[n]=r,t=0;t<1<<kr[n];t++)Rr[r++]=n;for(Rr[r-1]=n,o=0,n=0;n<16;n++)for(Ur[n]=o,t=0;t<1<<Er[n];t++)jr[o++]=n;for(o>>=7;n<30;n++)for(Ur[n]=o<<7,t=0;t<1<<Er[n]-7;t++)jr[256+o++]=n;for(e=0;e<=15;e++)i[e]=0;for(t=0;t<=143;)Ar[2*t+1]=8,t++,i[8]++;for(;t<=255;)Ar[2*t+1]=9,t++,i[9]++;for(;t<=279;)Ar[2*t+1]=7,t++,i[7]++;for(;t<=287;)Ar[2*t+1]=8,t++,i[8]++;for(Pr(Ar,287,i),t=0;t<30;t++)Or[2*t+1]=5,Or[2*t]=qr(t,5);Lr=new Tr(Ar,kr,257,286,15),Br=new Tr(Or,Er,0,30,15),Nr=new Tr(new Array(0),xr,0,19,7)})(),Xr=!0),t.l_desc=new zr(t.dyn_ltree,Lr),t.d_desc=new zr(t.dyn_dtree,Br),t.bl_desc=new zr(t.bl_tree,Nr),t.bi_buf=0,t.bi_valid=0,Fr(t)},wr._tr_stored_block=Qr,wr._tr_flush_block=(t,e,r,n)=>{let o,i,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Wr(t,t.l_desc),Wr(t,t.d_desc),s=(t=>{let e;for(Yr(t,t.dyn_ltree,t.l_desc.max_code),Yr(t,t.dyn_dtree,t.d_desc.max_code),Wr(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Sr[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=o&&(o=i)):o=i=r+5,r+4<=o&&-1!==e?Qr(t,e,r,n):4===t.strategy||i===o?($r(t,2+(n?1:0),3),Gr(t,Ar,Or)):($r(t,4+(n?1:0),3),((t,e,r,n)=>{let o;for($r(t,e-257,5),$r(t,r-1,5),$r(t,n-4,4),o=0;o<n;o++)$r(t,t.bl_tree[2*Sr[o]+1],3);Jr(t,t.dyn_ltree,e-1),Jr(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Gr(t,t.dyn_ltree,t.dyn_dtree)),Fr(t),n&&Kr(t)},wr._tr_tally=(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(Rr[r]+256+1)]++,t.dyn_dtree[2*Mr(e)]++),t.last_lit===t.lit_bufsize-1),wr._tr_align=t=>{$r(t,2,3),Vr(t,256,Ar),(t=>{16===t.bi_valid?(Dr(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)};var tn=(t,e,r,n)=>{let o=65535&t|0,i=t>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{o=o+e[n++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16|0};const en=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var rn=(t,e,r,n)=>{const o=en,i=n+r;t^=-1;for(let s=n;s<i;s++)t=t>>>8^o[255&(t^e[s])];return-1^t},nn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},on={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:sn,_tr_stored_block:an,_tr_flush_block:un,_tr_tally:cn,_tr_align:ln}=wr,hn=tn,fn=rn,dn=nn,{Z_NO_FLUSH:pn,Z_PARTIAL_FLUSH:gn,Z_FULL_FLUSH:yn,Z_FINISH:bn,Z_BLOCK:vn,Z_OK:_n,Z_STREAM_END:mn,Z_STREAM_ERROR:wn,Z_DATA_ERROR:In,Z_BUF_ERROR:kn,Z_DEFAULT_COMPRESSION:En,Z_FILTERED:xn,Z_HUFFMAN_ONLY:Sn,Z_RLE:An,Z_FIXED:On,Z_DEFAULT_STRATEGY:jn,Z_UNKNOWN:Rn,Z_DEFLATED:Cn}=on,Un=(t,e)=>(t.msg=dn[e],e),Tn=t=>(t<<1)-(t>4?9:0),Ln=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let Bn=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Nn=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},zn=(t,e)=>{un(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Nn(t.strm)},Mn=(t,e)=>{t.pending_buf[t.pending++]=e},Dn=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},$n=(t,e,r,n)=>{let o=t.avail_in;return o>n&&(o=n),0===o?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),r),1===t.state.wrap?t.adler=hn(t.adler,e,o,r):2===t.state.wrap&&(t.adler=fn(t.adler,e,o,r)),t.next_in+=o,t.total_in+=o,o)},Vn=(t,e)=>{let r,n,o=t.max_chain_length,i=t.strstart,s=t.prev_length,a=t.nice_match;const u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,l=t.w_mask,h=t.prev,f=t.strstart+258;let d=c[i+s-1],p=c[i+s];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(r=e,c[r+s]===p&&c[r+s-1]===d&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(n=258-(f-i),i=f-258,n>s){if(t.match_start=e,s=n,n>=a)break;d=c[i+s-1],p=c[i+s]}}}while((e=h[e&l])>u&&0!=--o);return s<=t.lookahead?s:t.lookahead},qn=t=>{const e=t.w_size;let r,n,o,i,s;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do{o=t.head[--r],t.head[r]=o>=e?o-e:0}while(--n);n=e,r=n;do{o=t.prev[--r],t.prev[r]=o>=e?o-e:0}while(--n);i+=e}if(0===t.strm.avail_in)break;if(n=$n(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Bn(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Bn(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},Pn=(t,e)=>{let r,n;for(;;){if(t.lookahead<262){if(qn(t),t.lookahead<262&&e===pn)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=Bn(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=Vn(t,r)),t.match_length>=3)if(n=cn(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Bn(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Bn(t,t.ins_h,t.window[t.strstart+1]);else n=cn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===bn?(zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zn(t,!1),0===t.strm.avail_out)?1:2},Fn=(t,e)=>{let r,n,o;for(;;){if(t.lookahead<262){if(qn(t),t.lookahead<262&&e===pn)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=Bn(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=Vn(t,r),t.match_length<=5&&(t.strategy===xn||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-3,n=cn(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=Bn(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zn(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=cn(t,0,t.window[t.strstart-1]),n&&zn(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=cn(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===bn?(zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zn(t,!1),0===t.strm.avail_out)?1:2};function Kn(t,e,r,n,o){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=o}const Hn=[new Kn(0,0,0,0,((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(qn(t),0===t.lookahead&&e===pn)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zn(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===bn?(zn(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zn(t,!1),t.strm.avail_out),1)})),new Kn(4,4,8,4,Pn),new Kn(4,5,16,8,Pn),new Kn(4,6,32,32,Pn),new Kn(4,4,16,16,Fn),new Kn(8,16,32,32,Fn),new Kn(8,16,128,128,Fn),new Kn(8,32,128,256,Fn),new Kn(32,128,258,1024,Fn),new Kn(32,258,258,4096,Fn)];function Zn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ln(this.dyn_ltree),Ln(this.dyn_dtree),Ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ln(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Gn=t=>{if(!t||!t.state)return Un(t,wn);t.total_in=t.total_out=0,t.data_type=Rn;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=pn,sn(e),_n},Wn=t=>{const e=Gn(t);var r;return e===_n&&((r=t.state).window_size=2*r.w_size,Ln(r.head),r.max_lazy_match=Hn[r.level].max_lazy,r.good_match=Hn[r.level].good_length,r.nice_match=Hn[r.level].nice_length,r.max_chain_length=Hn[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Yn=(t,e,r,n,o,i)=>{if(!t)return wn;let s=1;if(e===En&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||r!==Cn||n<8||n>15||e<0||e>9||i<0||i>On)return Un(t,wn);8===n&&(n=9);const a=new Zn;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=i,a.method=r,Wn(t)};mr.deflateInit=(t,e)=>Yn(t,e,Cn,15,8,jn),mr.deflateInit2=Yn,mr.deflateReset=Wn,mr.deflateResetKeep=Gn,mr.deflateSetHeader=(t,e)=>t&&t.state?2!==t.state.wrap?wn:(t.state.gzhead=e,_n):wn,mr.deflate=(t,e)=>{let r,n;if(!t||!t.state||e>vn||e<0)return t?Un(t,wn):wn;const o=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===o.status&&e!==bn)return Un(t,0===t.avail_out?kn:wn);o.strm=t;const i=o.last_flush;if(o.last_flush=e,42===o.status)if(2===o.wrap)t.adler=0,Mn(o,31),Mn(o,139),Mn(o,8),o.gzhead?(Mn(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Mn(o,255&o.gzhead.time),Mn(o,o.gzhead.time>>8&255),Mn(o,o.gzhead.time>>16&255),Mn(o,o.gzhead.time>>24&255),Mn(o,9===o.level?2:o.strategy>=Sn||o.level<2?4:0),Mn(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Mn(o,255&o.gzhead.extra.length),Mn(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=fn(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(Mn(o,0),Mn(o,0),Mn(o,0),Mn(o,0),Mn(o,0),Mn(o,9===o.level?2:o.strategy>=Sn||o.level<2?4:0),Mn(o,3),o.status=113);else{let e=Cn+(o.w_bits-8<<4)<<8,r=-1;r=o.strategy>=Sn||o.level<2?0:o.level<6?1:6===o.level?2:3,e|=r<<6,0!==o.strstart&&(e|=32),e+=31-e%31,o.status=113,Dn(o,e),0!==o.strstart&&(Dn(o,t.adler>>>16),Dn(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(t.adler=fn(t.adler,o.pending_buf,o.pending-r,r)),Nn(t),r=o.pending,o.pending!==o.pending_buf_size));)Mn(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(t.adler=fn(t.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(t.adler=fn(t.adler,o.pending_buf,o.pending-r,r)),Nn(t),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Mn(o,n)}while(0!==n);o.gzhead.hcrc&&o.pending>r&&(t.adler=fn(t.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(t.adler=fn(t.adler,o.pending_buf,o.pending-r,r)),Nn(t),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Mn(o,n)}while(0!==n);o.gzhead.hcrc&&o.pending>r&&(t.adler=fn(t.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Nn(t),o.pending+2<=o.pending_buf_size&&(Mn(o,255&t.adler),Mn(o,t.adler>>8&255),t.adler=0,o.status=113)):o.status=113),0!==o.pending){if(Nn(t),0===t.avail_out)return o.last_flush=-1,_n}else if(0===t.avail_in&&Tn(e)<=Tn(i)&&e!==bn)return Un(t,kn);if(666===o.status&&0!==t.avail_in)return Un(t,kn);if(0!==t.avail_in||0!==o.lookahead||e!==pn&&666!==o.status){let r=o.strategy===Sn?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(qn(t),0===t.lookahead)){if(e===pn)return 1;break}if(t.match_length=0,r=cn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===bn?(zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zn(t,!1),0===t.strm.avail_out)?1:2})(o,e):o.strategy===An?((t,e)=>{let r,n,o,i;const s=t.window;for(;;){if(t.lookahead<=258){if(qn(t),t.lookahead<=258&&e===pn)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(o=t.strstart-1,n=s[o],n===s[++o]&&n===s[++o]&&n===s[++o])){i=t.strstart+258;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<i);t.match_length=258-(i-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=cn(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=cn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===bn?(zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zn(t,!1),0===t.strm.avail_out)?1:2})(o,e):Hn[o.level].func(o,e);if(3!==r&&4!==r||(o.status=666),1===r||3===r)return 0===t.avail_out&&(o.last_flush=-1),_n;if(2===r&&(e===gn?ln(o):e!==vn&&(an(o,0,0,!1),e===yn&&(Ln(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),Nn(t),0===t.avail_out))return o.last_flush=-1,_n}return e!==bn?_n:o.wrap<=0?mn:(2===o.wrap?(Mn(o,255&t.adler),Mn(o,t.adler>>8&255),Mn(o,t.adler>>16&255),Mn(o,t.adler>>24&255),Mn(o,255&t.total_in),Mn(o,t.total_in>>8&255),Mn(o,t.total_in>>16&255),Mn(o,t.total_in>>24&255)):(Dn(o,t.adler>>>16),Dn(o,65535&t.adler)),Nn(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?_n:mn)},mr.deflateEnd=t=>{if(!t||!t.state)return wn;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?Un(t,wn):(t.state=null,113===e?Un(t,In):_n)},mr.deflateSetDictionary=(t,e)=>{let r=e.length;if(!t||!t.state)return wn;const n=t.state,o=n.wrap;if(2===o||1===o&&42!==n.status||n.lookahead)return wn;if(1===o&&(t.adler=hn(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===o&&(Ln(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const i=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,qn(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Bn(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,qn(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=a,t.avail_in=i,n.wrap=o,_n},mr.deflateInfo="pako deflate (from Nodeca project)";var Jn={};const Xn=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);Jn.assign=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Xn(r,e)&&(t[e]=r[e])}}return t},Jn.flattenChunks=t=>{let e=0;for(let n=0,o=t.length;n<o;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,o=0,i=t.length;n<i;n++){let e=t[n];r.set(e,o),o+=e.length}return r};var Qn={};let to=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Kl){to=!1}const eo=new Uint8Array(256);for(let Hl=0;Hl<256;Hl++)eo[Hl]=Hl>=252?6:Hl>=248?5:Hl>=240?4:Hl>=224?3:Hl>=192?2:1;eo[254]=eo[254]=1,Qn.string2buf=t=>{let e,r,n,o,i,s=t.length,a=0;for(o=0;o<s;o++)r=t.charCodeAt(o),55296==(64512&r)&&o+1<s&&(n=t.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),i=0,o=0;i<a;o++)r=t.charCodeAt(o),55296==(64512&r)&&o+1<s&&(n=t.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|63&r):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|63&r):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|63&r);return e};Qn.buf2string=(t,e)=>{let r,n;const o=e||t.length,i=new Array(2*o);for(n=0,r=0;r<o;){let e=t[r++];if(e<128){i[n++]=e;continue}let s=eo[e];if(s>4)i[n++]=65533,r+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&r<o;)e=e<<6|63&t[r++],s--;s>1?i[n++]=65533:e<65536?i[n++]=e:(e-=65536,i[n++]=55296|e>>10&1023,i[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&to)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(i,n)},Qn.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+eo[t[r]]>e?r:e};var ro=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const no=mr,oo=Jn,io=Qn,so=nn,ao=ro,uo=Object.prototype.toString,{Z_NO_FLUSH:co,Z_SYNC_FLUSH:lo,Z_FULL_FLUSH:ho,Z_FINISH:fo,Z_OK:po,Z_STREAM_END:go,Z_DEFAULT_COMPRESSION:yo,Z_DEFAULT_STRATEGY:bo,Z_DEFLATED:vo}=on;function _o(t){this.options=oo.assign({level:yo,method:vo,chunkSize:16384,windowBits:15,memLevel:8,strategy:bo},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ao,this.strm.avail_out=0;let r=no.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==po)throw new Error(so[r]);if(e.header&&no.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?io.string2buf(e.dictionary):"[object ArrayBuffer]"===uo.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=no.deflateSetDictionary(this.strm,t),r!==po)throw new Error(so[r]);this._dict_set=!0}}function mo(t,e){const r=new _o(e);if(r.push(t,!0),r.err)throw r.msg||so[r.err];return r.result}_o.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let o,i;if(this.ended)return!1;for(i=e===~~e?e:!0===e?fo:co,"string"==typeof t?r.input=io.string2buf(t):"[object ArrayBuffer]"===uo.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===lo||i===ho)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(o=no.deflate(r,i),o===go)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),o=no.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===po;if(0!==r.avail_out){if(i>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},_o.prototype.onData=function(t){this.chunks.push(t)},_o.prototype.onEnd=function(t){t===po&&(this.result=oo.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},_r.Deflate=_o,_r.deflate=mo,_r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,mo(t,e)},_r.gzip=function(t,e){return(e=e||{}).gzip=!0,mo(t,e)},_r.constants=on;var wo={},Io={};const ko=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Eo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),So=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const Ao=tn,Oo=rn,jo=function(t,e){let r,n,o,i,s,a,u,c,l,h,f,d,p,g,y,b,v,_,m,w,I,k,E,x;const S=t.state;r=t.next_in,E=t.input,n=r+(t.avail_in-5),o=t.next_out,x=t.output,i=o-(e-t.avail_out),s=o+(t.avail_out-257),a=S.dmax,u=S.wsize,c=S.whave,l=S.wnext,h=S.window,f=S.hold,d=S.bits,p=S.lencode,g=S.distcode,y=(1<<S.lenbits)-1,b=(1<<S.distbits)-1;t:do{d<15&&(f+=E[r++]<<d,d+=8,f+=E[r++]<<d,d+=8),v=p[f&y];e:for(;;){if(_=v>>>24,f>>>=_,d-=_,_=v>>>16&255,0===_)x[o++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=p[(65535&v)+(f&(1<<_)-1)];continue e}if(32&_){S.mode=12;break t}t.msg="invalid literal/length code",S.mode=30;break t}m=65535&v,_&=15,_&&(d<_&&(f+=E[r++]<<d,d+=8),m+=f&(1<<_)-1,f>>>=_,d-=_),d<15&&(f+=E[r++]<<d,d+=8,f+=E[r++]<<d,d+=8),v=g[f&b];r:for(;;){if(_=v>>>24,f>>>=_,d-=_,_=v>>>16&255,!(16&_)){if(0==(64&_)){v=g[(65535&v)+(f&(1<<_)-1)];continue r}t.msg="invalid distance code",S.mode=30;break t}if(w=65535&v,_&=15,d<_&&(f+=E[r++]<<d,d+=8,d<_&&(f+=E[r++]<<d,d+=8)),w+=f&(1<<_)-1,w>a){t.msg="invalid distance too far back",S.mode=30;break t}if(f>>>=_,d-=_,_=o-i,w>_){if(_=w-_,_>c&&S.sane){t.msg="invalid distance too far back",S.mode=30;break t}if(I=0,k=h,0===l){if(I+=u-_,_<m){m-=_;do{x[o++]=h[I++]}while(--_);I=o-w,k=x}}else if(l<_){if(I+=u+l-_,_-=l,_<m){m-=_;do{x[o++]=h[I++]}while(--_);if(I=0,l<m){_=l,m-=_;do{x[o++]=h[I++]}while(--_);I=o-w,k=x}}}else if(I+=l-_,_<m){m-=_;do{x[o++]=h[I++]}while(--_);I=o-w,k=x}for(;m>2;)x[o++]=k[I++],x[o++]=k[I++],x[o++]=k[I++],m-=3;m&&(x[o++]=k[I++],m>1&&(x[o++]=k[I++]))}else{I=o-w;do{x[o++]=x[I++],x[o++]=x[I++],x[o++]=x[I++],m-=3}while(m>2);m&&(x[o++]=x[I++],m>1&&(x[o++]=x[I++]))}break}}break}}while(r<n&&o<s);m=d>>3,r-=m,d-=m<<3,f&=(1<<d)-1,t.next_in=r,t.next_out=o,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=o<s?s-o+257:257-(o-s),S.hold=f,S.bits=d},Ro=(t,e,r,n,o,i,s,a)=>{const u=a.bits;let c,l,h,f,d,p,g=0,y=0,b=0,v=0,_=0,m=0,w=0,I=0,k=0,E=0,x=null,S=0;const A=new Uint16Array(16),O=new Uint16Array(16);let j,R,C,U=null,T=0;for(g=0;g<=15;g++)A[g]=0;for(y=0;y<n;y++)A[e[r+y]]++;for(_=u,v=15;v>=1&&0===A[v];v--);if(_>v&&(_=v),0===v)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(b=1;b<v&&0===A[b];b++);for(_<b&&(_=b),I=1,g=1;g<=15;g++)if(I<<=1,I-=A[g],I<0)return-1;if(I>0&&(0===t||1!==v))return-1;for(O[1]=0,g=1;g<15;g++)O[g+1]=O[g]+A[g];for(y=0;y<n;y++)0!==e[r+y]&&(s[O[e[r+y]]++]=y);if(0===t?(x=U=s,p=19):1===t?(x=ko,S-=257,U=Eo,T-=257,p=256):(x=xo,U=So,p=-1),E=0,y=0,g=b,d=i,m=_,w=0,h=-1,k=1<<_,f=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){j=g-w,s[y]<p?(R=0,C=s[y]):s[y]>p?(R=U[T+s[y]],C=x[S+s[y]]):(R=96,C=0),c=1<<g-w,l=1<<m,b=l;do{l-=c,o[d+(E>>w)+l]=j<<24|R<<16|C|0}while(0!==l);for(c=1<<g-1;E&c;)c>>=1;if(0!==c?(E&=c-1,E+=c):E=0,y++,0==--A[g]){if(g===v)break;g=e[r+s[y]]}if(g>_&&(E&f)!==h){for(0===w&&(w=_),d+=b,m=g-w,I=1<<m;m+w<v&&(I-=A[m+w],!(I<=0));)m++,I<<=1;if(k+=1<<m,1===t&&k>852||2===t&&k>592)return 1;h=E&f,o[h]=_<<24|m<<16|d-i|0}}return 0!==E&&(o[d+E]=g-w<<24|64<<16|0),a.bits=_,0},{Z_FINISH:Co,Z_BLOCK:Uo,Z_TREES:To,Z_OK:Lo,Z_STREAM_END:Bo,Z_NEED_DICT:No,Z_STREAM_ERROR:zo,Z_DATA_ERROR:Mo,Z_MEM_ERROR:Do,Z_BUF_ERROR:$o,Z_DEFLATED:Vo}=on,qo=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Po(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fo=t=>{if(!t||!t.state)return zo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Lo},Ko=t=>{if(!t||!t.state)return zo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Fo(t)},Ho=(t,e)=>{let r;if(!t||!t.state)return zo;const n=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?zo:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Ko(t))},Zo=(t,e)=>{if(!t)return zo;const r=new Po;t.state=r,r.window=null;const n=Ho(t,e);return n!==Lo&&(t.state=null),n};let Go,Wo,Yo=!0;const Jo=t=>{if(Yo){Go=new Int32Array(512),Wo=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ro(1,t.lens,0,288,Go,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ro(2,t.lens,0,32,Wo,0,t.work,{bits:5}),Yo=!1}t.lencode=Go,t.lenbits=9,t.distcode=Wo,t.distbits=5},Xo=(t,e,r,n)=>{let o;const i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),i.window.set(e.subarray(r-n,r-n+o),i.wnext),(n-=o)?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};Io.inflateReset=Ko,Io.inflateReset2=Ho,Io.inflateResetKeep=Fo,Io.inflateInit=t=>Zo(t,15),Io.inflateInit2=Zo,Io.inflate=(t,e)=>{let r,n,o,i,s,a,u,c,l,h,f,d,p,g,y,b,v,_,m,w,I,k,E=0;const x=new Uint8Array(4);let S,A;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return zo;r=t.state,12===r.mode&&(r.mode=13),s=t.next_out,o=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,l=r.bits,h=a,f=u,k=Lo;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,x[0]=255&c,x[1]=c>>>8&255,r.check=Oo(r.check,x,2,0),c=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=30;break}if((15&c)!==Vo){t.msg="unknown compression method",r.mode=30;break}if(c>>>=4,l-=4,I=8+(15&c),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&c?10:12,c=0,l=0;break;case 2:for(;l<16;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==Vo){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(x[0]=255&c,x[1]=c>>>8&255,r.check=Oo(r.check,x,2,0)),c=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,r.check=Oo(r.check,x,4,0)),c=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(x[0]=255&c,x[1]=c>>>8&255,r.check=Oo(r.check,x,2,0)),c=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(x[0]=255&c,x[1]=c>>>8&255,r.check=Oo(r.check,x,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>a&&(d=a),d&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+d),I)),512&r.flags&&(r.check=Oo(r.check,n,d,i)),a-=d,i+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break t;d=0;do{I=n[i+d++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I))}while(I&&d<a);if(512&r.flags&&(r.check=Oo(r.check,n,d,i)),a-=d,i+=d,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break t;d=0;do{I=n[i+d++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I))}while(I&&d<a);if(512&r.flags&&(r.check=Oo(r.check,n,d,i)),a-=d,i+=d,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(c!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}t.adler=r.check=qo(c),c=0,l=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,No;t.adler=r.check=1,r.mode=12;case 12:if(e===Uo||e===To)break t;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}switch(r.last=1&c,c>>>=1,l-=1,3&c){case 0:r.mode=14;break;case 1:if(Jo(r),r.mode=20,e===To){c>>>=2,l-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&c,c=0,l=0,r.mode=15,e===To)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>a&&(d=a),d>u&&(d=u),0===d)break t;o.set(n.subarray(i,i+d),s),a-=d,i+=d,u-=d,s+=d,r.length-=d;break}r.mode=12;break;case 17:for(;l<14;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}r.lens[O[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},k=Ro(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,k){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[c&(1<<r.lenbits)-1],y=E>>>24,b=E>>>16&255,v=65535&E,!(y<=l);){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(v<16)c>>>=y,l-=y,r.lens[r.have++]=v;else{if(16===v){for(A=y+2;l<A;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(c>>>=y,l-=y,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===v){for(A=y+3;l<A;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}c>>>=y,l-=y,I=0,d=3+(7&c),c>>>=3,l-=3}else{for(A=y+7;l<A;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}c>>>=y,l-=y,I=0,d=11+(127&c),c>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},k=Ro(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,k){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},k=Ro(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,k){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,e===To)break t;case 20:r.mode=21;case 21:if(a>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,jo(t,f),s=t.next_out,o=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;E=r.lencode[c&(1<<r.lenbits)-1],y=E>>>24,b=E>>>16&255,v=65535&E,!(y<=l);){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(b&&0==(240&b)){for(_=y,m=b,w=v;E=r.lencode[w+((c&(1<<_+m)-1)>>_)],y=E>>>24,b=E>>>16&255,v=65535&E,!(_+y<=l);){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}c>>>=_,l-=_,r.back+=_}if(c>>>=y,l-=y,r.back+=y,r.length=v,0===b){r.mode=26;break}if(32&b){r.back=-1,r.mode=12;break}if(64&b){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&b,r.mode=22;case 22:if(r.extra){for(A=r.extra;l<A;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;E=r.distcode[c&(1<<r.distbits)-1],y=E>>>24,b=E>>>16&255,v=65535&E,!(y<=l);){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(0==(240&b)){for(_=y,m=b,w=v;E=r.distcode[w+((c&(1<<_+m)-1)>>_)],y=E>>>24,b=E>>>16&255,v=65535&E,!(_+y<=l);){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}c>>>=_,l-=_,r.back+=_}if(c>>>=y,l-=y,r.back+=y,64&b){t.msg="invalid distance code",r.mode=30;break}r.offset=v,r.extra=15&b,r.mode=24;case 24:if(r.extra){for(A=r.extra;l<A;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break t;if(d=f-u,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=o,p=s-r.offset,d=r.length;d>u&&(d=u),u-=d,r.length-=d;do{o[s++]=g[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===u)break t;o[s++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===a)break t;a--,c|=n[i++]<<l,l+=8}if(f-=u,t.total_out+=f,r.total+=f,f&&(t.adler=r.check=r.flags?Oo(r.check,o,f,s-f):Ao(r.check,o,f,s-f)),f=u,(r.flags?c:qo(c))!==r.check){t.msg="incorrect data check",r.mode=30;break}c=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===a)break t;a--,c+=n[i++]<<l,l+=8}if(c!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}c=0,l=0}r.mode=29;case 29:k=Bo;break t;case 30:k=Mo;break t;case 31:return Do;case 32:default:return zo}return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,(r.wsize||f!==t.avail_out&&r.mode<30&&(r.mode<27||e!==Co))&&Xo(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,r.total+=f,r.wrap&&f&&(t.adler=r.check=r.flags?Oo(r.check,o,f,t.next_out-f):Ao(r.check,o,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===h&&0===f||e===Co)&&k===Lo&&(k=$o),k},Io.inflateEnd=t=>{if(!t||!t.state)return zo;let e=t.state;return e.window&&(e.window=null),t.state=null,Lo},Io.inflateGetHeader=(t,e)=>{if(!t||!t.state)return zo;const r=t.state;return 0==(2&r.wrap)?zo:(r.head=e,e.done=!1,Lo)},Io.inflateSetDictionary=(t,e)=>{const r=e.length;let n,o,i;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?zo:11===n.mode&&(o=1,o=Ao(o,e,r,0),o!==n.check)?Mo:(i=Xo(t,e,r,r),i?(n.mode=31,Do):(n.havedict=1,Lo))):zo},Io.inflateInfo="pako inflate (from Nodeca project)";const Qo=Io,ti=Jn,ei=Qn,ri=nn,ni=ro,oi=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ii=Object.prototype.toString,{Z_NO_FLUSH:si,Z_FINISH:ai,Z_OK:ui,Z_STREAM_END:ci,Z_NEED_DICT:li,Z_STREAM_ERROR:hi,Z_DATA_ERROR:fi,Z_MEM_ERROR:di}=on;function pi(t){this.options=ti.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ni,this.strm.avail_out=0;let r=Qo.inflateInit2(this.strm,e.windowBits);if(r!==ui)throw new Error(ri[r]);if(this.header=new oi,Qo.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ei.string2buf(e.dictionary):"[object ArrayBuffer]"===ii.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Qo.inflateSetDictionary(this.strm,e.dictionary),r!==ui)))throw new Error(ri[r])}function gi(t,e){const r=new pi(e);if(r.push(t),r.err)throw r.msg||ri[r.err];return r.result}pi.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let i,s,a;if(this.ended)return!1;for(s=e===~~e?e:!0===e?ai:si,"[object ArrayBuffer]"===ii.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Qo.inflate(r,s),i===li&&o&&(i=Qo.inflateSetDictionary(r,o),i===ui?i=Qo.inflate(r,s):i===fi&&(i=li));r.avail_in>0&&i===ci&&r.state.wrap>0&&0!==t[r.next_in];)Qo.inflateReset(r),i=Qo.inflate(r,s);switch(i){case hi:case fi:case li:case di:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||i===ci))if("string"===this.options.to){let t=ei.utf8border(r.output,r.next_out),e=r.next_out-t,o=ei.buf2string(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(o)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(i!==ui||0!==a){if(i===ci)return i=Qo.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},pi.prototype.onData=function(t){this.chunks.push(t)},pi.prototype.onEnd=function(t){t===ui&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ti.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},wo.Inflate=pi,wo.inflate=gi,wo.inflateRaw=function(t,e){return(e=e||{}).raw=!0,gi(t,e)},wo.ungzip=gi,wo.constants=on;const{Deflate:yi,deflate:bi,deflateRaw:vi,gzip:_i}=_r,{Inflate:mi,inflate:wi,inflateRaw:Ii,ungzip:ki}=wo,Ei=on;vr.Deflate=yi,vr.deflate=bi,vr.deflateRaw=vi,vr.gzip=_i,vr.Inflate=mi,vr.inflate=wi,vr.inflateRaw=Ii,vr.ungzip=ki,vr.constants=Ei;for(var xi={},Si={exports:{}},Ai={},Oi={byteLength:function(t){var e=Bi(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=Bi(t),o=n[0],i=n[1],s=new Ci(function(t,e,r){return 3*(e+r)/4-r}(0,o,i)),a=0,u=i>0?o-4:o;for(r=0;r<u;r+=4)e=Ri[t.charCodeAt(r)]<<18|Ri[t.charCodeAt(r+1)]<<12|Ri[t.charCodeAt(r+2)]<<6|Ri[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===i&&(e=Ri[t.charCodeAt(r)]<<2|Ri[t.charCodeAt(r+1)]>>4,s[a++]=255&e);1===i&&(e=Ri[t.charCodeAt(r)]<<10|Ri[t.charCodeAt(r+1)]<<4|Ri[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},fromByteArray:function(t){for(var e,r=t.length,n=r%3,o=[],i=16383,s=0,a=r-n;s<a;s+=i)o.push(Ni(t,s,s+i>a?a:s+i));1===n?(e=t[r-1],o.push(ji[e>>2]+ji[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(ji[e>>10]+ji[e>>4&63]+ji[e<<2&63]+"="));return o.join("")}},ji=[],Ri=[],Ci="undefined"!=typeof Uint8Array?Uint8Array:Array,Ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ti=0,Li=Ui.length;Ti<Li;++Ti)ji[Ti]=Ui[Ti],Ri[Ui.charCodeAt(Ti)]=Ti;function Bi(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function Ni(t,e,r){for(var n,o,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(ji[(o=n)>>18&63]+ji[o>>12&63]+ji[o>>6&63]+ji[63&o]);return i.join("")}Ri["-".charCodeAt(0)]=62,Ri["_".charCodeAt(0)]=63;var zi={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?o-1:0,f=r?-1:1,d=t[e+h];for(h+=f,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=256*i+t[e+h],h+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),i-=c}return(d?-1:1)*s*Math.pow(2,i-n)},write:function(t,e,r,n,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,h=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[r+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[r+d]=255&s,d+=p,s/=256,c-=8);t[r+d-p]|=128*g}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
(function(t){var e=Oi,r=zi,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function i(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,r)}function a(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|d(t,e),n=i(r),o=n.write(t,e);o!==r&&(n=n.slice(0,o));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(D(t,Uint8Array)){var e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(D(t,SharedArrayBuffer)||t&&D(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);var o=function(t){if(s.isBuffer(t)){var e=0|f(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||$(t.length)?i(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),i(t<0?0:0|f(t))}function l(t){for(var e=t.length<0?0:0|f(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function f(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||D(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(o)return n?-1:N(t).length;e=(""+e).toLowerCase(),o=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return A(this,e,r);case"base64":return k(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,o){var i,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var l=-1;for(i=r;i<a;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var h=!0,f=0;f<u;f++)if(c(t,i+f)!==c(e,f)){h=!1;break}if(h)return i}return-1}function v(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if($(a))return s;t[r+s]=a}return s}function _(t,e,r,n){return M(N(e,t.length-r),t,r,n)}function m(t,e,r,n){return M(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return M(z(e),t,r,n)}function I(t,e,r,n){return M(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function k(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,c=t[o],l=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=h}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}(n)}t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,r){return a(t,e,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(D(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),D(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=s.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var i=t[r];if(D(i,Uint8Array))o+i.length>n.length?s.from(i).copy(n,o):Uint8Array.prototype.set.call(n,i,o);else{if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o)}o+=i.length}return n},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(t,e,r,n,o){if(D(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(i,a),c=this.slice(n,o),l=t.slice(e,r),h=0;h<u;++h)if(c[h]!==l[h]){i=c[h],a=l[h];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return m(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function S(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function A(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function O(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=V[t[i]];return o}function j(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(t,e,n,o,i){return e=+e,n>>>=0,i||U(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function L(t,e,n,o,i){return e=+e,n>>>=0,i||U(t,0,n,8),r.write(t,e,n,o,52,8),n+8}s.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),r.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);C(this,t,e,r,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);C(this,t,e,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,r){return T(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return T(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var o=t.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=s.isBuffer(t)?t:s.from(t,n),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=a[i%u]}return this};var B=/[^+/0-9A-Za-z-_]/g;function N(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function z(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function M(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function D(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}var V=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)e[n+o]=t[r]+t[o];return e}()})(Ai),function(t,e){var r=Ai,n=r.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function i(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=i),o(n,i),i.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},i.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var o=n(t);return void 0!==e?"string"==typeof r?o.fill(e,r):o.fill(e):o.fill(0),o},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(Si,Si.exports);var Mi=Si.exports.Buffer,Di=Mi.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function $i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(Mi.isEncoding===Di||!Di(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=Pi,this.end=Fi,e=4;break;case"utf8":this.fillLast=qi,e=4;break;case"base64":this.text=Ki,this.end=Hi,e=3;break;default:return this.write=Zi,void(this.end=Gi)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Mi.allocUnsafe(e)}function Vi(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function qi(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function Pi(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Fi(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Ki(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Hi(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Zi(t){return t.toString(this.encoding)}function Gi(t){return t&&t.length?this.write(t):""}let Wi,Yi;if(xi.StringDecoder=$i,$i.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},$i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},$i.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var o=Vi(e[n]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=Vi(e[n]))>=0)return o>0&&(t.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=Vi(e[n]))>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},$i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},"function"==typeof TextEncoder&&"function"==typeof TextDecoder){const t=new TextEncoder,e=new TextDecoder("utf-8");Wi=e=>t.encode(e),Yi=t=>e.decode(t)}else{if("function"!=typeof Buffer)throw new Error("Platform does not provide UTF-8 encoding/decoding feature");{const{StringDecoder:t}=xi,e=new t("utf8");Wi=t=>Buffer.from(t,"utf8"),Yi=t=>e.end(Buffer.from(t))}}function Ji(t){if("string"!=typeof t)throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(t))throw new RangeError("value is not hexadecimal");return""===t?new Uint8Array(0):new Uint8Array(t.match(/../g).map((t=>parseInt(t,16))))}function Xi(t){const e=[];for(let r of t){if(r<0||r>255)throw new RangeError(`value does not fit in one byte: ${r}`);e.push(("0"+r.toString(16)).slice(-2))}return e.join("")}class Qi{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(t=0){let e=4*this.buf.byteLength;for(;e<t;)e*=2;const r=new Uint8Array(e);return r.set(this.buf,0),this.buf=r,this}appendByte(t){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=t,this.offset+=1}appendUint32(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<0||t>4294967295)throw new RangeError("number out of range");const e=Math.max(1,Math.ceil((32-Math.clz32(t))/7));this.offset+e>this.buf.byteLength&&this.grow();for(let r=0;r<e;r++)this.buf[this.offset+r]=127&t|(r===e-1?0:128),t>>>=7;return this.offset+=e,e}appendInt32(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<-2147483648||t>2147483647)throw new RangeError("number out of range");const e=Math.ceil((33-Math.clz32(t>=0?t:-t-1))/7);this.offset+e>this.buf.byteLength&&this.grow();for(let r=0;r<e;r++)this.buf[this.offset+r]=127&t|(r===e-1?0:128),t>>=7;return this.offset+=e,e}appendUint53(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<0||t>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");const e=Math.floor(t/4294967296),r=(4294967295&t)>>>0;return this.appendUint64(e,r)}appendInt53(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");const e=Math.floor(t/4294967296),r=(4294967295&t)>>>0;return this.appendInt64(e,r)}appendUint64(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))throw new RangeError("value is not an integer");if(t<0||t>4294967295||e<0||e>4294967295)throw new RangeError("number out of range");if(0===t)return this.appendUint32(e);const r=Math.ceil((64-Math.clz32(t))/7);this.offset+r>this.buf.byteLength&&this.grow();for(let n=0;n<4;n++)this.buf[this.offset+n]=127&e|128,e>>>=7;this.buf[this.offset+4]=15&e|(7&t)<<4|(5===r?0:128),t>>>=3;for(let n=5;n<r;n++)this.buf[this.offset+n]=127&t|(n===r-1?0:128),t>>>=7;return this.offset+=r,r}appendInt64(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))throw new RangeError("value is not an integer");if(t<-2147483648||t>2147483647||e<-2147483648||e>4294967295)throw new RangeError("number out of range");if(e>>>=0,0===t&&e<=2147483647)return this.appendInt32(e);if(-1===t&&e>=2147483648)return this.appendInt32(e-4294967296);const r=Math.ceil((65-Math.clz32(t>=0?t:-t-1))/7);this.offset+r>this.buf.byteLength&&this.grow();for(let n=0;n<4;n++)this.buf[this.offset+n]=127&e|128,e>>>=7;this.buf[this.offset+4]=15&e|(7&t)<<4|(5===r?0:128),t>>=3;for(let n=5;n<r;n++)this.buf[this.offset+n]=127&t|(n===r-1?0:128),t>>=7;return this.offset+=r,r}appendRawBytes(t){return this.offset+t.byteLength>this.buf.byteLength&&this.grow(this.offset+t.byteLength),this.buf.set(t,this.offset),this.offset+=t.byteLength,t.byteLength}appendRawString(t){if("string"!=typeof t)throw new TypeError("value is not a string");return this.appendRawBytes(Wi(t))}appendPrefixedBytes(t){return this.appendUint53(t.byteLength),this.appendRawBytes(t),this}appendPrefixedString(t){if("string"!=typeof t)throw new TypeError("value is not a string");return this.appendPrefixedBytes(Wi(t)),this}appendHexString(t){return this.appendPrefixedBytes(Ji(t)),this}finish(){}}class ts{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError(`Not a byte array: ${t}`);this.buf=t,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(t){if(this.offset+t>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=t}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let t=0,e=0;for(;this.offset<this.buf.byteLength;){const r=this.buf[this.offset];if(28===e&&0!=(240&r))throw new RangeError("number out of range");if(t=(t|(127&r)<<e)>>>0,e+=7,this.offset++,0==(128&r))return t}throw new RangeError("buffer ended with incomplete number")}readInt32(){let t=0,e=0;for(;this.offset<this.buf.byteLength;){const r=this.buf[this.offset];if(28===e&&0!=(128&r)||28===e&&0==(64&r)&&0!=(56&r)||28===e&&0!=(64&r)&&56!=(56&r))throw new RangeError("number out of range");if(t|=(127&r)<<e,e+=7,this.offset++,0==(128&r))return 0==(64&r)||e>28?t:t|-1<<e}throw new RangeError("buffer ended with incomplete number")}readUint53(){const{low32:t,high32:e}=this.readUint64();if(e<0||e>2097151)throw new RangeError("number out of range");return 4294967296*e+t}readInt53(){const{low32:t,high32:e}=this.readInt64();if(e<-2097152||-2097152===e&&0===t||e>2097151)throw new RangeError("number out of range");return 4294967296*e+t}readUint64(){let t=0,e=0,r=0;for(;this.offset<this.buf.byteLength&&r<=28;){const n=this.buf[this.offset];if(t=(t|(127&n)<<r)>>>0,28===r&&(e=(112&n)>>>4),r+=7,this.offset++,0==(128&n))return{high32:e,low32:t}}for(r=3;this.offset<this.buf.byteLength;){const n=this.buf[this.offset];if(31===r&&0!=(254&n))throw new RangeError("number out of range");if(e=(e|(127&n)<<r)>>>0,r+=7,this.offset++,0==(128&n))return{high32:e,low32:t}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let t=0,e=0,r=0;for(;this.offset<this.buf.byteLength&&r<=28;){const n=this.buf[this.offset];if(t=(t|(127&n)<<r)>>>0,28===r&&(e=(112&n)>>>4),r+=7,this.offset++,0==(128&n))return 0!=(64&n)&&(r<32&&(t=(t|-1<<r)>>>0),e|=-1<<Math.max(r-32,0)),{high32:e,low32:t}}for(r=3;this.offset<this.buf.byteLength;){const n=this.buf[this.offset];if(31===r&&0!==n&&127!==n)throw new RangeError("number out of range");if(e|=(127&n)<<r,r+=7,this.offset++,0==(128&n))return 0!=(64&n)&&r<32&&(e|=-1<<r),{high32:e,low32:t}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(t){const e=this.offset;if(e+t>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=t,this.buf.subarray(e,this.offset)}readRawString(t){return Yi(this.readRawBytes(t))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return Yi(this.readPrefixedBytes())}readHexString(){return Xi(this.readPrefixedBytes())}}class es extends Qi{constructor(t){super(),this.type=t,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(t,e=1){this._appendValue(t,e)}_appendValue(t,e=1){e<=0||("empty"===this.state?(this.state=null===t?"nulls":1===e?"loneValue":"repetition",this.lastValue=t,this.count=e):"loneValue"===this.state?null===t?(this.flush(),this.state="nulls",this.count=e):t===this.lastValue?(this.state="repetition",this.count=1+e):e>1?(this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.state="literal",this.literal=[this.lastValue],this.lastValue=t):"repetition"===this.state?null===t?(this.flush(),this.state="nulls",this.count=e):t===this.lastValue?this.count+=e:e>1?(this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.flush(),this.state="loneValue",this.lastValue=t):"literal"===this.state?null===t?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=e):t===this.lastValue?(this.flush(),this.state="repetition",this.count=1+e):e>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.literal.push(this.lastValue),this.lastValue=t):"nulls"===this.state&&(null===t?this.count+=e:e>1?(this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.flush(),this.state="loneValue",this.lastValue=t)))}copyFrom(t,e={}){const{count:r,sumValues:n,sumShift:o}=e;if(!(t instanceof rs)||t.type!==this.type)throw new TypeError("incompatible type of decoder");let i="number"==typeof r?r:Number.MAX_SAFE_INTEGER,s=0,a=0;if(r&&i>0&&t.done)throw new RangeError(`cannot copy ${r} values`);if(0===i||t.done)return n?{nonNullValues:s,sum:a}:{nonNullValues:s};let u=t.readValue();if(null===u){const e=Math.min(t.count+1,i);if(i-=e,t.count-=e-1,this.appendValue(null,e),r&&i>0&&t.done)throw new RangeError(`cannot copy ${r} values`);if(0===i||t.done)return n?{nonNullValues:s,sum:a}:{nonNullValues:s};if(u=t.readValue(),null===u)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(u),i--,s++,n&&(a+=o?u>>>o:u),r&&i>0&&t.done)throw new RangeError(`cannot copy ${r} values`);if(0===i||t.done)return n?{nonNullValues:s,sum:a}:{nonNullValues:s};let c=t.count>0;for(;i>0&&!t.done;){c||t.readRecord();const e=Math.min(t.count,i);if(t.count-=e,"literal"===t.state){s+=e;for(let r=0;r<e;r++){if(t.done)throw new RangeError("incomplete literal");const e=t.readRawValue();if(e===t.lastValue)throw new RangeError("Repetition of values is not allowed in literal");t.lastValue=e,this._appendValue(e),n&&(a+=o?e>>>o:e)}}else if("repetition"===t.state){s+=e,n&&(a+=e*(o?t.lastValue>>>o:t.lastValue));const r=t.lastValue;if(this._appendValue(r),e>1){if(this._appendValue(r),"repetition"!==this.state)throw new RangeError(`Unexpected state ${this.state}`);this.count+=e-2}}else if("nulls"===t.state){if(this._appendValue(null),"nulls"!==this.state)throw new RangeError(`Unexpected state ${this.state}`);this.count+=e-1}c=!1,i-=e}if(r&&i>0&&t.done)throw new RangeError(`cannot copy ${r} values`);return n?{nonNullValues:s,sum:a}:{nonNullValues:s}}flush(){if("loneValue"===this.state)this.appendInt32(-1),this.appendRawValue(this.lastValue);else if("repetition"===this.state)this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if("literal"===this.state){this.appendInt53(-this.literal.length);for(let t of this.literal)this.appendRawValue(t)}else"nulls"===this.state&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(t){if("int"===this.type)this.appendInt53(t);else if("uint"===this.type)this.appendUint53(t);else{if("utf8"!==this.type)throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`);this.appendPrefixedString(t)}}finish(){"literal"===this.state&&this.literal.push(this.lastValue),("nulls"!==this.state||this.offset>0)&&this.flush()}}class rs extends ts{constructor(t,e){super(e),this.type=t,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return 0===this.count&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(0===this.count&&this.readRecord(),this.count-=1,"literal"===this.state){const t=this.readRawValue();if(t===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=t,t}return this.lastValue}skipValues(t){for(;t>0&&!this.done;){0===this.count&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=t?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));const e=Math.min(t,this.count);"literal"===this.state&&this.skipRawValues(e),t-=e,this.count-=e}}readRecord(){if(this.count=this.readInt53(),this.count>1){const t=this.readRawValue();if(("repetition"===this.state||"literal"===this.state)&&this.lastValue===t)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=t}else{if(1===this.count)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,"literal"===this.state)throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if("nulls"===this.state)throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),0===this.count)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if("int"===this.type)return this.readInt53();if("uint"===this.type)return this.readUint53();if("utf8"===this.type)return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(t){if("utf8"===this.type)for(let e=0;e<t;e++)this.skip(this.readUint53());else{for(;t>0&&this.offset<this.buf.byteLength;)0==(128&this.buf[this.offset])&&t--,this.offset++;if(t>0)throw new RangeError("cannot skip beyond end of buffer")}}}class ns extends rs{constructor(t){super("int",t),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){const t=super.readValue();return null===t?null:(this.absoluteValue+=t,this.absoluteValue)}skipValues(t){for(;t>0&&!this.done;){0===this.count&&this.readRecord();const e=Math.min(t,this.count);if("literal"===this.state)for(let t=0;t<e;t++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else"repetition"===this.state&&(this.absoluteValue+=e*this.lastValue);t-=e,this.count-=e}}}class os extends ts{constructor(t){super(t),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return 0===this.count&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;0===this.count;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,0===this.count&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(t){for(;t>0&&!this.done;){if(0===this.count&&(this.count=this.readUint53(),this.lastValue=!this.lastValue,0===this.count))throw new RangeError("Zero-length runs are not allowed");this.count<t?(t-=this.count,this.count=0):(this.count-=t,t=0)}}}var is,ss={stringToUtf8:Wi,utf8ToString:Yi,hexStringToBytes:Ji,bytesToHexString:Xi,Encoder:Qi,Decoder:ts,RLEEncoder:es,RLEDecoder:rs,DeltaEncoder:class extends es{constructor(){super("int"),this.absoluteValue=0}appendValue(t,e=1){e<=0||("number"==typeof t?(super.appendValue(t-this.absoluteValue,1),this.absoluteValue=t,e>1&&super.appendValue(0,e-1)):super.appendValue(t,e))}copyFrom(t,e={}){if(e.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(t instanceof ns))throw new TypeError("incompatible type of decoder");let r=e.count;if(r>0&&t.done)throw new RangeError(`cannot copy ${r} values`);if(0===r||t.done)return;let n=t.readValue(),o=0;if(this.appendValue(n),null===n){if(o=t.count+1,void 0!==r&&r<o&&(o=r),t.count-=o-1,this.count+=o-1,r>o&&t.done)throw new RangeError(`cannot copy ${r} values`);if(r===o||t.done)return;0===t.count&&this.appendValue(t.readValue())}void 0!==r&&(r-=o+1);const{nonNullValues:i,sum:s}=super.copyFrom(t,{count:r,sumValues:!0});i>0&&(this.absoluteValue=s,t.absoluteValue=s)}},DeltaDecoder:ns,BooleanEncoder:class extends Qi{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(t,e=1){if(!1!==t&&!0!==t)throw new RangeError(`Unsupported value for BooleanEncoder: ${t}`);e<=0||(this.lastValue===t?this.count+=e:(this.appendUint53(this.count),this.lastValue=t,this.count=e))}copyFrom(t,e={}){if(!(t instanceof os))throw new TypeError("incompatible type of decoder");const{count:r}=e;let n="number"==typeof r?r:Number.MAX_SAFE_INTEGER;if(r&&n>0&&t.done)throw new RangeError(`cannot copy ${r} values`);if(0===n||t.done)return;this.appendValue(t.readValue()),n--;const o=Math.min(t.count,n);for(this.count+=o,t.count-=o,n-=o;n>0&&!t.done;){if(t.count=t.readUint53(),0===t.count)throw new RangeError("Zero-length runs are not allowed");t.lastValue=!t.lastValue,this.appendUint53(this.count);const e=Math.min(t.count,n);this.count=e,this.lastValue=t.lastValue,t.count-=e,n-=e}if(r&&n>0&&t.done)throw new RangeError(`cannot copy ${r} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},BooleanDecoder:os},as={exports:{}};is=as,function(t,e){var r={};!function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(t,r,n,o,i){for(var s,a,u,c,l,h,f,d,p,g,y,b,v;i>=64;){for(s=r[0],a=r[1],u=r[2],c=r[3],l=r[4],h=r[5],f=r[6],d=r[7],g=0;g<16;g++)y=o+4*g,t[g]=(255&n[y])<<24|(255&n[y+1])<<16|(255&n[y+2])<<8|255&n[y+3];for(g=16;g<64;g++)b=((p=t[g-2])>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,v=((p=t[g-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,t[g]=(b+t[g-7]|0)+(v+t[g-16]|0);for(g=0;g<64;g++)b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&h^~l&f)|0)+(d+(e[g]+t[g]|0)|0)|0,v=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&a^s&u^a&u)|0,d=f,f=h,h=l,l=c+b|0,c=u,u=a,a=s,s=b+v|0;r[0]+=s,r[1]+=a,r[2]+=u,r[3]+=c,r[4]+=l,r[5]+=h,r[6]+=f,r[7]+=d,o+=64,i-=64}return o}var n=function(){function e(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var t=0;t<this.buffer.length;t++)this.buffer[t]=0;for(t=0;t<this.temp.length;t++)this.temp[t]=0;this.reset()},e.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=e,this.bufferLength>0){for(;this.bufferLength<64&&e>0;)this.buffer[this.bufferLength++]=t[n++],e--;64===this.bufferLength&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(e>=64&&(n=r(this.temp,this.state,t,n,e),e%=64);e>0;)this.buffer[this.bufferLength++]=t[n++],e--;return this},e.prototype.finish=function(t){if(!this.finished){var e=this.bytesHashed,n=this.bufferLength,o=e/536870912|0,i=e<<3,s=e%64<56?64:128;this.buffer[n]=128;for(var a=n+1;a<s-8;a++)this.buffer[a]=0;this.buffer[s-8]=o>>>24&255,this.buffer[s-7]=o>>>16&255,this.buffer[s-6]=o>>>8&255,this.buffer[s-5]=o>>>0&255,this.buffer[s-4]=i>>>24&255,this.buffer[s-3]=i>>>16&255,this.buffer[s-2]=i>>>8&255,this.buffer[s-1]=i>>>0&255,r(this.temp,this.state,this.buffer,0,s),this.finished=!0}for(a=0;a<8;a++)t[4*a+0]=this.state[a]>>>24&255,t[4*a+1]=this.state[a]>>>16&255,t[4*a+2]=this.state[a]>>>8&255,t[4*a+3]=this.state[a]>>>0&255;return this},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype._saveState=function(t){for(var e=0;e<this.state.length;e++)t[e]=this.state[e]},e.prototype._restoreState=function(t,e){for(var r=0;r<this.state.length;r++)this.state[r]=t[r];this.bytesHashed=e,this.finished=!1,this.bufferLength=0},e}();t.Hash=n;var o=function(){function t(t){this.inner=new n,this.outer=new n,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var e=new Uint8Array(this.blockSize);if(t.length>this.blockSize)(new n).update(t).finish(e).clean();else for(var r=0;r<t.length;r++)e[r]=t[r];for(r=0;r<e.length;r++)e[r]^=54;for(this.inner.update(e),r=0;r<e.length;r++)e[r]^=106;for(this.outer.update(e),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),r=0;r<e.length;r++)e[r]=0}return t.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},t.prototype.clean=function(){for(var t=0;t<this.istate.length;t++)this.ostate[t]=this.istate[t]=0;this.inner.clean(),this.outer.clean()},t.prototype.update=function(t){return this.inner.update(t),this},t.prototype.finish=function(t){return this.outer.finished?this.outer.finish(t):(this.inner.finish(t),this.outer.update(t,this.digestLength).finish(t)),this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t}();function i(t){var e=(new n).update(t),r=e.digest();return e.clean(),r}function s(t,e){var r=new o(t).update(e),n=r.digest();return r.clean(),n}function a(t,e,r,n){var o=n[0];if(0===o)throw new Error("hkdf: cannot expand more");e.reset(),o>1&&e.update(t),r&&e.update(r),e.update(n),e.finish(t),n[0]++}t.HMAC=o,t.hash=i,t.default=i,t.hmac=s;var u=new Uint8Array(t.digestLength);function c(t,e,r,n){void 0===e&&(e=u),void 0===n&&(n=32);for(var i=new Uint8Array([1]),c=s(e,t),l=new o(c),h=new Uint8Array(l.digestLength),f=h.length,d=new Uint8Array(n),p=0;p<n;p++)f===h.length&&(a(h,l,r,i),f=0),d[p]=h[f++];return l.clean(),h.fill(0),i.fill(0),d}function l(t,e,r,n){for(var i=new o(t),s=i.digestLength,a=new Uint8Array(4),u=new Uint8Array(s),c=new Uint8Array(s),l=new Uint8Array(n),h=0;h*s<n;h++){var f=h+1;a[0]=f>>>24&255,a[1]=f>>>16&255,a[2]=f>>>8&255,a[3]=f>>>0&255,i.reset(),i.update(e),i.update(a),i.finish(c);for(var d=0;d<s;d++)u[d]=c[d];for(d=2;d<=r;d++){i.reset(),i.update(c).finish(c);for(var p=0;p<s;p++)u[p]^=c[p]}for(d=0;d<s&&h*s+d<n;d++)l[h*s+d]=u[d]}for(h=0;h<s;h++)u[h]=c[h]=0;for(h=0;h<4;h++)a[h]=0;return i.clean(),l}t.hkdf=c,t.pbkdf2=l}(r);var n=r.default;for(var o in r)n[o]=r[o];is.exports=n}();const us=vr,{copyObject:cs,parseOpId:ls,equalBytes:hs}=Nt,{utf8ToString:fs,hexStringToBytes:ds,bytesToHexString:ps,Encoder:gs,Decoder:ys,RLEEncoder:bs,RLEDecoder:vs,DeltaEncoder:_s,DeltaDecoder:ms,BooleanEncoder:ws,BooleanDecoder:Is}=ss,{Hash:ks}=as.exports,Es=new Uint8Array([133,111,74,131]),xs={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},Ss={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},As=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],Os={makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},js={objActor:0|xs.ACTOR_ID,objCtr:0|xs.INT_RLE,keyActor:16|xs.ACTOR_ID,keyCtr:16|xs.INT_DELTA,keyStr:16|xs.STRING_RLE,idActor:32|xs.ACTOR_ID,idCtr:32|xs.INT_DELTA,insert:48|xs.BOOLEAN,action:64|xs.INT_RLE,valLen:80|xs.VALUE_LEN,valRaw:80|xs.VALUE_RAW,chldActor:96|xs.ACTOR_ID,chldCtr:96|xs.INT_DELTA},Rs=Object.assign({predNum:112|xs.GROUP_CARD,predActor:112|xs.ACTOR_ID,predCtr:112|xs.INT_DELTA},js),Cs=Object.assign({succNum:128|xs.GROUP_CARD,succActor:128|xs.ACTOR_ID,succCtr:128|xs.INT_DELTA},js),Us=Object.entries(Cs).reduce(((t,[e,r])=>(t[r]=e,t)),[]),Ts={actor:0|xs.ACTOR_ID,seq:0|xs.INT_DELTA,maxOp:16|xs.INT_DELTA,time:32|xs.INT_DELTA,message:48|xs.STRING_RLE,depsNum:64|xs.GROUP_CARD,depsIndex:64|xs.INT_DELTA,extraLen:80|xs.VALUE_LEN,extraRaw:80|xs.VALUE_RAW};function Ls(t,e,r){if(1===e.length)t[e[0]]=r;else{let n=Object.assign({},t[e[0]]);Ls(n,e.slice(1),r),t[e[0]]=n}}function Bs(t,e){if(!t||!t.actorId)return t;const r=t.counter,n=e.indexOf(t.actorId);if(n<0)throw new RangeError("missing actorId");return{counter:r,actorNum:n,actorId:t.actorId}}function Ns(t,e){return t.counter<e.counter?-1:t.counter>e.counter?1:t.actorId<e.actorId?-1:t.actorId>e.actorId?1:0}function zs(t,e){const r={},n=[];for(let i of t)i=cs(i),r[i.actor]=!0,i.ops=Hs(i.ops,i.startOp,i.actor),i.ops=i.ops.map((t=>{"_root"!==(t=cs(t)).obj&&(t.obj=ls(t.obj)),t.elemId&&"_head"!==t.elemId&&(t.elemId=ls(t.elemId)),t.child&&(t.child=ls(t.child)),t.pred&&(t.pred=t.pred.map(ls)),t.obj.actorId&&(r[t.obj.actorId]=!0),t.elemId&&t.elemId.actorId&&(r[t.elemId.actorId]=!0),t.child&&t.child.actorId&&(r[t.child.actorId]=!0);for(let e of t.pred)r[e.actorId]=!0;return t})),n.push(i);let o=Object.keys(r).sort();e&&(o=[t[0].actor].concat(o.filter((e=>e!==t[0].actor))));for(let i of n){i.actorNum=o.indexOf(i.actor);for(let t=0;t<i.ops.length;t++){let e=i.ops[t];e.id={counter:i.startOp+t,actorNum:i.actorNum,actorId:i.actor},e.obj=Bs(e.obj,o),e.elemId=Bs(e.elemId,o),e.child=Bs(e.child,o),e.pred=e.pred.map((t=>Bs(t,o)))}}return{changes:n,actorIds:o}}function Ms(t,e){if("_root"===t.obj)e.objActor.appendValue(null),e.objCtr.appendValue(null);else{if(!(t.obj.actorNum>=0&&t.obj.counter>0))throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(t.obj)}`);e.objActor.appendValue(t.obj.actorNum),e.objCtr.appendValue(t.obj.counter)}}function Ds(t,e){if(t.key)e.keyActor.appendValue(null),e.keyCtr.appendValue(null),e.keyStr.appendValue(t.key);else if("_head"===t.elemId&&t.insert)e.keyActor.appendValue(null),e.keyCtr.appendValue(0),e.keyStr.appendValue(null);else{if(!(t.elemId&&t.elemId.actorNum>=0&&t.elemId.counter>0))throw new RangeError(`Unexpected operation key: ${JSON.stringify(t)}`);e.keyActor.appendValue(t.elemId.actorNum),e.keyCtr.appendValue(t.elemId.counter),e.keyStr.appendValue(null)}}function $s(t,e){const r=As.indexOf(t.action);if(r>=0)e.action.appendValue(r);else{if("number"!=typeof t.action)throw new RangeError(`Unexpected operation action: ${t.action}`);e.action.appendValue(t.action)}}function Vs(t,e,r){let n;t<0||e>0?(n=r.valRaw.appendInt53(t),e||(e=Ss.LEB128_INT)):(n=r.valRaw.appendUint53(t),e=Ss.LEB128_UINT),r.valLen.appendValue(n<<4|e)}function qs(t,e){if("set"!==t.action&&"inc"!==t.action||null===t.value)e.valLen.appendValue(Ss.NULL);else if(!1===t.value)e.valLen.appendValue(Ss.FALSE);else if(!0===t.value)e.valLen.appendValue(Ss.TRUE);else if("string"==typeof t.value){const r=e.valRaw.appendRawString(t.value);e.valLen.appendValue(r<<4|Ss.UTF8)}else if(ArrayBuffer.isView(t.value)){const r=e.valRaw.appendRawBytes(new Uint8Array(t.value.buffer));e.valLen.appendValue(r<<4|Ss.BYTES)}else if("counter"===t.datatype&&"number"==typeof t.value)Vs(t.value,Ss.COUNTER,e);else if("timestamp"===t.datatype&&"number"==typeof t.value)Vs(t.value,Ss.TIMESTAMP,e);else if("number"==typeof t.datatype&&t.datatype>=Ss.MIN_UNKNOWN&&t.datatype<=Ss.MAX_UNKNOWN&&t.value instanceof Uint8Array){const r=e.valRaw.appendRawBytes(t.value);e.valLen.appendValue(r<<4|t.datatype)}else{if(t.datatype)throw new RangeError(`Unknown datatype ${t.datatype} for value ${t.value}`);if("number"!=typeof t.value)throw new RangeError(`Unsupported value in operation: ${t.value}`);if(Number.isInteger(t.value)&&t.value<=Number.MAX_SAFE_INTEGER&&t.value>=Number.MIN_SAFE_INTEGER)Vs(t.value,0,e);else{const r=new ArrayBuffer(4),n=new DataView(r);if(n.setFloat32(0,t.value,!0),n.getFloat32(0,!0)===t.value)e.valRaw.appendRawBytes(new Uint8Array(r)),e.valLen.appendValue(64|Ss.IEEE754);else{const r=new ArrayBuffer(8);new DataView(r).setFloat64(0,t.value,!0),e.valRaw.appendRawBytes(new Uint8Array(r)),e.valLen.appendValue(128|Ss.IEEE754)}}}}function Ps(t,e){if(t===Ss.NULL)return{value:null};if(t===Ss.FALSE)return{value:!1};if(t===Ss.TRUE)return{value:!0};if(t%16===Ss.UTF8)return{value:fs(e)};if(t%16===Ss.LEB128_UINT)return{value:new ys(e).readUint53()};if(t%16===Ss.LEB128_INT)return{value:new ys(e).readInt53()};if(t%16===Ss.IEEE754){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);if(4===e.byteLength)return{value:t.getFloat32(0,!0)};if(8===e.byteLength)return{value:t.getFloat64(0,!0)};throw new RangeError(`Invalid length for floating point number: ${e.byteLength}`)}return t%16===Ss.COUNTER?{value:new ys(e).readInt53(),datatype:"counter"}:t%16===Ss.TIMESTAMP?{value:new ys(e).readInt53(),datatype:"timestamp"}:{value:e,datatype:t%16}}function Fs(t,e,r,n){const{columnId:o,columnName:i,decoder:s}=t[e];if(o%8===xs.VALUE_LEN&&e+1<t.length&&t[e+1].columnId===o+1){const r=s.readValue(),o=t[e+1].decoder.readRawBytes(r>>4),{value:a,datatype:u}=Ps(r,o);return n[i]=a,u&&(n[i+"_datatype"]=u),2}if(o%8===xs.ACTOR_ID){const t=s.readValue();if(null===t)n[i]=null;else{if(!r[t])throw new RangeError(`No actor index ${t}`);n[i]=r[t]}}else n[i]=s.readValue();return 1}function Ks(t,e){const r={objActor:new bs("uint"),objCtr:new bs("uint"),keyActor:new bs("uint"),keyCtr:new _s,keyStr:new bs("utf8"),insert:new ws,action:new bs("uint"),valLen:new bs("uint"),valRaw:new gs,chldActor:new bs("uint"),chldCtr:new _s};e?(r.idActor=new bs("uint"),r.idCtr=new _s,r.succNum=new bs("uint"),r.succActor=new bs("uint"),r.succCtr=new _s):(r.predNum=new bs("uint"),r.predCtr=new _s,r.predActor=new bs("uint"));for(let o of t)if(Ms(o,r),Ds(o,r),r.insert.appendValue(!!o.insert),$s(o,r),qs(o,r),o.child&&o.child.counter?(r.chldActor.appendValue(o.child.actorNum),r.chldCtr.appendValue(o.child.counter)):(r.chldActor.appendValue(null),r.chldCtr.appendValue(null)),e){r.idActor.appendValue(o.id.actorNum),r.idCtr.appendValue(o.id.counter),r.succNum.appendValue(o.succ.length),o.succ.sort(Ns);for(let t=0;t<o.succ.length;t++)r.succActor.appendValue(o.succ[t].actorNum),r.succCtr.appendValue(o.succ[t].counter)}else{r.predNum.appendValue(o.pred.length),o.pred.sort(Ns);for(let t=0;t<o.pred.length;t++)r.predActor.appendValue(o.pred[t].actorNum),r.predCtr.appendValue(o.pred[t].counter)}let n=[];for(let[o,i]of Object.entries(e?Cs:Rs))r[o]&&n.push({id:i,name:o,encoder:r[o]});return n.sort(((t,e)=>t.id-e.id))}function Hs(t,e,r){let n=e,o=[];for(const i of t)if("set"===i.action&&i.values&&i.insert){if(0!==i.pred.length)throw new RangeError("multi-insert pred must be empty");let t=i.elemId;for(const e of i.values)o.push({action:"set",obj:i.obj,elemId:t,value:e,pred:[],insert:!0}),t=`${n}@${r}`,n+=1}else if("del"===i.action&&i.multiOp>1){if(1!==i.pred.length)throw new RangeError("multiOp deletion must have exactly one pred");const t=ls(i.elemId),e=ls(i.pred[0]);for(let r=0;r<i.multiOp;r++){const s=`${t.counter+r}@${t.actorId}`,a=[`${e.counter+r}@${e.actorId}`];o.push({action:"del",obj:i.obj,elemId:s,pred:a}),n+=1}}else o.push(i),n+=1;return o}function Zs(t,e){const r=[];for(let n of t){const t=null===n.objCtr?"_root":`${n.objCtr}@${n.objActor}`,o=n.keyStr?void 0:0===n.keyCtr?"_head":`${n.keyCtr}@${n.keyActor}`,i=As[n.action]||n.action,s=o?{obj:t,elemId:o,action:i}:{obj:t,key:n.keyStr,action:i};if(s.insert=!!n.insert,"set"!==As[n.action]&&"inc"!==As[n.action]||(s.value=n.valLen,n.valLen_datatype&&(s.datatype=n.valLen_datatype)),!!n.chldCtr!=!!n.chldActor)throw new RangeError(`Mismatched child columns: ${n.chldCtr} and ${n.chldActor}`);null!==n.chldCtr&&(s.child=`${n.chldCtr}@${n.chldActor}`),e?(s.id=`${n.idCtr}@${n.idActor}`,s.succ=n.succNum.map((t=>`${t.succCtr}@${t.succActor}`))):s.pred=n.predNum.map((t=>`${t.predCtr}@${t.predActor}`)),r.push(s)}return r}function Gs(t){return(7&t)===xs.INT_DELTA?new _s:(7&t)===xs.BOOLEAN?new ws:(7&t)===xs.STRING_RLE?new bs("utf8"):(7&t)===xs.VALUE_RAW?new gs:new bs("uint")}function Ws(t,e){return(7&t)===xs.INT_DELTA?new ms(e):(7&t)===xs.BOOLEAN?new Is(e):(7&t)===xs.STRING_RLE?new vs("utf8",e):(7&t)===xs.VALUE_RAW?new ys(e):new vs("uint",e)}function Ys(t,e){const r=new Uint8Array(0),n={};for(let i of Object.values(e))n[i]=Ws(i,r);for(let i of t)n[i.columnId]=Ws(i.columnId,i.buffer);let o=[];for(let i of Object.keys(n).map((t=>parseInt(t,10))).sort(((t,e)=>t-e))){let[t]=Object.entries(e).find((([,t])=>t===i));t||(t=i.toString()),o.push({columnId:i,columnName:t,decoder:n[i]})}return o}function Js(t,e,r){t=Ys(t,r);let n=[];for(;t.some((t=>!t.decoder.done));){let r={},o=0;for(;o<t.length;){const n=t[o].columnId;let i=n>>4,s=1;for(;o+s<t.length&&t[o+s].columnId>>4===i;)s++;if(n%8===xs.GROUP_CARD){const n=[],i=t[o].decoder.readValue();for(let r=0;r<i;r++){let r={};for(let n=1;n<s;n++)Fs(t,o+n,e,r);n.push(r)}r[t[o].columnName]=n,o+=s}else o+=Fs(t,o,e,r)}n.push(r)}return n}function Xs(t){const e=-9>>>0;let r=-1,n=[],o=t.readUint53();for(let i=0;i<o;i++){const o=t.readUint53(),i=t.readUint53();if((o&e)<=(r&e))throw new RangeError("Columns must be in ascending order");r=o,n.push({columnId:o,bufferLen:i})}return n}function Qs(t,e){const r=e.filter((t=>t.encoder.buffer.byteLength>0));t.appendUint53(r.length);for(let n of r)t.appendUint53(n.id),t.appendUint53(n.encoder.buffer.byteLength)}function ta(t){const e=t.readUint53(),r=[];for(let s=0;s<e;s++)r.push(ps(t.readRawBytes(32)));let n={actor:t.readHexString(),seq:t.readUint53(),startOp:t.readUint53(),time:t.readInt53(),message:t.readPrefixedString(),deps:r};const o=[n.actor],i=t.readUint53();for(let s=0;s<i;s++)o.push(t.readHexString());return n.actorIds=o,n}function ea(t,e){const r=Es.byteLength+4+1+5,n=new gs;n.appendRawBytes(new Uint8Array(r)),e(n);const o=n.buffer,i=new gs;i.appendByte(t),i.appendUint53(o.byteLength-r);const s=i.buffer,a=new ks;a.update(s),a.update(o.subarray(r));const u=a.digest(),c=u.subarray(0,4);return o.set(Es,r-s.byteLength-4-Es.byteLength),o.set(c,r-s.byteLength-4),o.set(s,r-s.byteLength),{hash:u,bytes:o.subarray(r-s.byteLength-4-Es.byteLength)}}function ra(t,e){if(!hs(t.readRawBytes(Es.byteLength),Es))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");const r=t.readRawBytes(4),n=t.offset,o=t.readByte(),i=t.readUint53(),s={chunkType:o,chunkLength:i,chunkData:t.readRawBytes(i)};if(e){const e=new ks;e.update(t.buf.subarray(n,t.offset));const o=e.digest();if(!hs(o.subarray(0,4),r))throw new RangeError("checksum does not match data");s.hash=ps(o)}return s}function na(t){const{changes:e,actorIds:r}=zs([t],!0),n=e[0],{hash:o,bytes:i}=ea(1,(t=>{if(!Array.isArray(n.deps))throw new TypeError("deps is not an array");t.appendUint53(n.deps.length);for(let r of n.deps.slice().sort())t.appendRawBytes(ds(r));t.appendHexString(n.actor),t.appendUint53(n.seq),t.appendUint53(n.startOp),t.appendInt53(n.time),t.appendPrefixedString(n.message||""),t.appendUint53(r.length-1);for(let n of r.slice(1))t.appendHexString(n);const e=Ks(n.ops,!1);Qs(t,e);for(let r of e)t.appendRawBytes(r.encoder.buffer);n.extraBytes&&t.appendRawBytes(n.extraBytes)})),s=ps(o);if(t.hash&&t.hash!==s)throw new RangeError(`Change hash does not match encoding: ${t.hash} != ${s}`);return i.byteLength>=256?function(t){const e=ra(new ys(t),!1);if(1!==e.chunkType)throw new RangeError(`Unexpected chunk type: ${e.chunkType}`);const r=us.deflateRaw(e.chunkData),n=new gs;return n.appendRawBytes(t.subarray(0,8)),n.appendByte(2),n.appendUint53(r.byteLength),n.appendRawBytes(r),n.buffer}(i):i}function oa(t){const e=new ys(t),r=ra(e,!0),n=new ys(r.chunkData);if(!e.done)throw new RangeError("Encoded change has trailing data");if(1!==r.chunkType)throw new RangeError(`Unexpected chunk type: ${r.chunkType}`);const o=ta(n),i=Xs(n);for(let s=0;s<i.length;s++){if(0!=(8&i[s].columnId))throw new RangeError("change must not contain deflated columns");i[s].buffer=n.readRawBytes(i[s].bufferLen)}if(!n.done){const t=n.buf.byteLength-n.offset;o.extraBytes=n.readRawBytes(t)}return o.columns=i,o.hash=r.hash,o}function ia(t){2===t[8]&&(t=sa(t));const e=oa(t);return e.ops=Zs(Js(e.columns,e.actorIds,Rs),!1),delete e.actorIds,delete e.columns,e}function sa(t){const e=ra(new ys(t),!1);if(2!==e.chunkType)throw new RangeError(`Unexpected chunk type: ${e.chunkType}`);const r=us.inflateRaw(e.chunkData),n=new gs;return n.appendRawBytes(t.subarray(0,8)),n.appendByte(1),n.appendUint53(r.byteLength),n.appendRawBytes(r),n.buffer}function aa(t){let e=new ys(t),r=[],n=0;for(;!e.done;)ra(e,!1),r.push(t.subarray(n,e.offset)),n=e.offset;return r}function ua(t){let e=[];for(let r of t)for(let t of aa(r))0===t[8]?e=e.concat(fa(t)):1!==t[8]&&2!==t[8]||e.push(ia(t));return e}function ca(t,e){if(t===e)return 0;if("_root"===t)return-1;if("_root"===e)return 1;const r=ls(t),n=ls(e);return r.counter<n.counter?-1:r.counter>n.counter?1:r.actorId<n.actorId?-1:r.actorId>n.actorId?1:0}function la(t){const{changes:e,actorIds:r}=zs(ua(t),!1),{changesColumns:n,heads:o}=function(t){const e={actor:new bs("uint"),seq:new _s,maxOp:new _s,time:new _s,message:new bs("utf8"),depsNum:new bs("uint"),depsIndex:new _s,extraLen:new bs("uint"),extraRaw:new gs};let r={},n={};for(let i=0;i<t.length;i++){const o=t[i];r[o.hash]=i,n[o.hash]=!0,e.actor.appendValue(o.actorNum),e.seq.appendValue(o.seq),e.maxOp.appendValue(o.startOp+o.ops.length-1),e.time.appendValue(o.time),e.message.appendValue(o.message),e.depsNum.appendValue(o.deps.length);for(let t of o.deps){if("number"!=typeof r[t])throw new RangeError(`Unknown dependency hash: ${t}`);e.depsIndex.appendValue(r[t]),n[t]&&delete n[t]}o.extraBytes?(e.extraLen.appendValue(o.extraBytes.byteLength<<4|Ss.BYTES),e.extraRaw.appendRawBytes(o.extraBytes)):e.extraLen.appendValue(Ss.BYTES)}let o=[];for(let[i,s]of Object.entries(Ts))o.push({id:s,name:i,encoder:e[i]});return o.sort(((t,e)=>t.id-e.id)),{changesColumns:o,heads:Object.keys(n).sort()}}(e),i=Ks(function(t){let e={},r={},n={};for(let i of t)for(let t=0;t<i.ops.length;t++){const o=i.ops[t],s=`${o.id.counter}@${o.id.actorId}`,a="_root"===o.obj?"_root":`${o.obj.counter}@${o.obj.actorId}`;let u;if(o.action.startsWith("make")&&(n[s]=o.action,"makeList"!==o.action&&"makeText"!==o.action||(r[s]={_head:[]})),"_root"===a||"makeMap"===n[a]||"makeTable"===n[a])u=o.key;else{if("makeList"!==n[a]&&"makeText"!==n[a])throw new RangeError(`Unknown object type for object ${a}`);if(o.insert){u=s;const t="_head"===o.elemId?"_head":`${o.elemId.counter}@${o.elemId.actorId}`;r[a][t].push(s),r[a][s]=[]}else u=`${o.elemId.counter}@${o.elemId.actorId}`}e[a]||(e[a]={}),e[a][u]||(e[a][u]={}),e[a][u][s]=o,o.succ=[];for(let t of o.pred){const r=`${t.counter}@${t.actorId}`;if(!e[a][u][r])throw new RangeError(`No predecessor operation ${r}`);e[a][u][r].succ.push(o.id)}}let o=[];for(let i of Object.keys(e).sort(ca)){let t=[];if("makeList"===n[i]||"makeText"===n[i]){let e=["_head"];for(;e.length>0;){const n=e.pop();"_head"!==n&&t.push(n);for(let t of r[i][n].sort(ca))e.push(t)}}else t=Object.keys(e[i]).sort();for(let r of t)for(let t of Object.keys(e[i][r]).sort(ca)){const n=e[i][r][t];"del"!==n.action&&o.push(n)}}return o}(e),!0);for(let s of n)da(s);for(let s of i)da(s);return ea(0,(t=>{t.appendUint53(r.length);for(let e of r)t.appendHexString(e);t.appendUint53(o.length);for(let e of o.sort())t.appendRawBytes(ds(e));Qs(t,n),Qs(t,i);for(let e of n)t.appendRawBytes(e.encoder.buffer);for(let e of i)t.appendRawBytes(e.encoder.buffer)})).bytes}function ha(t){const e=new ys(t),r=ra(e,!0),n=new ys(r.chunkData);if(!e.done)throw new RangeError("Encoded document has trailing data");if(0!==r.chunkType)throw new RangeError(`Unexpected chunk type: ${r.chunkType}`);const o=[],i=n.readUint53();for(let l=0;l<i;l++)o.push(n.readHexString());const s=[],a=n.readUint53();for(let l=0;l<a;l++)s.push(ps(n.readRawBytes(32)));const u=Xs(n),c=Xs(n);for(let l=0;l<u.length;l++)u[l].buffer=n.readRawBytes(u[l].bufferLen),pa(u[l]);for(let l=0;l<c.length;l++)c[l].buffer=n.readRawBytes(c[l].bufferLen),pa(c[l]);return{changesColumns:u,opsColumns:c,actorIds:o,heads:s,extraBytes:n.readRawBytes(n.buf.byteLength-n.offset)}}function fa(t){const{changesColumns:e,opsColumns:r,actorIds:n,heads:o}=ha(t),i=Js(e,n,Ts);return function(t,e){let r={};for(let o of t){if(o.ops=[],r[o.actor]||(r[o.actor]=[]),o.seq!==r[o.actor].length+1)throw new RangeError(`Expected seq = ${r[o.actor].length+1}, got ${o.seq}`);if(o.seq>1&&r[o.actor][o.seq-2].maxOp>o.maxOp)throw new RangeError("maxOp must increase monotonically per actor");r[o.actor].push(o)}let n={};for(let o of e){if("del"===o.action)throw new RangeError("document should not contain del operations");o.pred=n[o.id]?n[o.id].pred:[],n[o.id]=o;for(let t of o.succ){if(!n[t])if(o.elemId){const e=o.insert?o.id:o.elemId;n[t]={id:t,action:"del",obj:o.obj,elemId:e,pred:[]}}else n[t]={id:t,action:"del",obj:o.obj,key:o.key,pred:[]};n[t].pred.push(o.id)}delete o.succ}for(let o of Object.values(n))"del"===o.action&&e.push(o);for(let o of e){const{counter:t,actorId:e}=ls(o.id),n=r[e];let i=0,s=n.length;for(;i<s;){const e=Math.floor((i+s)/2);n[e].maxOp<t?i=e+1:s=e}if(i>=n.length)throw new RangeError(`Operation ID ${o.id} outside of allowed range`);n[i].ops.push(o)}for(let o of t){o.ops.sort(((t,e)=>ca(t.id,e.id))),o.startOp=o.maxOp-o.ops.length+1,delete o.maxOp;for(let t=0;t<o.ops.length;t++){const e=o.ops[t],r=`${o.startOp+t}@${o.actor}`;if(e.id!==r)throw new RangeError(`Expected opId ${r}, got ${e.id}`);delete e.id}}}(i,Zs(Js(r,n,Cs),!0)),function(t,e){let r={};for(let s=0;s<t.length;s++){let e=t[s];e.deps=[];for(let n of e.depsNum.map((t=>t.depsIndex))){if(!t[n]||!t[n].hash)throw new RangeError(`No hash for index ${n} while processing index ${s}`);const o=t[n].hash;e.deps.push(o),r[o]&&delete r[o]}if(e.deps.sort(),delete e.depsNum,e.extraLen_datatype!==Ss.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${Ss.BYTES}`);e.extraBytes=e.extraLen,delete e.extraLen_datatype,t[s]=ia(na(e)),r[t[s].hash]=!0}const n=Object.keys(r).sort();let o=n.length===e.length,i=0;for(;o&&i<n.length;)o=n[i]===e[i],i++;if(!o)throw new RangeError(`Mismatched heads hashes: expected ${e.join(", ")}, got ${n.join(", ")}`)}(i,o),i}function da(t){t.encoder.buffer.byteLength>=256&&(t.encoder={buffer:us.deflateRaw(t.encoder.buffer)},t.id|=8)}function pa(t){0!=(8&t.columnId)&&(t.buffer=us.inflateRaw(t.buffer),t.columnId^=8)}function ga(t,e){let r={},n=null;for(let o of e.ops)if("set"===o.actionName&&"counter"===o.value.datatype){n||(n={opId:o.opId,value:0,succ:{}}),n.value+=o.value.value;for(let t of o.succ)n.succ[t]=!0}else if("inc"===o.actionName){if(!n)throw new RangeError(`inc operation ${o.opId} without a counter`);n.value+=o.value.value,delete n.succ[o.opId];for(let t of o.succ)n.succ[t]=!0}else if(0===o.succ.length)if(o.actionName.startsWith("make"))r[o.opId]=t[o.opId];else if("set"===o.actionName)r[o.opId]={value:o.value.value,type:"value"},o.value.datatype&&(r[o.opId].datatype=o.value.datatype);else{if("link"!==o.actionName)throw new RangeError(`Unexpected action type: ${o.actionName}`);if(!o.childId)throw new RangeError(`link operation ${o.opId} without a childId`);r[o.opId]=t[o.childId]}if(n&&0===Object.keys(n.succ).length&&(r[n.opId]={type:"value",value:n.value,datatype:"counter"}),Object.keys(r).length>0){let n=t[e.objId];return"map"===n.type||"table"===n.type?n.props[e.key]=r:"list"!==n.type&&"text"!==n.type||function(t,e,r,n){let o=!0;const i=Object.keys(e).sort(((t,e)=>Ns(ls(t),ls(e))));for(const s of i)o?t.edits.push({action:"insert",value:e[s],elemId:r,opId:s,index:n}):t.edits.push({action:"update",value:e[s],opId:s,index:n}),o=!1}(n,r,e.key,e.index),!0}return!1}function ya(t){if("list"===t.type||"text"===t.type){t.edits.forEach((t=>ya(t.value)));let e=t.edits;t.edits=[];for(const r of e)ba(t.edits,r)}else if("map"===t.type||"table"===t.type)for(const e of Object.keys(t.props))for(const r of Object.keys(t.props[e]))ya(t.props[e][r])}function ba(t,e){if(0===t.length)return void t.push(e);let r=t[t.length-1];"insert"===r.action&&"insert"===e.action&&r.index===e.index-1&&"value"===r.value.type&&"value"===e.value.type&&r.elemId===r.opId&&e.elemId===e.opId&&va(r.elemId,e.elemId,1)?(r.action="multi-insert",r.values=[r.value.value,e.value.value],delete r.value,delete r.opId):"multi-insert"===r.action&&"insert"===e.action&&r.index+r.values.length===e.index&&"value"===e.value.type&&e.elemId===e.opId&&va(r.elemId,e.elemId,r.values.length)?r.values.push(e.value.value):"remove"===r.action&&"remove"===e.action&&r.index===e.index?r.count+=e.count:t.push(e)}function va(t,e,r=1){const n=ls(t),o=ls(e);return n.actorId===o.actorId&&n.counter+r===o.counter}function _a(t,e,r){const{objActor:n,objCtr:o,keyActor:i,keyCtr:s,keyStr:a,idActor:u,idCtr:c,insert:l}=t,[h,f,,,d,p,g,y,b,,,,,v]=e.map((t=>t.decoder));let _=0,m=0,w=!1,I=null,k=null,E=null,x=null,S=null,A=null,O=0;if(null!==o)for(;(!f.done||!h.done||!b.done)&&(k=f.readValue(),I=r[h.readValue()],b.skipValues(1),null===k||!I||k<o||k===o&&I<n);)_+=1;if(k!==o||I!==n)return{skipCount:_,visibleCount:m};if(null!==a){for(d.skipValues(_);!d.done;){const t=h.readValue();if(I=null===t?null:r[t],k=f.readValue(),S=d.readValue(),!(null!==S&&S<a&&k===o&&I===n))break;_+=1}return{skipCount:_,visibleCount:m}}if(g.skipValues(_),p.skipValues(_),y.skipValues(_),v.skipValues(_),x=g.readValue(),E=r[p.readValue()],A=y.readValue(),O=v.readValue(),l){if(null!==s&&s>0&&null!==i){for(_+=1;!(g.done||p.done||x===s&&E===i)&&(A&&(w=!1),0!==O||w||(m+=1,w=!0),x=g.readValue(),E=r[p.readValue()],k=f.readValue(),I=r[h.readValue()],A=y.readValue(),O=v.readValue(),k===o&&I===n);)_+=1;if(k!==o||I!==n||x!==s||E!==i||!A)throw new RangeError(`Reference element not found: ${s}@${i}`);if(A&&(w=!1),0!==O||w||(m+=1,w=!0),g.done||p.done)return{skipCount:_,visibleCount:m};x=g.readValue(),E=r[p.readValue()],k=f.readValue(),I=r[h.readValue()],A=y.readValue(),O=v.readValue()}for(;(!A||x>c||x===c&&E>u)&&k===o&&I===n&&(_+=1,A&&(w=!1),0!==O||w||(m+=1,w=!0),!g.done&&!p.done);)x=g.readValue(),E=r[p.readValue()],k=f.readValue(),I=r[h.readValue()],A=y.readValue(),O=v.readValue()}else if(null!==s&&s>0&&null!==i){for(;!(A&&x===s&&E===i||k!==o||I!==n||(_+=1,A&&(w=!1),0!==O||w||(m+=1,w=!0),g.done||p.done));)x=g.readValue(),E=r[p.readValue()],k=f.readValue(),I=r[h.readValue()],A=y.readValue(),O=v.readValue();if(k!==o||I!==n||x!==s||E!==i||!A)throw new RangeError(`Element not found for update: ${s}@${i}`)}return{skipCount:_,visibleCount:m}}function ma(t,e,r){if(0===r)return;let n=0,o=-1,i=0,s=-1,a=0;for(let u of t){for(;n<e.length&&e[n].columnId<u.columnId;)n++;let t=null;n<e.length&&e[n].columnId===u.columnId&&e[n].decoder.buf.byteLength>0&&(t=e[n].decoder);const c=u.columnId>>4===o?i:r;if(u.columnId%8===xs.GROUP_CARD)o=u.columnId>>4,t?i=u.encoder.copyFrom(t,{count:r,sumValues:!0}).sum:(u.encoder.appendValue(0,r),i=0);else if(u.columnId%8===xs.VALUE_LEN)if(t){if(n+1===e.length||e[n+1].columnId!==u.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");s=u.columnId+1,a=u.encoder.copyFrom(t,{count:c,sumValues:!0,sumShift:4}).sum}else u.encoder.appendValue(null,c),s=u.columnId+1,a=0;else if(u.columnId%8===xs.VALUE_RAW){if(u.columnId!==s)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");a>0&&u.encoder.appendRawBytes(t.readRawBytes(a))}else if(t)u.encoder.copyFrom(t,{count:c});else{const t=u.columnId%8!==xs.BOOLEAN&&null;u.encoder.appendValue(t,c)}}}function wa(t,e){let r,n=[],o=-1,i=0,s=-1,a=0;for(let u of t){if(u.columnId%8===xs.VALUE_RAW){if(u.columnId!==s)throw new RangeError("unexpected VALUE_RAW column");r=u.decoder.readRawBytes(a)}else if(u.columnId%8===xs.GROUP_CARD)o=u.columnId>>4,i=u.decoder.readValue()||0,r=i;else if(u.columnId>>4===o){r=[],u.columnId%8===xs.VALUE_LEN&&(s=u.columnId+1,a=0);for(let t=0;t<i;t++){let t=u.decoder.readValue();u.columnId%8===xs.ACTOR_ID&&e&&"number"==typeof t&&(t=e[t]),u.columnId%8===xs.VALUE_LEN&&(a+=r>>>4),r.push(t)}}else r=u.decoder.readValue(),u.columnId%8===xs.ACTOR_ID&&e&&"number"==typeof r&&(r=e[r]),u.columnId%8===xs.VALUE_LEN&&(s=u.columnId+1,a=r>>>4);n.push(r)}return n}function Ia(t,e,r){let n=0,o=-1,i=0;for(let s of t){for(;n<e.length&&e[n].columnId<s.columnId;)n++;if(n<e.length&&e[n].columnId===s.columnId){const t=r[n];if(s.columnId%8===xs.GROUP_CARD)o=s.columnId>>4,i=t,s.encoder.appendValue(t);else if(s.columnId>>4===o){if(!Array.isArray(t)||t.length!==i)throw new RangeError("bad group value");for(let e of t)s.encoder.appendValue(e)}else s.columnId%8===xs.VALUE_RAW?s.encoder.appendRawBytes(t):s.encoder.appendValue(t)}else if(s.columnId%8===xs.GROUP_CARD)o=s.columnId>>4,i=0,s.encoder.appendValue(0);else if(s.columnId%8!==xs.VALUE_RAW){const t=s.columnId>>4===o?i:1;let e=null;s.columnId%8===xs.BOOLEAN&&(e=!1),s.columnId%8===xs.VALUE_LEN&&(e=0),s.encoder.appendValue(e,t)}}}function ka(t,e,r){const n=t.actorIds[0],[o,i,s,a,u,,,c,l]=e.map((t=>t.decoder));let h=null,f=null,d=t.startOp,p=[],g={};for(;!l.done;){const e=o.readValue(),y=s.readValue(),b={objActor:null===e?null:t.actorIds[e],objCtr:i.readValue(),keyActor:null===y?null:t.actorIds[y],keyCtr:a.readValue(),keyStr:u.readValue(),idActor:n,idCtr:d,insert:c.readValue(),action:l.readValue(),idActorIndex:-1,consecutiveOps:1};if(null===b.objCtr&&null!==b.objActor||null!==b.objCtr&&"string"!=typeof b.objActor)throw new RangeError(`Mismatched object reference: (${b.objCtr}, ${b.objActor})`);if(null===b.keyCtr&&null!==b.keyActor||0===b.keyCtr&&null!==b.keyActor||b.keyCtr>0&&"string"!=typeof b.keyActor)throw new RangeError(`Mismatched operation key: (${b.keyCtr}, ${b.keyActor})`);if(b.opId=`${b.idCtr}@${b.idActor}`,b.objId=null===b.objCtr?"_root":`${b.objCtr}@${b.objActor}`,g[b.objId]=!0,b.action%2==0){let t;t=null!==b.keyStr?b.keyStr:b.insert?b.opId:`${b.keyCtr}@${b.keyActor}`;const e=b.action<As.length?Os[As[b.action]]:null;r[b.opId]={parentObj:b.objId,parentKey:t,opId:b.opId,type:e,children:{}},g[b.opId]=!0,Ls(r,[b.objId,"children",t,b.opId],{objectId:b.opId,type:e,props:{}})}h?b.objActor===f.objActor&&b.objCtr===f.objCtr&&(null!==b.keyStr&&null!==f.keyStr&&f.keyStr<=b.keyStr||null===b.keyStr&&null===f.keyStr&&!f.insert&&!b.insert||null===b.keyStr&&null===f.keyStr&&f.insert&&b.insert&&b.keyActor===f.idActor&&b.keyCtr===f.idCtr)?(h.consecutiveOps+=1,f=b):(p.push(h),h=b,f=b):(h=b,f=b),d+=1}return h&&p.push(h),{opSequences:p,objectIds:Object.keys(g)}}class Ea{constructor(t){if(this.maxOp=0,this.changes=[],this.changeByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},t){const e=ha(t);for(let r of ua([t])){const t=na(r);this.changes.push(t),this.changeByHash[r.hash]=t,this.clock[r.actor]=Math.max(r.seq,this.clock[r.actor]||0)}this.actorIds=e.actorIds,this.heads=e.heads,this.docColumns=Ys(e.opsColumns,Cs),this.numOps=0,this.objectMeta={}}else this.docColumns=Ys([],Cs),this.numOps=0,this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}}}clone(){let t=new Ea;return t.maxOp=this.maxOp,t.changes=this.changes,t.changeByHash=this.changeByHash,t.actorIds=this.actorIds,t.heads=this.heads,t.clock=this.clock,t.docColumns=this.docColumns,t.numOps=this.numOps,t.objectMeta=this.objectMeta,t}updatePatchProperty(t,e,r,n,o,i,s){const a=e.objId,u=r[4]?r[4]:r[7]?`${r[6]}@${n.actorIds[r[5]]}`:`${r[3]}@${n.actorIds[r[2]]}`,c=void 0!==s&&r[13]>0;t[a]||(t[a]={objectId:a,type:n.objectMeta[a].type,props:{}});let l=t[a];if(null===r[4]?(l.edits||(l.edits=[]),c||(o[u]?"remove"===o[u].action&&(l.edits.pop(),o[u].action="update"):(l.edits.push({action:"insert",index:i,elemId:u}),o[u]={action:"insert",visibleOps:[],hasChild:!1})),0===s&&(o[u]?"insert"===o[u].action&&(l.edits.pop(),o[u].action="update"):(l.edits.push({action:"remove",index:i}),o[u]={action:"remove",visibleOps:[],hasChild:!1})),!l.props[i]&&o[u]&&["insert","update"].includes(o[u].action)&&(l.props[i]={})):l.props[r[4]]||(l.props[r[4]]={}),!c&&(o[u]||(o[u]={visibleOps:[],hasChild:!1}),o[u].visibleOps.push(r),o[u].hasChild=o[u].hasChild||r[8]%2==0,o[u].hasChild)){let t={};for(let e of o[u].visibleOps){const r=`${e[6]}@${n.actorIds[e[5]]}`;if("set"===As[e[8]])t[r]=Ps(e[9],e[10]);else if(e[8]%2==0){const n=e[8]<As.length?Os[As[e[8]]]:null;t[r]={objectId:r,type:n,props:{}}}}Ls(n.objectMeta,[a,"children",u],t)}const h=`${r[6]}@${n.actorIds[r[5]]}`,f=null!==r[4]?r[4]:i;if(c&&"set"===As[r[8]]&&(15&r[9])===Ss.COUNTER){o[u]||(o[u]={visibleOps:[],hasChild:!1}),o[u].counterStates||(o[u].counterStates={});let t=o[u].counterStates,e={opId:h,value:Ps(r[9],r[10]).value,succs:{}};for(let o=0;o<r[13];o++){const i=`${r[15][o]}@${n.actorIds[r[14][o]]}`;t[i]=e,e.succs[i]=!0}}else if("inc"===As[r[8]]){if(!o[u]||!o[u].counterStates||!o[u].counterStates[h])throw new RangeError(`increment operation ${h} for unknown counter`);let t=o[u].counterStates[h];t.value+=Ps(r[9],r[10]).value,delete t.succs[h],0===Object.keys(t.succs).length&&l.props[f]&&(l.props[f][t.opId]={datatype:"counter",value:t.value})}else if(l.props[f]&&!c)if("set"===As[r[8]])l.props[f][h]=Ps(r[9],r[10]);else if(r[8]%2==0){if(!t[h]){const e=r[8]<As.length?Os[As[r[8]]]:null;t[h]={objectId:h,type:e,props:{}}}l.props[f][h]=t[h]}}mergeDocChangeOps(t,e,r,n,o,i){if(o.opsCols[0].columnId!==Cs.objActor||n[0].columnId!==Rs.objActor||o.opsCols[1].columnId!==Cs.objCtr||n[1].columnId!==Rs.objCtr||o.opsCols[2].columnId!==Cs.keyActor||n[2].columnId!==Rs.keyActor||o.opsCols[3].columnId!==Cs.keyCtr||n[3].columnId!==Rs.keyCtr||o.opsCols[4].columnId!==Cs.keyStr||n[4].columnId!==Rs.keyStr||o.opsCols[5].columnId!==Cs.idActor||n[5].columnId!==Rs.idActor||o.opsCols[6].columnId!==Cs.idCtr||n[6].columnId!==Rs.idCtr||o.opsCols[7].columnId!==Cs.insert||n[7].columnId!==Rs.insert||o.opsCols[8].columnId!==Cs.action||n[8].columnId!==Rs.action||o.opsCols[9].columnId!==Cs.valLen||n[9].columnId!==Rs.valLen||o.opsCols[10].columnId!==Cs.valRaw||n[10].columnId!==Rs.valRaw||o.opsCols[13].columnId!==Cs.succNum||n[13].columnId!==Rs.predNum||o.opsCols[14].columnId!==Cs.succActor||n[14].columnId!==Rs.predActor||o.opsCols[15].columnId!==Cs.succCtr||n[15].columnId!==Rs.predCtr)throw new RangeError("unexpected columnId");let s=r.consecutiveOps,a=0,u=r.idCtr,c=!1,l=!1,h={},f=o.opsCols[8].decoder.done?null:wa(o.opsCols),d=null===f?0:1,p=null===f?0:f[13],g=null,y=null,b=[],v=[];for(;;){if(0===b.length)for(c=!1;0===b.length||r.insert||null!==y[4]&&y[4]===b[0][4]||null===y[4]&&y[2]===b[0][2]&&y[3]===b[0][3];){if(null!==y&&(b.push(y),v.push(new Array(y[13]))),0===s){y=null;break}y=wa(n,o.actorTable),y[5]=r.idActorIndex,y[6]=u,s--,u++}b.length>0&&(g=b[0]);const _=f&&f[0]===g[0]&&f[1]===g[1],m=f&&null!==f[4]&&f[4]===g[4],w=f&&null===f[4]&&null===g[4]&&(!f[7]&&f[2]===g[2]&&f[3]===g[3]||f[7]&&f[5]===g[2]&&f[6]===g[3]);if(0===b.length&&(!_||!m&&!w))break;let I=!1,k=0;if(r.insert||!_||null===f[4]&&null!==g[4]||null!==f[4]&&null!==g[4]&&g[4]<f[4]){if(k=b.length,!_&&!c&&null===g[4]&&!g[7])throw new RangeError(`could not find list element with ID: ${g[3]}@${o.actorIds[g[2]]}`)}else if(m||w||c){for(let t=0;t<b.length;t++){const e=b[t];for(let n=0;n<e[13];n++)if(e[14][n]===f[5]&&e[15][n]===f[6]){let i=0;for(;i<f[13]&&(f[15][i]<e[6]||f[15][i]===e[6]&&o.actorIds[f[14][i]]<r.idActor);)i++;f[15].splice(i,0,e[6]),f[14].splice(i,0,r.idActorIndex),f[13]++,v[t][n]=!0;break}}if(w&&(c=!0),c&&!w)k=b.length;else if(0===b.length||f[6]<g[6]||f[6]===g[6]&&o.actorIds[f[5]]<r.idActor){I=!0,this.updatePatchProperty(t,r,f,o,h,i,p);for(let t=b.length-1;t>=0;t--){let e=!0;for(let r=0;r<b[t][13];r++)v[t][r]||(e=!1);"del"===As[b[t][8]]&&e&&(b.splice(t,1),v.splice(t,1))}}else{if(f[6]===g[6]&&o.actorIds[f[5]]===r.idActor)throw new RangeError(`duplicate operation ID: ${g[6]}@${r.idActor}`);k=1}}else I=!0;if(I&&(Ia(e,o.opsCols,f),f[7]&&l&&(l=!1,i++),0===f[13]&&(l=!0),a++,f=o.opsCols[8].decoder.done?null:wa(o.opsCols),null!==f&&(d++,p=f[13])),k>0){for(let s=0;s<k;s++){let a=b[s];for(let t=0;t<a[13];t++)if(!v[s][t])throw new RangeError(`no matching operation for pred: ${a[15][t]}@${o.actorIds[a[14][t]]}`);this.updatePatchProperty(t,r,a,o,h,i),Ia(e,n,a),a[7]?(l=!1,i++):l=!0}k===b.length?(b.length=0,v.length=0):(b.splice(0,k),v.splice(0,k)),a+=k}}return f&&(Ia(e,o.opsCols,f),a++),{opsAppended:a,docOpsConsumed:d}}applyOps(t,e,r,n){for(let c of n.opsCols)c.decoder.reset();const{skipCount:o,visibleCount:i}=_a(e,n.opsCols,n.actorIds);if(n.lastIndex[e.objId]&&i<n.lastIndex[e.objId])throw new RangeError("list element accesses must occur in ascending order");n.lastIndex[e.objId]=i;for(let c of n.opsCols)c.decoder.reset();let s=n.allCols.map((t=>({columnId:t,encoder:Gs(t)})));ma(s,n.opsCols,o);const{opsAppended:a,docOpsConsumed:u}=this.mergeDocChangeOps(t,s,e,r,n,i);ma(s,n.opsCols,n.numOps-o-u);for(let c of n.opsCols)if(!c.decoder.done)throw new RangeError(`excess ops in ${c.columnName} column`);n.opsCols=s.map((t=>{const e=Ws(t.columnId,t.encoder.buffer);return{columnId:t.columnId,columnName:Us[t.columnId],decoder:e}})),n.numOps=n.numOps+a-u}getAllColumns(t){const e=["objActor","objCtr","keyActor","keyCtr","keyStr","idActor","idCtr","insert","action","valLen","valRaw","chldActor","chldCtr","predNum","predActor","predCtr"];let r={};for(let n=0;n<e.length;n++)if(t[n].columnName!==e[n])throw new RangeError(`Expected column ${e[n]} at index ${n}, got ${t[n].columnName}`);for(let n of t)r[n.columnId]=!0;for(let n of Object.values(Cs))r[n]=!0;return delete r[Rs.predNum],delete r[Rs.predActor],delete r[Rs.predCtr],Object.keys(r).map((t=>parseInt(t,10))).sort(((t,e)=>t-e))}getActorTable(t,e){if(t.indexOf(e.actorIds[0])<0){if(1!==e.seq)throw new RangeError(`Seq ${e.seq} is the first change for actor ${e.actorIds[0]}`);t=t.concat([e.actorIds[0]])}const r=[];for(let n of e.actorIds){const e=t.indexOf(n);if(e<0)throw new RangeError(`actorId ${n} is not known to document`);r.push(e)}return{actorIds:t,actorTable:r}}setupPatches(t,e,r){for(let n of e){let e=r.objectMeta[n],o=null,i=!1;for(;;){if(t[n]||(t[n]={objectId:n,type:e.type,props:{}}),o){let s=o.parentKey;if("list"===e.type||"text"===e.type){const t=ls(n),e=ls(s),o={objActor:t.actorId,objCtr:t.counter,keyActor:e.actorId,keyCtr:e.counter,keyStr:null,insert:!1},{visibleCount:i}=_a(o,r.opsCols,r.actorIds);s=i}t[n].props[s]||(t[n].props[s]={});let a=t[n].props[s];for(let[r,n]of Object.entries(e.children[o.parentKey]))a[r]?i=!0:n.objectId?(t[n.objectId]||(t[n.objectId]=Object.assign({},n,{props:{}})),a[r]=t[n.objectId]):a[r]=n;if(!a[o.opId])throw new RangeError(`object metadata did not contain child entry for ${o.opId}`)}if(i||!e.parentObj)break;o=e,n=e.parentObj,e=r.objectMeta[n]}}return t}applyChanges(t,e=!1){let r={_root:{objectId:"_root",type:"map",props:{}}},n={actorIds:this.actorIds,opsCols:this.docColumns,numOps:this.numOps,objectMeta:Object.assign({},this.objectMeta),lastIndex:{}},o={},i=Object.assign({},this.changeByHash),s=this.maxOp,a={},u=Object.assign({},this.clock);for(let h of this.heads)a[h]=!0;let c=[];for(let h of t){const t=oa(h);c.push(t);for(let r of t.deps){if(!i[r])throw new RangeError(`missing dependency ${r}`);delete a[r]}i[t.hash]=h,a[t.hash]=!0;const e=(u[t.actor]||0)+1;if(t.seq!==e)throw new RangeError(`Expected seq ${e}, got seq ${t.seq} from actor ${t.actor}`);u[t.actor]=t.seq;const l=Ys(t.columns,Rs);n.allCols=this.getAllColumns(l),Object.assign(n,this.getActorTable(n.actorIds,t));const f=n.actorIds.indexOf(t.actorIds[0]),{opSequences:d,objectIds:p}=ka(t,l,n.objectMeta);for(let r of p)o[r]=!0;const g=d[d.length-1];g&&(s=Math.max(s,g.idCtr+g.consecutiveOps-1));for(let r of l)r.decoder.reset();for(let o of d)o.idActorIndex=f,this.applyOps(r,o,l,n)}this.setupPatches(r,Object.keys(o),n),this.maxOp=s,this.changes=this.changes.concat(t),this.changeByHash=i,this.actorIds=n.actorIds,this.heads=Object.keys(a).sort(),this.clock=u,this.docColumns=n.opsCols,this.numOps=n.numOps,this.objectMeta=n.objectMeta;for(let h of c)1===h.seq&&(this.hashesByActor[h.actor]=[]),this.hashesByActor[h.actor].push(h.hash);let l={maxOp:s,clock:u,deps:this.heads,diffs:r._root};return e&&1===c.length&&(l.actor=c[0].actor,l.seq=c[0].seq),l}getChanges(t){const e={},r=this.changes.map(oa);for(let o of t)e[o]=!0;for(let o=r.length-1;o>=0;o--)if(e[r[o].hash])for(let t of r[o].deps)e[t]=!0;let n=[];for(let o=0;o<r.length;o++)e[r[o].hash]||n.push(this.changes[o]);return n}getMissingDeps(){return[]}save(){return la(this.changes)}}var xa={COLUMN_TYPE:xs,VALUE_TYPE:Ss,ACTIONS:As,DOC_OPS_COLUMNS:Cs,CHANGE_COLUMNS:Rs,DOCUMENT_COLUMNS:Ts,splitContainers:aa,encodeChange:na,decodeChange:ia,decodeChangeMeta:function(t,e){2===t[8]&&(t=sa(t));const r=ra(new ys(t),e);if(1!==r.chunkType)throw new RangeError("Buffer chunk type is not a change");const n=ta(new ys(r.chunkData));return n.change=t,e&&(n.hash=r.hash),n},decodeChanges:ua,encodeDocument:la,decodeDocument:fa,getChangeChecksum:function(t){if(t[0]!==Es[0]||t[1]!==Es[1]||t[2]!==Es[2]||t[3]!==Es[3])throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");return(t[4]<<24|t[5]<<16|t[6]<<8|t[7])>>>0},appendEdit:ba,constructPatch:function(t){const{opsColumns:e,actorIds:r}=ha(t),n=Ys(e,Cs).reduce(((t,e)=>Object.assign(t,{[e.columnName]:e.decoder})),{});let o={_root:{objectId:"_root",type:"map",props:{}}},i=null;for(;!n.idActor.done;){const t=`${n.idCtr.readValue()}@${r[n.idActor.readValue()]}`,e=n.action.readValue(),s=As[e];if(e%2==0){const e=Os[s]||"unknown";o[t]="list"===e||"text"===e?{objectId:t,type:e,edits:[]}:{objectId:t,type:e,props:{}}}const a=n.objActor.readValue(),u=n.objCtr.readValue(),c=null===a?"_root":`${u}@${r[a]}`;let l=o[c];if(!l)throw new RangeError(`Operation for nonexistent object: ${c}`);const h=n.keyActor.readValue(),f=n.keyCtr.readValue(),d=n.keyStr.readValue(),p=!!n.insert.readValue(),g=n.chldActor.readValue(),y=n.chldCtr.readValue(),b=null===g?null:`${y}@${r[g]}`,v=n.valLen.readValue(),_=Ps(v,n.valRaw.readRawBytes(v>>4)),m=n.succNum.readValue();let w,I=[];for(let o=0;o<m;o++)I.push(`${n.succCtr.readValue()}@${r[n.succActor.readValue()]}`);if(s&&"unknown"!==l.type){if("list"===l.type||"text"===l.type){if(null===f||0===f&&!p)throw new RangeError(`Operation ${t} on ${l.type} object has no key`);w=p?t:`${f}@${r[h]}`}else{if(null===d)throw new RangeError(`Operation ${t} on ${l.type} object has no key`);w=d}if(!i||i.objId!==c||i.key!==w){let t=0;i&&(t=i.index,ga(o,i)&&(t+=1),i.objId!==c&&(t=0)),i={objId:c,key:w,index:t,ops:[]}}i.ops.push({opId:t,actionName:s,value:_,childId:b,succ:I})}}return i&&ga(o,i),ya(o._root),o._root},BackendDoc:Ea},Sa={exports:{}};Sa.exports=function(){var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function r(t){return s(t)?t:Z(t)}function n(t){return a(t)?t:G(t)}function o(t){return u(t)?t:W(t)}function i(t){return s(t)&&!c(t)?t:Y(t)}function s(t){return!(!t||!t[h])}function a(t){return!(!t||!t[f])}function u(t){return!(!t||!t[d])}function c(t){return a(t)||u(t)}function l(t){return!(!t||!t[p])}e(n,r),e(o,r),e(i,r),r.isIterable=s,r.isKeyed=a,r.isIndexed=u,r.isAssociative=c,r.isOrdered=l,r.Keyed=n,r.Indexed=o,r.Set=i;var h="@@__IMMUTABLE_ITERABLE__@@",f="@@__IMMUTABLE_KEYED__@@",d="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",g="delete",y=5,b=1<<y,v=b-1,_={},m={value:!1},w={value:!1};function I(t){return t.value=!1,t}function k(t){t&&(t.value=!0)}function E(){}function x(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function S(t){return void 0===t.size&&(t.size=t.__iterate(O)),t.size}function A(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?S(t)+e:e}function O(){return!0}function j(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function R(t,e){return U(t,e,0)}function C(t,e){return U(t,e,e)}function U(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var T=0,L=1,B=2,N="function"==typeof Symbol&&Symbol.iterator,z="@@iterator",M=N||z;function D(t){this.next=t}function $(t,e,r,n){var o=0===t?e:1===t?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function V(){return{value:void 0,done:!0}}function q(t){return!!K(t)}function P(t){return t&&"function"==typeof t.next}function F(t){var e=K(t);return e&&e.call(t)}function K(t){var e=t&&(N&&t[N]||t[z]);if("function"==typeof e)return e}function H(t){return t&&"number"==typeof t.length}function Z(t){return null==t?st():s(t)?t.toSeq():ct(t)}function G(t){return null==t?st().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():at(t)}function W(t){return null==t?st():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():ut(t)}function Y(t){return(null==t?st():s(t)?a(t)?t.entrySeq():t:ut(t)).toSetSeq()}D.prototype.toString=function(){return"[Iterator]"},D.KEYS=T,D.VALUES=L,D.ENTRIES=B,D.prototype.inspect=D.prototype.toSource=function(){return this.toString()},D.prototype[M]=function(){return this},e(Z,r),Z.of=function(){return Z(arguments)},Z.prototype.toSeq=function(){return this},Z.prototype.toString=function(){return this.__toString("Seq {","}")},Z.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Z.prototype.__iterate=function(t,e){return ht(this,t,e,!0)},Z.prototype.__iterator=function(t,e){return ft(this,t,e,!0)},e(G,Z),G.prototype.toKeyedSeq=function(){return this},e(W,Z),W.of=function(){return W(arguments)},W.prototype.toIndexedSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq [","]")},W.prototype.__iterate=function(t,e){return ht(this,t,e,!1)},W.prototype.__iterator=function(t,e){return ft(this,t,e,!1)},e(Y,Z),Y.of=function(){return Y(arguments)},Y.prototype.toSetSeq=function(){return this},Z.isSeq=it,Z.Keyed=G,Z.Set=Y,Z.Indexed=W;var J,X,Q,tt="@@__IMMUTABLE_SEQ__@@";function et(t){this._array=t,this.size=t.length}function rt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function nt(t){this._iterable=t,this.size=t.length||t.size}function ot(t){this._iterator=t,this._iteratorCache=[]}function it(t){return!(!t||!t[tt])}function st(){return J||(J=new et([]))}function at(t){var e=Array.isArray(t)?new et(t).fromEntrySeq():P(t)?new ot(t).fromEntrySeq():q(t)?new nt(t).fromEntrySeq():"object"==typeof t?new rt(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function ut(t){var e=lt(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ct(t){var e=lt(t)||"object"==typeof t&&new rt(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function lt(t){return H(t)?new et(t):P(t)?new ot(t):q(t)?new nt(t):void 0}function ht(t,e,r,n){var o=t._cache;if(o){for(var i=o.length-1,s=0;s<=i;s++){var a=o[r?i-s:s];if(!1===e(a[1],n?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,r)}function ft(t,e,r,n){var o=t._cache;if(o){var i=o.length-1,s=0;return new D((function(){var t=o[r?i-s:s];return s++>i?V():$(e,n?t[0]:s-1,t[1])}))}return t.__iteratorUncached(e,r)}function dt(t,e){return e?pt(e,t,"",{"":t}):gt(t)}function pt(t,e,r,n){return Array.isArray(e)?t.call(n,r,W(e).map((function(r,n){return pt(t,r,n,e)}))):yt(e)?t.call(n,r,G(e).map((function(r,n){return pt(t,r,n,e)}))):e}function gt(t){return Array.isArray(t)?W(t).map(gt).toList():yt(t)?G(t).map(gt).toMap():t}function yt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function bt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function vt(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||u(t)!==u(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!c(t);if(l(t)){var n=t.entries();return e.every((function(t,e){var o=n.next().value;return o&&bt(o[1],t)&&(r||bt(o[0],e))}))&&n.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var h=!0,f=e.__iterate((function(e,n){if(r?!t.has(e):o?!bt(e,t.get(n,_)):!bt(t.get(n,_),e))return h=!1,!1}));return h&&t.size===f}function _t(t,e){if(!(this instanceof _t))return new _t(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(X)return X;X=this}}function mt(t,e){if(!t)throw new Error(e)}function wt(t,e,r){if(!(this instanceof wt))return new wt(t,e,r);if(mt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Q)return Q;Q=this}}function It(){throw TypeError("Abstract")}function kt(){}function Et(){}function xt(){}Z.prototype[tt]=!0,e(et,W),et.prototype.get=function(t,e){return this.has(t)?this._array[A(this,t)]:e},et.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===t(r[e?n-o:o],o,this))return o+1;return o},et.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,o=0;return new D((function(){return o>n?V():$(t,o,r[e?n-o++:o++])}))},e(rt,G),rt.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},rt.prototype.has=function(t){return this._object.hasOwnProperty(t)},rt.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var s=n[e?o-i:i];if(!1===t(r[s],s,this))return i+1}return i},rt.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,o=n.length-1,i=0;return new D((function(){var s=n[e?o-i:i];return i++>o?V():$(t,s,r[s])}))},rt.prototype[p]=!0,e(nt,W),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=F(this._iterable),n=0;if(P(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,n++,this););return n},nt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=F(this._iterable);if(!P(r))return new D(V);var n=0;return new D((function(){var e=r.next();return e.done?e:$(t,n++,e.value)}))},e(ot,W),ot.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r,n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===t(o[i],i++,this))return i;for(;!(r=n.next()).done;){var s=r.value;if(o[i]=s,!1===t(s,i++,this))break}return i},ot.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,o=0;return new D((function(){if(o>=n.length){var e=r.next();if(e.done)return e;n[o]=e.value}return $(t,o,n[o++])}))},e(_t,W),_t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},_t.prototype.get=function(t,e){return this.has(t)?this._value:e},_t.prototype.includes=function(t){return bt(this._value,t)},_t.prototype.slice=function(t,e){var r=this.size;return j(t,e,r)?this:new _t(this._value,C(e,r)-R(t,r))},_t.prototype.reverse=function(){return this},_t.prototype.indexOf=function(t){return bt(this._value,t)?0:-1},_t.prototype.lastIndexOf=function(t){return bt(this._value,t)?this.size:-1},_t.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},_t.prototype.__iterator=function(t,e){var r=this,n=0;return new D((function(){return n<r.size?$(t,n++,r._value):V()}))},_t.prototype.equals=function(t){return t instanceof _t?bt(this._value,t._value):vt(t)},e(wt,W),wt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},wt.prototype.get=function(t,e){return this.has(t)?this._start+A(this,t)*this._step:e},wt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},wt.prototype.slice=function(t,e){return j(t,e,this.size)?this:(t=R(t,this.size),(e=C(e,this.size))<=t?new wt(0,0):new wt(this.get(t,this._end),this.get(e,this._end),this._step))},wt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},wt.prototype.lastIndexOf=function(t){return this.indexOf(t)},wt.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,o=e?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===t(o,i,this))return i+1;o+=e?-n:n}return i},wt.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,o=e?this._start+r*n:this._start,i=0;return new D((function(){var s=o;return o+=e?-n:n,i>r?V():$(t,i++,s)}))},wt.prototype.equals=function(t){return t instanceof wt?this._start===t._start&&this._end===t._end&&this._step===t._step:vt(this,t)},e(It,r),e(kt,It),e(Et,It),e(xt,It),It.Keyed=kt,It.Indexed=Et,It.Set=xt;var St="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function At(t){return t>>>1&1073741824|3221225471&t}function Ot(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)r^=t/=4294967295;return At(r)}if("string"===e)return t.length>Dt?jt(t):Rt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return Ct(t);if("function"==typeof t.toString)return Rt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function jt(t){var e=qt[t];return void 0===e&&(e=Rt(t),Vt===$t&&(Vt=0,qt={}),Vt++,qt[t]=e),e}function Rt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return At(e)}function Ct(t){var e;if(Nt&&void 0!==(e=Bt.get(t)))return e;if(void 0!==(e=t[Mt]))return e;if(!Tt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Mt]))return e;if(void 0!==(e=Lt(t)))return e}if(e=++zt,1073741824&zt&&(zt=0),Nt)Bt.set(t,e);else{if(void 0!==Ut&&!1===Ut(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Tt)Object.defineProperty(t,Mt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Mt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Mt]=e}}return e}var Ut=Object.isExtensible,Tt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Lt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Bt,Nt="function"==typeof WeakMap;Nt&&(Bt=new WeakMap);var zt=0,Mt="__immutablehash__";"function"==typeof Symbol&&(Mt=Symbol(Mt));var Dt=16,$t=255,Vt=0,qt={};function Pt(t){mt(t!==1/0,"Cannot perform this action with an infinite size.")}function Ft(t){return null==t?oe():Kt(t)&&!l(t)?t:oe().withMutations((function(e){var r=n(t);Pt(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}function Kt(t){return!(!t||!t[Zt])}e(Ft,kt),Ft.of=function(){var e=t.call(arguments,0);return oe().withMutations((function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}}))},Ft.prototype.toString=function(){return this.__toString("Map {","}")},Ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Ft.prototype.set=function(t,e){return ie(this,t,e)},Ft.prototype.setIn=function(t,e){return this.updateIn(t,_,(function(){return e}))},Ft.prototype.remove=function(t){return ie(this,t,_)},Ft.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return _}))},Ft.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},Ft.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=ye(this,wr(t),e,r);return n===_?void 0:n},Ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):oe()},Ft.prototype.merge=function(){return fe(this,void 0,arguments)},Ft.prototype.mergeWith=function(e){return fe(this,e,t.call(arguments,1))},Ft.prototype.mergeIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,oe(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,r):r[r.length-1]}))},Ft.prototype.mergeDeep=function(){return fe(this,de,arguments)},Ft.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return fe(this,pe(e),r)},Ft.prototype.mergeDeepIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,oe(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,r):r[r.length-1]}))},Ft.prototype.sort=function(t){return qe(lr(this,t))},Ft.prototype.sortBy=function(t,e){return qe(lr(this,e,t))},Ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new E)},Ft.prototype.asImmutable=function(){return this.__ensureOwner()},Ft.prototype.wasAltered=function(){return this.__altered},Ft.prototype.__iterator=function(t,e){return new te(this,t,e)},Ft.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},Ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ne(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ft.isMap=Kt;var Ht,Zt="@@__IMMUTABLE_MAP__@@",Gt=Ft.prototype;function Wt(t,e){this.ownerID=t,this.entries=e}function Yt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function Jt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function Xt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function Qt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function te(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&re(t._root)}function ee(t,e){return $(t,e[0],e[1])}function re(t,e){return{node:t,index:0,__prev:e}}function ne(t,e,r,n){var o=Object.create(Gt);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function oe(){return Ht||(Ht=ne(0))}function ie(t,e,r){var n,o;if(t._root){var i=I(m),s=I(w);if(n=se(t._root,t.__ownerID,0,void 0,e,r,i,s),!s.value)return t;o=t.size+(i.value?r===_?-1:1:0)}else{if(r===_)return t;o=1,n=new Wt(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?ne(o,n):oe()}function se(t,e,r,n,o,i,s,a){return t?t.update(e,r,n,o,i,s,a):i===_?t:(k(a),k(s),new Qt(e,n,[o,i]))}function ae(t){return t.constructor===Qt||t.constructor===Xt}function ue(t,e,r,n,o){if(t.keyHash===n)return new Xt(e,n,[t.entry,o]);var i,s=(0===r?t.keyHash:t.keyHash>>>r)&v,a=(0===r?n:n>>>r)&v;return new Yt(e,1<<s|1<<a,s===a?[ue(t,e,r+y,n,o)]:(i=new Qt(e,n,o),s<a?[t,i]:[i,t]))}function ce(t,e,r,n){t||(t=new E);for(var o=new Qt(t,Ot(r),[r,n]),i=0;i<e.length;i++){var s=e[i];o=o.update(t,0,void 0,s[0],s[1])}return o}function le(t,e,r,n){for(var o=0,i=0,s=new Array(r),a=0,u=1,c=e.length;a<c;a++,u<<=1){var l=e[a];void 0!==l&&a!==n&&(o|=u,s[i++]=l)}return new Yt(t,o,s)}function he(t,e,r,n,o){for(var i=0,s=new Array(b),a=0;0!==r;a++,r>>>=1)s[a]=1&r?e[i++]:void 0;return s[n]=o,new Jt(t,i+1,s)}function fe(t,e,r){for(var o=[],i=0;i<r.length;i++){var a=r[i],u=n(a);s(a)||(u=u.map((function(t){return dt(t)}))),o.push(u)}return ge(t,e,o)}function de(t,e,r){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):bt(t,e)?t:e}function pe(t){return function(e,r,n){if(e&&e.mergeDeepWith&&s(r))return e.mergeDeepWith(t,r);var o=t(e,r,n);return bt(e,o)?e:o}}function ge(t,e,r){return 0===(r=r.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var n=e?function(r,n){t.update(n,_,(function(t){return t===_?r:e(t,r,n)}))}:function(e,r){t.set(r,e)},o=0;o<r.length;o++)r[o].forEach(n)})):t.constructor(r[0])}function ye(t,e,r,n){var o=t===_,i=e.next();if(i.done){var s=o?r:t,a=n(s);return a===s?t:a}mt(o||t&&t.set,"invalid keyPath");var u=i.value,c=o?_:t.get(u,_),l=ye(c,e,r,n);return l===c?t:l===_?t.remove(u):(o?oe():t).set(u,l)}function be(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ve(t,e,r,n){var o=n?t:x(t);return o[e]=r,o}function _e(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var i=new Array(o),s=0,a=0;a<o;a++)a===e?(i[a]=r,s=-1):i[a]=t[a+s];return i}function me(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),i=0,s=0;s<n;s++)s===e&&(i=1),o[s]=t[s+i];return o}Gt[Zt]=!0,Gt[g]=Gt.remove,Gt.removeIn=Gt.deleteIn,Wt.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(bt(r,o[i][0]))return o[i][1];return n},Wt.prototype.update=function(t,e,r,n,o,i,s){for(var a=o===_,u=this.entries,c=0,l=u.length;c<l&&!bt(n,u[c][0]);c++);var h=c<l;if(h?u[c][1]===o:a)return this;if(k(s),(a||!h)&&k(i),!a||1!==u.length){if(!h&&!a&&u.length>=we)return ce(t,u,n,o);var f=t&&t===this.ownerID,d=f?u:x(u);return h?a?c===l-1?d.pop():d[c]=d.pop():d[c]=[n,o]:d.push([n,o]),f?(this.entries=d,this):new Wt(t,d)}},Yt.prototype.get=function(t,e,r,n){void 0===e&&(e=Ot(r));var o=1<<((0===t?e:e>>>t)&v),i=this.bitmap;return 0==(i&o)?n:this.nodes[be(i&o-1)].get(t+y,e,r,n)},Yt.prototype.update=function(t,e,r,n,o,i,s){void 0===r&&(r=Ot(n));var a=(0===e?r:r>>>e)&v,u=1<<a,c=this.bitmap,l=0!=(c&u);if(!l&&o===_)return this;var h=be(c&u-1),f=this.nodes,d=l?f[h]:void 0,p=se(d,t,e+y,r,n,o,i,s);if(p===d)return this;if(!l&&p&&f.length>=Ie)return he(t,f,c,a,p);if(l&&!p&&2===f.length&&ae(f[1^h]))return f[1^h];if(l&&p&&1===f.length&&ae(p))return p;var g=t&&t===this.ownerID,b=l?p?c:c^u:c|u,m=l?p?ve(f,h,p,g):me(f,h,g):_e(f,h,p,g);return g?(this.bitmap=b,this.nodes=m,this):new Yt(t,b,m)},Jt.prototype.get=function(t,e,r,n){void 0===e&&(e=Ot(r));var o=(0===t?e:e>>>t)&v,i=this.nodes[o];return i?i.get(t+y,e,r,n):n},Jt.prototype.update=function(t,e,r,n,o,i,s){void 0===r&&(r=Ot(n));var a=(0===e?r:r>>>e)&v,u=o===_,c=this.nodes,l=c[a];if(u&&!l)return this;var h=se(l,t,e+y,r,n,o,i,s);if(h===l)return this;var f=this.count;if(l){if(!h&&--f<ke)return le(t,c,f,a)}else f++;var d=t&&t===this.ownerID,p=ve(c,a,h,d);return d?(this.count=f,this.nodes=p,this):new Jt(t,f,p)},Xt.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(bt(r,o[i][0]))return o[i][1];return n},Xt.prototype.update=function(t,e,r,n,o,i,s){void 0===r&&(r=Ot(n));var a=o===_;if(r!==this.keyHash)return a?this:(k(s),k(i),ue(this,t,e,r,[n,o]));for(var u=this.entries,c=0,l=u.length;c<l&&!bt(n,u[c][0]);c++);var h=c<l;if(h?u[c][1]===o:a)return this;if(k(s),(a||!h)&&k(i),a&&2===l)return new Qt(t,this.keyHash,u[1^c]);var f=t&&t===this.ownerID,d=f?u:x(u);return h?a?c===l-1?d.pop():d[c]=d.pop():d[c]=[n,o]:d.push([n,o]),f?(this.entries=d,this):new Xt(t,this.keyHash,d)},Qt.prototype.get=function(t,e,r,n){return bt(r,this.entry[0])?this.entry[1]:n},Qt.prototype.update=function(t,e,r,n,o,i,s){var a=o===_,u=bt(n,this.entry[0]);return(u?o===this.entry[1]:a)?this:(k(s),a?void k(i):u?t&&t===this.ownerID?(this.entry[1]=o,this):new Qt(t,this.keyHash,[n,o]):(k(i),ue(this,t,e,Ot(n),[n,o])))},Wt.prototype.iterate=Xt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===t(r[e?o-n:n]))return!1},Yt.prototype.iterate=Jt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[e?o-n:n];if(i&&!1===i.iterate(t,e))return!1}},Qt.prototype.iterate=function(t,e){return t(this.entry)},e(te,D),te.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,o=e.index++;if(n.entry){if(0===o)return ee(t,n.entry)}else if(n.entries){if(o<=(r=n.entries.length-1))return ee(t,n.entries[this._reverse?r-o:o])}else if(o<=(r=n.nodes.length-1)){var i=n.nodes[this._reverse?r-o:o];if(i){if(i.entry)return ee(t,i.entry);e=this._stack=re(i,e)}continue}e=this._stack=this._stack.__prev}return V()};var we=b/4,Ie=b/2,ke=b/4;function Ee(t){var e=Le();if(null==t)return e;if(xe(t))return t;var r=o(t),n=r.size;return 0===n?e:(Pt(n),n>0&&n<b?Te(0,n,y,null,new Oe(r.toArray())):e.withMutations((function(t){t.setSize(n),r.forEach((function(e,r){return t.set(r,e)}))})))}function xe(t){return!(!t||!t[Se])}e(Ee,Et),Ee.of=function(){return this(arguments)},Ee.prototype.toString=function(){return this.__toString("List [","]")},Ee.prototype.get=function(t,e){if((t=A(this,t))>=0&&t<this.size){var r=Me(this,t+=this._origin);return r&&r.array[t&v]}return e},Ee.prototype.set=function(t,e){return Be(this,t,e)},Ee.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Ee.prototype.insert=function(t,e){return this.splice(t,0,e)},Ee.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=y,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Le()},Ee.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){De(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},Ee.prototype.pop=function(){return De(this,0,-1)},Ee.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){De(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},Ee.prototype.shift=function(){return De(this,1)},Ee.prototype.merge=function(){return $e(this,void 0,arguments)},Ee.prototype.mergeWith=function(e){return $e(this,e,t.call(arguments,1))},Ee.prototype.mergeDeep=function(){return $e(this,de,arguments)},Ee.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return $e(this,pe(e),r)},Ee.prototype.setSize=function(t){return De(this,0,t)},Ee.prototype.slice=function(t,e){var r=this.size;return j(t,e,r)?this:De(this,R(t,r),C(e,r))},Ee.prototype.__iterator=function(t,e){var r=0,n=Ue(this,e);return new D((function(){var e=n();return e===Ce?V():$(t,r++,e)}))},Ee.prototype.__iterate=function(t,e){for(var r,n=0,o=Ue(this,e);(r=o())!==Ce&&!1!==t(r,n++,this););return n},Ee.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Te(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Ee.isList=xe;var Se="@@__IMMUTABLE_LIST__@@",Ae=Ee.prototype;function Oe(t,e){this.array=t,this.ownerID=e}Ae[Se]=!0,Ae[g]=Ae.remove,Ae.setIn=Gt.setIn,Ae.deleteIn=Ae.removeIn=Gt.removeIn,Ae.update=Gt.update,Ae.updateIn=Gt.updateIn,Ae.mergeIn=Gt.mergeIn,Ae.mergeDeepIn=Gt.mergeDeepIn,Ae.withMutations=Gt.withMutations,Ae.asMutable=Gt.asMutable,Ae.asImmutable=Gt.asImmutable,Ae.wasAltered=Gt.wasAltered,Oe.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&v;if(n>=this.array.length)return new Oe([],t);var o,i=0===n;if(e>0){var s=this.array[n];if((o=s&&s.removeBefore(t,e-y,r))===s&&i)return this}if(i&&!o)return this;var a=ze(this,t);if(!i)for(var u=0;u<n;u++)a.array[u]=void 0;return o&&(a.array[n]=o),a},Oe.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,o=r-1>>>e&v;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((n=i&&i.removeAfter(t,e-y,r))===i&&o===this.array.length-1)return this}var s=ze(this,t);return s.array.splice(o+1),n&&(s.array[o]=n),s};var je,Re,Ce={};function Ue(t,e){var r=t._origin,n=t._capacity,o=Ve(n),i=t._tail;return s(t._root,t._level,0);function s(t,e,r){return 0===e?a(t,r):u(t,e,r)}function a(t,s){var a=s===o?i&&i.array:t&&t.array,u=s>r?0:r-s,c=n-s;return c>b&&(c=b),function(){if(u===c)return Ce;var t=e?--c:u++;return a&&a[t]}}function u(t,o,i){var a,u=t&&t.array,c=i>r?0:r-i>>o,l=1+(n-i>>o);return l>b&&(l=b),function(){for(;;){if(a){var t=a();if(t!==Ce)return t;a=null}if(c===l)return Ce;var r=e?--l:c++;a=s(u&&u[r],o-y,i+(r<<o))}}}}function Te(t,e,r,n,o,i,s){var a=Object.create(Ae);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=o,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function Le(){return je||(je=Te(0,0,y))}function Be(t,e,r){if((e=A(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?De(t,e).set(0,r):De(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,o=t._root,i=I(w);return e>=Ve(t._capacity)?n=Ne(n,t.__ownerID,0,e,r,i):o=Ne(o,t.__ownerID,t._level,e,r,i),i.value?t.__ownerID?(t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Te(t._origin,t._capacity,t._level,o,n):t}function Ne(t,e,r,n,o,i){var s,a=n>>>r&v,u=t&&a<t.array.length;if(!u&&void 0===o)return t;if(r>0){var c=t&&t.array[a],l=Ne(c,e,r-y,n,o,i);return l===c?t:((s=ze(t,e)).array[a]=l,s)}return u&&t.array[a]===o?t:(k(i),s=ze(t,e),void 0===o&&a===s.array.length-1?s.array.pop():s.array[a]=o,s)}function ze(t,e){return e&&t&&e===t.ownerID?t:new Oe(t?t.array.slice():[],e)}function Me(t,e){if(e>=Ve(t._capacity))return t._tail;if(e<1<<t._level+y){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&v],n-=y;return r}}function De(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new E,o=t._origin,i=t._capacity,s=o+e,a=void 0===r?i:r<0?i+r:o+r;if(s===o&&a===i)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,l=0;s+l<0;)c=new Oe(c&&c.array.length?[void 0,c]:[],n),l+=1<<(u+=y);l&&(s+=l,o+=l,a+=l,i+=l);for(var h=Ve(i),f=Ve(a);f>=1<<u+y;)c=new Oe(c&&c.array.length?[c]:[],n),u+=y;var d=t._tail,p=f<h?Me(t,a-1):f>h?new Oe([],n):d;if(d&&f>h&&s<i&&d.array.length){for(var g=c=ze(c,n),b=u;b>y;b-=y){var _=h>>>b&v;g=g.array[_]=ze(g.array[_],n)}g.array[h>>>y&v]=d}if(a<i&&(p=p&&p.removeAfter(n,0,a)),s>=f)s-=f,a-=f,u=y,c=null,p=p&&p.removeBefore(n,0,s);else if(s>o||f<h){for(l=0;c;){var m=s>>>u&v;if(m!==f>>>u&v)break;m&&(l+=(1<<u)*m),u-=y,c=c.array[m]}c&&s>o&&(c=c.removeBefore(n,u,s-l)),c&&f<h&&(c=c.removeAfter(n,u,f-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=p,t.__hash=void 0,t.__altered=!0,t):Te(s,a,u,c,p)}function $e(t,e,r){for(var n=[],i=0,a=0;a<r.length;a++){var u=r[a],c=o(u);c.size>i&&(i=c.size),s(u)||(c=c.map((function(t){return dt(t)}))),n.push(c)}return i>t.size&&(t=t.setSize(i)),ge(t,e,n)}function Ve(t){return t<b?0:t-1>>>y<<y}function qe(t){return null==t?Ke():Pe(t)?t:Ke().withMutations((function(e){var r=n(t);Pt(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}function Pe(t){return Kt(t)&&l(t)}function Fe(t,e,r,n){var o=Object.create(qe.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o}function Ke(){return Re||(Re=Fe(oe(),Le()))}function He(t,e,r){var n,o,i=t._map,s=t._list,a=i.get(e),u=void 0!==a;if(r===_){if(!u)return t;s.size>=b&&s.size>=2*i.size?(n=(o=s.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=o.__ownerID=t.__ownerID)):(n=i.remove(e),o=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(r===s.get(a)[1])return t;n=i,o=s.set(a,[e,r])}else n=i.set(e,s.size),o=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=o,t.__hash=void 0,t):Fe(n,o)}function Ze(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ge(t){this._iter=t,this.size=t.size}function We(t){this._iter=t,this.size=t.size}function Ye(t){this._iter=t,this.size=t.size}function Je(t){var e=vr(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=_r,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(e===B){var n=t.__iterator(e,r);return new D((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===L?T:L,r)},e}function Xe(t,e,r){var n=vr(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,o){var i=t.get(n,_);return i===_?o:e.call(r,i,n,t)},n.__iterateUncached=function(n,o){var i=this;return t.__iterate((function(t,o,s){return!1!==n(e.call(r,t,o,s),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=t.__iterator(B,o);return new D((function(){var o=i.next();if(o.done)return o;var s=o.value,a=s[0];return $(n,a,e.call(r,s[1],a,t),o)}))},n}function Qe(t,e){var r=vr(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Je(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=_r,r.__iterate=function(e,r){var n=this;return t.__iterate((function(t,r){return e(t,r,n)}),!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function tr(t,e,r,n){var o=vr(t);return n&&(o.has=function(n){var o=t.get(n,_);return o!==_&&!!e.call(r,o,n,t)},o.get=function(n,o){var i=t.get(n,_);return i!==_&&e.call(r,i,n,t)?i:o}),o.__iterateUncached=function(o,i){var s=this,a=0;return t.__iterate((function(t,i,u){if(e.call(r,t,i,u))return a++,o(t,n?i:a-1,s)}),i),a},o.__iteratorUncached=function(o,i){var s=t.__iterator(B,i),a=0;return new D((function(){for(;;){var i=s.next();if(i.done)return i;var u=i.value,c=u[0],l=u[1];if(e.call(r,l,c,t))return $(o,n?c:a++,l,i)}}))},o}function er(t,e,r){var n=Ft().asMutable();return t.__iterate((function(o,i){n.update(e.call(r,o,i,t),0,(function(t){return t+1}))})),n.asImmutable()}function rr(t,e,r){var n=a(t),o=(l(t)?qe():Ft()).asMutable();t.__iterate((function(i,s){o.update(e.call(r,i,s,t),(function(t){return(t=t||[]).push(n?[s,i]:i),t}))}));var i=br(t);return o.map((function(e){return pr(t,i(e))}))}function nr(t,e,r,n){var o=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=o:r|=0),j(e,r,o))return t;var i=R(e,o),s=C(r,o);if(i!=i||s!=s)return nr(t.toSeq().cacheResult(),e,r,n);var a,u=s-i;u==u&&(a=u<0?0:u);var c=vr(t);return c.size=0===a?a:t.size&&a||void 0,!n&&it(t)&&a>=0&&(c.get=function(e,r){return(e=A(this,e))>=0&&e<a?t.get(e+i,r):r}),c.__iterateUncached=function(e,r){var o=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(e,r);var s=0,u=!0,c=0;return t.__iterate((function(t,r){if(!u||!(u=s++<i))return c++,!1!==e(t,n?r:c-1,o)&&c!==a})),c},c.__iteratorUncached=function(e,r){if(0!==a&&r)return this.cacheResult().__iterator(e,r);var o=0!==a&&t.__iterator(e,r),s=0,u=0;return new D((function(){for(;s++<i;)o.next();if(++u>a)return V();var t=o.next();return n||e===L?t:$(e,u-1,e===T?void 0:t.value[1],t)}))},c}function or(t,e,r){var n=vr(t);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var s=0;return t.__iterate((function(t,o,a){return e.call(r,t,o,a)&&++s&&n(t,o,i)})),s},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var s=t.__iterator(B,o),a=!0;return new D((function(){if(!a)return V();var t=s.next();if(t.done)return t;var o=t.value,u=o[0],c=o[1];return e.call(r,c,u,i)?n===B?t:$(n,u,c,t):(a=!1,V())}))},n}function ir(t,e,r,n){var o=vr(t);return o.__iterateUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterate(o,i);var a=!0,u=0;return t.__iterate((function(t,i,c){if(!a||!(a=e.call(r,t,i,c)))return u++,o(t,n?i:u-1,s)})),u},o.__iteratorUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterator(o,i);var a=t.__iterator(B,i),u=!0,c=0;return new D((function(){var t,i,l;do{if((t=a.next()).done)return n||o===L?t:$(o,c++,o===T?void 0:t.value[1],t);var h=t.value;i=h[0],l=h[1],u&&(u=e.call(r,l,i,s))}while(u);return o===B?t:$(o,i,l,t)}))},o}function sr(t,e){var r=a(t),o=[t].concat(e).map((function(t){return s(t)?r&&(t=n(t)):t=r?at(t):ut(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===o.length)return t;if(1===o.length){var i=o[0];if(i===t||r&&a(i)||u(t)&&u(i))return i}var c=new et(o);return r?c=c.toKeyedSeq():u(t)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=o.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),c}function ar(t,e,r){var n=vr(t);return n.__iterateUncached=function(n,o){var i=0,a=!1;function u(t,c){var l=this;t.__iterate((function(t,o){return(!e||c<e)&&s(t)?u(t,c+1):!1===n(t,r?o:i++,l)&&(a=!0),!a}),o)}return u(t,0),i},n.__iteratorUncached=function(n,o){var i=t.__iterator(n,o),a=[],u=0;return new D((function(){for(;i;){var t=i.next();if(!1===t.done){var c=t.value;if(n===B&&(c=c[1]),e&&!(a.length<e)||!s(c))return r?t:$(n,u++,c,t);a.push(i),i=c.__iterator(n,o)}else i=a.pop()}return V()}))},n}function ur(t,e,r){var n=br(t);return t.toSeq().map((function(o,i){return n(e.call(r,o,i,t))})).flatten(!0)}function cr(t,e){var r=vr(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return t.__iterate((function(t,n){return(!i||!1!==r(e,i++,o))&&!1!==r(t,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=t.__iterator(L,n),s=0;return new D((function(){return(!o||s%2)&&(o=i.next()).done?o:s%2?$(r,s++,e):$(r,s++,o.value,o)}))},r}function lr(t,e,r){e||(e=mr);var n=a(t),o=0,i=t.toSeq().map((function(e,n){return[n,e,o++,r?r(e,n,t):e]})).toArray();return i.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),n?G(i):u(t)?W(i):Y(i)}function hr(t,e,r){if(e||(e=mr),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return fr(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return fr(e,t,r)?r:t}))}function fr(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function dr(t,e,n){var o=vr(t);return o.size=new et(n).map((function(t){return t.size})).min(),o.__iterate=function(t,e){for(var r,n=this.__iterator(L,e),o=0;!(r=n.next()).done&&!1!==t(r.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=n.map((function(t){return t=r(t),F(o?t.reverse():t)})),s=0,a=!1;return new D((function(){var r;return a||(r=i.map((function(t){return t.next()})),a=r.some((function(t){return t.done}))),a?V():$(t,s++,e.apply(null,r.map((function(t){return t.value}))))}))},o}function pr(t,e){return it(t)?e:t.constructor(e)}function gr(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function yr(t){return Pt(t.size),S(t)}function br(t){return a(t)?n:u(t)?o:i}function vr(t){return Object.create((a(t)?G:u(t)?W:Y).prototype)}function _r(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Z.prototype.cacheResult.call(this)}function mr(t,e){return t>e?1:t<e?-1:0}function wr(t){var e=F(t);if(!e){if(!H(t))throw new TypeError("Expected iterable or array-like: "+t);e=F(r(t))}return e}function Ir(t,e){var r,n=function(i){if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var s=Object.keys(t);Sr(o,s),o.size=s.length,o._name=e,o._keys=s,o._defaultValues=t}this._map=Ft(i)},o=n.prototype=Object.create(kr);return o.constructor=n,n}e(qe,Ft),qe.of=function(){return this(arguments)},qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},qe.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ke()},qe.prototype.set=function(t,e){return He(this,t,e)},qe.prototype.remove=function(t){return He(this,t,_)},qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},qe.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},qe.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},qe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Fe(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},qe.isOrderedMap=Pe,qe.prototype[p]=!0,qe.prototype[g]=qe.prototype.remove,e(Ze,G),Ze.prototype.get=function(t,e){return this._iter.get(t,e)},Ze.prototype.has=function(t){return this._iter.has(t)},Ze.prototype.valueSeq=function(){return this._iter.valueSeq()},Ze.prototype.reverse=function(){var t=this,e=Qe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Ze.prototype.map=function(t,e){var r=this,n=Xe(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},Ze.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?yr(this):0,function(o){return t(o,e?--r:r++,n)}),e)},Ze.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(L,e),n=e?yr(this):0;return new D((function(){var o=r.next();return o.done?o:$(t,e?--n:n++,o.value,o)}))},Ze.prototype[p]=!0,e(Ge,W),Ge.prototype.includes=function(t){return this._iter.includes(t)},Ge.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate((function(e){return t(e,n++,r)}),e)},Ge.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e),n=0;return new D((function(){var e=r.next();return e.done?e:$(t,n++,e.value,e)}))},e(We,Y),We.prototype.has=function(t){return this._iter.includes(t)},We.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},We.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e);return new D((function(){var e=r.next();return e.done?e:$(t,e.value,e.value,e)}))},e(Ye,G),Ye.prototype.entrySeq=function(){return this._iter.toSeq()},Ye.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){gr(e);var n=s(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},Ye.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e);return new D((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){gr(n);var o=s(n);return $(t,o?n.get(0):n[0],o?n.get(1):n[1],e)}}}))},Ge.prototype.cacheResult=Ze.prototype.cacheResult=We.prototype.cacheResult=Ye.prototype.cacheResult=_r,e(Ir,kt),Ir.prototype.toString=function(){return this.__toString(xr(this)+" {","}")},Ir.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Ir.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},Ir.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Er(this,oe()))},Ir.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+xr(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:Er(this,r)},Ir.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Er(this,e)},Ir.prototype.wasAltered=function(){return this._map.wasAltered()},Ir.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map((function(t,e){return r.get(e)})).__iterator(t,e)},Ir.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map((function(t,e){return r.get(e)})).__iterate(t,e)},Ir.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Er(this,e,t):(this.__ownerID=t,this._map=e,this)};var kr=Ir.prototype;function Er(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function xr(t){return t._name||t.constructor.name||"Record"}function Sr(t,e){try{e.forEach(Ar.bind(void 0,t))}catch(r){}}function Ar(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){mt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Or(t){return null==t?Br():jr(t)&&!l(t)?t:Br().withMutations((function(e){var r=i(t);Pt(r.size),r.forEach((function(t){return e.add(t)}))}))}function jr(t){return!(!t||!t[Cr])}kr[g]=kr.remove,kr.deleteIn=kr.removeIn=Gt.removeIn,kr.merge=Gt.merge,kr.mergeWith=Gt.mergeWith,kr.mergeIn=Gt.mergeIn,kr.mergeDeep=Gt.mergeDeep,kr.mergeDeepWith=Gt.mergeDeepWith,kr.mergeDeepIn=Gt.mergeDeepIn,kr.setIn=Gt.setIn,kr.update=Gt.update,kr.updateIn=Gt.updateIn,kr.withMutations=Gt.withMutations,kr.asMutable=Gt.asMutable,kr.asImmutable=Gt.asImmutable,e(Or,xt),Or.of=function(){return this(arguments)},Or.fromKeys=function(t){return this(n(t).keySeq())},Or.prototype.toString=function(){return this.__toString("Set {","}")},Or.prototype.has=function(t){return this._map.has(t)},Or.prototype.add=function(t){return Tr(this,this._map.set(t,!0))},Or.prototype.remove=function(t){return Tr(this,this._map.remove(t))},Or.prototype.clear=function(){return Tr(this,this._map.clear())},Or.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var r=0;r<e.length;r++)i(e[r]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},Or.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var r=this;return this.withMutations((function(t){r.forEach((function(r){e.every((function(t){return t.includes(r)}))||t.remove(r)}))}))},Or.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var r=this;return this.withMutations((function(t){r.forEach((function(r){e.some((function(t){return t.includes(r)}))&&t.remove(r)}))}))},Or.prototype.merge=function(){return this.union.apply(this,arguments)},Or.prototype.mergeWith=function(e){var r=t.call(arguments,1);return this.union.apply(this,r)},Or.prototype.sort=function(t){return Nr(lr(this,t))},Or.prototype.sortBy=function(t,e){return Nr(lr(this,e,t))},Or.prototype.wasAltered=function(){return this._map.wasAltered()},Or.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e,n){return t(n,n,r)}),e)},Or.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},Or.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Or.isSet=jr;var Rr,Cr="@@__IMMUTABLE_SET__@@",Ur=Or.prototype;function Tr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Lr(t,e){var r=Object.create(Ur);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Br(){return Rr||(Rr=Lr(oe()))}function Nr(t){return null==t?Vr():zr(t)?t:Vr().withMutations((function(e){var r=i(t);Pt(r.size),r.forEach((function(t){return e.add(t)}))}))}function zr(t){return jr(t)&&l(t)}Ur[Cr]=!0,Ur[g]=Ur.remove,Ur.mergeDeep=Ur.merge,Ur.mergeDeepWith=Ur.mergeWith,Ur.withMutations=Gt.withMutations,Ur.asMutable=Gt.asMutable,Ur.asImmutable=Gt.asImmutable,Ur.__empty=Br,Ur.__make=Lr,e(Nr,Or),Nr.of=function(){return this(arguments)},Nr.fromKeys=function(t){return this(n(t).keySeq())},Nr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Nr.isOrderedSet=zr;var Mr,Dr=Nr.prototype;function $r(t,e){var r=Object.create(Dr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Vr(){return Mr||(Mr=$r(Ke()))}function qr(t){return null==t?Gr():Pr(t)?t:Gr().unshiftAll(t)}function Pr(t){return!(!t||!t[Kr])}Dr[p]=!0,Dr.__empty=Vr,Dr.__make=$r,e(qr,Et),qr.of=function(){return this(arguments)},qr.prototype.toString=function(){return this.__toString("Stack [","]")},qr.prototype.get=function(t,e){var r=this._head;for(t=A(this,t);r&&t--;)r=r.next;return r?r.value:e},qr.prototype.peek=function(){return this._head&&this._head.value},qr.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Zr(t,e)},qr.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;Pt(t.size);var e=this.size,r=this._head;return t.reverse().forEach((function(t){e++,r={value:t,next:r}})),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Zr(e,r)},qr.prototype.pop=function(){return this.slice(1)},qr.prototype.unshift=function(){return this.push.apply(this,arguments)},qr.prototype.unshiftAll=function(t){return this.pushAll(t)},qr.prototype.shift=function(){return this.pop.apply(this,arguments)},qr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Gr()},qr.prototype.slice=function(t,e){if(j(t,e,this.size))return this;var r=R(t,this.size);if(C(e,this.size)!==this.size)return Et.prototype.slice.call(this,t,e);for(var n=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=n,this._head=o,this.__hash=void 0,this.__altered=!0,this):Zr(n,o)},qr.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Zr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},qr.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},qr.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new D((function(){if(n){var e=n.value;return n=n.next,$(t,r++,e)}return V()}))},qr.isStack=Pr;var Fr,Kr="@@__IMMUTABLE_STACK__@@",Hr=qr.prototype;function Zr(t,e,r,n){var o=Object.create(Hr);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Gr(){return Fr||(Fr=Zr(0))}function Wr(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}Hr[Kr]=!0,Hr.withMutations=Gt.withMutations,Hr.asMutable=Gt.asMutable,Hr.asImmutable=Gt.asImmutable,Hr.wasAltered=Gt.wasAltered,r.Iterator=D,Wr(r,{toArray:function(){Pt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,r){t[r]=e})),t},toIndexedSeq:function(){return new Ge(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Ze(this,!0)},toMap:function(){return Ft(this.toKeyedSeq())},toObject:function(){Pt(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t},toOrderedMap:function(){return qe(this.toKeyedSeq())},toOrderedSet:function(){return Nr(a(this)?this.valueSeq():this)},toSet:function(){return Or(a(this)?this.valueSeq():this)},toSetSeq:function(){return new We(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return qr(a(this)?this.valueSeq():this)},toList:function(){return Ee(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return pr(this,sr(this,t.call(arguments,0)))},includes:function(t){return this.some((function(e){return bt(e,t)}))},entries:function(){return this.__iterator(B)},every:function(t,e){Pt(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!t.call(e,n,o,i))return r=!1,!1})),r},filter:function(t,e){return pr(this,tr(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Pt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Pt(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""})),e},keys:function(){return this.__iterator(T)},map:function(t,e){return pr(this,Xe(this,t,e))},reduce:function(t,e,r){var n,o;return Pt(this.size),arguments.length<2?o=!0:n=e,this.__iterate((function(e,i,s){o?(o=!1,n=e):n=t.call(r,n,e,i,s)})),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return pr(this,Qe(this,!0))},slice:function(t,e){return pr(this,nr(this,t,e,!0))},some:function(t,e){return!this.every(tn(t),e)},sort:function(t){return pr(this,lr(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return S(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return er(this,t,e)},equals:function(t){return vt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new et(t._cache);var e=t.toSeq().map(Qr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(tn(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,o,i){if(t.call(e,r,o,i))return n=[o,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(O)},flatMap:function(t,e){return pr(this,ur(this,t,e))},flatten:function(t){return pr(this,ar(this,t,!0))},fromEntrySeq:function(){return new Ye(this)},get:function(t,e){return this.find((function(e,r){return bt(r,t)}),void 0,e)},getIn:function(t,e){for(var r,n=this,o=wr(t);!(r=o.next()).done;){var i=r.value;if((n=n&&n.get?n.get(i,_):_)===_)return e}return n},groupBy:function(t,e){return rr(this,t,e)},has:function(t){return this.get(t,_)!==_},hasIn:function(t){return this.getIn(t,_)!==_},isSubset:function(t){return t="function"==typeof t.includes?t:r(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:r(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return bt(e,t)}))},keySeq:function(){return this.toSeq().map(Xr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return hr(this,t)},maxBy:function(t,e){return hr(this,e,t)},min:function(t){return hr(this,t?en(t):on)},minBy:function(t,e){return hr(this,e?en(e):on,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return pr(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return pr(this,ir(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(tn(t),e)},sortBy:function(t,e){return pr(this,lr(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return pr(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return pr(this,or(this,t,e))},takeUntil:function(t,e){return this.takeWhile(tn(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=sn(this))}});var Yr=r.prototype;Yr[h]=!0,Yr[M]=Yr.values,Yr.__toJS=Yr.toArray,Yr.__toStringMapper=rn,Yr.inspect=Yr.toSource=function(){return this.toString()},Yr.chain=Yr.flatMap,Yr.contains=Yr.includes,Wr(n,{flip:function(){return pr(this,Je(this))},mapEntries:function(t,e){var r=this,n=0;return pr(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return pr(this,this.toSeq().flip().map((function(n,o){return t.call(e,n,o,r)})).flip())}});var Jr=n.prototype;function Xr(t,e){return e}function Qr(t,e){return[e,t]}function tn(t){return function(){return!t.apply(this,arguments)}}function en(t){return function(){return-t.apply(this,arguments)}}function rn(t){return"string"==typeof t?JSON.stringify(t):String(t)}function nn(){return x(arguments)}function on(t,e){return t<e?1:t>e?-1:0}function sn(t){if(t.size===1/0)return 0;var e=l(t),r=a(t),n=e?1:0;return an(t.__iterate(r?e?function(t,e){n=31*n+un(Ot(t),Ot(e))|0}:function(t,e){n=n+un(Ot(t),Ot(e))|0}:e?function(t){n=31*n+Ot(t)|0}:function(t){n=n+Ot(t)|0}),n)}function an(t,e){return e=St(e,3432918353),e=St(e<<15|e>>>-15,461845907),e=St(e<<13|e>>>-13,5),e=St((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=At((e=St(e^e>>>13,3266489909))^e>>>16)}function un(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Jr[f]=!0,Jr[M]=Yr.entries,Jr.__toJS=Yr.toObject,Jr.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+rn(t)},Wr(o,{toKeyedSeq:function(){return new Ze(this,!1)},filter:function(t,e){return pr(this,tr(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return pr(this,Qe(this,!1))},slice:function(t,e){return pr(this,nr(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=R(t,t<0?this.count():this.size);var n=this.slice(0,t);return pr(this,1===r?n:n.concat(x(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return pr(this,ar(this,t,!1))},get:function(t,e){return(t=A(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=A(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return pr(this,cr(this,t))},interleave:function(){var t=[this].concat(x(arguments)),e=dr(this.toSeq(),W.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),pr(this,r)},keySeq:function(){return wt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return pr(this,ir(this,t,e,!1))},zip:function(){return pr(this,dr(this,nn,[this].concat(x(arguments))))},zipWith:function(t){var e=x(arguments);return e[0]=this,pr(this,dr(this,t,e))}}),o.prototype[d]=!0,o.prototype[p]=!0,Wr(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Yr.includes,i.prototype.contains=i.prototype.includes,Wr(G,n.prototype),Wr(W,o.prototype),Wr(Y,i.prototype),Wr(kt,n.prototype),Wr(Et,o.prototype),Wr(xt,i.prototype),{Iterable:r,Seq:Z,Collection:It,Map:Ft,OrderedMap:qe,List:Ee,Stack:qr,Set:Or,OrderedSet:Nr,Record:Ir,Range:wt,Repeat:_t,is:bt,fromJS:dt}}();const{Map:Aa}=Sa.exports;class Oa{constructor(t,e,r,n,o,i,s){this.key=t,this.value=e,this.level=r,this.prevKey=n,this.nextKey=o,this.prevCount=i,this.nextCount=s}setValue(t){return new Oa(this.key,t,this.level,this.prevKey,this.nextKey,this.prevCount,this.nextCount)}insertAfter(t,e,r,n){if(e>this.level&&null!==this.key)throw new RangeError("Cannot increase the level of a non-head node");const o=Math.max(this.level,e),i=this.nextKey.slice(),s=this.nextCount.slice();for(let a=r;a<o;a++)a<e?(i[a]=t,s[a]=n):s[a]+=1;return new Oa(this.key,this.value,o,this.prevKey,i,this.prevCount,s)}insertBefore(t,e,r,n){if(e>this.level)throw new RangeError("Cannot increase node level");const o=this.prevKey.slice(),i=this.prevCount.slice();for(let s=r;s<this.level;s++)s<e?(o[s]=t,i[s]=n):i[s]+=1;return new Oa(this.key,this.value,this.level,o,this.nextKey,i,this.nextCount)}removeAfter(t,e,r,n){const o=this.nextKey.slice(),i=this.nextCount.slice();for(let s=t;s<this.level;s++)s<e?(o[s]=r[s],i[s]=n[s]):i[s]-=1;return new Oa(this.key,this.value,this.level,this.prevKey,o,this.prevCount,i)}removeBefore(t,e,r,n){const o=this.prevKey.slice(),i=this.prevCount.slice();for(let s=t;s<this.level;s++)s<e?(o[s]=r[s],i[s]=n[s]):i[s]-=1;return new Oa(this.key,this.value,this.level,o,this.nextKey,i,this.nextCount)}}class ja{constructor(t){const e=new Oa(null,null,1,[],[null],[],[null]),r=t?t():{next(){const t=Math.floor(4294967296*Math.random());let e=1;for(;t<1<<32-2*e&&e<16;)e+=1;return{value:e,done:!1}}};return Ra(0,Aa().set(null,e),r)}get headNode(){return this._nodes.get(null)}predecessors(t,e){const r=[t],n=[1];for(let o=1;o<e;o++){let t=r[o-1],e=n[o-1];for(;t;){let r=this._nodes.get(t);if(r.level>o)break;if(r.level<o)throw new RangeError("Node "+t+" below expected level "+(o-1));e+=r.prevCount[o-1],t=r.prevKey[o-1]}r[o]=t,n[o]=e}return{preKeys:r,preCounts:n}}successors(t,e){const r=[t],n=[1];for(let o=1;o<e;o++){let t=r[o-1],e=n[o-1];for(;t;){let r=this._nodes.get(t);if(r.level>o)break;if(r.level<o)throw new RangeError("Node "+t+" below expected level "+(o-1));e+=r.nextCount[o-1],t=r.nextKey[o-1]}r[o]=t,n[o]=e}return{sucKeys:r,sucCounts:n}}insertAfter(t,e,r){if("string"!=typeof e||""===e)throw new RangeError("Key must be a nonempty string");if(!this._nodes.has(t))throw new RangeError("The referenced predecessor key does not exist");if(this._nodes.has(e))throw new RangeError("Cannot insert a key that already exists");const n=this._randomSource.next().value,o=Math.max(n,this.headNode.level),i=this._nodes.get(t).nextKey[0]||null,{preKeys:s,preCounts:a}=this.predecessors(t,o),{sucKeys:u,sucCounts:c}=this.successors(i,o);return Ra(this.length+1,this._nodes.withMutations((t=>{let i=0,l=0;for(let r=1;r<=o;r++){const h=Math.min(r,n);r!==o&&s[r]===s[i]||(t.update(s[i],(t=>t.insertAfter(e,h,i,a[i]))),i=r),!u[l]||r!==o&&u[r]===u[l]||(t.update(u[l],(t=>t.insertBefore(e,h,l,c[l]))),l=r)}t.set(e,new Oa(e,r,n,s.slice(0,n),u.slice(0,n),a.slice(0,n),c.slice(0,n)))})),this._randomSource)}insertIndex(t,e,r){if("number"!=typeof t||t<0)throw new RangeError("Index must be a non-negative integer");return 0===t?this.insertAfter(null,e,r):this.insertAfter(this.keyOf(t-1),e,r)}removeKey(t){if("string"!=typeof t||!this._nodes.has(t))throw new RangeError("The given key cannot be removed because it does not exist");const e=this._nodes.get(t),r=this.headNode.level,{preKeys:n,preCounts:o}=this.predecessors(e.prevKey[0],r),{sucKeys:i,sucCounts:s}=this.successors(e.nextKey[0],r),a=new Array(r);for(let u=0;u<r;u++)a[u]=o[u]+s[u]-1;return Ra(this.length-1,this._nodes.withMutations((o=>{o.remove(t);let s=0,u=0;for(let t=1;t<=r;t++){const c=Math.min(t,e.level);t!==r&&n[t]===n[s]||(o.update(n[s],(t=>t.removeAfter(s,c,i,a))),s=t),!i[u]||t!==r&&i[t]===i[u]||(o.update(i[u],(t=>t.removeBefore(u,c,n,a))),u=t)}})),this._randomSource)}removeIndex(t){return this.removeKey(this.keyOf(t))}indexOf(t){if("string"!=typeof t||""===t||!this._nodes.has(t))return-1;let e=this._nodes.get(t),r=0;for(;e&&e.key;)r+=e.prevCount[e.level-1],e=this._nodes.get(e.prevKey[e.level-1]);return r-1}keyOf(t){if("number"!=typeof t)return null;if(t<0&&(t+=this.length),t<0||t>=this.length)return null;let e=this._nodes.get(null),r=e.level-1,n=0;for(;;){if(n===t+1)return e.key;n+e.nextCount[r]>t+1?r-=1:(n+=e.nextCount[r],e=this._nodes.get(e.nextKey[r]))}}getValue(t){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");const e=this._nodes.get(t);return e&&e.value}setValue(t,e){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");let r=this._nodes.get(t);if(!r)throw new RangeError("The referenced key does not exist");return r=r.setValue(e),Ra(this.length,this._nodes.set(t,r),this._randomSource)}iterator(t){const e=this._nodes;let r=e.get(null).nextKey[0];return{next(){if(!r)return{value:void 0,done:!0};const n=e.get(r);let o;switch(t){case"keys":o={value:r,done:!1};break;case"values":o={value:n.value,done:!1};break;case"entries":o={value:[r,n.value],done:!1}}return r=n.nextKey[0],o},[Symbol.iterator]:()=>this.iterator(t)}}[Symbol.iterator](){return this.iterator("values")}}function Ra(t,e,r){const n=Object.create(ja.prototype);return n.length=t,n._nodes=e,n._randomSource=r,n}var Ca={SkipList:ja};const{Map:Ua,List:Ta,Set:La,fromJS:Ba}=Sa.exports,{SkipList:Na}=Ca,{decodeChange:za,decodeChangeMeta:Ma,appendEdit:Da}=xa,{parseOpId:$a}=Nt;function Va(t,e){for(let r of e.deps)if(!t.hasIn(["hashes",r]))return!1;return!0}function qa(t,e){if("_root"===e)return"map";const r=t.getIn(["byObject",e,"_init","action"]),n={makeMap:"map",makeTable:"table",makeList:"list",makeText:"text"}[r];if(!n)throw new RangeError(`Unknown object type ${r} for ${e}`);return n}function Pa(t,e,r){const n=Ka(e),o=e.get("action");if(t.hasIn(["byObject",n,"_keys"]))throw new Error(`Duplicate creation of object ${n}`);let i=Ua({_init:e,_inbound:La(),_keys:Ua()});return"makeList"!==o&&"makeText"!==o||(i=i.set("_elemIds",new Na)),t=t.setIn(["byObject",n],i),r&&(r.objectId=n,r.type=qa(t,n),r.props={},"list"!==r.type&&"text"!==r.type||(r.edits=[])),t}function Fa(t){const e=t.get("action");return e.startsWith("make")||"link"===e}function Ka(t){return t.get("child",t.get("opId"))}function Ha(t){const e=t.get("key");if(e)return e;const r=t.get("insert")?t.get("opId"):t.get("elemId");if(!r)throw new RangeError(`operation has no key: ${t}`);return r}function Za(t,e,r){const n=e.get("obj"),o=e.get("action"),i=Ha(e);if(!t.get("byObject").has(n))throw new RangeError(`Modification of unknown object ${n}`);const s=qa(t,n);if(r){if(r.objectId=r.objectId||n,r.objectId!==n)throw new RangeError(`objectId mismatch in patch: ${r.objectId} != ${n}`);if(r.type=r.type||s,r.type!==s)throw new RangeError(`object type mismatch in patch: ${r.type} != ${s}`);"list"===s||"text"===s||r.props[i]||(r.props[i]={})}if(o.startsWith("make"))if(r){const n={};t=Pa(t,e,n),"map"!==s&&"table"!==s||(r.props[i][e.get("opId")]=n)}else t=Pa(t,e);"link"===o&&r&&(r.props[i][e.get("opId")]=cu(t,Ka(e)));const a=eu(t,n,i);let u,c;if("inc"===o)u=Ta(),c=a.map((t=>"set"===t.get("action")&&"number"==typeof t.get("value")&&"counter"===t.get("datatype")&&e.get("pred").includes(t.get("opId"))?t.set("value",t.get("value")+e.get("value")):t));else{const t=a.groupBy((t=>e.get("pred").includes(t.get("opId"))));u=t.get(!0,Ta()),c=t.get(!1,Ta())}for(let l of u.filter(Fa))t=t.updateIn(["byObject",Ka(l),"_inbound"],(t=>t.remove(l)));return Fa(e)&&(t=t.updateIn(["byObject",Ka(e),"_inbound"],La(),(t=>t.add(e)))),("set"===o||Fa(e))&&(c=c.push(e)),c=c.sort(nu).reverse(),t=t.setIn(["byObject",n,"_keys",i],c),"list"===s||"text"===s?t=function(t,e,r,n){const o=eu(t,e,r);let i=t.getIn(["byObject",e,"_elemIds"]),s=i.indexOf(r);if(s>=0)i=o.isEmpty()?i.removeIndex(s):i.setValue(r,o.first().get("value")),Ja(t,e,r,s,!1,n);else{if(o.isEmpty())return t;let a=r;for(;s=-1,a=au(t,e,a),a&&(s=i.indexOf(a),!(s>=0)););s+=1,i=i.insertIndex(s,r,o.first().get("value")),Ja(t,e,r,s,!0,n)}return t.setIn(["byObject",e,"_elemIds"],i)}(t,n,i,r):Ya(t,n,i,r),t}function Ga(t,e,r){const n=e.get("obj"),o=e.get("opId"),i=Ha(e),s=qa(t,n);if(r.objectId=r.objectId||n,r.type=r.type||s,r.objectId!==n)throw new RangeError(`objectId mismatch in path: ${r.objectId} != ${n}`);if(r.type!==s)throw new RangeError(`object type mismatch in path: ${r.type} != ${s}`);if(!r.props[i]||!r.props[i][o])if("list"===s||"text"===s){const e=t.getIn(["byObject",n,"_elemIds"]).indexOf(i);Ja(t,n,i,e,!1,r)}else Ya(t,n,i,r);if(void 0===r.props[i][o])throw new RangeError(`field ops for ${i} did not contain opId ${o}`);return r.props[i][o]}function Wa(t,e){if("set"===e.get("action")){const t={type:"value",value:e.get("value")};return e.get("datatype")&&(t.datatype=e.get("datatype")),t}if(Fa(e)){const r=Ka(e),n=qa(t,r);return"list"===n||"text"===n?{objectId:r,type:n,props:{},edits:[]}:{objectId:r,type:n,props:{}}}throw new RangeError(`Unexpected operation in field ops: ${e.get("action")}`)}function Ya(t,e,r,n){if(!n)return;n.props[r]||(n.props[r]={});const o={};for(let i of eu(t,e,r)){const e=i.get("opId");o[e]=!0,Fa(i)&&n.props[r][e]||(n.props[r][e]=Wa(t,i))}for(let i of Object.keys(n.props[r]))o[i]||delete n.props[r][i]}function Ja(t,e,r,n,o,i){if(i)if(Ya(t,e,r,i),0!==Object.keys(i.props[r]).length){for(;!o&&i.edits.length>0&&i.edits[i.edits.length-1].index===n&&["insert","update"].includes(i.edits[i.edits.length-1].action);){o="insert"===i.edits.pop().action}for(const t of Object.keys(i.props[r]).sort(ou)){const e=i.props[r][t];Da(i.edits,o?{action:"insert",index:n,elemId:r,opId:t,value:e}:{action:"update",index:n,opId:t,value:e}),o=!1}}else Da(i.edits,{action:"remove",index:n,count:1})}function Xa(t,e,r){const n=e.get("actor"),o=e.get("startOp");let i=La();return e.get("ops").forEach(((e,s)=>{const a=e.get("action"),u=e.get("obj"),c=e.get("insert");if(!["set","del","inc","link","makeMap","makeList","makeText","makeTable"].includes(a))throw new RangeError(`Unknown operation action: ${a}`);if(!e.get("pred"))throw new RangeError(`Missing 'pred' field in operation ${e}`);let l;if(r){const e=function(t,e){let r=[];for(;"_root"!==e;){const n=t.getIn(["byObject",e,"_inbound"],La()).first();if(!n)return null;r.unshift(n),e=n.get("obj")}return r}(t,u);if(null!==e){l=r;for(let r of e)l=Ga(t,r,l)}}const h=e.merge({opId:`${o+s}@${n}`});c&&(t=function(t,e){const r=e.get("obj"),n=e.get("opId");if(!t.get("byObject").has(r))throw new Error(`Modification of unknown object ${r}`);if(t.hasIn(["byObject",r,"_insertion",n]))throw new Error(`Duplicate list element ID ${n}`);if(!e.get("elemId"))throw new RangeError("insert operation has no key");return t.updateIn(["byObject",r,"_following",e.get("elemId")],Ta(),(t=>t.push(e))).setIn(["byObject",r,"_insertion",n],e)}(t,h)),a.startsWith("make")&&(i=i.add(Ka(h))),t=Za(t,h,l)})),t}function Qa(t,e,r){const n=Ba(za(e)),o=n.get("actor"),i=n.get("seq"),s=n.get("startOp"),a=n.get("hash");if("string"!=typeof o||"number"!=typeof i||"number"!=typeof s)throw new TypeError(`Missing change metadata: actor = ${o}, seq = ${i}, startOp = ${s}`);if(t.hasIn(["hashes",a]))return t;const u=t.getIn(["states",o],Ta()).size+1;if(i!==u)throw new RangeError(`Expected change ${u} by ${o}, got change ${i}`);let c=0;for(let d of n.get("deps")){const e=t.getIn(["hashes",d,"maxOpId"]);if(void 0===e)throw new RangeError(`Unknown dependency hash ${d}`);c=Math.max(c,e),t=t.updateIn(["hashes",d,"depsFuture"],La(),(t=>t.add(a)))}if(s!==c+1)throw new RangeError(`Expected startOp to be ${c+1}, was ${s}`);let l=n.get("deps"),h=1===i;for(;!h&&!l.isEmpty();){const e=t.getIn(["hashes",l.first()]);l=l.shift(),e.get("actor")===o&&e.get("seq")===i-1?h=!0:l=l.concat(e.get("depsPast"))}if(!h)throw new RangeError("Change lacks dependency on prior sequence number by the same actor");const f=Ua({actor:o,seq:i,startOp:s,change:e,maxOpId:s+n.get("ops").size-1,depsPast:n.get("deps").toSet(),depsFuture:La()});return(t=Xa(t,n,r)).setIn(["hashes",a],f).updateIn(["states",o],Ta(),(t=>t.push(a))).update("deps",(t=>t.subtract(n.get("deps")).add(a))).update("maxOp",(t=>Math.max(t,f.get("maxOpId")))).update("history",(t=>t.push(a)))}function tu(t,e){return t.getIn(["hashes",e,"change"])}function eu(t,e,r){return t.getIn(["byObject",e,"_keys",r],Ta())}function ru(t,e,r){if("_head"===r)return;const n=t.getIn(["byObject",e,"_insertion",r]);if(!n)throw new TypeError(`Missing index entry for list element ${r}`);return n.get("elemId")}function nu(t,e){return ou(t.get("opId"),e.get("opId"))}function ou(t,e){const r=$a(t),n=$a(e);return r.counter<n.counter?-1:r.counter>n.counter?1:r.actorId<n.actorId?-1:r.actorId>n.actorId?1:0}function iu(t,e,r,n){let o=null;return n&&(o=Ua({opId:n})),t.getIn(["byObject",e,"_following",r],Ta()).filter((t=>t.get("insert")&&(!o||nu(t,o)<0))).sort(nu).reverse().map((t=>t.get("opId")))}function su(t,e,r){const n=iu(t,e,r);if(!n.isEmpty())return n.first();let o;for(;;){if(o=ru(t,e,r),!o)return;const n=iu(t,e,o,r);if(!n.isEmpty())return n.first();r=o}}function au(t,e,r){const n=ru(t,e,r);let o,i=iu(t,e,n);if(i.first()===r)return"_head"===n?null:n;for(let s of i){if(s===r)break;o=s}for(;;){if(i=iu(t,e,o),i.isEmpty())return o;o=i.last()}}function uu(t,e){if(Fa(e))return cu(t,Ka(e));if("set"===e.get("action")){const t={value:e.get("value")};return e.get("datatype")&&(t.datatype=e.get("datatype")),t}throw new TypeError(`Unexpected operation action: ${e.get("action")}`)}function cu(t,e){const r=qa(t,e);if("map"===r||"table"===r)return function(t,e,r){const n={objectId:e,type:r,props:{}};for(let[o,i]of t.getIn(["byObject",e,"_keys"]).entries())if(!i.isEmpty()){n.props[o]={};for(let e of i)n.props[o][e.get("opId")]=uu(t,e)}return n}(t,e,r);if("list"===r||"text"===r)return function(t,e,r){const n={objectId:e,type:r,props:{},edits:[]};let o="_head",i=0,s=0;for(;;){if(o=su(t,e,o),!o)return n;s=Math.max(s,$a(o).counter);const r=eu(t,e,o);if(!r.isEmpty()){n.props[i]={};for(let e of r)n.props[i][e.get("opId")]=uu(t,e);i+=1}}}(t,e,r);throw new RangeError(`Unknown object type: ${r}`)}var lu={init:function(){return Ua().set("states",Ua()).set("history",Ta()).set("byObject",Ua().set("_root",Ua().set("_keys",Ua()))).set("hashes",Ua()).set("deps",La()).set("maxOp",0).set("queue",Ta())},addChange:function(t,e,r){return function(t,e){let r=Ta();for(;;){for(let n of t.get("queue"))Va(t,Ma(n,!1))?t=Qa(t,n,e):r=r.push(n);if(r.count()===t.get("queue").count())return t;t=t.set("queue",r),r=Ta()}}(t=t.update("queue",(t=>t.push(e))),r)},addLocalChange:function(t,e,r){return Qa(t,e,r)},getHeads:function(t){return t.get("deps").toArray().sort()},getChangeByHash:tu,getMissingChanges:function(t,e){if(e.isEmpty())return t.get("history").toArray().map((e=>tu(t,e)));let r=Ta(),n={},o=[];for(let i of e){n[i]=!0;const e=t.getIn(["hashes",i,"depsFuture"]);if(!e)throw new RangeError(`hash not found: ${i}`);r=r.concat(e)}for(;!r.isEmpty();){const e=r.last();if(n[e]=!0,o.push(e),!t.getIn(["hashes",e,"depsPast"]).every((t=>n[t])))break;r=r.pop().concat(t.getIn(["hashes",e,"depsFuture"]))}if(r.isEmpty()&&t.get("deps").every((t=>n[t])))return o.map((e=>tu(t,e)));for(r=e,n={};!r.isEmpty();){const e=r.last();if(r=r.pop(),!n[e]){const o=t.getIn(["hashes",e,"depsPast"]);if(!o)throw new RangeError(`hash not found: ${e}`);r=r.concat(o),n[e]=!0}}return t.get("history").filter((t=>!n[t])).map((e=>tu(t,e))).toArray()},getChangesAdded:function(t,e){let r=e.get("deps").toArray(),n={},o=[];for(;r.length>0;){const i=r.pop();n[i]||tu(t,i)||(n[i]=!0,o.push(i),r.push(...e.getIn(["hashes",i,"depsPast"])))}return o.reverse().map((t=>tu(e,t)))},getMissingDeps:function(t,e=[]){let r={},n={};for(let o of t.get("queue")){const e=Ma(o,!0);n[e.hash]=!0;for(let n of e.deps)t.hasIn(["hashes",n])||(r[n]=!0)}for(let o of e)t.hasIn(["hashes",o])||(r[o]=!0);return Object.keys(r).filter((t=>!n[t])).sort()},constructObject:cu,getFieldOps:eu,getOperationKey:Ha,finalizePatch:function t(e){if(e)if("list"===e.type||"text"===e.type){delete e.props;for(let r of e.edits)t(r.value)}else if("map"===e.type||"table"===e.type)for(const r of Object.keys(e.props))for(const n of Object.keys(e.props[r]))t(e.props[r][n])}};var hu={backendState:function(t){if(t.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return t.state}};const{Map:fu,List:du}=Sa.exports,pu=lu,{splitContainers:gu,encodeChange:yu,decodeChanges:bu,encodeDocument:vu,constructPatch:_u,BackendDoc:mu}=xa,{backendState:wu}=hu;function Iu(){return{state:fu({opSet:pu.init(),objectIds:fu()}),heads:[]}}function ku(t,e,r,n){const o={clock:t.getIn(["opSet","states"]).map((t=>t.size)).toObject(),deps:t.getIn(["opSet","deps"]).toArray().sort(),diffs:e,maxOp:t.getIn(["opSet","maxOp"],0),pendingChanges:pu.getMissingDeps(t.get("opSet")).length};if(n&&r){o.actor=r.actor,o.seq=r.seq;const e=t.getIn(["opSet","states",r.actor,r.seq-1]);o.deps=o.deps.filter((t=>t!==e))}return o}function Eu(t,e,r,n){let o=n?{objectId:"_root",type:"map",props:{}}:null,i=t.get("opSet");for(let s of e)for(let t of gu(s))i=r?pu.addLocalChange(i,t,o):pu.addChange(i,t,o);return pu.finalizePatch(o),[t=t.set("opSet",i),n?ku(t,o,r,!0):null]}function xu(t){return vu(Au(t))}function Su(t,e){const r=wu(t);{const[n]=Eu(r,e,null,!1);return t.frozen=!0,{state:n,heads:pu.getHeads(n.get("opSet"))}}}function Au(t){return Ou(t,[])}function Ou(t,e){if(!Array.isArray(e))throw new TypeError("Pass an array of hashes to Backend.getChanges()");const r=wu(t);return pu.getMissingChanges(r.get("opSet"),du(e))}var ju={init:Iu,clone:function(t){return{state:wu(t),heads:t.heads}},free:function(t){t.state=null,t.frozen=!0},applyChanges:function(t,e){{let[r,n]=Eu(wu(t),e,null,!0);const o=pu.getHeads(r.get("opSet"));return t.frozen=!0,[{state:r,heads:o},n]}},applyLocalChange:function(t,e){const r=wu(t);if(e.seq<=function(t,e){return t.getIn(["opSet","states",e],du()).size}(r,e.actor))throw new RangeError("Change request has already been applied");if(e.seq>1){const t=function(t,e,r){return t.getIn(["opSet","states",e,r])}(r,e.actor,e.seq-2);if(!t)throw new RangeError(`Cannot find hash of localChange before seq=${e.seq}`);let n={[t]:!0};for(let r of e.deps)n[r]=!0;e.deps=Object.keys(n).sort()}const n=yu(e);{const o={actor:e.actor,seq:e.seq},[i,s]=Eu(r,[n],o,!0),a=pu.getHeads(i.get("opSet"));return t.frozen=!0,[{state:i,heads:a},s,n]}},save:xu,load:function(t){{const e=bu([t]).map(yu);return Su(Iu(),e)}},loadChanges:Su,getPatch:function(t){return ku(wu(t),_u(xu(t)),null,!1)},getHeads:function(t){return t.heads},getAllChanges:Au,getChanges:Ou,getChangesAdded:function(t,e){const r=wu(t).get("opSet"),n=wu(e).get("opSet");return pu.getChangesAdded(r,n)},getChangeByHash:function(t,e){const r=wu(t);return pu.getChangeByHash(r.get("opSet"),e)},getMissingDeps:function(t,e=[]){const r=wu(t);return pu.getMissingDeps(r.get("opSet"),e)}};const{List:Ru}=Sa.exports,{backendState:Cu}=hu,Uu=ju,Tu=lu,{hexStringToBytes:Lu,bytesToHexString:Bu,Encoder:Nu,Decoder:zu}=ss,{decodeChangeMeta:Mu}=xa,{copyObject:Du}=Nt;class $u{constructor(t){if(Array.isArray(t)){this.numEntries=t.length,this.numBitsPerEntry=10,this.numProbes=7,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let e of t)this.addHash(e)}else{if(!(t instanceof Uint8Array))throw new TypeError("invalid argument");if(0===t.byteLength)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=t;else{const e=new zu(t);this.numEntries=e.readUint32(),this.numBitsPerEntry=e.readUint32(),this.numProbes=e.readUint32(),this.bits=e.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}}}get bytes(){if(0===this.numEntries)return new Uint8Array(0);const t=new Nu;return t.appendUint32(this.numEntries),t.appendUint32(this.numBitsPerEntry),t.appendUint32(this.numProbes),t.appendRawBytes(this.bits),t.buffer}getProbes(t){const e=Lu(t),r=8*this.bits.byteLength;if(32!==e.byteLength)throw new RangeError(`Not a 256-bit hash: ${t}`);let n=((e[0]|e[1]<<8|e[2]<<16|e[3]<<24)>>>0)%r,o=((e[4]|e[5]<<8|e[6]<<16|e[7]<<24)>>>0)%r,i=((e[8]|e[9]<<8|e[10]<<16|e[11]<<24)>>>0)%r;const s=[n];for(let a=1;a<this.numProbes;a++)n=(n+o)%r,o=(o+i)%r,s.push(n);return s}addHash(t){for(let e of this.getProbes(t))this.bits[e>>>3]|=1<<(7&e)}containsHash(t){if(0===this.numEntries)return!1;for(let e of this.getProbes(t))if(0==(this.bits[e>>>3]&1<<(7&e)))return!1;return!0}}function Vu(t,e){if(!Array.isArray(e))throw new TypeError("hashes must be an array");t.appendUint32(e.length);for(let r=0;r<e.length;r++){if(r>0&&e[r-1]>=e[r])throw new RangeError("hashes must be sorted");const n=Lu(e[r]);if(32!==n.byteLength)throw new TypeError("heads hashes must be 256 bits");t.appendRawBytes(n)}}function qu(t){let e=t.readUint32(),r=[];for(let n=0;n<e;n++)r.push(Bu(t.readRawBytes(32)));return r}function Pu(t){const e=new Nu;e.appendByte(66),Vu(e,t.heads),Vu(e,t.need),e.appendUint32(t.have.length);for(let r of t.have)Vu(e,r.lastSync),e.appendPrefixedBytes(r.bloom);e.appendUint32(t.changes.length);for(let r of t.changes)e.appendPrefixedBytes(r);return e.buffer}function Fu(t){const e=new zu(t),r=e.readByte();if(66!==r)throw new RangeError(`Unexpected message type: ${r}`);const n=qu(e),o=qu(e),i=e.readUint32();let s={heads:n,need:o,have:[],changes:[]};for(let u=0;u<i;u++){const t=qu(e),r=e.readPrefixedBytes(e);s.have.push({lastSync:t,bloom:r})}const a=e.readUint32();for(let u=0;u<a;u++){const t=e.readPrefixedBytes();s.changes.push(t)}return s}function Ku(t,e){const r=Tu.getMissingChanges(t.get("opSet"),Ru(e)).map((t=>Mu(t,!0).hash));return{lastSync:e,bloom:new $u(r).bytes}}function Hu(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function Zu(t,e){return t.length===e.length&&t.every(((t,r)=>t===e[r]))}var Gu={receiveSyncMessage:function(t,e,r){if(!t)throw new Error("generateSyncMessage called with no Automerge document");if(!e)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:n,lastSentHeads:o,sentHashes:i}=e,s=null;const a=Fu(r),u=Uu.getHeads(t);a.changes.length>0&&([t,s]=Uu.applyChanges(t,a.changes),n=function(t,e,r){const n=e.filter((e=>!t.includes(e))),o=r.filter((t=>e.includes(t)));return[...new Set([...n,...o])].sort()}(u,Uu.getHeads(t),n)),0===a.changes.length&&Zu(a.heads,u)&&(o=a.heads);const c=a.heads.filter((e=>Uu.getChangeByHash(t,e)));c.length===a.heads.length?(n=a.heads,0===a.heads.length&&(o=[],i=[])):n=[...new Set(c.concat(n))].sort();const l={sharedHeads:n,lastSentHeads:o,theirHave:a.have,theirHeads:a.heads,theirNeed:a.need,sentHashes:i};return[t,l,s]},generateSyncMessage:function(t,e){if(!t)throw new Error("generateSyncMessage called with no Automerge document");if(!e)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:r,lastSentHeads:n,theirHeads:o,theirNeed:i,theirHave:s,sentHashes:a}=e;const u=Uu.getHeads(t),c=Cu(t),l=Uu.getMissingDeps(t,o||[]);let h=[];if(l.every((t=>o.includes(t)))&&(h=[Ku(c,r)]),s&&s.length>0){if(!s[0].lastSync.every((e=>Uu.getChangeByHash(t,e)))){return[e,Pu({heads:u,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]})]}}let f=Array.isArray(s)&&Array.isArray(i)?function(t,e,r){const n=t.get("opSet");if(0===e.length)return r.map((t=>Tu.getChangeByHash(n,t)));let o={},i=[];for(let f of e){for(let t of f.lastSync)o[t]=!0;i.push(new $u(f.bloom))}const s=Tu.getMissingChanges(n,Ru(Object.keys(o))).map((t=>Mu(t,!0)));let a={},u={},c={};for(let f of s){a[f.hash]=!0;for(let t of f.deps)u[t]||(u[t]=[]),u[t].push(f.hash);i.every((t=>!t.containsHash(f.hash)))&&(c[f.hash]=!0)}let l=Object.keys(c);for(;l.length>0;){const t=l.pop();if(u[t])for(let e of u[t])c[e]||(c[e]=!0,l.push(e))}let h=[];for(let f of r)if(c[f]=!0,!a[f]){const t=Tu.getChangeByHash(n,f);t&&h.push(t)}for(let f of s)c[f.hash]&&h.push(f.change);return h}(c,s,i):[];const d=Array.isArray(n)&&Zu(u,n),p=Array.isArray(o)&&Zu(u,o);if(d&&p&&0===f.length&&0===l.length)return[e,null];f=f.filter((t=>!a[Mu(t,!0).hash]));const g={heads:u,have:h,need:l,changes:f};if(f.length>0){a=Du(a);for(const t of f)a[Mu(t,!0).hash]=!0}return[e=Object.assign({},e,{lastSentHeads:u,sentHashes:a}),Pu(g)]},encodeSyncMessage:Pu,decodeSyncMessage:Fu,initSyncState:Hu,encodeSyncState:function(t){const e=new Nu;return e.appendByte(67),Vu(e,t.sharedHeads),e.buffer},decodeSyncState:function(t){const e=new zu(t),r=e.readByte();if(67!==r)throw new RangeError(`Unexpected record type: ${r}`);const n=qu(e);return Object.assign({sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}},{sharedHeads:n})},BloomFilter:$u};const{init:Wu,clone:Yu,free:Ju,applyChanges:Xu,applyLocalChange:Qu,save:tc,load:ec,loadChanges:rc,getPatch:nc,getHeads:oc,getAllChanges:ic,getChanges:sc,getChangesAdded:ac,getChangeByHash:uc,getMissingDeps:cc}=ju,{receiveSyncMessage:lc,generateSyncMessage:hc,encodeSyncMessage:fc,decodeSyncMessage:dc,encodeSyncState:pc,decodeSyncState:gc,initSyncState:yc}=Gu;var bc={init:Wu,clone:Yu,free:Ju,applyChanges:Xu,applyLocalChange:Qu,save:tc,load:ec,loadChanges:rc,getPatch:nc,getHeads:oc,getAllChanges:ic,getChanges:sc,getChangesAdded:ac,getChangeByHash:uc,getMissingDeps:cc,receiveSyncMessage:lc,generateSyncMessage:hc,encodeSyncMessage:fc,decodeSyncMessage:dc,encodeSyncState:pc,decodeSyncState:gc,initSyncState:yc};!function(t){const e=Tt,r=br,{OPTIONS:n}=Lt,{encodeChange:o,decodeChange:i}=xa,{isObject:s}=Nt;let a=bc;function u(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!s(t))throw new TypeError(`Unsupported options for init(): ${t}`);return r.init(Object.assign({backend:a},t))}function c(t,e,n){const[o]=r.change(t,e,n);return o}function l(t){return a.getAllChanges(r.getBackendState(t))}function h(t,e,o,i,s){const a=r.applyPatch(t,e,o),u=s.patchCallback||t[n].patchCallback;return u&&u(e,t,a,!1,i),a}function f(t,e,n={}){const o=r.getBackendState(t),[i,s]=a.applyChanges(o,e);return[h(t,s,i,e,n),s]}t.exports={init:u,from:function(t,e){return c(u(e),{message:"Initialization"},(e=>Object.assign(e,t)))},change:c,emptyChange:function(t,e){const[n]=r.emptyChange(t,e);return n},clone:function(t,e={}){const n=a.clone(r.getBackendState(t));return h(u(e),a.getPatch(n),n,[],e)},free:function(t){a.free(r.getBackendState(t))},load:function(t,e={}){const r=a.load(t);return h(u(e),a.getPatch(r),r,[t],e)},save:function(t){return a.save(r.getBackendState(t))},merge:function(t,e){if(r.getActorId(t)===r.getActorId(e))throw new RangeError("Cannot merge an actor with itself");const n=r.getBackendState(t),o=r.getBackendState(e),i=a.getChangesAdded(n,o),[s]=f(t,i);return s},getChanges:function(t,e){const n=r.getBackendState(t),o=r.getBackendState(e);return a.getChanges(o,a.getHeads(n))},getAllChanges:l,applyChanges:f,encodeChange:o,decodeChange:i,equals:function t(e,r){if(!s(e)||!s(r))return e===r;const n=Object.keys(e).sort(),o=Object.keys(r).sort();if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++){if(n[i]!==o[i])return!1;if(!t(e[n[i]],r[o[i]]))return!1}return!0},getHistory:function(t){const e=r.getActorId(t),n=l(t);return n.map(((t,o)=>({get change(){return i(t)},get snapshot(){const t=a.loadChanges(a.init(),n.slice(0,o+1));return r.applyPatch(u(e),a.getPatch(t),t)}})))},uuid:e,Frontend:r,setDefaultBackend:function(t){a=t},generateSyncMessage:function(t,e){return a.generateSyncMessage(r.getBackendState(t),e)},receiveSyncMessage:function(t,e,o){const[i,s,u]=a.receiveSyncMessage(r.getBackendState(t),e,o);if(!u)return[t,s,u];let c=null;return t[n].patchCallback&&(c=a.decodeSyncMessage(o).changes),[h(t,u,i,c,{}),s,u]},initSyncState:function(){return a.initSyncState()},get Backend(){return a}};for(let d of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable"])t.exports[d]=r[d]}(_t);var vc=_t.exports,_c={},mc={};Object.defineProperty(mc,"__esModule",{value:!0}),mc.debounce=void 0;const wc=()=>{};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Ic(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(e){i(e)}}function a(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function kc(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}mc.debounce=function(t,e=0,r={}){let n=null,o=!1;const i=r.before||wc,s=r.after||wc;return function(...a){o||(o=!0,i()),null!=n&&(clearTimeout(n),n=null),r.isImmediate&&null==n?(o=!1,t.apply(this,a),s()):n=setTimeout((()=>{o=!1,n=null,t.apply(this,a),s()}),e)}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var e=mc;Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return e.debounce}})}(_c);var Ec={exports:{}},xc=vt(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}}));!function(t){var e=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=e(),s=e([1]),a=e([56129,1]),u=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function p(t,e,r,n,o){var i,s=0;for(i=0;i<o;i++)s|=t[e+i]^r[n+i];return(1&s-1>>>8)-1}function g(t,e,r,n){return p(t,e,r,n,16)}function y(t,e,r,n){return p(t,e,r,n,32)}function b(t,e,r,n){!function(t,e,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,d=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,b=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=i,I=s,k=a,E=u,x=c,S=l,A=h,O=f,j=d,R=p,C=g,U=y,T=b,L=v,B=_,N=m,z=0;z<20;z+=2)w^=(o=(T^=(o=(j^=(o=(x^=(o=w+T|0)<<7|o>>>25)+w|0)<<9|o>>>23)+x|0)<<13|o>>>19)+j|0)<<18|o>>>14,S^=(o=(I^=(o=(L^=(o=(R^=(o=S+I|0)<<7|o>>>25)+S|0)<<9|o>>>23)+R|0)<<13|o>>>19)+L|0)<<18|o>>>14,C^=(o=(A^=(o=(k^=(o=(B^=(o=C+A|0)<<7|o>>>25)+C|0)<<9|o>>>23)+B|0)<<13|o>>>19)+k|0)<<18|o>>>14,N^=(o=(U^=(o=(O^=(o=(E^=(o=N+U|0)<<7|o>>>25)+N|0)<<9|o>>>23)+E|0)<<13|o>>>19)+O|0)<<18|o>>>14,w^=(o=(E^=(o=(k^=(o=(I^=(o=w+E|0)<<7|o>>>25)+w|0)<<9|o>>>23)+I|0)<<13|o>>>19)+k|0)<<18|o>>>14,S^=(o=(x^=(o=(O^=(o=(A^=(o=S+x|0)<<7|o>>>25)+S|0)<<9|o>>>23)+A|0)<<13|o>>>19)+O|0)<<18|o>>>14,C^=(o=(R^=(o=(j^=(o=(U^=(o=C+R|0)<<7|o>>>25)+C|0)<<9|o>>>23)+U|0)<<13|o>>>19)+j|0)<<18|o>>>14,N^=(o=(B^=(o=(L^=(o=(T^=(o=N+B|0)<<7|o>>>25)+N|0)<<9|o>>>23)+T|0)<<13|o>>>19)+L|0)<<18|o>>>14;w=w+i|0,I=I+s|0,k=k+a|0,E=E+u|0,x=x+c|0,S=S+l|0,A=A+h|0,O=O+f|0,j=j+d|0,R=R+p|0,C=C+g|0,U=U+y|0,T=T+b|0,L=L+v|0,B=B+_|0,N=N+m|0,t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=I>>>0&255,t[5]=I>>>8&255,t[6]=I>>>16&255,t[7]=I>>>24&255,t[8]=k>>>0&255,t[9]=k>>>8&255,t[10]=k>>>16&255,t[11]=k>>>24&255,t[12]=E>>>0&255,t[13]=E>>>8&255,t[14]=E>>>16&255,t[15]=E>>>24&255,t[16]=x>>>0&255,t[17]=x>>>8&255,t[18]=x>>>16&255,t[19]=x>>>24&255,t[20]=S>>>0&255,t[21]=S>>>8&255,t[22]=S>>>16&255,t[23]=S>>>24&255,t[24]=A>>>0&255,t[25]=A>>>8&255,t[26]=A>>>16&255,t[27]=A>>>24&255,t[28]=O>>>0&255,t[29]=O>>>8&255,t[30]=O>>>16&255,t[31]=O>>>24&255,t[32]=j>>>0&255,t[33]=j>>>8&255,t[34]=j>>>16&255,t[35]=j>>>24&255,t[36]=R>>>0&255,t[37]=R>>>8&255,t[38]=R>>>16&255,t[39]=R>>>24&255,t[40]=C>>>0&255,t[41]=C>>>8&255,t[42]=C>>>16&255,t[43]=C>>>24&255,t[44]=U>>>0&255,t[45]=U>>>8&255,t[46]=U>>>16&255,t[47]=U>>>24&255,t[48]=T>>>0&255,t[49]=T>>>8&255,t[50]=T>>>16&255,t[51]=T>>>24&255,t[52]=L>>>0&255,t[53]=L>>>8&255,t[54]=L>>>16&255,t[55]=L>>>24&255,t[56]=B>>>0&255,t[57]=B>>>8&255,t[58]=B>>>16&255,t[59]=B>>>24&255,t[60]=N>>>0&255,t[61]=N>>>8&255,t[62]=N>>>16&255,t[63]=N>>>24&255}(t,e,r,n)}function v(t,e,r,n){!function(t,e,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,d=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,b=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=0;w<20;w+=2)i^=(o=(b^=(o=(d^=(o=(c^=(o=i+b|0)<<7|o>>>25)+i|0)<<9|o>>>23)+c|0)<<13|o>>>19)+d|0)<<18|o>>>14,l^=(o=(s^=(o=(v^=(o=(p^=(o=l+s|0)<<7|o>>>25)+l|0)<<9|o>>>23)+p|0)<<13|o>>>19)+v|0)<<18|o>>>14,g^=(o=(h^=(o=(a^=(o=(_^=(o=g+h|0)<<7|o>>>25)+g|0)<<9|o>>>23)+_|0)<<13|o>>>19)+a|0)<<18|o>>>14,m^=(o=(y^=(o=(f^=(o=(u^=(o=m+y|0)<<7|o>>>25)+m|0)<<9|o>>>23)+u|0)<<13|o>>>19)+f|0)<<18|o>>>14,i^=(o=(u^=(o=(a^=(o=(s^=(o=i+u|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+a|0)<<18|o>>>14,l^=(o=(c^=(o=(f^=(o=(h^=(o=l+c|0)<<7|o>>>25)+l|0)<<9|o>>>23)+h|0)<<13|o>>>19)+f|0)<<18|o>>>14,g^=(o=(p^=(o=(d^=(o=(y^=(o=g+p|0)<<7|o>>>25)+g|0)<<9|o>>>23)+y|0)<<13|o>>>19)+d|0)<<18|o>>>14,m^=(o=(_^=(o=(v^=(o=(b^=(o=m+_|0)<<7|o>>>25)+m|0)<<9|o>>>23)+b|0)<<13|o>>>19)+v|0)<<18|o>>>14;t[0]=i>>>0&255,t[1]=i>>>8&255,t[2]=i>>>16&255,t[3]=i>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=g>>>0&255,t[9]=g>>>8&255,t[10]=g>>>16&255,t[11]=g>>>24&255,t[12]=m>>>0&255,t[13]=m>>>8&255,t[14]=m>>>16&255,t[15]=m>>>24&255,t[16]=h>>>0&255,t[17]=h>>>8&255,t[18]=h>>>16&255,t[19]=h>>>24&255,t[20]=f>>>0&255,t[21]=f>>>8&255,t[22]=f>>>16&255,t[23]=f>>>24&255,t[24]=d>>>0&255,t[25]=d>>>8&255,t[26]=d>>>16&255,t[27]=d>>>24&255,t[28]=p>>>0&255,t[29]=p>>>8&255,t[30]=p>>>16&255,t[31]=p>>>24&255}(t,e,r,n)}var _=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function m(t,e,r,n,o,i,s){var a,u,c=new Uint8Array(16),l=new Uint8Array(64);for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=i[u];for(;o>=64;){for(b(l,c,s,_),u=0;u<64;u++)t[e+u]=r[n+u]^l[u];for(a=1,u=8;u<16;u++)a=a+(255&c[u])|0,c[u]=255&a,a>>>=8;o-=64,e+=64,n+=64}if(o>0)for(b(l,c,s,_),u=0;u<o;u++)t[e+u]=r[n+u]^l[u];return 0}function w(t,e,r,n,o){var i,s,a=new Uint8Array(16),u=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(b(u,a,o,_),s=0;s<64;s++)t[e+s]=u[s];for(i=1,s=8;s<16;s++)i=i+(255&a[s])|0,a[s]=255&i,i>>>=8;r-=64,e+=64}if(r>0)for(b(u,a,o,_),s=0;s<r;s++)t[e+s]=u[s];return 0}function I(t,e,r,n,o){var i=new Uint8Array(32);v(i,n,o,_);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return w(t,e,r,s,i)}function k(t,e,r,n,o,i,s){var a=new Uint8Array(32);v(a,i,s,_);for(var u=new Uint8Array(8),c=0;c<8;c++)u[c]=i[c+16];return m(t,e,r,n,o,u,a)}var E=function(t){var e,r,n,o,i,s,a,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|o<<9),i=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(s>>>11|a<<5),u=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function x(t,e,r,n,o,i){var s=new E(i);return s.update(r,n,o),s.finish(t,e),0}function S(t,e,r,n,o,i){var s=new Uint8Array(16);return x(s,0,r,n,o,i),g(t,e,s,0)}function A(t,e,r,n,o){var i;if(r<32)return-1;for(k(t,0,e,0,r,n,o),x(t,16,t,32,r-32,t),i=0;i<16;i++)t[i]=0;return 0}function O(t,e,r,n,o){var i,s=new Uint8Array(32);if(r<32)return-1;if(I(s,0,32,n,o),0!==S(e,16,e,32,r-32,s))return-1;for(k(t,0,e,0,r,n,o),i=0;i<32;i++)t[i]=0;return 0}function j(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function R(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function C(t,e,r){for(var n,o=~(r-1),i=0;i<16;i++)n=o&(t[i]^e[i]),t[i]^=n,e[i]^=n}function U(t,r){var n,o,i,s=e(),a=e();for(n=0;n<16;n++)a[n]=r[n];for(R(a),R(a),R(a),o=0;o<2;o++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,C(a,s,1-i)}for(n=0;n<16;n++)t[2*n]=255&a[n],t[2*n+1]=a[n]>>8}function T(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return U(r,t),U(n,e),y(r,0,n,0)}function L(t){var e=new Uint8Array(32);return U(e,t),1&e[0]}function B(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function N(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function z(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function M(t,e,r){var n,o,i=0,s=0,a=0,u=0,c=0,l=0,h=0,f=0,d=0,p=0,g=0,y=0,b=0,v=0,_=0,m=0,w=0,I=0,k=0,E=0,x=0,S=0,A=0,O=0,j=0,R=0,C=0,U=0,T=0,L=0,B=0,N=r[0],z=r[1],M=r[2],D=r[3],$=r[4],V=r[5],q=r[6],P=r[7],F=r[8],K=r[9],H=r[10],Z=r[11],G=r[12],W=r[13],Y=r[14],J=r[15];i+=(n=e[0])*N,s+=n*z,a+=n*M,u+=n*D,c+=n*$,l+=n*V,h+=n*q,f+=n*P,d+=n*F,p+=n*K,g+=n*H,y+=n*Z,b+=n*G,v+=n*W,_+=n*Y,m+=n*J,s+=(n=e[1])*N,a+=n*z,u+=n*M,c+=n*D,l+=n*$,h+=n*V,f+=n*q,d+=n*P,p+=n*F,g+=n*K,y+=n*H,b+=n*Z,v+=n*G,_+=n*W,m+=n*Y,w+=n*J,a+=(n=e[2])*N,u+=n*z,c+=n*M,l+=n*D,h+=n*$,f+=n*V,d+=n*q,p+=n*P,g+=n*F,y+=n*K,b+=n*H,v+=n*Z,_+=n*G,m+=n*W,w+=n*Y,I+=n*J,u+=(n=e[3])*N,c+=n*z,l+=n*M,h+=n*D,f+=n*$,d+=n*V,p+=n*q,g+=n*P,y+=n*F,b+=n*K,v+=n*H,_+=n*Z,m+=n*G,w+=n*W,I+=n*Y,k+=n*J,c+=(n=e[4])*N,l+=n*z,h+=n*M,f+=n*D,d+=n*$,p+=n*V,g+=n*q,y+=n*P,b+=n*F,v+=n*K,_+=n*H,m+=n*Z,w+=n*G,I+=n*W,k+=n*Y,E+=n*J,l+=(n=e[5])*N,h+=n*z,f+=n*M,d+=n*D,p+=n*$,g+=n*V,y+=n*q,b+=n*P,v+=n*F,_+=n*K,m+=n*H,w+=n*Z,I+=n*G,k+=n*W,E+=n*Y,x+=n*J,h+=(n=e[6])*N,f+=n*z,d+=n*M,p+=n*D,g+=n*$,y+=n*V,b+=n*q,v+=n*P,_+=n*F,m+=n*K,w+=n*H,I+=n*Z,k+=n*G,E+=n*W,x+=n*Y,S+=n*J,f+=(n=e[7])*N,d+=n*z,p+=n*M,g+=n*D,y+=n*$,b+=n*V,v+=n*q,_+=n*P,m+=n*F,w+=n*K,I+=n*H,k+=n*Z,E+=n*G,x+=n*W,S+=n*Y,A+=n*J,d+=(n=e[8])*N,p+=n*z,g+=n*M,y+=n*D,b+=n*$,v+=n*V,_+=n*q,m+=n*P,w+=n*F,I+=n*K,k+=n*H,E+=n*Z,x+=n*G,S+=n*W,A+=n*Y,O+=n*J,p+=(n=e[9])*N,g+=n*z,y+=n*M,b+=n*D,v+=n*$,_+=n*V,m+=n*q,w+=n*P,I+=n*F,k+=n*K,E+=n*H,x+=n*Z,S+=n*G,A+=n*W,O+=n*Y,j+=n*J,g+=(n=e[10])*N,y+=n*z,b+=n*M,v+=n*D,_+=n*$,m+=n*V,w+=n*q,I+=n*P,k+=n*F,E+=n*K,x+=n*H,S+=n*Z,A+=n*G,O+=n*W,j+=n*Y,R+=n*J,y+=(n=e[11])*N,b+=n*z,v+=n*M,_+=n*D,m+=n*$,w+=n*V,I+=n*q,k+=n*P,E+=n*F,x+=n*K,S+=n*H,A+=n*Z,O+=n*G,j+=n*W,R+=n*Y,C+=n*J,b+=(n=e[12])*N,v+=n*z,_+=n*M,m+=n*D,w+=n*$,I+=n*V,k+=n*q,E+=n*P,x+=n*F,S+=n*K,A+=n*H,O+=n*Z,j+=n*G,R+=n*W,C+=n*Y,U+=n*J,v+=(n=e[13])*N,_+=n*z,m+=n*M,w+=n*D,I+=n*$,k+=n*V,E+=n*q,x+=n*P,S+=n*F,A+=n*K,O+=n*H,j+=n*Z,R+=n*G,C+=n*W,U+=n*Y,T+=n*J,_+=(n=e[14])*N,m+=n*z,w+=n*M,I+=n*D,k+=n*$,E+=n*V,x+=n*q,S+=n*P,A+=n*F,O+=n*K,j+=n*H,R+=n*Z,C+=n*G,U+=n*W,T+=n*Y,L+=n*J,m+=(n=e[15])*N,s+=38*(I+=n*M),a+=38*(k+=n*D),u+=38*(E+=n*$),c+=38*(x+=n*V),l+=38*(S+=n*q),h+=38*(A+=n*P),f+=38*(O+=n*F),d+=38*(j+=n*K),p+=38*(R+=n*H),g+=38*(C+=n*Z),y+=38*(U+=n*G),b+=38*(T+=n*W),v+=38*(L+=n*Y),_+=38*(B+=n*J),i=(n=(i+=38*(w+=n*z))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=l,t[6]=h,t[7]=f,t[8]=d,t[9]=p,t[10]=g,t[11]=y,t[12]=b,t[13]=v,t[14]=_,t[15]=m}function D(t,e){M(t,e,e)}function $(t,r){var n,o=e();for(n=0;n<16;n++)o[n]=r[n];for(n=253;n>=0;n--)D(o,o),2!==n&&4!==n&&M(o,o,r);for(n=0;n<16;n++)t[n]=o[n]}function V(t,r){var n,o=e();for(n=0;n<16;n++)o[n]=r[n];for(n=250;n>=0;n--)D(o,o),1!==n&&M(o,o,r);for(n=0;n<16;n++)t[n]=o[n]}function q(t,r,n){var o,i,s=new Uint8Array(32),u=new Float64Array(80),c=e(),l=e(),h=e(),f=e(),d=e(),p=e();for(i=0;i<31;i++)s[i]=r[i];for(s[31]=127&r[31]|64,s[0]&=248,B(u,n),i=0;i<16;i++)l[i]=u[i],f[i]=c[i]=h[i]=0;for(c[0]=f[0]=1,i=254;i>=0;--i)C(c,l,o=s[i>>>3]>>>(7&i)&1),C(h,f,o),N(d,c,h),z(c,c,h),N(h,l,f),z(l,l,f),D(f,d),D(p,c),M(c,h,c),M(h,l,d),N(d,c,h),z(c,c,h),D(l,c),z(h,f,p),M(c,h,a),N(c,c,f),M(h,h,c),M(c,f,p),M(f,l,u),D(l,d),C(c,l,o),C(h,f,o);for(i=0;i<16;i++)u[i+16]=c[i],u[i+32]=h[i],u[i+48]=l[i],u[i+64]=f[i];var g=u.subarray(32),y=u.subarray(16);return $(g,g),M(y,y,g),U(t,y),0}function P(t,e){return q(t,e,o)}function F(t,e){return r(e,32),P(t,e)}function K(t,e,r){var o=new Uint8Array(32);return q(o,r,e),v(t,n,o,_)}E.prototype.blocks=function(t,e,r){for(var n,o,i,s,a,u,c,l,h,f,d,p,g,y,b,v,_,m,w,I=this.fin?0:2048,k=this.h[0],E=this.h[1],x=this.h[2],S=this.h[3],A=this.h[4],O=this.h[5],j=this.h[6],R=this.h[7],C=this.h[8],U=this.h[9],T=this.r[0],L=this.r[1],B=this.r[2],N=this.r[3],z=this.r[4],M=this.r[5],D=this.r[6],$=this.r[7],V=this.r[8],q=this.r[9];r>=16;)f=h=0,f+=(k+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*T,f+=(E+=8191&(n>>>13|(o=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*q),f+=(x+=8191&(o>>>10|(i=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*V),f+=(S+=8191&(i>>>7|(s=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*$),h=(f+=(A+=8191&(s>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*D))>>>13,f&=8191,f+=(O+=a>>>1&8191)*(5*M),f+=(j+=8191&(a>>>14|(u=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*z),f+=(R+=8191&(u>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*N),f+=(C+=8191&(c>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*B),d=h+=(f+=(U+=l>>>5|I)*(5*L))>>>13,d+=k*L,d+=E*T,d+=x*(5*q),d+=S*(5*V),h=(d+=A*(5*$))>>>13,d&=8191,d+=O*(5*D),d+=j*(5*M),d+=R*(5*z),d+=C*(5*N),h+=(d+=U*(5*B))>>>13,d&=8191,p=h,p+=k*B,p+=E*L,p+=x*T,p+=S*(5*q),h=(p+=A*(5*V))>>>13,p&=8191,p+=O*(5*$),p+=j*(5*D),p+=R*(5*M),p+=C*(5*z),g=h+=(p+=U*(5*N))>>>13,g+=k*N,g+=E*B,g+=x*L,g+=S*T,h=(g+=A*(5*q))>>>13,g&=8191,g+=O*(5*V),g+=j*(5*$),g+=R*(5*D),g+=C*(5*M),y=h+=(g+=U*(5*z))>>>13,y+=k*z,y+=E*N,y+=x*B,y+=S*L,h=(y+=A*T)>>>13,y&=8191,y+=O*(5*q),y+=j*(5*V),y+=R*(5*$),y+=C*(5*D),b=h+=(y+=U*(5*M))>>>13,b+=k*M,b+=E*z,b+=x*N,b+=S*B,h=(b+=A*L)>>>13,b&=8191,b+=O*T,b+=j*(5*q),b+=R*(5*V),b+=C*(5*$),v=h+=(b+=U*(5*D))>>>13,v+=k*D,v+=E*M,v+=x*z,v+=S*N,h=(v+=A*B)>>>13,v&=8191,v+=O*L,v+=j*T,v+=R*(5*q),v+=C*(5*V),_=h+=(v+=U*(5*$))>>>13,_+=k*$,_+=E*D,_+=x*M,_+=S*z,h=(_+=A*N)>>>13,_&=8191,_+=O*B,_+=j*L,_+=R*T,_+=C*(5*q),m=h+=(_+=U*(5*V))>>>13,m+=k*V,m+=E*$,m+=x*D,m+=S*M,h=(m+=A*z)>>>13,m&=8191,m+=O*N,m+=j*B,m+=R*L,m+=C*T,w=h+=(m+=U*(5*q))>>>13,w+=k*q,w+=E*V,w+=x*$,w+=S*D,h=(w+=A*M)>>>13,w&=8191,w+=O*z,w+=j*N,w+=R*B,w+=C*L,k=f=8191&(h=(h=((h+=(w+=U*T)>>>13)<<2)+h|0)+(f&=8191)|0),E=d+=h>>>=13,x=p&=8191,S=g&=8191,A=y&=8191,O=b&=8191,j=v&=8191,R=_&=8191,C=m&=8191,U=w&=8191,e+=16,r-=16;this.h[0]=k,this.h[1]=E,this.h[2]=x,this.h[3]=S,this.h[4]=A,this.h[5]=O,this.h[6]=j,this.h[7]=R,this.h[8]=C,this.h[9]=U},E.prototype.finish=function(t,e){var r,n,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+r,r=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,n=(1^r)-1,i=0;i<10;i++)s[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},E.prototype.update=function(t,e,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(t,e,o),e+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var H=A,Z=O,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function W(t,e,r,n){for(var o,i,s,a,u,c,l,h,f,d,p,g,y,b,v,_,m,w,I,k,E,x,S,A,O,j,R=new Int32Array(16),C=new Int32Array(16),U=t[0],T=t[1],L=t[2],B=t[3],N=t[4],z=t[5],M=t[6],D=t[7],$=e[0],V=e[1],q=e[2],P=e[3],F=e[4],K=e[5],H=e[6],Z=e[7],W=0;n>=128;){for(I=0;I<16;I++)k=8*I+W,R[I]=r[k+0]<<24|r[k+1]<<16|r[k+2]<<8|r[k+3],C[I]=r[k+4]<<24|r[k+5]<<16|r[k+6]<<8|r[k+7];for(I=0;I<80;I++)if(o=U,i=T,s=L,a=B,u=N,c=z,l=M,f=$,d=V,p=q,g=P,y=F,b=K,v=H,S=65535&(x=Z),A=x>>>16,O=65535&(E=D),j=E>>>16,S+=65535&(x=(F>>>14|N<<18)^(F>>>18|N<<14)^(N>>>9|F<<23)),A+=x>>>16,O+=65535&(E=(N>>>14|F<<18)^(N>>>18|F<<14)^(F>>>9|N<<23)),j+=E>>>16,S+=65535&(x=F&K^~F&H),A+=x>>>16,O+=65535&(E=N&z^~N&M),j+=E>>>16,S+=65535&(x=G[2*I+1]),A+=x>>>16,O+=65535&(E=G[2*I]),j+=E>>>16,E=R[I%16],A+=(x=C[I%16])>>>16,O+=65535&E,j+=E>>>16,O+=(A+=(S+=65535&x)>>>16)>>>16,S=65535&(x=w=65535&S|A<<16),A=x>>>16,O=65535&(E=m=65535&O|(j+=O>>>16)<<16),j=E>>>16,S+=65535&(x=($>>>28|U<<4)^(U>>>2|$<<30)^(U>>>7|$<<25)),A+=x>>>16,O+=65535&(E=(U>>>28|$<<4)^($>>>2|U<<30)^($>>>7|U<<25)),j+=E>>>16,A+=(x=$&V^$&q^V&q)>>>16,O+=65535&(E=U&T^U&L^T&L),j+=E>>>16,h=65535&(O+=(A+=(S+=65535&x)>>>16)>>>16)|(j+=O>>>16)<<16,_=65535&S|A<<16,S=65535&(x=g),A=x>>>16,O=65535&(E=a),j=E>>>16,A+=(x=w)>>>16,O+=65535&(E=m),j+=E>>>16,T=o,L=i,B=s,N=a=65535&(O+=(A+=(S+=65535&x)>>>16)>>>16)|(j+=O>>>16)<<16,z=u,M=c,D=l,U=h,V=f,q=d,P=p,F=g=65535&S|A<<16,K=y,H=b,Z=v,$=_,I%16==15)for(k=0;k<16;k++)E=R[k],S=65535&(x=C[k]),A=x>>>16,O=65535&E,j=E>>>16,E=R[(k+9)%16],S+=65535&(x=C[(k+9)%16]),A+=x>>>16,O+=65535&E,j+=E>>>16,m=R[(k+1)%16],S+=65535&(x=((w=C[(k+1)%16])>>>1|m<<31)^(w>>>8|m<<24)^(w>>>7|m<<25)),A+=x>>>16,O+=65535&(E=(m>>>1|w<<31)^(m>>>8|w<<24)^m>>>7),j+=E>>>16,m=R[(k+14)%16],A+=(x=((w=C[(k+14)%16])>>>19|m<<13)^(m>>>29|w<<3)^(w>>>6|m<<26))>>>16,O+=65535&(E=(m>>>19|w<<13)^(w>>>29|m<<3)^m>>>6),j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,R[k]=65535&O|j<<16,C[k]=65535&S|A<<16;S=65535&(x=$),A=x>>>16,O=65535&(E=U),j=E>>>16,E=t[0],A+=(x=e[0])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[0]=U=65535&O|j<<16,e[0]=$=65535&S|A<<16,S=65535&(x=V),A=x>>>16,O=65535&(E=T),j=E>>>16,E=t[1],A+=(x=e[1])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[1]=T=65535&O|j<<16,e[1]=V=65535&S|A<<16,S=65535&(x=q),A=x>>>16,O=65535&(E=L),j=E>>>16,E=t[2],A+=(x=e[2])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[2]=L=65535&O|j<<16,e[2]=q=65535&S|A<<16,S=65535&(x=P),A=x>>>16,O=65535&(E=B),j=E>>>16,E=t[3],A+=(x=e[3])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[3]=B=65535&O|j<<16,e[3]=P=65535&S|A<<16,S=65535&(x=F),A=x>>>16,O=65535&(E=N),j=E>>>16,E=t[4],A+=(x=e[4])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[4]=N=65535&O|j<<16,e[4]=F=65535&S|A<<16,S=65535&(x=K),A=x>>>16,O=65535&(E=z),j=E>>>16,E=t[5],A+=(x=e[5])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[5]=z=65535&O|j<<16,e[5]=K=65535&S|A<<16,S=65535&(x=H),A=x>>>16,O=65535&(E=M),j=E>>>16,E=t[6],A+=(x=e[6])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[6]=M=65535&O|j<<16,e[6]=H=65535&S|A<<16,S=65535&(x=Z),A=x>>>16,O=65535&(E=D),j=E>>>16,E=t[7],A+=(x=e[7])>>>16,O+=65535&E,j+=E>>>16,j+=(O+=(A+=(S+=65535&x)>>>16)>>>16)>>>16,t[7]=D=65535&O|j<<16,e[7]=Z=65535&S|A<<16,W+=128,n-=128}return n}function Y(t,e,r){var n,o=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),a=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,W(o,i,e,r),r%=128,n=0;n<r;n++)s[n]=e[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,d(s,r-8,a/536870912|0,a<<3),W(o,i,s,r),n=0;n<8;n++)d(t,8*n,o[n],i[n]);return 0}function J(t,r){var n=e(),o=e(),i=e(),s=e(),a=e(),u=e(),l=e(),h=e(),f=e();z(n,t[1],t[0]),z(f,r[1],r[0]),M(n,n,f),N(o,t[0],t[1]),N(f,r[0],r[1]),M(o,o,f),M(i,t[3],r[3]),M(i,i,c),M(s,t[2],r[2]),N(s,s,s),z(a,o,n),z(u,s,i),N(l,s,i),N(h,o,n),M(t[0],a,u),M(t[1],h,l),M(t[2],l,u),M(t[3],a,h)}function X(t,e,r){var n;for(n=0;n<4;n++)C(t[n],e[n],r)}function Q(t,r){var n=e(),o=e(),i=e();$(i,r[2]),M(n,r[0],i),M(o,r[1],i),U(t,o),t[31]^=L(n)<<7}function tt(t,e,r){var n,o;for(j(t[0],i),j(t[1],s),j(t[2],s),j(t[3],i),o=255;o>=0;--o)X(t,e,n=r[o/8|0]>>(7&o)&1),J(e,t),J(t,t),X(t,e,n)}function et(t,r){var n=[e(),e(),e(),e()];j(n[0],l),j(n[1],h),j(n[2],s),M(n[3],l,h),tt(t,n,r)}function rt(t,n,o){var i,s=new Uint8Array(64),a=[e(),e(),e(),e()];for(o||r(n,32),Y(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64,et(a,s),Q(t,a),i=0;i<32;i++)n[i+32]=t[i];return 0}var nt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ot(t,e){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)e[o]+=r-16*e[n]*nt[o-(n-32)],r=Math.floor((e[o]+128)/256),e[o]-=256*r;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;o++)e[o]+=r-(e[31]>>4)*nt[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=r*nt[o];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function it(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;ot(t,r)}function st(t,r,n,o){var i,s,a=new Uint8Array(64),u=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),h=[e(),e(),e(),e()];Y(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(i=0;i<n;i++)t[64+i]=r[i];for(i=0;i<32;i++)t[32+i]=a[32+i];for(Y(c,t.subarray(32),n+32),it(c),et(h,c),Q(t,h),i=32;i<64;i++)t[i]=o[i];for(Y(u,t,n+64),it(u),i=0;i<64;i++)l[i]=0;for(i=0;i<32;i++)l[i]=c[i];for(i=0;i<32;i++)for(s=0;s<32;s++)l[i+s]+=u[i]*a[s];return ot(t.subarray(32),l),f}function at(t,r,n,o){var a,c=new Uint8Array(32),l=new Uint8Array(64),h=[e(),e(),e(),e()],d=[e(),e(),e(),e()];if(n<64)return-1;if(function(t,r){var n=e(),o=e(),a=e(),c=e(),l=e(),h=e(),d=e();return j(t[2],s),B(t[1],r),D(a,t[1]),M(c,a,u),z(a,a,t[2]),N(c,t[2],c),D(l,c),D(h,l),M(d,h,l),M(n,d,a),M(n,n,c),V(n,n),M(n,n,a),M(n,n,c),M(n,n,c),M(t[0],n,c),D(o,t[0]),M(o,o,c),T(o,a)&&M(t[0],t[0],f),D(o,t[0]),M(o,o,c),T(o,a)?-1:(L(t[0])===r[31]>>7&&z(t[0],i,t[0]),M(t[3],t[0],t[1]),0)}(d,o))return-1;for(a=0;a<n;a++)t[a]=r[a];for(a=0;a<32;a++)t[a+32]=o[a];if(Y(l,t,n),it(l),tt(h,d,l),et(d,r.subarray(32)),J(h,d),Q(c,h),n-=64,y(r,0,c,0)){for(a=0;a<n;a++)t[a]=0;return-1}for(a=0;a<n;a++)t[a]=r[a+64];return n}var ut,ct=16,lt=64,ht=32,ft=64;function dt(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function pt(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function gt(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:k,crypto_stream:I,crypto_stream_salsa20_xor:m,crypto_stream_salsa20:w,crypto_onetimeauth:x,crypto_onetimeauth_verify:S,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:A,crypto_secretbox_open:O,crypto_scalarmult:q,crypto_scalarmult_base:P,crypto_box_beforenm:K,crypto_box_afternm:H,crypto_box:function(t,e,r,n,o,i){var s=new Uint8Array(32);return K(s,o,i),H(t,e,r,n,s)},crypto_box_open:function(t,e,r,n,o,i){var s=new Uint8Array(32);return K(s,o,i),Z(t,e,r,n,s)},crypto_box_keypair:F,crypto_hash:Y,crypto_sign:st,crypto_sign_keypair:rt,crypto_sign_open:at,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ct,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:lt,crypto_sign_PUBLICKEYBYTES:ht,crypto_sign_SECRETKEYBYTES:ft,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:e,D:u,L:nt,pack25519:U,unpack25519:B,M:M,A:N,S:D,Z:z,pow2523:V,add:J,set25519:j,modL:ot,scalarmult:tt,scalarbase:et},t.randomBytes=function(t){var e=new Uint8Array(t);return r(e,t),e},t.secretbox=function(t,e,r){pt(t,e,r),dt(r,e);for(var n=new Uint8Array(32+t.length),o=new Uint8Array(n.length),i=0;i<t.length;i++)n[i+32]=t[i];return A(o,n,n.length,e,r),o.subarray(ct)},t.secretbox.open=function(t,e,r){pt(t,e,r),dt(r,e);for(var n=new Uint8Array(ct+t.length),o=new Uint8Array(n.length),i=0;i<t.length;i++)n[i+ct]=t[i];return n.length<32||0!==O(o,n,n.length,e,r)?null:o.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=ct,t.scalarMult=function(t,e){if(pt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var r=new Uint8Array(32);return q(r,t,e),r},t.scalarMult.base=function(t){if(pt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return P(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,o){var i=t.box.before(n,o);return t.secretbox(e,r,i)},t.box.before=function(t,e){pt(t,e),function(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return K(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,o){var i=t.box.before(n,o);return t.secretbox.open(e,r,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return F(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(pt(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return P(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(pt(t,e),e.length!==ft)throw new Error("bad secret key size");var r=new Uint8Array(lt+t.length);return st(r,t,t.length,e),r},t.sign.open=function(t,e){if(pt(t,e),e.length!==ht)throw new Error("bad public key size");var r=new Uint8Array(t.length),n=at(r,t,t.length,e);if(n<0)return null;for(var o=new Uint8Array(n),i=0;i<o.length;i++)o[i]=r[i];return o},t.sign.detached=function(e,r){for(var n=t.sign(e,r),o=new Uint8Array(lt),i=0;i<o.length;i++)o[i]=n[i];return o},t.sign.detached.verify=function(t,e,r){if(pt(t,e,r),e.length!==lt)throw new Error("bad signature size");if(r.length!==ht)throw new Error("bad public key size");var n,o=new Uint8Array(lt+t.length),i=new Uint8Array(lt+t.length);for(n=0;n<lt;n++)o[n]=e[n];for(n=0;n<t.length;n++)o[n+lt]=t[n];return at(i,o,o.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(ht),e=new Uint8Array(ft);return rt(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(pt(t),t.length!==ft)throw new Error("bad secret key size");for(var e=new Uint8Array(ht),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(pt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(ht),r=new Uint8Array(ft),n=0;n<32;n++)r[n]=t[n];return rt(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=ht,t.sign.secretKeyLength=ft,t.sign.seedLength=32,t.sign.signatureLength=lt,t.hash=function(t){pt(t);var e=new Uint8Array(64);return Y(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return pt(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===p(t,0,e,0,t.length)},t.setPRNG=function(t){r=t},(ut="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&ut.getRandomValues?t.setPRNG((function(t,e){var r,n=new Uint8Array(e);for(r=0;r<e;r+=65536)ut.getRandomValues(n.subarray(r,r+Math.min(e-r,65536)));for(r=0;r<e;r++)t[r]=n[r];gt(n)})):"undefined"!=typeof require&&(ut=xc)&&ut.randomBytes&&t.setPRNG((function(t,e){var r,n=ut.randomBytes(e);for(r=0;r<e;r++)t[r]=n[r];gt(n)}))}(Ec.exports?Ec.exports:self.nacl=self.nacl||{});!function(t){var e,r;e=yt,r=function(){var t={};function e(t){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(t){if("string"!=typeof t)throw new TypeError("expected string");var e,r=unescape(encodeURIComponent(t)),n=new Uint8Array(r.length);for(e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return n},t.encodeUTF8=function(t){var e,r=[];for(e=0;e<t.length;e++)r.push(String.fromCharCode(t[e]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(t.encodeBase64=function(t){return Buffer.from(t).toString("base64")},t.decodeBase64=function(t){return e(t),new Uint8Array(Array.prototype.slice.call(Buffer.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new Buffer(t).toString("base64")},t.decodeBase64=function(t){return e(t),new Uint8Array(Array.prototype.slice.call(new Buffer(t,"base64"),0))}):(t.encodeBase64=function(t){var e,r=[],n=t.length;for(e=0;e<n;e++)r.push(String.fromCharCode(t[e]));return btoa(r.join(""))},t.decodeBase64=function(t){e(t);var r,n=atob(t),o=new Uint8Array(n.length);for(r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o}),t},t.exports?t.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())}({exports:{}}),Ec.exports.secretbox.keyLength;var Sc={returner:function(t,e){return function(r){e||(e=r);var n=typeof e;if("number"!==n&&"string"!==n)return t;switch(e){case 1:case"quiet":return;case 2:case"console":console.log(t);break;case 3:case"break":throw t instanceof Error?(t.message||(t.message="No value"),t):new Error(t||"No result");case 4:case"truthy":return null!=t&&!1!==t;case 5:case"typeof":if(null===t)return"null";if(void 0===t)return"undefined";if(t instanceof Error)return"error";try{return t.map((function(t){return t})),"array"}catch(o){return typeof t}case 6:case"trace":console.trace("TRACE: "+t);break;case 7:case"passthrough":case"default":default:return t}}},logger:function(t,e){return function(r){e||(e=r);var n=typeof e;if(("number"===n||"string"===n)&&t)switch(e){case 1:case"none":return;case 2:case"string":return t;case 3:case"trace":return void console.trace("TRACE: "+t);case 4:case"console":return void console.error(t);case 5:case"throw":throw t instanceof Error?(t.message||(t.message="No message"),t):new Error(t||"No result")}}},maybeCurry:function(t){return function(e){return"function"==typeof t?t(e):e}},jsonPurify:function(t){var e,r=void 0===t?{}:t,n=r.model,o=r.maxLen,i={};return function(t){return Ic(this,void 0,void 0,(function(){return kc(this,(function(r){try{return o&&t.length>o?[2,null]:("object"!=typeof(e=JSON.parse(t))||Array.isArray(e)?i=e:n.forEach((function(t){e.hasOwnProperty(t)&&(i[t]=e[t])})),[2,i])}catch(s){return[2,s]}return[2]}))}))}}},Ac={exports:{}},Oc=Ac.exports=function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){var r=e[s][1][t];return o(r||t)}),l,l.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){(function(t){var r,n,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,s=new o(l),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}var c=[];function l(){var t,e;n=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}n=!1}function h(t){1!==c.push(t)||n||r()}e.exports=h}).call(this,void 0!==yt?yt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){var n=t(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==o&&d(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(t,e,r){n((function(){var n;try{n=e(r)}catch(o){return i.reject(t,o)}n===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,n)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,i.reject(t,e))}function o(e){r||(r=!0,i.resolve(t,e))}function s(){e(o,n)}var a=p(s);"error"===a.status&&n(a.value)}function p(t,e){var r={};try{r.value=t(e),r.status="success"}catch(n){r.status="error",r.value=n}return r}function g(t){return t instanceof this?t:i.resolve(new this(o),t)}function y(t){var e=new this(o);return i.reject(e,t)}function b(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,u=-1,c=new this(o);++u<r;)l(t[u],u);return c;function l(t,o){function u(t){s[o]=t,++a!==r||n||(n=!0,i.resolve(c,s))}e.resolve(t).then(u,(function(t){n||(n=!0,i.reject(c,t))}))}}function v(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(o);++s<r;)u(t[s]);return a;function u(t){e.resolve(t).then((function(t){n||(n=!0,i.resolve(a,t))}),(function(t){n||(n=!0,i.reject(a,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(o);return this.state!==u?h(r,this.state===a?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},i.resolve=function(t,e){var r=p(f,e);if("error"===r.status)return i.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=a,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=g,c.reject=y,c.all=b,c.race=v},{1:1}],3:[function(t,e,r){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==yt?yt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var s=i();function a(){try{if(!s||!s.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}function u(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var c=Promise;function l(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function h(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function f(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,y={},b=Object.prototype.toString,v="readonly",_="readwrite";function m(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),o=0;o<e;o++)n[o]=t.charCodeAt(o);return r}function w(t){return new c((function(e){var r=t.transaction(p,_),n=u([""]);r.objectStore(p).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function I(t){return"boolean"==typeof g?c.resolve(g):w(t).then((function(t){return g=t}))}function k(t){var e=y[t.name],r={};r.promise=new c((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function E(t){var e=y[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function x(t,e){var r=y[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function S(t,e){return new c((function(r,n){if(y[t.name]=y[t.name]||N(),t.db){if(!e)return r(t.db);k(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var i=s.open.apply(s,o);e&&(i.onupgradeneeded=function(e){var r=i.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),i.onerror=function(t){t.preventDefault(),n(i.error)},i.onsuccess=function(){r(i.result),E(t)}}))}function A(t){return S(t,!1)}function O(t){return S(t,!0)}function j(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,o=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function R(t){return new c((function(e,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:t.type})},n.readAsBinaryString(t)}))}function C(t){return u([m(atob(t.data))],{type:t.type})}function U(t){return t&&t.__local_forage_encoded_blob}function T(t){var e=this,r=e._initReady().then((function(){var t=y[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return h(r,t,t),r}function L(t){k(t);for(var e=y[t.name],r=e.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,A(t).then((function(e){return t.db=e,j(t)?O(t):e})).then((function(n){t.db=e.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(e){throw x(t,e),e}))}function B(t,e,r,n){void 0===n&&(n=1);try{var o=t.db.transaction(t.storeName,e);r(null,o)}catch(i){if(n>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),O(t)})).then((function(){return L(t).then((function(){B(t,e,r,n-1)}))})).catch(r);r(i)}}function N(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(t){var e=this,r={db:null};if(t)for(var n in t)r[n]=t[n];var o=y[r.name];o||(o=N(),y[r.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=T);var i=[];function s(){return c.resolve()}for(var a=0;a<o.forages.length;a++){var u=o.forages[a];u!==e&&i.push(u._initReady().catch(s))}var l=o.forages.slice(0);return c.all(i).then((function(){return r.db=o.db,A(r)})).then((function(t){return r.db=t,j(r,e._defaultConfig.version)?O(r):t})).then((function(t){r.db=o.db=t,e._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==e&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))}function M(t,e){var r=this;t=f(t);var n=new c((function(e,n){r.ready().then((function(){B(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),U(t)&&(t=C(t)),e(t)},s.onerror=function(){n(s.error)}}catch(a){n(a)}}))})).catch(n)}));return l(n,e),n}function D(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){B(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;U(n)&&(n=C(n));var o=t(n,r.key,a++);void 0!==o?e(o):r.continue()}else e()},s.onerror=function(){n(s.error)}}catch(u){n(u)}}))})).catch(n)}));return l(n,e),n}function $(t,e,r){var n=this;t=f(t);var o=new c((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===b.call(e)?I(i.db).then((function(t){return t?e:R(e)})):e})).then((function(e){B(n._dbInfo,_,(function(i,s){if(i)return o(i);try{var a=s.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var u=a.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),r(e)},s.onabort=s.onerror=function(){var t=u.error?u.error:u.transaction.error;o(t)}}catch(c){o(c)}}))})).catch(o)}));return l(o,r),o}function V(t,e){var r=this;t=f(t);var n=new c((function(e,n){r.ready().then((function(){B(r._dbInfo,_,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){n(s.error)},i.onabort=function(){var t=s.error?s.error:s.transaction.error;n(t)}}catch(a){n(a)}}))})).catch(n)}));return l(n,e),n}function q(t){var e=this,r=new c((function(t,r){e.ready().then((function(){B(e._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;r(t)}}catch(s){r(s)}}))})).catch(r)}));return l(r,t),r}function P(t){var e=this,r=new c((function(t,r){e.ready().then((function(){B(e._dbInfo,v,(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){r(i.error)}}catch(s){r(s)}}))})).catch(r)}));return l(r,t),r}function F(t,e){var r=this,n=new c((function(e,n){t<0?e(null):r.ready().then((function(){B(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName),a=!1,u=s.openKeyCursor();u.onsuccess=function(){var r=u.result;r?0===t||a?e(r.key):(a=!0,r.advance(t)):e(null)},u.onerror=function(){n(u.error)}}catch(c){n(c)}}))})).catch(n)}));return l(n,e),n}function K(t){var e=this,r=new c((function(t,r){e.ready().then((function(){B(e._dbInfo,v,(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var e=i.result;e?(s.push(e.key),e.continue()):t(s)},i.onerror=function(){r(i.error)}}catch(a){r(a)}}))})).catch(r)}));return l(r,t),r}function H(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,o=this;if(t.name){var i=t.name===r.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):A(t).then((function(e){var r=y[t.name],n=r.forages;r.db=e;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=e;return e}));n=t.storeName?i.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;k(t);var n=y[t.name],o=n.forages;e.close();for(var i=0;i<o.length;i++){var a=o[i];a._dbInfo.db=null,a._dbInfo.version=r}return new c((function(e,n){var o=s.open(t.name,r);o.onerror=function(t){o.result.close(),n(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<o.length;e++){var r=o[e];r._dbInfo.db=t,E(r._dbInfo)}})).catch((function(e){throw(x(t,e)||c.resolve()).catch((function(){})),e}))}})):i.then((function(e){k(t);var r=y[t.name],n=r.forages;e.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new c((function(e,r){var n=s.deleteDatabase(t.name);n.onerror=n.onblocked=function(t){var e=n.result;e&&e.close(),r(t)},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<n.length;e++)E(n[e]._dbInfo)})).catch((function(e){throw(x(t,e)||c.resolve()).catch((function(){})),e}))}))}else n=c.reject("Invalid arguments");return l(n,e),n}var Z={_driver:"asyncStorage",_initStorage:z,_support:a(),iterate:D,getItem:M,setItem:$,removeItem:V,clear:q,length:P,key:F,keys:K,dropInstance:H};function G(){return"function"==typeof openDatabase}var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,tt="arbf",et="blob",rt="si08",nt="ui08",ot="uic8",it="si16",st="si32",at="ur16",ut="ui32",ct="fl32",lt="fl64",ht=Q+tt.length,ft=Object.prototype.toString;function dt(t){var e,r,n,o,i,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(e=0;e<a;e+=4)r=W.indexOf(t[e]),n=W.indexOf(t[e+1]),o=W.indexOf(t[e+2]),i=W.indexOf(t[e+3]),l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return c}function pt(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=W[r[e]>>2],n+=W[(3&r[e])<<4|r[e+1]>>4],n+=W[(15&r[e+1])<<2|r[e+2]>>6],n+=W[63&r[e+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function gt(t,e){var r="";if(t&&(r=ft.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===ft.call(t.buffer))){var n,o=X;t instanceof ArrayBuffer?(n=t,o+=tt):(n=t.buffer,"[object Int8Array]"===r?o+=rt:"[object Uint8Array]"===r?o+=nt:"[object Uint8ClampedArray]"===r?o+=ot:"[object Int16Array]"===r?o+=it:"[object Uint16Array]"===r?o+=at:"[object Int32Array]"===r?o+=st:"[object Uint32Array]"===r?o+=ut:"[object Float32Array]"===r?o+=ct:"[object Float64Array]"===r?o+=lt:e(new Error("Failed to get type for BinaryArray"))),e(o+pt(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=Y+t.type+"~"+pt(this.result);e(X+et+r)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(s){console.error("Couldn't convert value into a JSON string: ",t),e(null,s)}}function yt(t){if(t.substring(0,Q)!==X)return JSON.parse(t);var e,r=t.substring(ht),n=t.substring(Q,ht);if(n===et&&J.test(r)){var o=r.match(J);e=o[1],r=r.substring(o[0].length)}var i=dt(r);switch(n){case tt:return i;case et:return u([i],{type:e});case rt:return new Int8Array(i);case nt:return new Uint8Array(i);case ot:return new Uint8ClampedArray(i);case it:return new Int16Array(i);case at:return new Uint16Array(i);case st:return new Int32Array(i);case ut:return new Uint32Array(i);case ct:return new Float32Array(i);case lt:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var bt={serialize:gt,deserialize:yt,stringToBuffer:dt,bufferToString:pt};function vt(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function _t(t){var e=this,r={db:null};if(t)for(var n in t)r[n]="string"!=typeof t[n]?t[n].toString():t[n];var o=new c((function(t,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction((function(o){vt(o,r,(function(){e._dbInfo=r,t()}),(function(t,e){n(e)}))}),n)}));return r.serializer=bt,o}function mt(t,e,r,n,o,i){t.executeSql(r,n,o,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,a){a.rows.length?i(t,s):vt(t,e,(function(){t.executeSql(r,n,o,i)}),i)}),i):i(t,s)}),i)}function wt(t,e){var r=this;t=f(t);var n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){mt(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function It(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){mt(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,s=i.length,a=0;a<s;a++){var u=i.item(a),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=t(c,u.key,a+1)))return void e(c)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function kt(t,e,r,n){var o=this;t=f(t);var i=new c((function(i,s){o.ready().then((function(){void 0===e&&(e=null);var a=e,u=o._dbInfo;u.serializer.serialize(e,(function(e,c){c?s(c):u.db.transaction((function(r){mt(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(a)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void i(kt.apply(o,[t,a,r,n-1]));s(e)}}))}))})).catch(s)}));return l(i,r),i}function Et(t,e,r){return kt.apply(this,[t,e,r,1])}function xt(t,e){var r=this;t=f(t);var n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){mt(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function St(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){mt(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r}function At(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){mt(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,r){var n=r.rows.item(0).c;t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r}function Ot(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){mt(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var n=r.rows.length?r.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function jt(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){mt(e,n,"SELECT key FROM "+n.storeName,[],(function(e,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r}function Rt(t){return new c((function(e,r){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}function Ct(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,o=this;return l(n=t.name?new c((function(e){var n;n=t.name===r.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(Rt(n))})).then((function(t){return new c((function(e,r){t.db.transaction((function(n){function o(t){return new c((function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var i=[],s=0,a=t.storeNames.length;s<a;s++)i.push(o(t.storeNames[s]));c.all(i).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):c.reject("Invalid arguments"),e),n}var Ut={_driver:"webSQLStorage",_initStorage:_t,_support:G(),iterate:It,getItem:wt,setItem:Et,removeItem:xt,clear:St,length:At,key:Ot,keys:jt,dropInstance:Ct};function Tt(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Lt(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function Bt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(e){return!0}}function Nt(){return!Bt()||localStorage.length>0}function zt(t){var e=this,r={};if(t)for(var n in t)r[n]=t[n];return r.keyPrefix=Lt(t,e._defaultConfig),Nt()?(e._dbInfo=r,r.serializer=bt,c.resolve()):c.reject()}function Mt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return l(r,t),r}function Dt(t,e){var r=this;t=f(t);var n=r.ready().then((function(){var e=r._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return l(n,e),n}function $t(t,e){var r=this,n=r.ready().then((function(){for(var e=r._dbInfo,n=e.keyPrefix,o=n.length,i=localStorage.length,s=1,a=0;a<i;a++){var u=localStorage.key(a);if(0===u.indexOf(n)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,u.substring(o),s++)))return c}}}));return l(n,e),n}function Vt(t,e){var r=this,n=r.ready().then((function(){var e,n=r._dbInfo;try{e=localStorage.key(t)}catch(o){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return l(n,e),n}function qt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&n.push(i.substring(t.keyPrefix.length))}return n}));return l(r,t),r}function Pt(t){var e=this.keys().then((function(t){return t.length}));return l(e,t),e}function Ft(t,e){var r=this;t=f(t);var n=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return l(n,e),n}function Kt(t,e,r){var n=this;t=f(t);var o=n.ready().then((function(){void 0===e&&(e=null);var r=e;return new c((function(o,i){var s=n._dbInfo;s.serializer.serialize(e,(function(e,n){if(n)i(n);else try{localStorage.setItem(s.keyPrefix+t,e),o(r)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||i(a),i(a)}}))}))}));return l(o,r),o}function Ht(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var n,o=this;return l(n=t.name?new c((function(e){t.storeName?e(Lt(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),e),n}var Zt={_driver:"localStorageWrapper",_initStorage:zt,_support:Tt(),iterate:$t,getItem:Dt,setItem:Kt,removeItem:Ft,clear:Mt,length:Pt,key:Vt,keys:qt,dropInstance:Ht},Gt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Wt=function(t,e){for(var r=t.length,n=0;n<r;){if(Gt(t[n],e))return!0;n++}return!1},Yt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Jt={},Xt={},Qt={INDEXEDDB:Z,WEBSQL:Ut,LOCALSTORAGE:Zt},te=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],ee=["dropInstance"],re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),ne={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function oe(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function ie(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(Yt(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var se=new(function(){function t(e){for(var r in o(this,t),Qt)if(Qt.hasOwnProperty(r)){var n=Qt[r],i=n._driver;this[r]=i,Jt[i]||this.defineDriver(n)}this._defaultConfig=ie({},ne),this._config=ie({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var n=new c((function(e,r){try{var n=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(o);for(var i=re.concat("_initStorage"),s=0,a=i.length;s<a;s++){var u=i[s];if((!Wt(ee,u)||t[u])&&"function"!=typeof t[u])return void r(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=c.reject(e);return l(r,arguments[arguments.length-1]),r}},r=0,n=ee.length;r<n;r++){var o=ee[r];t[o]||(t[o]=e(o))}}();var h=function(r){Jt[n]&&console.info("Redefining LocalForage driver: "+n),Jt[n]=t,Xt[n]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,r):h(!!t._support):h(!0)}catch(f){r(f)}}));return h(n,e,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var n=Jt[t]?c.resolve(Jt[t]):c.reject(new Error("Driver not found."));return h(n,e,r),n},t.prototype.getSerializer=function(t){var e=c.resolve(bt);return h(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return h(r,t,t),r},t.prototype.setDriver=function(t,e,r){var n=this;Yt(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){n._config.driver=n.driver()}function s(t){return n._extend(t),i(),n._ready=n._initStorage(n._config),n._ready}function a(t){return function(){var e=0;function r(){for(;e<t.length;){var o=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(s).catch(r)}i();var a=new Error("No available storage method found.");return n._driverSet=c.reject(a),n._driverSet}return r()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var t=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=a(o)}))})).catch((function(){i();var t=new Error("No available storage method found.");return n._driverSet=c.reject(t),n._driverSet})),h(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!Xt[t]},t.prototype._extend=function(t){ie(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=re.length;t<e;t++)oe(this,re[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=se},{3:3}]},{},[4])(4);function jc(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function Rc(t){return function e(r){return 0===arguments.length||jc(r)?e:t.apply(this,arguments)}}function Cc(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return jc(r)?e:Rc((function(e){return t(r,e)}));default:return jc(r)&&jc(n)?e:jc(r)?Rc((function(e){return t(e,n)})):jc(n)?Rc((function(e){return t(r,e)})):t(r,n)}}}function Uc(t){return function e(r,n,o){switch(arguments.length){case 0:return e;case 1:return jc(r)?e:Cc((function(e,n){return t(r,e,n)}));case 2:return jc(r)&&jc(n)?e:jc(r)?Cc((function(e,r){return t(e,n,r)})):jc(n)?Cc((function(e,n){return t(r,e,n)})):Rc((function(e){return t(r,n,e)}));default:return jc(r)&&jc(n)&&jc(o)?e:jc(r)&&jc(n)?Cc((function(e,r){return t(e,r,o)})):jc(r)&&jc(o)?Cc((function(e,r){return t(e,n,r)})):jc(n)&&jc(o)?Cc((function(e,n){return t(r,e,n)})):jc(r)?Rc((function(e){return t(e,n,o)})):jc(n)?Rc((function(e){return t(r,e,o)})):jc(o)?Rc((function(e){return t(r,n,e)})):t(r,n,o)}}}var Tc=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function Lc(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function Bc(t,e,r){return function(){if(0===arguments.length)return r();var n=Array.prototype.slice.call(arguments,0),o=n.pop();if(!Tc(o)){for(var i=0;i<t.length;){if("function"==typeof o[t[i]])return o[t[i]].apply(o,n);i+=1}if(Lc(o)){var s=e.apply(null,n);return s(o)}}return r.apply(this,arguments)}}var Nc=function(){return this.xf["@@transducer/init"]()},zc=function(t){return this.xf["@@transducer/result"](t)};function Mc(t,e){for(var r=0,n=e.length,o=Array(n);r<n;)o[r]=t(e[r]),r+=1;return o}function Dc(t){return"[object String]"===Object.prototype.toString.call(t)}var $c=Rc((function(t){return!!Tc(t)||!!t&&("object"==typeof t&&(!Dc(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),Vc=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var qc=Cc((function(t,e){return function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,r){return e.apply(this,arguments)};case 3:return function(t,r,n){return e.apply(this,arguments)};case 4:return function(t,r,n,o){return e.apply(this,arguments)};case 5:return function(t,r,n,o,i){return e.apply(this,arguments)};case 6:return function(t,r,n,o,i,s){return e.apply(this,arguments)};case 7:return function(t,r,n,o,i,s,a){return e.apply(this,arguments)};case 8:return function(t,r,n,o,i,s,a,u){return e.apply(this,arguments)};case 9:return function(t,r,n,o,i,s,a,u,c){return e.apply(this,arguments)};case 10:return function(t,r,n,o,i,s,a,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(t.length,(function(){return t.apply(e,arguments)}))}));function Pc(t,e,r){for(var n=r.next();!n.done;){if((e=t["@@transducer/step"](e,n.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=r.next()}return t["@@transducer/result"](e)}function Fc(t,e,r,n){return t["@@transducer/result"](r[n](qc(t["@@transducer/step"],t),e))}var Kc="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function Hc(t,e,r){if("function"==typeof t&&(t=function(t){return new Vc(t)}(t)),$c(r))return function(t,e,r){for(var n=0,o=r.length;n<o;){if((e=t["@@transducer/step"](e,r[n]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}(t,e,r);if("function"==typeof r["fantasy-land/reduce"])return Fc(t,e,r,"fantasy-land/reduce");if(null!=r[Kc])return Pc(t,e,r[Kc]());if("function"==typeof r.next)return Pc(t,e,r);if("function"==typeof r.reduce)return Fc(t,e,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}function Zc(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var Gc=Object.prototype.toString,Wc=function(){return"[object Arguments]"===Gc.call(arguments)?function(t){return"[object Arguments]"===Gc.call(t)}:function(t){return Zc("callee",t)}}(),Yc=!{toString:null}.propertyIsEnumerable("toString"),Jc=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Xc=function(){return arguments.propertyIsEnumerable("length")}(),Qc=function(t,e){for(var r=0;r<t.length;){if(t[r]===e)return!0;r+=1}return!1},tl="function"!=typeof Object.keys||Xc?Rc((function(t){if(Object(t)!==t)return[];var e,r,n=[],o=Xc&&Wc(t);for(e in t)!Zc(e,t)||o&&"length"===e||(n[n.length]=e);if(Yc)for(r=Jc.length-1;r>=0;)Zc(e=Jc[r],t)&&!Qc(n,e)&&(n[n.length]=e),r-=1;return n})):Rc((function(t){return Object(t)!==t?[]:Object.keys(t)}));function el(t){return"[object Function]"===Object.prototype.toString.call(t)}var rl=Rc((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function nl(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function ol(t,e,r){for(var n=0,o=r.length;n<o;){if(t(e,r[n]))return!0;n+=1}return!1}var il="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function sl(t,e,r,n){var o=nl(t);function i(t,e){return al(t,e,r.slice(),n.slice())}return!ol((function(t,e){return!ol(i,e,t)}),nl(e),o)}function al(t,e,r,n){if(il(t,e))return!0;var o,i,s=rl(t);if(s!==rl(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(o=t.constructor,null==(i=String(o).match(/^function (\w*)/))?"":i[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!il(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!il(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var a=r.length-1;a>=0;){if(r[a]===t)return n[a]===e;a-=1}switch(s){case"Map":return t.size===e.size&&sl(t.entries(),e.entries(),r.concat([t]),n.concat([e]));case"Set":return t.size===e.size&&sl(t.values(),e.values(),r.concat([t]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=tl(t);if(u.length!==tl(e).length)return!1;var c=r.concat([t]),l=n.concat([e]);for(a=u.length-1;a>=0;){var h=u[a];if(!Zc(h,e)||!al(e[h],t[h],c,l))return!1;a-=1}return!0}var ul=Cc((function(t,e){return al(t,e,[],[])}));function cl(t,e){return function(t,e,r){var n,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(n=1/e;r<t.length;){if(0===(o=t[r])&&1/o===n)return r;r+=1}return-1}if(e!=e){for(;r<t.length;){if("number"==typeof(o=t[r])&&o!=o)return r;r+=1}return-1}return t.indexOf(e,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,r);case"object":if(null===e)return t.indexOf(e,r)}for(;r<t.length;){if(ul(t[r],e))return r;r+=1}return-1}(e,t,0)>=0}function ll(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var hl=function(t){return(t<10?"0":"")+t},fl="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+hl(t.getUTCMonth()+1)+"-"+hl(t.getUTCDate())+"T"+hl(t.getUTCHours())+":"+hl(t.getUTCMinutes())+":"+hl(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function dl(t){return"[object Object]"===Object.prototype.toString.call(t)}var pl=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Nc,t.prototype["@@transducer/result"]=zc,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),gl=Cc(Bc(["filter"],Cc((function(t,e){return new pl(t,e)})),(function(t,e){return dl(e)?Hc((function(r,n){return t(e[n])&&(r[n]=e[n]),r}),{},tl(e)):function(t,e){for(var r=0,n=e.length,o=[];r<n;)t(e[r])&&(o[o.length]=e[r]),r+=1;return o}(t,e)}))),yl=Cc((function(t,e){return gl((r=t,function(){return!r.apply(this,arguments)}),e);var r}));function bl(t,e){var r=function(r){var n=e.concat([t]);return cl(r,n)?"<Circular>":bl(r,n)},n=function(t,e){return Mc((function(e){return ll(e)+": "+r(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+Mc(r,t).join(", ")+"))";case"[object Array]":return"["+Mc(r,t).concat(n(t,yl((function(t){return/^\d+$/.test(t)}),tl(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+r(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?r(NaN):ll(fl(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+r(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+r(t.valueOf())+")":ll(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var o=t.toString();if("[object Object]"!==o)return o}return"{"+n(t,tl(t)).join(", ")+"}"}}var vl=Rc((function(t){return bl(t,[])})),_l=Cc((function(t,e){if(Tc(t)){if(Tc(e))return t.concat(e);throw new TypeError(vl(e)+" is not an array")}if(Dc(t)){if(Dc(e))return t+e;throw new TypeError(vl(e)+" is not a string")}if(null!=t&&el(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&el(t.concat))return t.concat(e);throw new TypeError(vl(t)+' does not have a method named "concat" or "fantasy-land/concat"')}));var ml="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1,n=arguments.length;r<n;){var o=arguments[r];if(null!=o)for(var i in o)Zc(i,o)&&(e[i]=o[i]);r+=1}return e},wl=Uc((function(t,e,r){var n,o={};for(n in e)Zc(n,e)&&(o[n]=Zc(n,r)?t(n,e[n],r[n]):e[n]);for(n in r)Zc(n,r)&&!Zc(n,o)&&(o[n]=r[n]);return o})),Il=Uc((function t(e,r,n){return wl((function(r,n,o){return dl(n)&&dl(o)?t(e,n,o):e(r,n,o)}),r,n)})),kl=Cc((function(t,e){return Il((function(t,e,r){return r}),t,e)})),El=Uc((function(t,e,r){return Il((function(e,r,n){return t(r,n)}),e,r)})),xl=Cc((function(t,e){return ml({},t,e)})),Sl=Uc((function(t,e,r){return wl((function(e,r,n){return t(r,n)}),e,r)})),Al={getItem:function(t){var e=void 0===t?{}:t,r=e.key,n=e.logger,o=e.returner,i=e.before,s=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,a,u=this;return kc(this,(function(c){switch(c.label){case 0:return[4,jl({store:s})];case 1:return e=c.sent(),i?[4,Sc.maybeCurry(t||null)(r)]:[3,3];case 2:return a=c.sent(),[3,4];case 3:a=r,c.label=4;case 4:return r=a,[2,Sc.returner(e.getItem(r).then((function(e){return Ic(u,void 0,void 0,(function(){return kc(this,(function(r){return[2,i?e:Sc.maybeCurry(t||null)(e)]}))}))})).catch((function(t){return Sc.logger(t)(n)})))(o)]}}))}))}},getKeyValue:function(t){var e=void 0===t?{}:t,r=e.key,n=e.value,o=e.logger,i=e.returner,s=e.before,a=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,u;return kc(this,(function(c){switch(c.label){case 0:return[4,jl({store:a})];case 1:return e=c.sent(),s?[4,Sc.maybeCurry(t||null)(n)]:[3,3];case 2:return u=c.sent(),[3,4];case 3:u=n,c.label=4;case 4:return n=u,[2,Sc.returner(e.getItem(r).then((function(e){return s?e[n]:Sc.maybeCurry(t||null)(e[n])})).catch((function(t){return Sc.logger(t)(o)})))(i)]}}))}))}},setItem:function(t){var e=void 0===t?{}:t,r=e.key,n=e.value,o=e.logger,i=e.returner,s=e.before,a=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,u,c=this;return kc(this,(function(l){switch(l.label){case 0:return e=jl({store:a}),s?[4,Sc.maybeCurry(t||null)(n)]:[3,2];case 1:return u=l.sent(),[3,3];case 2:u=n,l.label=3;case 3:return n=u,[2,Sc.returner(e.setItem(r,n).then((function(e){return Ic(c,void 0,void 0,(function(){return kc(this,(function(r){return[2,s?e:Sc.maybeCurry(t||null)(e)]}))}))})).catch((function(t){return Sc.logger(t)(o)})))(i)]}}))}))}},key:function(t){var e=void 0===t?{}:t,r=e.index,n=e.logger,o=e.returner,i=e.before,s=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,a;return kc(this,(function(u){switch(u.label){case 0:return[4,jl({store:s})];case 1:return e=u.sent(),i?[4,Sc.maybeCurry(t||null)(r)]:[3,3];case 2:return a=u.sent(),[3,4];case 3:a=r,u.label=4;case 4:return r=a,[2,Sc.returner(e.key(r).then((function(e){return i?e:Sc.maybeCurry(t||null)(e)})).catch((function(t){return Sc.logger(t)(n)})))(o)]}}))}))}},mergeItem:function(t){var e=void 0===t?{}:t,r=e.key,n=e.value,o=e.type,i=e.returner,s=e.logger,a=e.before,u=e.store,c=function(t,e,r){return"values"===t?_l(e,r):r};return function(t){return Ic(this,void 0,void 0,(function(){var e,l,h,f,d=this;return kc(this,(function(p){switch(p.label){case 0:return e=jl({store:u}),a?[4,Sc.maybeCurry(t||null)(n)]:[3,2];case 1:return l=p.sent(),[3,3];case 2:l=n,p.label=3;case 3:return n=l,f=(h=Sc).returner,[4,e.getItem(r).then((function(i){return Ic(d,void 0,void 0,(function(){var a,u,l,h,f,d,p,g;return kc(this,(function(y){switch(y.label){case 0:switch(o){case"custom":return[3,1];case"right":return[3,5];case"deepRight":return[3,8];case"with":return[3,11];case"withKey":return[3,14];case"deepWith":return[3,15];case"deepWithKey":return[3,16]}return[3,16];case 1:return y.trys.push([1,4,,5]),u=(a=e).setItem,l=[r],[4,Sc.maybeCurry(t)(i)];case 2:return[4,u.apply(a,l.concat([y.sent()]))];case 3:return[2,y.sent()];case 4:return h=y.sent(),[2,Sc.logger(h)(s)];case 5:return y.trys.push([5,7,,8]),[4,e.setItem(r,xl(i,n))];case 6:return[2,y.sent()];case 7:return f=y.sent(),[2,Sc.logger(f)(s)];case 8:return y.trys.push([8,10,,11]),[4,e.setItem(r,kl(i,n))];case 9:return[2,y.sent()];case 10:return d=y.sent(),[2,Sc.logger(d)(s)];case 11:return y.trys.push([11,13,,14]),[4,e.setItem(r,Sl(_l,i,n))];case 12:return[2,y.sent()];case 13:return p=y.sent(),[2,Sc.logger(p)(s)];case 14:try{return[2,e.setItem(r,wl(c,i,n))]}catch(b){return[2,Sc.logger(b)(s)]}y.label=15;case 15:try{return[2,e.setItem(r,El(_l,i,n))]}catch(b){return[2,Sc.logger(b)(s)]}y.label=16;case 16:return y.trys.push([16,18,,19]),[4,e.setItem(r,Il(c,i,n))];case 17:return[2,y.sent()];case 18:return g=y.sent(),[2,Sc.logger(g)(s)];case 19:return[2]}}))}))})).catch((function(t){return Sc.logger(t)(s)}))];case 4:return[2,f.apply(h,[p.sent()])(i)]}}))}))}},removeItem:function(t){var e=void 0===t?{}:t,r=e.key,n=e.logger,o=e.returner,i=e.before,s=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,a,u,c;return kc(this,(function(l){switch(l.label){case 0:return i?[4,Sc.maybeCurry(t||null)(r)]:[3,2];case 1:return e=l.sent(),[3,3];case 2:e=r,l.label=3;case 3:return r=e,[4,jl({store:s})];case 4:return a=l.sent(),c=(u=Sc).returner,[4,a.removeItem(r).then((function(){return!0})).catch((function(t){return Sc.logger(t)(n)}))];case 5:return[2,c.apply(u,[l.sent()])(o)]}}))}))}},deleteItemKey:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return Ic(this,void 0,void 0,(function(){var n;return kc(this,(function(o){return n=Ol(r),[2,Oc.getItem(t).then((function(r){return"string"==typeof e?delete r[e]:typeof e==typeof[]&&e.forEach((function(t){return delete r[t]})),Oc.setItem(t,r).then((function(t){return t})).catch((function(t){return Sc.logger(t,n[0].logger)}))})).catch((function(t){return Sc.logger(t,n[0].logger)}))]}))}))},clear:function(t){var e=void 0===t?{}:t,r=e.logger,n=void 0===r?"none":r,o=e.store;return function(t){return Ic(this,void 0,void 0,(function(){return kc(this,(function(e){switch(e.label){case 0:return[4,jl({store:o})];case 1:return[2,e.sent().clear().then((function(){return Sc.maybeCurry(t||null)(!0)})).catch((function(t){return Sc.logger(t)(n)}))]}}))}))}},length:function(t){var e=void 0===t?{}:t,r=e.logger,n=e.returner,o=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,i,s;return kc(this,(function(a){switch(a.label){case 0:return[4,jl({store:o})];case 1:return e=a.sent(),s=(i=Sc).returner,[4,e.length().then((function(e){return Sc.maybeCurry(t||null)(e)})).catch((function(t){return Sc.logger(t)(r)}))];case 2:return[2,s.apply(i,[a.sent()])(n)]}}))}))}},keys:function(t){var e=void 0===t?{}:t,r=e.logger,n=e.returner,o=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,i,s;return kc(this,(function(a){switch(a.label){case 0:return[4,jl({store:o})];case 1:return e=a.sent(),s=(i=Sc).returner,[4,e.keys().then((function(e){return Sc.maybeCurry(t||null)(e)})).catch((function(t){return Sc.logger(t)(r)}))];case 2:return[2,s.apply(i,[a.sent()])(n)]}}))}))}},hasKey:function(t){var e=void 0===t?{}:t,r=e.key,n=e.logger,o=e.returner,i=e.store;return function(t){return Ic(this,void 0,void 0,(function(){var e,s,a;return kc(this,(function(u){switch(u.label){case 0:return[4,jl({store:i})];case 1:return e=u.sent(),a=(s=Sc).returner,[4,e.keys().then((function(e){return Sc.maybeCurry(t||null)(e.includes(r))})).catch((function(t){return Sc.logger(t)(n)}))];case 2:return[2,a.apply(s,[u.sent()])(o)]}}))}))}},hasKeyValue:function(t){var e=void 0===t?{}:t,r=e.key,n=e.value,o=e.logger,i=e.returner;return function(t){return Ic(this,void 0,void 0,(function(){var e,s;return kc(this,(function(a){switch(a.label){case 0:return s=(e=Sc).returner,[4,Oc.getItem(r).then((function(e){return Sc.maybeCurry(t)(!!e[n])})).catch((function(t){return Sc.logger(t)(o)}))];case 1:return[2,s.apply(e,[a.sent()])(i)]}}))}))}},iterate:function(t,e){Oc.iterate(t,e)},config:function(t){return Oc.config(t)},driver:function(){return Oc.driver()},ready:function(){return Ic(this,void 0,void 0,(function(){return kc(this,(function(t){return[2,Oc.ready().then((function(){return!0})).catch((function(t){return console.error(t),!1}))]}))}))},createInstance:function(t){var e=void 0===t?{}:t,r=e.name;return e.logger,Oc.createInstance({name:r||"tauriForage"})},dropInstance:function(t){var e=t.name;return Ic(this,void 0,void 0,(function(){return kc(this,(function(t){return[2,Oc.dropInstance({name:e}).then((function(){return!0})).catch((function(t){return console.log(t),!1}))]}))}))},dropAll:function(){return Ic(this,void 0,void 0,(function(){return kc(this,(function(t){return[2,Oc.dropInstance({}).then((function(){return!0})).catch((function(t){return console.log(t),!1}))]}))}))},dropStore:function(t){var e=t.name,r=t.storeName;return Oc.dropInstance({name:e,storeName:r})}},Ol=function(t){return t?t.map((function(t){switch(typeof t){case"function":return{curry:t};case"string":return{logger:t};case"number":return{returner:t};case"boolean":return{before:t};default:return{curry:t}}})):[]},jl=function(t){var e=(void 0===t?{}:t).store;return e?Al.createInstance({name:e}):Oc};
/*
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class Rl{constructor(t,e=""){this.source=t.source,this.flags=e}setGroup(t,e){let r="string"==typeof e?e:e.source;return r=r.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(t,r),this}getRegexp(){return new RegExp(this.source,this.flags)}}
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */const Cl=/[&<>"']/,Ul=/[&<>"']/g,Tl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ll=/[<>"']|&(?!#?\w+;)/,Bl=/[<>"']|&(?!#?\w+;)/g;function Nl(t,e){if(e){if(Cl.test(t))return t.replace(Ul,(t=>Tl[t]))}else if(Ll.test(t))return t.replace(Bl,(t=>Tl[t]));return t}function zl(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}
/**
 * @license
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */var Ml,Dl;(Dl=Ml||(Ml={}))[Dl.space=1]="space",Dl[Dl.text=2]="text",Dl[Dl.paragraph=3]="paragraph",Dl[Dl.heading=4]="heading",Dl[Dl.listStart=5]="listStart",Dl[Dl.listEnd=6]="listEnd",Dl[Dl.looseItemStart=7]="looseItemStart",Dl[Dl.looseItemEnd=8]="looseItemEnd",Dl[Dl.listItemStart=9]="listItemStart",Dl[Dl.listItemEnd=10]="listItemEnd",Dl[Dl.blockquoteStart=11]="blockquoteStart",Dl[Dl.blockquoteEnd=12]="blockquoteEnd",Dl[Dl.code=13]="code",Dl[Dl.table=14]="table",Dl[Dl.html=15]="html",Dl[Dl.hr=16]="hr";
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class $l{constructor(t){this.options=t||Pl.options}code(t,e,r,n){if(this.options.highlight){const n=this.options.highlight(t,e);null!=n&&n!==t&&(r=!0,t=n)}const o=r?t:this.options.escape(t,!0);if(!e)return`\n<pre><code>${o}\n</code></pre>\n`;return`\n<pre><code class="${this.options.langPrefix+this.options.escape(e,!0)}">${o}\n</code></pre>\n`}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,r){return`<h${e} id="${this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")}">${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e){const r=e?"ol":"ul";return`\n<${r}>\n${t}</${r}>\n`}listitem(t){return"<li>"+t+"</li>\n"}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return`\n<table>\n<thead>\n${t}</thead>\n<tbody>\n${e}</tbody>\n</table>\n`}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const r=e.header?"th":"td";return(e.align?"<"+r+' style="text-align:'+e.align+'">':"<"+r+">")+t+"</"+r+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,r){if(this.options.sanitize){let e;try{e=decodeURIComponent(this.options.unescape(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return r}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return r}let n='<a href="'+t+'"';return e&&(n+=' title="'+e+'"'),n+=">"+r+"</a>",n}image(t,e,r){let n='<img src="'+t+'" alt="'+r+'"';return e&&(n+=' title="'+e+'"'),n+=this.options.xhtml?"/>":">",n}text(t){return t}}
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */class Vl{constructor(t,e,r=Pl.options,n){if(this.staticThis=t,this.links=e,this.options=r,this.renderer=n||this.options.renderer||new $l(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(t,e,r){return new this(this,e,r).output(t)}static getRulesBase(){if(this.rulesBase)return this.rulesBase;const t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};return t.link=new Rl(t.link).setGroup("inside",t._inside).setGroup("href",t._href).getRegexp(),t.reflink=new Rl(t.reflink).setGroup("inside",t._inside).getRegexp(),this.rulesBase=t}static getRulesPedantic(){return this.rulesPedantic?this.rulesPedantic:this.rulesPedantic=Object.assign(Object.assign({},this.getRulesBase()),{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})}static getRulesGfm(){if(this.rulesGfm)return this.rulesGfm;const t=this.getRulesBase(),e=new Rl(t.escape).setGroup("])","~|])").getRegexp(),r=new Rl(t.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp();return this.rulesGfm=Object.assign(Object.assign({},t),{escape:e,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r})}static getRulesBreaks(){if(this.rulesBreaks)return this.rulesBreaks;const t=this.getRulesGfm(),e=this.getRulesGfm();return this.rulesBreaks=Object.assign(Object.assign({},e),{br:new Rl(t.br).setGroup("{2,}","*").getRegexp(),text:new Rl(e.text).setGroup("{2,}","*").getRegexp()})}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.url}output(t){let e;t=t;let r="";for(;t;)if(e=this.rules.escape.exec(t))t=t.substring(e[0].length),r+=e[1];else if(e=this.rules.autolink.exec(t)){let n,o;t=t.substring(e[0].length),"@"===e[2]?(n=this.options.escape(":"===e[1].charAt(6)?this.mangle(e[1].substring(7)):this.mangle(e[1])),o=this.mangle("mailto:")+n):(n=this.options.escape(e[1]),o=n),r+=this.renderer.link(o,null,n)}else if(!this.inLink&&this.hasRulesGfm&&(e=this.rules.url.exec(t))){let n,o;t=t.substring(e[0].length),n=this.options.escape(e[1]),o=n,r+=this.renderer.link(o,null,n)}else if(e=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(e[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(e[0])&&(this.inLink=!1),t=t.substring(e[0].length),r+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):this.options.escape(e[0]):e[0];else if(e=this.rules.link.exec(t))t=t.substring(e[0].length),this.inLink=!0,r+=this.outputLink(e,{href:e[2],title:e[3]}),this.inLink=!1;else if((e=this.rules.reflink.exec(t))||(e=this.rules.nolink.exec(t))){t=t.substring(e[0].length);const n=(e[2]||e[1]).replace(/\s+/g," "),o=this.links[n.toLowerCase()];if(!o||!o.href){r+=e[0].charAt(0),t=e[0].substring(1)+t;continue}this.inLink=!0,r+=this.outputLink(e,o),this.inLink=!1}else if(e=this.rules.strong.exec(t))t=t.substring(e[0].length),r+=this.renderer.strong(this.output(e[2]||e[1]));else if(e=this.rules.em.exec(t))t=t.substring(e[0].length),r+=this.renderer.em(this.output(e[2]||e[1]));else if(e=this.rules.code.exec(t))t=t.substring(e[0].length),r+=this.renderer.codespan(this.options.escape(e[2].trim(),!0));else if(e=this.rules.br.exec(t))t=t.substring(e[0].length),r+=this.renderer.br();else if(this.hasRulesGfm&&(e=this.rules.del.exec(t)))t=t.substring(e[0].length),r+=this.renderer.del(this.output(e[1]));else if(e=this.rules.text.exec(t))t=t.substring(e[0].length),r+=this.renderer.text(this.options.escape(this.smartypants(e[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return r}outputLink(t,e){const r=this.options.escape(e.href),n=e.title?this.options.escape(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(r,n,this.output(t[1])):this.renderer.image(r,n,this.options.escape(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t}mangle(t){if(!this.options.mangle)return t;let e="";const r=t.length;for(let n=0;n<r;n++){let r;Math.random()>.5&&(r="x"+t.charCodeAt(n).toString(16)),e+="&#"+r+";"}return e}}Vl.rulesBase=null,Vl.rulesPedantic=null,Vl.rulesGfm=null,Vl.rulesBreaks=null;
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class ql{constructor(t){this.simpleRenderers=[],this.line=0,this.tokens=[],this.token=null,this.options=t||Pl.options,this.renderer=this.options.renderer||new $l(this.options)}static parse(t,e,r){return new this(r).parse(e,t)}parse(t,e){this.inlineLexer=new Vl(Vl,t,this.options,this.renderer),this.tokens=e.reverse();let r="";for(;this.next();)r+=this.tok();return r}debug(t,e){this.inlineLexer=new Vl(Vl,t,this.options,this.renderer),this.tokens=e.reverse();let r="";for(;this.next();){const t=this.tok();this.token.line=this.line+=t.split("\n").length-1,r+=t}return r}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let t,e=this.token.text;for(;(t=this.getNextElement())&&t.type==Ml.text;)e+="\n"+this.next().text;return this.inlineLexer.output(e)}tok(){switch(this.token.type){case Ml.space:return"";case Ml.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case Ml.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case Ml.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case Ml.listStart:{let t="";const e=this.token.ordered;for(;this.next().type!=Ml.listEnd;)t+=this.tok();return this.renderer.list(t,e)}case Ml.listItemStart:{let t="";for(;this.next().type!=Ml.listItemEnd;)t+=this.token.type==Ml.text?this.parseText():this.tok();return this.renderer.listitem(t)}case Ml.looseItemStart:{let t="";for(;this.next().type!=Ml.listItemEnd;)t+=this.tok();return this.renderer.listitem(t)}case Ml.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case Ml.table:{let t,e="",r="";t="";for(let n=0;n<this.token.header.length;n++){const e={header:!0,align:this.token.align[n]},r=this.inlineLexer.output(this.token.header[n]);t+=this.renderer.tablecell(r,e)}e+=this.renderer.tablerow(t);for(const n of this.token.cells){t="";for(let e=0;e<n.length;e++)t+=this.renderer.tablecell(this.inlineLexer.output(n[e]),{header:!1,align:this.token.align[e]});r+=this.renderer.tablerow(t)}return this.renderer.table(e,r)}case Ml.blockquoteStart:{let t="";for(;this.next().type!=Ml.blockquoteEnd;)t+=this.tok();return this.renderer.blockquote(t)}case Ml.hr:return this.renderer.hr();case Ml.html:{const t=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text);return this.renderer.html(t)}default:{if(this.simpleRenderers.length)for(let e=0;e<this.simpleRenderers.length;e++)if(this.token.type=="simpleRule"+(e+1))return this.simpleRenderers[e].call(this.renderer,this.token.execArr);const t=`Token with "${this.token.type}" type was not found.`;if(!this.options.silent)throw new Error(t);console.log(t)}}}}
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */class Pl{static setOptions(t){return Object.assign(this.options,t),this}static setBlockRule(t,e=(()=>"")){return Fl.simpleRules.push(t),this.simpleRenderers.push(e),this}static parse(t,e=this.options){try{const{tokens:r,links:n}=this.callBlockLexer(t,e);return this.callParser(r,n,e)}catch(r){return this.callMe(r)}}static debug(t,e=this.options){const{tokens:r,links:n}=this.callBlockLexer(t,e);let o=r.slice();const i=new ql(e);i.simpleRenderers=this.simpleRenderers;const s=i.debug(n,r);return o=o.map((t=>{t.type=Ml[t.type]||t.type;const e=t.line;return delete t.line,e?Object.assign({line:e},t):t})),{tokens:o,links:n,result:s}}static callBlockLexer(t="",e){if("string"!=typeof t)throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof t}'`);return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),Fl.lex(t,e,!0)}static callParser(t,e,r){if(this.simpleRenderers.length){const n=new ql(r);return n.simpleRenderers=this.simpleRenderers,n.parse(e,t)}return ql.parse(t,e,r)}static callMe(t){if(t.message+="\nPlease report this to https://github.com/ts-stack/markdown",this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(t.message+"",!0)+"</pre>";throw t}}Pl.options=new class{constructor(){this.gfm=!0,this.tables=!0,this.breaks=!1,this.pedantic=!1,this.sanitize=!1,this.mangle=!0,this.smartLists=!1,this.silent=!1,this.langPrefix="lang-",this.smartypants=!1,this.headerPrefix="",this.xhtml=!1,this.escape=Nl,this.unescape=zl}},Pl.simpleRenderers=[];
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021,  . (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class Fl{constructor(t,e){this.staticThis=t,this.links={},this.tokens=[],this.options=e||Pl.options,this.setRules()}static lex(t,e,r,n){return new this(this,e).getTokens(t,r,n)}static getRulesBase(){if(this.rulesBase)return this.rulesBase;const t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};t.item=new Rl(t.item,"gm").setGroup(/bull/g,t.bullet).getRegexp(),t.list=new Rl(t.list).setGroup(/bull/g,t.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+t.def.source+")").getRegexp();const e="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";return t.html=new Rl(t.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,e).getRegexp(),t.paragraph=new Rl(t.paragraph).setGroup("hr",t.hr).setGroup("heading",t.heading).setGroup("lheading",t.lheading).setGroup("blockquote",t.blockquote).setGroup("tag","<"+e).setGroup("def",t.def).getRegexp(),this.rulesBase=t}static getRulesGfm(){if(this.rulesGfm)return this.rulesGfm;const t=this.getRulesBase(),e=Object.assign(Object.assign({},t),{fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),r=e.fences.source.replace("\\1","\\2"),n=t.list.source.replace("\\1","\\3");return e.paragraph=new Rl(t.paragraph).setGroup("(?!",`(?!${r}|${n}|`).getRegexp(),this.rulesGfm=e}static getRulesTable(){return this.rulesTables?this.rulesTables:this.rulesTables=Object.assign(Object.assign({},this.getRulesGfm()),{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table}getTokens(t,e,r){let n,o=t;t:for(;o;)if((n=this.rules.newline.exec(o))&&(o=o.substring(n[0].length),n[0].length>1&&this.tokens.push({type:Ml.space})),n=this.rules.code.exec(o)){o=o.substring(n[0].length);const t=n[0].replace(/^ {4}/gm,"");this.tokens.push({type:Ml.code,text:this.options.pedantic?t:t.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(n=this.rules.fences.exec(o)))o=o.substring(n[0].length),this.tokens.push({type:Ml.code,meta:n[2],lang:n[3],text:n[4]||""});else if(n=this.rules.heading.exec(o))o=o.substring(n[0].length),this.tokens.push({type:Ml.heading,depth:n[1].length,text:n[2]});else if(e&&this.hasRulesTables&&(n=this.rules.nptable.exec(o))){o=o.substring(n[0].length);const t={type:Ml.table,header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let r=0;r<t.align.length;r++)/^ *-+: *$/.test(t.align[r])?t.align[r]="right":/^ *:-+: *$/.test(t.align[r])?t.align[r]="center":/^ *:-+ *$/.test(t.align[r])?t.align[r]="left":t.align[r]=null;const e=n[3].replace(/\n$/,"").split("\n");for(let r=0;r<e.length;r++)t.cells[r]=e[r].split(/ *\| */);this.tokens.push(t)}else if(n=this.rules.lheading.exec(o))o=o.substring(n[0].length),this.tokens.push({type:Ml.heading,depth:"="===n[2]?1:2,text:n[1]});else if(n=this.rules.hr.exec(o))o=o.substring(n[0].length),this.tokens.push({type:Ml.hr});else if(n=this.rules.blockquote.exec(o)){o=o.substring(n[0].length),this.tokens.push({type:Ml.blockquoteStart});const t=n[0].replace(/^ *> ?/gm,"");this.getTokens(t),this.tokens.push({type:Ml.blockquoteEnd})}else if(n=this.rules.list.exec(o)){o=o.substring(n[0].length);const t=n[2];this.tokens.push({type:Ml.listStart,ordered:t.length>1});const e=n[0].match(this.rules.item),i=e.length;let s,a,u,c=!1;for(let n=0;n<i;n++){let l=e[n];s=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),-1!==l.indexOf("\n ")&&(s-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+s+"}","gm"),"")),this.options.smartLists&&n!==i-1&&(a=this.staticThis.getRulesBase().bullet.exec(e[n+1])[0],t===a||t.length>1&&a.length>1||(o=e.slice(n+1).join("\n")+o,n=i-1)),u=c||/\n\n(?!\s*$)/.test(l),n!==i-1&&(c="\n"===l.charAt(l.length-1),u||(u=c)),this.tokens.push({type:u?Ml.looseItemStart:Ml.listItemStart}),this.getTokens(l,!1,r),this.tokens.push({type:Ml.listItemEnd})}this.tokens.push({type:Ml.listEnd})}else if(n=this.rules.html.exec(o)){o=o.substring(n[0].length);const t=n[1],e="pre"===t||"script"===t||"style"===t;this.tokens.push({type:this.options.sanitize?Ml.paragraph:Ml.html,pre:!this.options.sanitizer&&e,text:n[0]})}else if(e&&(n=this.rules.def.exec(o)))o=o.substring(n[0].length),this.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(e&&this.hasRulesTables&&(n=this.rules.table.exec(o))){o=o.substring(n[0].length);const t={type:Ml.table,header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let r=0;r<t.align.length;r++)/^ *-+: *$/.test(t.align[r])?t.align[r]="right":/^ *:-+: *$/.test(t.align[r])?t.align[r]="center":/^ *:-+ *$/.test(t.align[r])?t.align[r]="left":t.align[r]=null;const e=n[3].replace(/(?: *\| *)?\n$/,"").split("\n");for(let r=0;r<e.length;r++)t.cells[r]=e[r].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(t)}else{if(this.staticThis.simpleRules.length){const t=this.staticThis.simpleRules;for(let e=0;e<t.length;e++)if(n=t[e].exec(o)){o=o.substring(n[0].length);const t="simpleRule"+(e+1);this.tokens.push({type:t,execArr:n});continue t}}if(e&&(n=this.rules.paragraph.exec(o)))o=o.substring(n[0].length),"\n"===n[1].slice(-1)?this.tokens.push({type:Ml.paragraph,text:n[1].slice(0,-1)}):this.tokens.push({type:this.tokens.length>0?Ml.paragraph:Ml.text,text:n[1]});else if(n=this.rules.text.exec(o))o=o.substring(n[0].length),this.tokens.push({type:Ml.text,text:n[0]});else if(o)throw new Error("Infinite loop on byte: "+o.charCodeAt(0)+`, near text '${o.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}Fl.simpleRules=[],Fl.rulesBase=null,Fl.rulesGfm=null,Fl.rulesTables=null;export{bt as $,e as A,et as B,gt as C,l as D,d as E,f as F,t as G,U as H,G as I,j as J,R as K,w as L,y as M,o as N,c as O,C as P,_c as Q,Al as R,dt as S,vc as T,u as U,$ as V,P as W,Pl as X,N as Y,I as Z,D as _,E as a,yt as a0,k as b,x as c,g as d,b as e,p as f,S as g,O as h,ft as i,at as j,_ as k,m as l,ut as m,A as n,ct as o,it as p,st as q,ot as r,s,v as t,rt as u,nt as v,lt as w,V as x,M as y,z};
