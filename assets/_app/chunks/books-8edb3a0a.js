import{P as e,Q as n,R as t,C as a,T as s,U as c}from"./vendor-c9b40f2c.js";let o;const i=[];function u(){return new Promise((e=>o?e(o):i.push(e)))}function r(n,o,i=5e3){const r=a(s.from(o)),f=[];const d=c.debounce((async function(){await e.setItem({key:n,value:s.save(t(r))})()}),i);function l(e){r.update((n=>s.change(n,e))),d()}return async function(){const[t,a]=await Promise.all([u(),e.getItem({key:n})()]);a&&r.set(s.load(a,t)),f.forEach((e=>e())),f.length=0}(),{subscribe:r.subscribe,get:()=>t(r),change:function(e){f.length?f.push((()=>{l(e)})):l(e)}}}function f(e){return{id:e.id,name:e.name.toString()}}function d(e){return{id:e.id,name:new n.Text(e.name)}}!async function(){let t=await e.getItem({key:"actor_id"})();t||(t=n.uuid(),await e.setItem({key:"actor_id",value:t})()),o=t,i.forEach((e=>e(t))),i.length=0}();const l=r("books",{table:new n.Table});function m(e){let t;return l.change((({table:a})=>{t=a.add({name:new n.Text(e)})})),t}export{d as a,l as b,m as c,f as d,u as g,r as p};
