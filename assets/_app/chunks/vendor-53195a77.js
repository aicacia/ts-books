function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(t){let e;return a(t,(t=>e=t))(),e}function c(t,e,n){t.$$.on_destroy.push(a(e,n))}function l(t,e,n,r){if(t){const o=h(t,e,n,r);return t[0](o)}}function h(t,n,r,o){return t[1]&&o?e(r.ctx.slice(),t[1](o(n))):r.ctx}function f(t,e,n,r,o,i,s){const a=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(a){const o=h(e,n,r,s);t.p(o,a)}}function d(t){return null==t?"":t}function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function m(){return v(" ")}function w(){return v("")}function I(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function k(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t){return Array.from(t.childNodes)}function S(t,e,n,r){for(let o=0;o<t.length;o+=1){const r=t[o];if(r.nodeName===e){let e=0;const i=[];for(;e<r.attributes.length;){const t=r.attributes[e++];n[t.name]||i.push(t.name)}for(let t=0;t<i.length;t++)r.removeAttribute(i[t]);return t.splice(o,1)[0]}}return r?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):_(e)}function A(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(3===r.nodeType)return r.data=""+e,t.splice(n,1)[0]}return v(e)}function O(t){return A(t," ")}function j(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function R(t,e){t.value=null==e?"":e}function C(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function T(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function U(t,e,n){t.classList[n?"add":"remove"](e)}function L(t,e=document.body){return Array.from(e.querySelectorAll(t))}let z;function N(t){z=t}function B(){if(!z)throw new Error("Function called outside component initialization");return z}function M(t){B().$$.before_update.push(t)}function $(t){B().$$.on_mount.push(t)}function V(t){B().$$.after_update.push(t)}function D(t){B().$$.on_destroy.push(t)}function q(){const t=B();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}function P(t,e){B().$$.context.set(t,e)}const F=[],K=[],H=[],Z=[],G=Promise.resolve();let W=!1;function Y(t){H.push(t)}let J=!1;const X=new Set;function Q(){if(!J){J=!0;do{for(let t=0;t<F.length;t+=1){const e=F[t];N(e),tt(e.$$)}for(N(null),F.length=0;K.length;)K.pop()();for(let t=0;t<H.length;t+=1){const e=H[t];X.has(e)||(X.add(e),e())}H.length=0}while(F.length);for(;Z.length;)Z.pop()();W=!1,J=!1,X.clear()}}function tt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}const et=new Set;let nt;function rt(){nt={r:0,c:[],p:nt}}function ot(){nt.r||o(nt.c),nt=nt.p}function it(t,e){t&&t.i&&(et.delete(t),t.i(e))}function st(t,e,n,r){if(t&&t.o){if(et.has(t))return;et.add(t),nt.c.push((()=>{et.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function at(t,e){st(t,1,1,(()=>{e.delete(t.key)}))}function ut(t,e,n,r,o,i,s,a,u,c,l,h){let f=t.length,d=i.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const y=[],b=new Map,_=new Map;for(p=d;p--;){const t=h(o,i,p),a=n(t);let u=s.get(a);u?r&&u.p(t,e):(u=c(a,t),u.c()),b.set(a,y[p]=u),a in g&&_.set(a,Math.abs(p-g[a]))}const v=new Set,m=new Set;function w(t){it(t,1),t.m(a,l),s.set(t.key,t),l=t.first,d--}for(;f&&d;){const e=y[d-1],n=t[f-1],r=e.key,o=n.key;e===n?(l=e.first,f--,d--):b.has(o)?!s.has(r)||v.has(r)?w(e):m.has(o)?f--:_.get(r)>_.get(o)?(m.add(r),w(e)):(v.add(o),f--):(u(n,s),f--)}for(;f--;){const e=t[f];b.has(e.key)||u(e,s)}for(;d;)w(y[d-1]);return y}function ct(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const s=t[i],a=e[i];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)o[t]||(n[t]=a[t],o[t]=1);t[i]=a}else for(const t in s)o[t]=1}for(const s in r)s in n||(n[s]=void 0);return n}function lt(t){return"object"==typeof t&&null!==t?t:{}}function ht(t){t&&t.c()}function ft(t,e){t&&t.l(e)}function dt(t,e,r,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:l}=t.$$;a&&a.m(e,r),s||Y((()=>{const e=u.map(n).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]})),l.forEach(Y)}function pt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){-1===t.$$.dirty[0]&&(F.push(t),W||(W=!0,G.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function yt(e,n,i,s,a,u,c=[-1]){const l=z;N(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:r(),dirty:c,skip_bound:!1};let f=!1;if(h.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),f&&gt(e,t)),n})):[],h.update(),f=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const t=E(n.target);h.fragment&&h.fragment.l(t),t.forEach(y)}else h.fragment&&h.fragment.c();n.intro&&it(e.$$.fragment),dt(e,n.target,n.anchor,n.customElement),Q()}N(l)}class bt{$destroy(){pt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const _t=[];function vt(e,n=t){let r;const o=[];function i(t){if(s(e,t)&&(e=t,r)){const t=!_t.length;for(let n=0;n<o.length;n+=1){const t=o[n];t[1](),_t.push(t,e)}if(t){for(let t=0;t<_t.length;t+=2)_t[t][0](_t[t+1]);_t.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,a=t){const u=[s,a];return o.push(u),1===o.length&&(r=n(i)||t),s(e),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}var mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function wt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function It(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var kt={exports:{}},xt={exports:{}},Et="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Et){var St=new Uint8Array(16);xt.exports=function(){return Et(St),St}}else{var At=new Array(16);xt.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),At[e]=t>>>((3&e)<<3)&255;return At}}for(var Ot=[],jt=0;jt<256;++jt)Ot[jt]=(jt+256).toString(16).substr(1);var Rt=function(t,e){var n=e||0,r=Ot;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},Ct=xt.exports,Tt=Rt;const Ut=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||Ct)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[r+i]=o[i];return e||Tt(o)};function Lt(){return Ut().replace(/-/g,"")}let zt=Lt;function Nt(){return zt()}Nt.setFactory=t=>{zt=t},Nt.reset=()=>{zt=Lt};var Bt=Nt;var Mt={OPTIONS:Symbol("_options"),CACHE:Symbol("_cache"),STATE:Symbol("_state"),OBJECT_ID:Symbol("_objectId"),CONFLICTS:Symbol("_conflicts"),CHANGE:Symbol("_change"),ELEM_IDS:Symbol("_elemIds")};function $t(t){return"object"==typeof t&&null!==t}var Vt={isObject:$t,copyObject:function(t){if(!$t(t))return{};let e={};for(let n of Object.keys(t))e[n]=t[n];return e},parseOpId:function(t){const e=/^(\d+)@(.*)$/.exec(t||"");if(!e)throw new RangeError(`Not a valid opId: ${t}`);return{counter:parseInt(e[1],10),actorId:e[2]}},equalBytes:function(t,e){if(!(t instanceof Uint8Array&&e instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}};const{OBJECT_ID:Dt}=Mt,{isObject:qt}=Vt;class Pt{constructor(t){if("string"==typeof t){return Ft(void 0,[...t].map((t=>({value:t}))))}if(Array.isArray(t)){return Ft(void 0,t.map((t=>({value:t}))))}if(void 0===t)return Ft(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${t}`)}get length(){return this.elems.length}get(t){const e=this.elems[t].value;if(this.context&&qt(e)){const n=e[Dt],r=this.path.concat([{key:t,objectId:n}]);return this.context.instantiateObject(r,n)}return e}getElemId(t){return this.elems[t].elemId}[Symbol.iterator](){let t=this.elems,e=-1;return{next:()=>(e+=1,e<t.length?{done:!1,value:t[e].value}:{done:!0})}}toString(){let t="";for(const e of this.elems)"string"==typeof e.value&&(t+=e.value);return t}toSpans(){let t=[],e="";for(const n of this.elems)"string"==typeof n.value?e+=n.value:(e.length>0&&(t.push(e),e=""),t.push(n.value));return e.length>0&&t.push(e),t}toJSON(){return this.toString()}getWriteable(t,e){if(!this[Dt])throw new RangeError("getWriteable() requires the objectId to be set");const n=Ft(this[Dt],this.elems);return n.context=t,n.path=e,n}set(t,e){if(this.context)this.context.setListIndex(this.path,t,e);else{if(this[Dt])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems[t].value=e}return this}insertAt(t,...e){if(this.context)this.context.splice(this.path,t,0,e);else{if(this[Dt])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,0,...e.map((t=>({value:t}))))}return this}deleteAt(t,e=1){if(this.context)this.context.splice(this.path,t,e,[]);else{if(this[Dt])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,e)}return this}}for(let jl of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])Pt.prototype[jl]=function(...t){return[...this][jl](...t)};function Ft(t,e){const n=Object.create(Pt.prototype);return n[Dt]=t,n.elems=e,n}var Kt={Text:Pt,instantiateText:Ft};const{OBJECT_ID:Ht,CONFLICTS:Zt}=Mt,{isObject:Gt,copyObject:Wt}=Vt;function Yt(t,e,n){for(let r of t)if(e[r]!==n[r]){if("number"==typeof e[r]&&"number"==typeof n[r])return e[r]-n[r];{const t=""+e[r],o=""+n[r];if(t===o)continue;return t<o?-1:1}}return 0}class Jt{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(t){return this.entries[t]}get ids(){return Object.keys(this.entries).filter((t=>{const e=this.entries[t];return Gt(e)&&e.id===t}))}get count(){return this.ids.length}get rows(){return this.ids.map((t=>this.byId(t)))}filter(t,e){return this.rows.filter(t,e)}find(t,e){return this.rows.find(t,e)}map(t,e){return this.rows.map(t,e)}sort(t){if("function"==typeof t)return this.rows.sort(t);if("string"==typeof t)return this.rows.sort(((e,n)=>Yt([t],e,n)));if(Array.isArray(t))return this.rows.sort(((e,n)=>Yt(t,e,n)));if(void 0===t)return this.rows.sort(((t,e)=>Yt(["id"],t,e)));throw new TypeError(`Unsupported sorting argument: ${t}`)}[Symbol.iterator](){let t=this.rows,e=-1;return{next:()=>(e+=1,e<t.length?{done:!1,value:t[e]}:{done:!0})}}_clone(){if(!this[Ht])throw new RangeError("clone() requires the objectId to be set");return Qt(this[Ht],Wt(this.entries),Wt(this.opIds))}_set(t,e,n){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");Gt(e)&&!Array.isArray(e)&&Object.defineProperty(e,"id",{value:t,enumerable:!0}),this.entries[t]=e,this.opIds[t]=n}remove(t){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[t],delete this.opIds[t]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(t,e){if(!this[Ht])throw new RangeError("getWriteable() requires the objectId to be set");const n=Object.create(Xt.prototype);return n[Ht]=this[Ht],n.context=t,n.entries=this.entries,n.opIds=this.opIds,n.path=e,n}toJSON(){const t={};for(let e of this.ids)t[e]=this.byId(e);return t}}class Xt extends Jt{byId(t){if(Gt(this.entries[t])&&this.entries[t].id===t){const e=this.entries[t][Ht],n=this.path.concat([{key:t,objectId:e}]);return this.context.instantiateObject(n,e,["id"])}}add(t){return this.context.addTableRow(this.path,t)}remove(t){if(!Gt(this.entries[t])||this.entries[t].id!==t)throw new RangeError(`There is no row with ID ${t} in this table`);this.context.deleteTableRow(this.path,t,this.opIds[t])}}function Qt(t,e,n){const r=Object.create(Jt.prototype);if(!t)throw new RangeError("instantiateTable requires an objectId to be given");return r[Ht]=t,r[Zt]=Object.freeze({}),r.entries=e||{},r.opIds=n||{},r}var te={Table:Jt,instantiateTable:Qt};class ee{constructor(t){this.value=t||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}}class ne extends ee{increment(t){return t="number"==typeof t?t:1,this.context.increment(this.path,this.key,t),this.value+=t,this.value}decrement(t){return this.increment("number"==typeof t?-t:-1)}}var re={Counter:ee,getWriteableCounter:function(t,e,n,r,o){const i=Object.create(ne.prototype);return i.value=t,i.context=e,i.path=n,i.objectId=r,i.key=o,i}};const{isObject:oe,copyObject:ie,parseOpId:se}=Vt,{OBJECT_ID:ae,CONFLICTS:ue,ELEM_IDS:ce}=Mt,{instantiateText:le}=Kt,{instantiateTable:he}=te,{Counter:fe}=re;function de(t,e,n){if(t.objectId)return e&&e[ae]!==t.objectId&&(e=void 0),_e(t,e,n);if("timestamp"===t.datatype)return new Date(t.value);if("counter"===t.datatype)return new fe(t.value);if(void 0!==t.datatype)throw new TypeError(`Unknown datatype: ${t.datatype}`);return t.value}function pe(t,e){const n=/^(\d+)@(.*)$/,r=n.test(t)?se(t):{counter:0,actorId:t},o=n.test(e)?se(e):{counter:0,actorId:e};return r.counter<o.counter?-1:r.counter>o.counter?1:r.actorId<o.actorId?-1:r.actorId>o.actorId?1:0}function ge(t,e){const n=ie(t),r=ie(t?t[ue]:void 0);return Object.defineProperty(n,ae,{value:e}),Object.defineProperty(n,ue,{value:r}),n}function ye(t,e,n){const r=t.objectId;n[r]||(n[r]=ge(e,r));const o=n[r];return function(t,e,n,r){if(t)for(let o of Object.keys(t)){const i={},s=Object.keys(t[o]).sort(pe).reverse();for(let e of s){const s=t[o][e];n[o]&&n[o][e]?i[e]=de(s,n[o][e],r):i[e]=de(s,void 0,r)}0===s.length?(delete e[o],delete n[o]):(e[o]=i[s[0]],n[o]=i)}}(t.props,o,o[ue],n),o}function be(t,e,n){const r=t.objectId;n[r]||(n[r]=function(t,e){const n=t?t.slice():[],r=t&&t[ue]?t[ue].slice():[],o=t&&t[ce]?t[ce].slice():[];return Object.defineProperty(n,ae,{value:e}),Object.defineProperty(n,ue,{value:r}),Object.defineProperty(n,ce,{value:o}),n}(e,r));const o=n[r],i=o[ue],s=o[ce];for(let a=0;a<t.edits.length;a++){const e=t.edits[a];if("insert"===e.action||"update"===e.action){const r=i[e.index]&&i[e.index][e.opId];let u=de(e.value,r,n),c={[e.opId]:u};for(;a<t.edits.length-1&&t.edits[a+1].index===e.index&&"update"===t.edits[a+1].action;){a++;const e=t.edits[a],r=i[e.index]&&i[e.index][e.opId];u=de(e.value,r,n),c[e.opId]=u}"insert"===e.action?(o.splice(e.index,0,u),i.splice(e.index,0,c),s.splice(e.index,0,e.elemId)):(o[e.index]=u,i[e.index]=c)}else if("multi-insert"===e.action){const t=se(e.elemId),n=[],r=[],a=[];e.values.forEach(((e,o)=>{const i=`${t.counter+o}@${t.actorId}`;r.push(e),a.push({[i]:{value:e,type:"value"}}),n.push(i)})),o.splice(e.index,0,...r),i.splice(e.index,0,...a),s.splice(e.index,0,...n)}else"remove"===e.action&&(o.splice(e.index,e.count),i.splice(e.index,e.count),s.splice(e.index,e.count))}return o}function _e(t,e,n){if(oe(e)&&(!t.props||0===Object.keys(t.props).length)&&(!t.edits||0===t.edits.length)&&!n[t.objectId])return e;if("map"===t.type)return ye(t,e,n);if("table"===t.type)return function(t,e,n){const r=t.objectId;n[r]||(n[r]=e?e._clone():he(r));const o=n[r];for(let i of Object.keys(t.props||{})){const e=Object.keys(t.props[i]);if(0===e.length)o.remove(i);else{if(1!==e.length)throw new RangeError("Conflicts are not supported on properties of a table");{const r=t.props[i][e[0]];o._set(i,de(r,o.byId(i),n),e[0])}}}return o}(t,e,n);if("list"===t.type)return be(t,e,n);if("text"===t.type)return function(t,e,n){const r=t.objectId;let o;o=n[r]?n[r].elems:e?e.elems.slice():[];for(const i of t.edits)if("insert"===i.action){const t=de(i.value,void 0,n),e={elemId:i.elemId,pred:[i.opId],value:t};o.splice(i.index,0,e)}else if("multi-insert"===i.action){const t=se(i.elemId),e=i.values.map(((e,n)=>{const r=`${t.counter+n}@${t.actorId}`;return{elemId:r,pred:[r],value:e}}));o.splice(i.index,0,...e)}else if("update"===i.action){const t=o[i.index].elemId,e=de(i.value,o[i.index].value,n);o[i.index]={elemId:t,pred:[i.opId],value:e}}else"remove"===i.action&&o.splice(i.index,i.count);return n[r]=le(r,o),n[r]}(t,e,n);throw new TypeError(`Unknown object type: ${t.type}`)}var ve={interpretPatch:_e,cloneRootObject:function(t){if("_root"!==t[ae])throw new RangeError(`Not the root object: ${t[ae]}`);return ge(t,"_root")}};const{OBJECT_ID:me,CHANGE:we,STATE:Ie}=Mt,{Text:ke}=Kt,{Table:xe}=te;function Ee(t){if("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),"number"!=typeof t)throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(t));if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}const Se={get(t,e){const{context:n,objectId:r,path:o}=t;return e===me?r:e===we?n:e===Ie?{actorId:n.actorId}:n.getObjectField(o,r,e)},set(t,e,n){const{context:r,path:o,readonly:i}=t;if(Array.isArray(i)&&i.indexOf(e)>=0)throw new RangeError(`Object property "${e}" cannot be modified`);return r.setMapKey(o,e,n),!0},deleteProperty(t,e){const{context:n,path:r,readonly:o}=t;if(Array.isArray(o)&&o.indexOf(e)>=0)throw new RangeError(`Object property "${e}" cannot be modified`);return n.deleteMapKey(r,e),!0},has(t,e){const{context:n,objectId:r}=t;return[me,we].includes(e)||e in n.getObject(r)},getOwnPropertyDescriptor(t,e){const{context:n,objectId:r}=t;if(e in n.getObject(r))return{configurable:!0,enumerable:!0,value:n.getObjectField(r,e)}},ownKeys(t){const{context:e,objectId:n}=t;return Object.keys(e.getObject(n))}},Ae={get(t,e){const[n,r,o]=t;return e===Symbol.iterator?n.getObject(r)[Symbol.iterator]:e===me?r:e===we?n:"length"===e?n.getObject(r).length:"string"==typeof e&&/^[0-9]+$/.test(e)?n.getObjectField(o,r,Ee(e)):function(t,e,n){const r={deleteAt(e,r){return t.splice(n,Ee(e),r||1,[]),this},fill(r,o,i){let s=t.getObject(e);for(let e=Ee(o||0);e<Ee(i||s.length);e++)t.setListIndex(n,e,r);return this},indexOf(n,r=0){const o=n[me];if(o){const n=t.getObject(e);for(let t=r;t<n.length;t++)if(n[t][me]===o)return t;return-1}return t.getObject(e).indexOf(n,r)},insertAt(e,...r){return t.splice(n,Ee(e),0,r),this},pop(){let r=t.getObject(e);if(0==r.length)return;const o=t.getObjectField(n,e,r.length-1);return t.splice(n,r.length-1,1,[]),o},push(...r){let o=t.getObject(e);return t.splice(n,o.length,0,r),t.getObject(e).length},shift(){if(0==t.getObject(e).length)return;const r=t.getObjectField(n,e,0);return t.splice(n,0,1,[]),r},splice(r,o,...i){let s=t.getObject(e);r=Ee(r),(void 0===o||o>s.length-r)&&(o=s.length-r);const a=[];for(let u=0;u<o;u++)a.push(t.getObjectField(n,e,r+u));return t.splice(n,r,o,i),a},unshift:(...r)=>(t.splice(n,0,0,r),t.getObject(e).length)};for(let o of["entries","keys","values"]){let n=t.getObject(e);r[o]=()=>n[o]()}for(let o of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])r[o]=(...r)=>t.getObject(e).map(((r,o)=>t.getObjectField(n,e,o)))[o](...r);return r}(n,r,o)[e]},set(t,e,n){const[r,,o]=t;return r.setListIndex(o,Ee(e),n),!0},deleteProperty(t,e){const[n,,r]=t;return n.splice(r,Ee(e),1,[]),!0},has(t,e){const[n,r]=t;return"string"==typeof e&&/^[0-9]+$/.test(e)?Ee(e)<n.getObject(r).length:["length",me,we].includes(e)},getOwnPropertyDescriptor(t,e){const[n,r]=t,o=n.getObject(r);if("length"===e)return{writable:!0,value:o.length};if(e===me)return{configurable:!1,enumerable:!1,value:r};if("string"==typeof e&&/^[0-9]+$/.test(e)){const t=Ee(e);if(t<o.length)return{configurable:!0,enumerable:!0,value:n.getObjectField(r,t)}}},ownKeys(t){const[e,n]=t,r=e.getObject(n);let o=["length"];for(let i of Object.keys(r))o.push(i);return o}};function Oe(t,e,n,r){return new Proxy({context:t,objectId:e,path:n,readonly:r},Se)}function je(t,e,n){const r=this.getObject(e);return Array.isArray(r)?function(t,e,n){return new Proxy([t,e,n],Ae)}(this,e,t):r instanceof ke||r instanceof xe?r.getWriteable(this,t):Oe(this,e,t,n)}var Re={rootObjectProxy:function(t){return t.instantiateObject=je,Oe(t,"_root",[])}};const{CACHE:Ce,OBJECT_ID:Te,CONFLICTS:Ue,ELEM_IDS:Le,STATE:ze}=Mt,{interpretPatch:Ne}=ve,{Text:Be}=Kt,{Table:Me}=te,{Counter:$e,getWriteableCounter:Ve}=re,{isObject:De,parseOpId:qe}=Vt,Pe=Bt;function Fe(t,e){return t instanceof Me?[t.opIds[e]]:t instanceof Be?t.elems[e].pred:t[Ue]&&t[Ue][e]?Object.keys(t[Ue][e]):[]}function Ke(t,e,n=!1){if(n){if(0===e)return"_head";e-=1}if(t[Le])return t[Le][e];if(t.getElemId)return t.getElemId(e);throw new RangeError(`Cannot find elemId at list index ${e}`)}var He={Context:class{constructor(t,e,n){this.actorId=e,this.maxOp=t[ze].maxOp,this.cache=t[Ce],this.updated={},this.ops=[],this.applyPatch=n||Ne}addOp(t){this.ops.push(t)}nextOpId(){let t=this.maxOp+1;for(const e of this.ops)"set"===e.action&&e.values?t+=e.values.length:"del"===e.action&&e.multiOp?t+=e.multiOp:t+=1;return`${t}@${this.actorId}`}getValueDescription(t){if(!["object","boolean","number","string"].includes(typeof t))throw new TypeError("Unsupported type of value: "+typeof t);if(De(t)){if(t instanceof Date)return{type:"value",value:t.getTime(),datatype:"timestamp"};if(t instanceof $e)return{type:"value",value:t.value,datatype:"counter"};{const e=t[Te],n=this.getObjectType(e);if(!e)throw new RangeError(`Object ${JSON.stringify(t)} has no objectId`);return"list"===n||"text"===n?{objectId:e,type:n,edits:[]}:{objectId:e,type:n,props:{}}}}return{type:"value",value:t}}getValuesDescriptions(t,e,n){if(e instanceof Me){const t=e.byId(n);return t?{[n]:this.getValueDescription(t)}:{}}if(e instanceof Be){const t=e.get(n),r=e.getElemId(n);return t?{[r]:this.getValueDescription(t)}:{}}{const r=e[Ue][n],o={};if(!r)throw new RangeError(`No children at key ${n} of path ${JSON.stringify(t)}`);for(let t of Object.keys(r))o[t]=this.getValueDescription(r[t]);return o}}getPropertyValue(t,e,n){return t instanceof Me?t.byId(e):t instanceof Be?t.get(e):t[Ue][e][n]}getSubpatch(t,e){if(0==e.length)return t;let n=t,r=this.getObject("_root");for(let o of e){let t=this.getValuesDescriptions(e,r,o.key);if(n.props)n.props[o.key]||(n.props[o.key]=t);else if(n.edits)for(const e of Object.keys(t))n.edits.push({action:"update",index:o.key,opId:e,value:t[e]});let i=null;for(let e of Object.keys(t))t[e].objectId===o.objectId&&(i=e);if(!i)throw new RangeError(`Cannot find path object with objectId ${o.objectId}`);n=t[i],r=this.getPropertyValue(r,o.key,i)}return n}getObject(t){const e=this.updated[t]||this.cache[t];if(!e)throw new RangeError(`Target object does not exist: ${t}`);return e}getObjectType(t){if("_root"===t)return"map";const e=this.getObject(t);return e instanceof Be?"text":e instanceof Me?"table":Array.isArray(e)?"list":"map"}getObjectField(t,e,n){if(!["string","number"].includes(typeof n))return;const r=this.getObject(e);if(r[n]instanceof $e)return Ve(r[n].value,this,t,e,n);if(De(r[n])){const e=r[n][Te],o=t.concat([{key:n,objectId:e}]);return this.instantiateObject(o,e)}return r[n]}createNestedObjects(t,e,n,r,o,i){if(n[Te])throw new RangeError("Cannot create a reference to an existing document object");const s=this.nextOpId();if(n instanceof Be){this.addOp(i?{action:"makeText",obj:t,elemId:i,insert:r,pred:o}:{action:"makeText",obj:t,key:e,insert:r,pred:o});const a={objectId:s,type:"text",edits:[]};return this.insertListItems(a,0,[...n],!0),a}if(n instanceof Me){if(n.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(i?{action:"makeTable",obj:t,elemId:i,insert:r,pred:o}:{action:"makeTable",obj:t,key:e,insert:r,pred:o}),{objectId:s,type:"table",props:{}}}if(Array.isArray(n)){this.addOp(i?{action:"makeList",obj:t,elemId:i,insert:r,pred:o}:{action:"makeList",obj:t,key:e,insert:r,pred:o});const a={objectId:s,type:"list",edits:[]};return this.insertListItems(a,0,n,!0),a}{this.addOp(i?{action:"makeMap",obj:t,elemId:i,insert:r,pred:o}:{action:"makeMap",obj:t,key:e,insert:r,pred:o});let a={};for(let t of Object.keys(n).sort()){const e=this.nextOpId(),r=this.setValue(s,t,n[t],!1,[]);a[t]={[e]:r}}return{objectId:s,type:"map",props:a}}}setValue(t,e,n,r,o,i){if(!t)throw new RangeError("setValue needs an objectId");if(""===e)throw new RangeError("The key of a map entry must not be an empty string");if(!De(n)||n instanceof Date||n instanceof $e){const s=this.getValueDescription(n),a={action:"set",obj:t,insert:r,value:s.value,pred:o};return i?a.elemId=i:a.key=e,s.datatype&&(a.datatype=s.datatype),this.addOp(a),s}return this.createNestedObjects(t,e,n,r,o,i)}applyAtPath(t,e){let n={objectId:"_root",type:"map",props:{}};e(this.getSubpatch(n,t)),this.applyPatch(n,this.cache._root,this.updated)}setMapKey(t,e,n){if("string"!=typeof e)throw new RangeError("The key of a map entry must be a string, not "+typeof e);const r=0===t.length?"_root":t[t.length-1].objectId,o=this.getObject(r);if(o[e]instanceof $e)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(o[e]!==n||Object.keys(o[Ue][e]||{}).length>1||void 0===n)&&this.applyAtPath(t,(t=>{const i=Fe(o,e),s=this.nextOpId(),a=this.setValue(r,e,n,!1,i);t.props[e]={[s]:a}}))}deleteMapKey(t,e){const n=0===t.length?"_root":t[t.length-1].objectId,r=this.getObject(n);if(void 0!==r[e]){const o=Fe(r,e);this.addOp({action:"del",obj:n,key:e,insert:!1,pred:o}),this.applyAtPath(t,(t=>{t.props[e]={}}))}}insertListItems(t,e,n,r){const o=r?[]:this.getObject(t.objectId);if(e<0||e>o.length)throw new RangeError(`List index ${e} is out of bounds for list of length ${o.length}`);let i=Ke(o,e,!0);if(n.every((t=>"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t))&&n.length>1){let r=this.nextOpId();this.addOp({action:"set",obj:t.objectId,elemId:i,insert:!0,values:n,pred:[]}),t.edits.push({action:"multi-insert",elemId:r,index:e,values:n})}else for(let s=0;s<n.length;s++){let r=this.nextOpId();const o=this.setValue(t.objectId,e+s,n[s],!0,[],i);i=r,t.edits.push({action:"insert",index:e+s,elemId:i,opId:i,value:o})}}setListIndex(t,e,n){const r=0===t.length?"_root":t[t.length-1].objectId,o=this.getObject(r);if(e===o.length)return this.splice(t,e,0,[n]);if(e<0||e>o.length)throw new RangeError(`List index ${e} is out of bounds for list of length ${o.length}`);if(o[e]instanceof $e)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(o[e]!==n||Object.keys(o[Ue][e]||{}).length>1||void 0===n)&&this.applyAtPath(t,(t=>{const i=Fe(o,e),s=this.nextOpId(),a=this.setValue(r,e,n,!1,i,Ke(o,e));t.edits.push({action:"update",index:e,opId:s,value:a})}))}splice(t,e,n,r){const o=0===t.length?"_root":t[t.length-1].objectId;let i=this.getObject(o);if(e<0||n<0||e>i.length-n)throw new RangeError(`${n} deletions starting at index ${e} are out of bounds for list of length ${i.length}`);if(0===n&&0===r.length)return;let s={objectId:"_root",type:"map",props:{}},a=this.getSubpatch(s,t);if(n>0){let r,s,u;for(let a=0;a<n;a++){if(this.getObjectField(t,o,e+a)instanceof $e)throw new TypeError("Unsupported operation: deleting a counter from a list");const n=Ke(i,e+a),c=qe(n),l=Fe(i,e+a),h=1===l.length?qe(l[0]):void 0;r&&s&&u&&h&&s.actorId===c.actorId&&s.counter+1===c.counter&&u.actorId===h.actorId&&u.counter+1===h.counter?r.multiOp=(r.multiOp||1)+1:(r&&this.addOp(r),r={action:"del",obj:o,elemId:n,insert:!1,pred:l}),s=c,u=h}this.addOp(r),a.edits.push({action:"remove",index:e,count:n})}r.length>0&&this.insertListItems(a,e,r,!1),this.applyPatch(s,this.cache._root,this.updated)}addTableRow(t,e){if(!De(e)||Array.isArray(e))throw new TypeError("A table row must be an object");if(e[Te])throw new TypeError("Cannot reuse an existing object as table row");if(e.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');const n=Pe(),r=this.setValue(t[t.length-1].objectId,n,e,!1,[]);return this.applyAtPath(t,(t=>{t.props[n]={[r.objectId]:r}})),n}deleteTableRow(t,e,n){const r=t[t.length-1].objectId;this.getObject(r).byId(e)&&(this.addOp({action:"del",obj:r,key:e,insert:!1,pred:[n]}),this.applyAtPath(t,(t=>{t.props[e]={}})))}increment(t,e,n){const r=0===t.length?"_root":t[t.length-1].objectId,o=this.getObject(r);if(!(o[e]instanceof $e))throw new TypeError("Only counter values can be incremented");const i=this.getObjectType(r),s=o[e].value+n,a=this.nextOpId(),u=Fe(o,e);if("list"===i||"text"===i){const t=Ke(o,e,!1);this.addOp({action:"inc",obj:r,elemId:t,value:n,insert:!1,pred:u})}else this.addOp({action:"inc",obj:r,key:e,value:n,insert:!1,pred:u});this.applyAtPath(t,(t=>{"list"===i||"text"===i?t.edits.push({action:"update",index:e,opId:a,value:{value:s,datatype:"counter"}}):t.props[e]={[a]:{value:s,datatype:"counter"}}}))}}};const{OBJECT_ID:Ze,CONFLICTS:Ge}=Mt;var We={Observable:class{constructor(){this.observers={}}patchCallback(t,e,n,r,o){this._objectUpdate(t.diffs,e,n,r,o)}_objectUpdate(t,e,n,r,o){if(t.objectId){if(this.observers[t.objectId])for(let i of this.observers[t.objectId])i(t,e,n,r,o);if("map"===t.type&&t.props)for(const i of Object.keys(t.props))for(const s of Object.keys(t.props[i]))this._objectUpdate(t.props[i][s],e&&e[Ge]&&e[Ge][i]&&e[Ge][i][s],n&&n[Ge]&&n[Ge][i]&&n[Ge][i][s],r,o);else if("table"===t.type&&t.props)for(const i of Object.keys(t.props))for(const s of Object.keys(t.props[i]))this._objectUpdate(t.props[i][s],e&&e.byId(i),n&&n.byId(i),r,o);else if("list"===t.type&&t.edits){let i=0;for(const s of t.edits)"insert"===s.action?(i-=1,this._objectUpdate(s.value,void 0,n&&n[Ge]&&n[Ge][s.index]&&n[Ge][s.index][s.elemId],r,o)):"multi-insert"===s.action?i-=s.values.length:"update"===s.action?this._objectUpdate(s.value,e&&e[Ge]&&e[Ge][s.index+i]&&e[Ge][s.index+i][s.opId],n&&n[Ge]&&n[Ge][s.index]&&n[Ge][s.index][s.opId],r,o):"remove"===s.action&&(i+=s.count)}else if("text"===t.type&&t.edits){let i=0;for(const s of t.edits)"insert"===s.action?(i-=1,this._objectUpdate(s.value,void 0,n&&n.get(s.index),r,o)):"multi-insert"===s.action?i-=s.values.length:"update"===s.action?this._objectUpdate(s.value,e&&e.get(s.index+i),n&&n.get(s.index),r,o):"remove"===s.action&&(i+=s.count)}}}observe(t,e){const n=t[Ze];if(!n)throw new TypeError("The observed object must be part of an Automerge document");this.observers[n]||(this.observers[n]=[]),this.observers[n].push(e)}}};const{OPTIONS:Ye,CACHE:Je,STATE:Xe,OBJECT_ID:Qe,CONFLICTS:tn,CHANGE:en,ELEM_IDS:nn}=Mt,{isObject:rn,copyObject:on}=Vt,sn=Bt,{interpretPatch:an,cloneRootObject:un}=ve,{rootObjectProxy:cn}=Re,{Context:ln}=He,{Text:hn}=Kt,{Table:fn}=te,{Counter:dn}=re,{Observable:pn}=We;function gn(t){if("string"!=typeof t)throw new TypeError("Unsupported type of actorId: "+typeof t);if(!/^[0-9a-f]+$/.test(t))throw new RangeError("actorId must consist only of lowercase hex digits");if(t.length%2!=0)throw new RangeError("actorId must consist of an even number of digits")}function yn(t,e,n){let r=e._root;if(r||(r=un(t[Je]._root),e._root=r),Object.defineProperty(r,Ye,{value:t[Ye]}),Object.defineProperty(r,Je,{value:e}),Object.defineProperty(r,Xe,{value:n}),t[Ye].freeze)for(let o of Object.keys(e))e[o]instanceof fn?e[o]._freeze():e[o]instanceof hn?(Object.freeze(e[o].elems),Object.freeze(e[o])):(Object.freeze(e[o]),Object.freeze(e[o][tn]));for(let o of Object.keys(t[Je]))e[o]||(e[o]=t[Je][o]);return t[Ye].freeze&&Object.freeze(e),r}function bn(t,e,n){const r=wn(t);if(!r)throw new Error("Actor ID must be initialized with setActorId() before making a change");const o=on(t[Xe]);o.seq+=1;const i={actor:r,seq:o.seq,startOp:o.maxOp+1,deps:o.deps,time:n&&"number"==typeof n.time?n.time:Math.round((new Date).getTime()/1e3),message:n&&"string"==typeof n.message?n.message:"",ops:e.ops};if(t[Ye].backend){const[e,r,s]=t[Ye].backend.applyLocalChange(o.backendState,i);o.backendState=e,o.lastLocalChange=s;const a=_n(t,r,o,!0),u=n&&n.patchCallback||t[Ye].patchCallback;return u&&u(r,t,a,!0,[s]),[a,i]}{const n={actor:r,seq:i.seq,before:t};return o.requests=o.requests.concat([n]),o.maxOp=o.maxOp+function(t){let e=0;for(const n of t)"set"===n.action&&n.values?e+=n.values.length:e+=1;return e}(i.ops),o.deps=[],[yn(t,e?e.updated:{},o),i]}}function _n(t,e,n,r){const o=wn(t),i={};if(an(e.diffs,t,i),r){if(!e.clock)throw new RangeError("patch is missing clock field");e.clock[o]&&e.clock[o]>n.seq&&(n.seq=e.clock[o]),n.clock=e.clock,n.deps=e.deps,n.maxOp=Math.max(n.maxOp,e.maxOp)}return yn(t,i,n)}function vn(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!rn(t))throw new TypeError(`Unsupported value for init() options: ${t}`);if(t.deferActorId||(void 0===t.actorId&&(t.actorId=sn()),gn(t.actorId)),t.observable){const e=t.patchCallback,n=t.observable;t.patchCallback=(t,r,o,i,s)=>{e&&e(t,r,o,i,s),n.patchCallback(t,r,o,i,s)}}const e={},n={_root:e},r={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return t.backend&&(r.backendState=t.backend.init(),r.lastLocalChange=null),Object.defineProperty(e,Qe,{value:"_root"}),Object.defineProperty(e,Ye,{value:Object.freeze(t)}),Object.defineProperty(e,tn,{value:Object.freeze({})}),Object.defineProperty(e,Je,{value:Object.freeze(n)}),Object.defineProperty(e,Xe,{value:Object.freeze(r)}),Object.freeze(e)}function mn(t,e,n){if("_root"!==t[Qe])throw new TypeError("The first argument to Automerge.change must be the document root");if(t[en])throw new TypeError("Calls to Automerge.change cannot be nested");if("function"==typeof e&&void 0===n&&([e,n]=[n,e]),"string"==typeof e&&(e={message:e}),void 0!==e&&!rn(e))throw new TypeError("Unsupported type of options");const r=wn(t);if(!r)throw new Error("Actor ID must be initialized with setActorId() before making a change");const o=new ln(t,r);return n(cn(o)),0===Object.keys(o.updated).length?[t,null]:bn(t,o,e)}function wn(t){return t[Xe].actorId||t[Ye].actorId}var In={init:vn,from:function(t,e){return mn(vn(e),"Initialization",(e=>Object.assign(e,t)))},change:mn,emptyChange:function(t,e){if("_root"!==t[Qe])throw new TypeError("The first argument to Automerge.emptyChange must be the document root");if("string"==typeof e&&(e={message:e}),void 0!==e&&!rn(e))throw new TypeError("Unsupported type of options");const n=wn(t);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");return bn(t,new ln(t,n),e)},applyPatch:function(t,e,n){if("_root"!==t[Qe])throw new TypeError("The first argument to Frontend.applyPatch must be the document root");const r=on(t[Xe]);if(t[Ye].backend){if(!n)throw new RangeError("applyPatch must be called with the updated backend state");return r.backendState=n,_n(t,e,r,!0)}let o;if(r.requests.length>0)if(o=r.requests[0].before,e.actor===wn(t)){if(r.requests[0].seq!==e.seq)throw new RangeError(`Mismatched sequence number: patch ${e.seq} does not match next request ${r.requests[0].seq}`);r.requests=r.requests.slice(1)}else r.requests=r.requests.slice();else o=t,r.requests=[];let i=_n(o,e,r,!0);return 0===r.requests.length?i:(r.requests[0]=on(r.requests[0]),r.requests[0].before=i,yn(t,{},r))},getObjectId:function(t){return t[Qe]},getObjectById:function(t,e){if(t[en])throw new TypeError("Cannot use getObjectById in a change callback");return t[Je][e]},getActorId:wn,setActorId:function(t,e){return gn(e),yn(t,{},Object.assign({},t[Xe],{actorId:e}))},getConflicts:function(t,e){if(t[tn]&&t[tn][e]&&Object.keys(t[tn][e]).length>1)return t[tn][e]},getLastLocalChange:function(t){return t[Xe]&&t[Xe].lastLocalChange?t[Xe].lastLocalChange:null},getBackendState:function(t,e=null,n="first"){if("_root"!==t[Qe]){const r=Array.isArray(t)?". Note: Automerge.applyChanges now returns an array.":"";throw e?new TypeError(`The ${n} argument to Automerge.${e} must be the document root${r}`):new TypeError(`Argument is not an Automerge document root${r}`)}return t[Xe].backendState},getElementIds:function(t){return t instanceof hn?t.elems.map((t=>t.elemId)):t[nn]},Text:hn,Table:fn,Counter:dn,Observable:pn},kn={},xn={},En={},Sn={};function An(t){let e=t.length;for(;--e>=0;)t[e]=0}const On=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),jn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Rn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Cn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tn=new Array(576);An(Tn);const Un=new Array(60);An(Un);const Ln=new Array(512);An(Ln);const zn=new Array(256);An(zn);const Nn=new Array(29);An(Nn);const Bn=new Array(30);function Mn(t,e,n,r,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=t&&t.length}let $n,Vn,Dn;function qn(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}An(Bn);const Pn=t=>t<256?Ln[t]:Ln[256+(t>>>7)],Fn=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},Kn=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,Fn(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},Hn=(t,e,n)=>{Kn(t,n[2*e],n[2*e+1])},Zn=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},Gn=(t,e,n)=>{const r=new Array(16);let o,i,s=0;for(o=1;o<=15;o++)r[o]=s=s+n[o-1]<<1;for(i=0;i<=e;i++){let e=t[2*i+1];0!==e&&(t[2*i]=Zn(r[e]++,e))}},Wn=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},Yn=t=>{t.bi_valid>8?Fn(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Jn=(t,e,n,r)=>{const o=2*e,i=2*n;return t[o]<t[i]||t[o]===t[i]&&r[e]<=r[n]},Xn=(t,e,n)=>{const r=t.heap[n];let o=n<<1;for(;o<=t.heap_len&&(o<t.heap_len&&Jn(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!Jn(e,r,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=r},Qn=(t,e,n)=>{let r,o,i,s,a=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===r?Hn(t,o,e):(i=zn[o],Hn(t,i+256+1,e),s=On[i],0!==s&&(o-=Nn[i],Kn(t,o,s)),r--,i=Pn(r),Hn(t,i,n),s=jn[i],0!==s&&(r-=Bn[i],Kn(t,r,s)))}while(a<t.last_lit);Hn(t,256,e)},tr=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,i=e.stat_desc.elems;let s,a,u,c=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<i;s++)0!==n[2*s]?(t.heap[++t.heap_len]=c=s,t.depth[s]=0):n[2*s+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,n[2*u]=1,t.depth[u]=0,t.opt_len--,o&&(t.static_len-=r[2*u+1]);for(e.max_code=c,s=t.heap_len>>1;s>=1;s--)Xn(t,n,s);u=i;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Xn(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,n[2*u]=n[2*s]+n[2*a],t.depth[u]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,n[2*s+1]=n[2*a+1]=u,t.heap[1]=u++,Xn(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,o=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length;let c,l,h,f,d,p,g=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(n[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)l=t.heap[c],f=n[2*n[2*l+1]+1]+1,f>u&&(f=u,g++),n[2*l+1]=f,l>r||(t.bl_count[f]++,d=0,l>=a&&(d=s[l-a]),p=n[2*l],t.opt_len+=p*(f+d),i&&(t.static_len+=p*(o[2*l+1]+d)));if(0!==g){do{for(f=u-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[u]--,g-=2}while(g>0);for(f=u;0!==f;f--)for(l=t.bl_count[f];0!==l;)h=t.heap[--c],h>r||(n[2*h+1]!==f&&(t.opt_len+=(f-n[2*h+1])*n[2*h],n[2*h+1]=f),l--)}})(t,e),Gn(n,c,t.bl_count)},er=(t,e,n)=>{let r,o,i=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=e[2*(r+1)+1],++a<u&&o===s||(a<c?t.bl_tree[2*o]+=a:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4))},nr=(t,e,n)=>{let r,o,i=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),r=0;r<=n;r++)if(o=s,s=e[2*(r+1)+1],!(++a<u&&o===s)){if(a<c)do{Hn(t,o,t.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(Hn(t,o,t.bl_tree),a--),Hn(t,16,t.bl_tree),Kn(t,a-3,2)):a<=10?(Hn(t,17,t.bl_tree),Kn(t,a-3,3)):(Hn(t,18,t.bl_tree),Kn(t,a-11,7));a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4)}};let rr=!1;const or=(t,e,n,r)=>{Kn(t,0+(r?1:0),3),((t,e,n,r)=>{Yn(t),r&&(Fn(t,n),Fn(t,~n)),t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n})(t,e,n,!0)};Sn._tr_init=t=>{rr||((()=>{let t,e,n,r,o;const i=new Array(16);for(n=0,r=0;r<28;r++)for(Nn[r]=n,t=0;t<1<<On[r];t++)zn[n++]=r;for(zn[n-1]=r,o=0,r=0;r<16;r++)for(Bn[r]=o,t=0;t<1<<jn[r];t++)Ln[o++]=r;for(o>>=7;r<30;r++)for(Bn[r]=o<<7,t=0;t<1<<jn[r]-7;t++)Ln[256+o++]=r;for(e=0;e<=15;e++)i[e]=0;for(t=0;t<=143;)Tn[2*t+1]=8,t++,i[8]++;for(;t<=255;)Tn[2*t+1]=9,t++,i[9]++;for(;t<=279;)Tn[2*t+1]=7,t++,i[7]++;for(;t<=287;)Tn[2*t+1]=8,t++,i[8]++;for(Gn(Tn,287,i),t=0;t<30;t++)Un[2*t+1]=5,Un[2*t]=Zn(t,5);$n=new Mn(Tn,On,257,286,15),Vn=new Mn(Un,jn,0,30,15),Dn=new Mn(new Array(0),Rn,0,19,7)})(),rr=!0),t.l_desc=new qn(t.dyn_ltree,$n),t.d_desc=new qn(t.dyn_dtree,Vn),t.bl_desc=new qn(t.bl_tree,Dn),t.bi_buf=0,t.bi_valid=0,Wn(t)},Sn._tr_stored_block=or,Sn._tr_flush_block=(t,e,n,r)=>{let o,i,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),tr(t,t.l_desc),tr(t,t.d_desc),s=(t=>{let e;for(er(t,t.dyn_ltree,t.l_desc.max_code),er(t,t.dyn_dtree,t.d_desc.max_code),tr(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Cn[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==e?or(t,e,n,r):4===t.strategy||i===o?(Kn(t,2+(r?1:0),3),Qn(t,Tn,Un)):(Kn(t,4+(r?1:0),3),((t,e,n,r)=>{let o;for(Kn(t,e-257,5),Kn(t,n-1,5),Kn(t,r-4,4),o=0;o<r;o++)Kn(t,t.bl_tree[2*Cn[o]+1],3);nr(t,t.dyn_ltree,e-1),nr(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Qn(t,t.dyn_ltree,t.dyn_dtree)),Wn(t),r&&Yn(t)},Sn._tr_tally=(t,e,n)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(zn[n]+256+1)]++,t.dyn_dtree[2*Pn(e)]++),t.last_lit===t.lit_bufsize-1),Sn._tr_align=t=>{Kn(t,2,3),Hn(t,256,Tn),(t=>{16===t.bi_valid?(Fn(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)};var ir=(t,e,n,r)=>{let o=65535&t|0,i=t>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{o=o+e[r++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16|0};const sr=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var ar=(t,e,n,r)=>{const o=sr,i=r+n;t^=-1;for(let s=r;s<i;s++)t=t>>>8^o[255&(t^e[s])];return-1^t},ur={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},cr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:lr,_tr_stored_block:hr,_tr_flush_block:fr,_tr_tally:dr,_tr_align:pr}=Sn,gr=ir,yr=ar,br=ur,{Z_NO_FLUSH:_r,Z_PARTIAL_FLUSH:vr,Z_FULL_FLUSH:mr,Z_FINISH:wr,Z_BLOCK:Ir,Z_OK:kr,Z_STREAM_END:xr,Z_STREAM_ERROR:Er,Z_DATA_ERROR:Sr,Z_BUF_ERROR:Ar,Z_DEFAULT_COMPRESSION:Or,Z_FILTERED:jr,Z_HUFFMAN_ONLY:Rr,Z_RLE:Cr,Z_FIXED:Tr,Z_DEFAULT_STRATEGY:Ur,Z_UNKNOWN:Lr,Z_DEFLATED:zr}=cr,Nr=(t,e)=>(t.msg=br[e],e),Br=t=>(t<<1)-(t>4?9:0),Mr=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let $r=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const Vr=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Dr=(t,e)=>{fr(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Vr(t.strm)},qr=(t,e)=>{t.pending_buf[t.pending++]=e},Pr=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Fr=(t,e,n,r)=>{let o=t.avail_in;return o>r&&(o=r),0===o?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),n),1===t.state.wrap?t.adler=gr(t.adler,e,o,n):2===t.state.wrap&&(t.adler=yr(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)},Kr=(t,e)=>{let n,r,o=t.max_chain_length,i=t.strstart,s=t.prev_length,a=t.nice_match;const u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,l=t.w_mask,h=t.prev,f=t.strstart+258;let d=c[i+s-1],p=c[i+s];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,c[n+s]===p&&c[n+s-1]===d&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(r=258-(f-i),i=f-258,r>s){if(t.match_start=e,s=r,r>=a)break;d=c[i+s-1],p=c[i+s]}}}while((e=h[e&l])>u&&0!=--o);return s<=t.lookahead?s:t.lookahead},Hr=t=>{const e=t.w_size;let n,r,o,i,s;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do{o=t.head[--n],t.head[n]=o>=e?o-e:0}while(--r);r=e,n=r;do{o=t.prev[--n],t.prev[n]=o>=e?o-e:0}while(--r);i+=e}if(0===t.strm.avail_in)break;if(r=Fr(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=$r(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=$r(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},Zr=(t,e)=>{let n,r;for(;;){if(t.lookahead<262){if(Hr(t),t.lookahead<262&&e===_r)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=$r(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=Kr(t,n)),t.match_length>=3)if(r=dr(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=$r(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=$r(t,t.ins_h,t.window[t.strstart+1]);else r=dr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Dr(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===wr?(Dr(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Dr(t,!1),0===t.strm.avail_out)?1:2},Gr=(t,e)=>{let n,r,o;for(;;){if(t.lookahead<262){if(Hr(t),t.lookahead<262&&e===_r)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=$r(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=Kr(t,n),t.match_length<=5&&(t.strategy===jr||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-3,r=dr(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=$r(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Dr(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=dr(t,0,t.window[t.strstart-1]),r&&Dr(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=dr(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===wr?(Dr(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Dr(t,!1),0===t.strm.avail_out)?1:2};function Wr(t,e,n,r,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=o}const Yr=[new Wr(0,0,0,0,((t,e)=>{let n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Hr(t),0===t.lookahead&&e===_r)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Dr(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(Dr(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===wr?(Dr(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Dr(t,!1),t.strm.avail_out),1)})),new Wr(4,4,8,4,Zr),new Wr(4,5,16,8,Zr),new Wr(4,6,32,32,Zr),new Wr(4,4,16,16,Gr),new Wr(8,16,32,32,Gr),new Wr(8,16,128,128,Gr),new Wr(8,32,128,256,Gr),new Wr(32,128,258,1024,Gr),new Wr(32,258,258,4096,Gr)];function Jr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=zr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Mr(this.dyn_ltree),Mr(this.dyn_dtree),Mr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Mr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Mr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Xr=t=>{if(!t||!t.state)return Nr(t,Er);t.total_in=t.total_out=0,t.data_type=Lr;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=_r,lr(e),kr},Qr=t=>{const e=Xr(t);var n;return e===kr&&((n=t.state).window_size=2*n.w_size,Mr(n.head),n.max_lazy_match=Yr[n.level].max_lazy,n.good_match=Yr[n.level].good_length,n.nice_match=Yr[n.level].nice_length,n.max_chain_length=Yr[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},to=(t,e,n,r,o,i)=>{if(!t)return Er;let s=1;if(e===Or&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||n!==zr||r<8||r>15||e<0||e>9||i<0||i>Tr)return Nr(t,Er);8===r&&(r=9);const a=new Jr;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=i,a.method=n,Qr(t)};En.deflateInit=(t,e)=>to(t,e,zr,15,8,Ur),En.deflateInit2=to,En.deflateReset=Qr,En.deflateResetKeep=Xr,En.deflateSetHeader=(t,e)=>t&&t.state?2!==t.state.wrap?Er:(t.state.gzhead=e,kr):Er,En.deflate=(t,e)=>{let n,r;if(!t||!t.state||e>Ir||e<0)return t?Nr(t,Er):Er;const o=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===o.status&&e!==wr)return Nr(t,0===t.avail_out?Ar:Er);o.strm=t;const i=o.last_flush;if(o.last_flush=e,42===o.status)if(2===o.wrap)t.adler=0,qr(o,31),qr(o,139),qr(o,8),o.gzhead?(qr(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),qr(o,255&o.gzhead.time),qr(o,o.gzhead.time>>8&255),qr(o,o.gzhead.time>>16&255),qr(o,o.gzhead.time>>24&255),qr(o,9===o.level?2:o.strategy>=Rr||o.level<2?4:0),qr(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(qr(o,255&o.gzhead.extra.length),qr(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=yr(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(qr(o,0),qr(o,0),qr(o,0),qr(o,0),qr(o,0),qr(o,9===o.level?2:o.strategy>=Rr||o.level<2?4:0),qr(o,3),o.status=113);else{let e=zr+(o.w_bits-8<<4)<<8,n=-1;n=o.strategy>=Rr||o.level<2?0:o.level<6?1:6===o.level?2:3,e|=n<<6,0!==o.strstart&&(e|=32),e+=31-e%31,o.status=113,Pr(o,e),0!==o.strstart&&(Pr(o,t.adler>>>16),Pr(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(n=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>n&&(t.adler=yr(t.adler,o.pending_buf,o.pending-n,n)),Vr(t),n=o.pending,o.pending!==o.pending_buf_size));)qr(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>n&&(t.adler=yr(t.adler,o.pending_buf,o.pending-n,n)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(t.adler=yr(t.adler,o.pending_buf,o.pending-n,n)),Vr(t),n=o.pending,o.pending===o.pending_buf_size)){r=1;break}r=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,qr(o,r)}while(0!==r);o.gzhead.hcrc&&o.pending>n&&(t.adler=yr(t.adler,o.pending_buf,o.pending-n,n)),0===r&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(t.adler=yr(t.adler,o.pending_buf,o.pending-n,n)),Vr(t),n=o.pending,o.pending===o.pending_buf_size)){r=1;break}r=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,qr(o,r)}while(0!==r);o.gzhead.hcrc&&o.pending>n&&(t.adler=yr(t.adler,o.pending_buf,o.pending-n,n)),0===r&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Vr(t),o.pending+2<=o.pending_buf_size&&(qr(o,255&t.adler),qr(o,t.adler>>8&255),t.adler=0,o.status=113)):o.status=113),0!==o.pending){if(Vr(t),0===t.avail_out)return o.last_flush=-1,kr}else if(0===t.avail_in&&Br(e)<=Br(i)&&e!==wr)return Nr(t,Ar);if(666===o.status&&0!==t.avail_in)return Nr(t,Ar);if(0!==t.avail_in||0!==o.lookahead||e!==_r&&666!==o.status){let n=o.strategy===Rr?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Hr(t),0===t.lookahead)){if(e===_r)return 1;break}if(t.match_length=0,n=dr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Dr(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===wr?(Dr(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Dr(t,!1),0===t.strm.avail_out)?1:2})(o,e):o.strategy===Cr?((t,e)=>{let n,r,o,i;const s=t.window;for(;;){if(t.lookahead<=258){if(Hr(t),t.lookahead<=258&&e===_r)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(o=t.strstart-1,r=s[o],r===s[++o]&&r===s[++o]&&r===s[++o])){i=t.strstart+258;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i);t.match_length=258-(i-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=dr(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=dr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Dr(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===wr?(Dr(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Dr(t,!1),0===t.strm.avail_out)?1:2})(o,e):Yr[o.level].func(o,e);if(3!==n&&4!==n||(o.status=666),1===n||3===n)return 0===t.avail_out&&(o.last_flush=-1),kr;if(2===n&&(e===vr?pr(o):e!==Ir&&(hr(o,0,0,!1),e===mr&&(Mr(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),Vr(t),0===t.avail_out))return o.last_flush=-1,kr}return e!==wr?kr:o.wrap<=0?xr:(2===o.wrap?(qr(o,255&t.adler),qr(o,t.adler>>8&255),qr(o,t.adler>>16&255),qr(o,t.adler>>24&255),qr(o,255&t.total_in),qr(o,t.total_in>>8&255),qr(o,t.total_in>>16&255),qr(o,t.total_in>>24&255)):(Pr(o,t.adler>>>16),Pr(o,65535&t.adler)),Vr(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?kr:xr)},En.deflateEnd=t=>{if(!t||!t.state)return Er;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?Nr(t,Er):(t.state=null,113===e?Nr(t,Sr):kr)},En.deflateSetDictionary=(t,e)=>{let n=e.length;if(!t||!t.state)return Er;const r=t.state,o=r.wrap;if(2===o||1===o&&42!==r.status||r.lookahead)return Er;if(1===o&&(t.adler=gr(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===o&&(Mr(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const i=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Hr(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=$r(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,Hr(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=s,t.input=a,t.avail_in=i,r.wrap=o,kr},En.deflateInfo="pako deflate (from Nodeca project)";var eo={};const no=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);eo.assign=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)no(n,e)&&(t[e]=n[e])}}return t},eo.flattenChunks=t=>{let e=0;for(let r=0,o=t.length;r<o;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,o=0,i=t.length;r<i;r++){let e=t[r];n.set(e,o),o+=e.length}return n};var ro={};let oo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Ol){oo=!1}const io=new Uint8Array(256);for(let jl=0;jl<256;jl++)io[jl]=jl>=252?6:jl>=248?5:jl>=240?4:jl>=224?3:jl>=192?2:1;io[254]=io[254]=1,ro.string2buf=t=>{let e,n,r,o,i,s=t.length,a=0;for(o=0;o<s;o++)n=t.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=t.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),i=0,o=0;i<a;o++)n=t.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=t.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e};ro.buf2string=(t,e)=>{let n,r;const o=e||t.length,i=new Array(2*o);for(r=0,n=0;n<o;){let e=t[n++];if(e<128){i[r++]=e;continue}let s=io[e];if(s>4)i[r++]=65533,n+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&n<o;)e=e<<6|63&t[n++],s--;s>1?i[r++]=65533:e<65536?i[r++]=e:(e-=65536,i[r++]=55296|e>>10&1023,i[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&oo)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(i,r)},ro.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+io[t[n]]>e?n:e};var so=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ao=En,uo=eo,co=ro,lo=ur,ho=so,fo=Object.prototype.toString,{Z_NO_FLUSH:po,Z_SYNC_FLUSH:go,Z_FULL_FLUSH:yo,Z_FINISH:bo,Z_OK:_o,Z_STREAM_END:vo,Z_DEFAULT_COMPRESSION:mo,Z_DEFAULT_STRATEGY:wo,Z_DEFLATED:Io}=cr;function ko(t){this.options=uo.assign({level:mo,method:Io,chunkSize:16384,windowBits:15,memLevel:8,strategy:wo},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ho,this.strm.avail_out=0;let n=ao.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==_o)throw new Error(lo[n]);if(e.header&&ao.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?co.string2buf(e.dictionary):"[object ArrayBuffer]"===fo.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=ao.deflateSetDictionary(this.strm,t),n!==_o)throw new Error(lo[n]);this._dict_set=!0}}function xo(t,e){const n=new ko(e);if(n.push(t,!0),n.err)throw n.msg||lo[n.err];return n.result}ko.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let o,i;if(this.ended)return!1;for(i=e===~~e?e:!0===e?bo:po,"string"==typeof t?n.input=co.string2buf(t):"[object ArrayBuffer]"===fo.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===go||i===yo)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=ao.deflate(n,i),o===vo)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=ao.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===_o;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ko.prototype.onData=function(t){this.chunks.push(t)},ko.prototype.onEnd=function(t){t===_o&&(this.result=uo.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},xn.Deflate=ko,xn.deflate=xo,xn.deflateRaw=function(t,e){return(e=e||{}).raw=!0,xo(t,e)},xn.gzip=function(t,e){return(e=e||{}).gzip=!0,xo(t,e)},xn.constants=cr;var Eo={},So={};const Ao=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Oo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ro=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const Co=ir,To=ar,Uo=function(t,e){let n,r,o,i,s,a,u,c,l,h,f,d,p,g,y,b,_,v,m,w,I,k,x,E;const S=t.state;n=t.next_in,x=t.input,r=n+(t.avail_in-5),o=t.next_out,E=t.output,i=o-(e-t.avail_out),s=o+(t.avail_out-257),a=S.dmax,u=S.wsize,c=S.whave,l=S.wnext,h=S.window,f=S.hold,d=S.bits,p=S.lencode,g=S.distcode,y=(1<<S.lenbits)-1,b=(1<<S.distbits)-1;t:do{d<15&&(f+=x[n++]<<d,d+=8,f+=x[n++]<<d,d+=8),_=p[f&y];e:for(;;){if(v=_>>>24,f>>>=v,d-=v,v=_>>>16&255,0===v)E[o++]=65535&_;else{if(!(16&v)){if(0==(64&v)){_=p[(65535&_)+(f&(1<<v)-1)];continue e}if(32&v){S.mode=12;break t}t.msg="invalid literal/length code",S.mode=30;break t}m=65535&_,v&=15,v&&(d<v&&(f+=x[n++]<<d,d+=8),m+=f&(1<<v)-1,f>>>=v,d-=v),d<15&&(f+=x[n++]<<d,d+=8,f+=x[n++]<<d,d+=8),_=g[f&b];n:for(;;){if(v=_>>>24,f>>>=v,d-=v,v=_>>>16&255,!(16&v)){if(0==(64&v)){_=g[(65535&_)+(f&(1<<v)-1)];continue n}t.msg="invalid distance code",S.mode=30;break t}if(w=65535&_,v&=15,d<v&&(f+=x[n++]<<d,d+=8,d<v&&(f+=x[n++]<<d,d+=8)),w+=f&(1<<v)-1,w>a){t.msg="invalid distance too far back",S.mode=30;break t}if(f>>>=v,d-=v,v=o-i,w>v){if(v=w-v,v>c&&S.sane){t.msg="invalid distance too far back",S.mode=30;break t}if(I=0,k=h,0===l){if(I+=u-v,v<m){m-=v;do{E[o++]=h[I++]}while(--v);I=o-w,k=E}}else if(l<v){if(I+=u+l-v,v-=l,v<m){m-=v;do{E[o++]=h[I++]}while(--v);if(I=0,l<m){v=l,m-=v;do{E[o++]=h[I++]}while(--v);I=o-w,k=E}}}else if(I+=l-v,v<m){m-=v;do{E[o++]=h[I++]}while(--v);I=o-w,k=E}for(;m>2;)E[o++]=k[I++],E[o++]=k[I++],E[o++]=k[I++],m-=3;m&&(E[o++]=k[I++],m>1&&(E[o++]=k[I++]))}else{I=o-w;do{E[o++]=E[I++],E[o++]=E[I++],E[o++]=E[I++],m-=3}while(m>2);m&&(E[o++]=E[I++],m>1&&(E[o++]=E[I++]))}break}}break}}while(n<r&&o<s);m=d>>3,n-=m,d-=m<<3,f&=(1<<d)-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<s?s-o+257:257-(o-s),S.hold=f,S.bits=d},Lo=(t,e,n,r,o,i,s,a)=>{const u=a.bits;let c,l,h,f,d,p,g=0,y=0,b=0,_=0,v=0,m=0,w=0,I=0,k=0,x=0,E=null,S=0;const A=new Uint16Array(16),O=new Uint16Array(16);let j,R,C,T=null,U=0;for(g=0;g<=15;g++)A[g]=0;for(y=0;y<r;y++)A[e[n+y]]++;for(v=u,_=15;_>=1&&0===A[_];_--);if(v>_&&(v=_),0===_)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(b=1;b<_&&0===A[b];b++);for(v<b&&(v=b),I=1,g=1;g<=15;g++)if(I<<=1,I-=A[g],I<0)return-1;if(I>0&&(0===t||1!==_))return-1;for(O[1]=0,g=1;g<15;g++)O[g+1]=O[g]+A[g];for(y=0;y<r;y++)0!==e[n+y]&&(s[O[e[n+y]]++]=y);if(0===t?(E=T=s,p=19):1===t?(E=Ao,S-=257,T=Oo,U-=257,p=256):(E=jo,T=Ro,p=-1),x=0,y=0,g=b,d=i,m=v,w=0,h=-1,k=1<<v,f=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){j=g-w,s[y]<p?(R=0,C=s[y]):s[y]>p?(R=T[U+s[y]],C=E[S+s[y]]):(R=96,C=0),c=1<<g-w,l=1<<m,b=l;do{l-=c,o[d+(x>>w)+l]=j<<24|R<<16|C|0}while(0!==l);for(c=1<<g-1;x&c;)c>>=1;if(0!==c?(x&=c-1,x+=c):x=0,y++,0==--A[g]){if(g===_)break;g=e[n+s[y]]}if(g>v&&(x&f)!==h){for(0===w&&(w=v),d+=b,m=g-w,I=1<<m;m+w<_&&(I-=A[m+w],!(I<=0));)m++,I<<=1;if(k+=1<<m,1===t&&k>852||2===t&&k>592)return 1;h=x&f,o[h]=v<<24|m<<16|d-i|0}}return 0!==x&&(o[d+x]=g-w<<24|64<<16|0),a.bits=v,0},{Z_FINISH:zo,Z_BLOCK:No,Z_TREES:Bo,Z_OK:Mo,Z_STREAM_END:$o,Z_NEED_DICT:Vo,Z_STREAM_ERROR:Do,Z_DATA_ERROR:qo,Z_MEM_ERROR:Po,Z_BUF_ERROR:Fo,Z_DEFLATED:Ko}=cr,Ho=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Zo(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Go=t=>{if(!t||!t.state)return Do;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Mo},Wo=t=>{if(!t||!t.state)return Do;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Go(t)},Yo=(t,e)=>{let n;if(!t||!t.state)return Do;const r=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Do:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Wo(t))},Jo=(t,e)=>{if(!t)return Do;const n=new Zo;t.state=n,n.window=null;const r=Yo(t,e);return r!==Mo&&(t.state=null),r};let Xo,Qo,ti=!0;const ei=t=>{if(ti){Xo=new Int32Array(512),Qo=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Lo(1,t.lens,0,288,Xo,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Lo(2,t.lens,0,32,Qo,0,t.work,{bits:5}),ti=!1}t.lencode=Xo,t.lenbits=9,t.distcode=Qo,t.distbits=5},ni=(t,e,n,r)=>{let o;const i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),i.window.set(e.subarray(n-r,n-r+o),i.wnext),(r-=o)?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};So.inflateReset=Wo,So.inflateReset2=Yo,So.inflateResetKeep=Go,So.inflateInit=t=>Jo(t,15),So.inflateInit2=Jo,So.inflate=(t,e)=>{let n,r,o,i,s,a,u,c,l,h,f,d,p,g,y,b,_,v,m,w,I,k,x=0;const E=new Uint8Array(4);let S,A;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Do;n=t.state,12===n.mode&&(n.mode=13),s=t.next_out,o=t.output,u=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,c=n.hold,l=n.bits,h=a,f=u,k=Mo;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;l<16;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(2&n.wrap&&35615===c){n.check=0,E[0]=255&c,E[1]=c>>>8&255,n.check=To(n.check,E,2,0),c=0,l=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=30;break}if((15&c)!==Ko){t.msg="unknown compression method",n.mode=30;break}if(c>>>=4,l-=4,I=8+(15&c),0===n.wbits)n.wbits=I;else if(I>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&c?10:12,c=0,l=0;break;case 2:for(;l<16;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(n.flags=c,(255&n.flags)!==Ko){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,n.check=To(n.check,E,2,0)),c=0,l=0,n.mode=3;case 3:for(;l<32;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}n.head&&(n.head.time=c),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,n.check=To(n.check,E,4,0)),c=0,l=0,n.mode=4;case 4:for(;l<16;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,n.check=To(n.check,E,2,0)),c=0,l=0,n.mode=5;case 5:if(1024&n.flags){for(;l<16;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,n.check=To(n.check,E,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(d=n.length,d>a&&(d=a),d&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+d),I)),512&n.flags&&(n.check=To(n.check,r,d,i)),a-=d,i+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;d=0;do{I=r[i+d++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I))}while(I&&d<a);if(512&n.flags&&(n.check=To(n.check,r,d,i)),a-=d,i+=d,I)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;d=0;do{I=r[i+d++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I))}while(I&&d<a);if(512&n.flags&&(n.check=To(n.check,r,d,i)),a-=d,i+=d,I)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;l<16;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;l<32;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}t.adler=n.check=Ho(c),c=0,l=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=l,Vo;t.adler=n.check=1,n.mode=12;case 12:if(e===No||e===Bo)break t;case 13:if(n.last){c>>>=7&l,l-=7&l,n.mode=27;break}for(;l<3;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}switch(n.last=1&c,c>>>=1,l-=1,3&c){case 0:n.mode=14;break;case 1:if(ei(n),n.mode=20,e===Bo){c>>>=2,l-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,l=0,n.mode=15,e===Bo)break t;case 15:n.mode=16;case 16:if(d=n.length,d){if(d>a&&(d=a),d>u&&(d=u),0===d)break t;o.set(r.subarray(i,i+d),s),a-=d,i+=d,u-=d,s+=d,n.length-=d;break}n.mode=12;break;case 17:for(;l<14;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(n.nlen=257+(31&c),c>>>=5,l-=5,n.ndist=1+(31&c),c>>>=5,l-=5,n.ncode=4+(15&c),c>>>=4,l-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}n.lens[O[n.have++]]=7&c,c>>>=3,l-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},k=Lo(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[c&(1<<n.lenbits)-1],y=x>>>24,b=x>>>16&255,_=65535&x,!(y<=l);){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(_<16)c>>>=y,l-=y,n.lens[n.have++]=_;else{if(16===_){for(A=y+2;l<A;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(c>>>=y,l-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}I=n.lens[n.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===_){for(A=y+3;l<A;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}c>>>=y,l-=y,I=0,d=3+(7&c),c>>>=3,l-=3}else{for(A=y+7;l<A;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}c>>>=y,l-=y,I=0,d=11+(127&c),c>>>=7,l-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=I}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,S={bits:n.lenbits},k=Lo(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},k=Lo(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,e===Bo)break t;case 20:n.mode=21;case 21:if(a>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=l,Uo(t,f),s=t.next_out,o=t.output,u=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,c=n.hold,l=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;x=n.lencode[c&(1<<n.lenbits)-1],y=x>>>24,b=x>>>16&255,_=65535&x,!(y<=l);){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(b&&0==(240&b)){for(v=y,m=b,w=_;x=n.lencode[w+((c&(1<<v+m)-1)>>v)],y=x>>>24,b=x>>>16&255,_=65535&x,!(v+y<=l);){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}c>>>=v,l-=v,n.back+=v}if(c>>>=y,l-=y,n.back+=y,n.length=_,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=12;break}if(64&b){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(A=n.extra;l<A;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;x=n.distcode[c&(1<<n.distbits)-1],y=x>>>24,b=x>>>16&255,_=65535&x,!(y<=l);){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(0==(240&b)){for(v=y,m=b,w=_;x=n.distcode[w+((c&(1<<v+m)-1)>>v)],y=x>>>24,b=x>>>16&255,_=65535&x,!(v+y<=l);){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}c>>>=v,l-=v,n.back+=v}if(c>>>=y,l-=y,n.back+=y,64&b){t.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(A=n.extra;l<A;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break t;if(d=f-u,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),g=n.window}else g=o,p=s-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{o[s++]=g[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;o[s++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;l<32;){if(0===a)break t;a--,c|=r[i++]<<l,l+=8}if(f-=u,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?To(n.check,o,f,s-f):Co(n.check,o,f,s-f)),f=u,(n.flags?c:Ho(c))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=0,l=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break t;a--,c+=r[i++]<<l,l+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}c=0,l=0}n.mode=29;case 29:k=$o;break t;case 30:k=qo;break t;case 31:return Po;case 32:default:return Do}return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=l,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||e!==zo))&&ni(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?To(n.check,o,f,t.next_out-f):Co(n.check,o,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||e===zo)&&k===Mo&&(k=Fo),k},So.inflateEnd=t=>{if(!t||!t.state)return Do;let e=t.state;return e.window&&(e.window=null),t.state=null,Mo},So.inflateGetHeader=(t,e)=>{if(!t||!t.state)return Do;const n=t.state;return 0==(2&n.wrap)?Do:(n.head=e,e.done=!1,Mo)},So.inflateSetDictionary=(t,e)=>{const n=e.length;let r,o,i;return t&&t.state?(r=t.state,0!==r.wrap&&11!==r.mode?Do:11===r.mode&&(o=1,o=Co(o,e,n,0),o!==r.check)?qo:(i=ni(t,e,n,n),i?(r.mode=31,Po):(r.havedict=1,Mo))):Do},So.inflateInfo="pako inflate (from Nodeca project)";const ri=So,oi=eo,ii=ro,si=ur,ai=so,ui=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ci=Object.prototype.toString,{Z_NO_FLUSH:li,Z_FINISH:hi,Z_OK:fi,Z_STREAM_END:di,Z_NEED_DICT:pi,Z_STREAM_ERROR:gi,Z_DATA_ERROR:yi,Z_MEM_ERROR:bi}=cr;function _i(t){this.options=oi.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ai,this.strm.avail_out=0;let n=ri.inflateInit2(this.strm,e.windowBits);if(n!==fi)throw new Error(si[n]);if(this.header=new ui,ri.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ii.string2buf(e.dictionary):"[object ArrayBuffer]"===ci.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ri.inflateSetDictionary(this.strm,e.dictionary),n!==fi)))throw new Error(si[n])}function vi(t,e){const n=new _i(e);if(n.push(t),n.err)throw n.msg||si[n.err];return n.result}_i.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let i,s,a;if(this.ended)return!1;for(s=e===~~e?e:!0===e?hi:li,"[object ArrayBuffer]"===ci.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=ri.inflate(n,s),i===pi&&o&&(i=ri.inflateSetDictionary(n,o),i===fi?i=ri.inflate(n,s):i===yi&&(i=pi));n.avail_in>0&&i===di&&n.state.wrap>0&&0!==t[n.next_in];)ri.inflateReset(n),i=ri.inflate(n,s);switch(i){case gi:case yi:case pi:case bi:return this.onEnd(i),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||i===di))if("string"===this.options.to){let t=ii.utf8border(n.output,n.next_out),e=n.next_out-t,o=ii.buf2string(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==fi||0!==a){if(i===di)return i=ri.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},_i.prototype.onData=function(t){this.chunks.push(t)},_i.prototype.onEnd=function(t){t===fi&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=oi.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},Eo.Inflate=_i,Eo.inflate=vi,Eo.inflateRaw=function(t,e){return(e=e||{}).raw=!0,vi(t,e)},Eo.ungzip=vi,Eo.constants=cr;const{Deflate:mi,deflate:wi,deflateRaw:Ii,gzip:ki}=xn,{Inflate:xi,inflate:Ei,inflateRaw:Si,ungzip:Ai}=Eo,Oi=cr;kn.Deflate=mi,kn.deflate=wi,kn.deflateRaw=Ii,kn.gzip=ki,kn.Inflate=xi,kn.inflate=Ei,kn.inflateRaw=Si,kn.ungzip=Ai,kn.constants=Oi;const ji=new TextEncoder,Ri=new TextDecoder("utf-8");function Ci(t){return ji.encode(t)}function Ti(t){return Ri.decode(t)}function Ui(t){if("string"!=typeof t)throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(t))throw new RangeError("value is not hexadecimal");return""===t?new Uint8Array(0):new Uint8Array(t.match(/../g).map((t=>parseInt(t,16))))}function Li(t){const e=[];for(let n of t){if(n<0||n>255)throw new RangeError(`value does not fit in one byte: ${n}`);e.push(("0"+n.toString(16)).slice(-2))}return e.join("")}class zi{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(t=0){let e=4*this.buf.byteLength;for(;e<t;)e*=2;const n=new Uint8Array(e);return n.set(this.buf,0),this.buf=n,this}appendByte(t){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=t,this.offset+=1}appendUint32(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<0||t>4294967295)throw new RangeError("number out of range");const e=Math.max(1,Math.ceil((32-Math.clz32(t))/7));this.offset+e>this.buf.byteLength&&this.grow();for(let n=0;n<e;n++)this.buf[this.offset+n]=127&t|(n===e-1?0:128),t>>>=7;return this.offset+=e,e}appendInt32(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<-2147483648||t>2147483647)throw new RangeError("number out of range");const e=Math.ceil((33-Math.clz32(t>=0?t:-t-1))/7);this.offset+e>this.buf.byteLength&&this.grow();for(let n=0;n<e;n++)this.buf[this.offset+n]=127&t|(n===e-1?0:128),t>>=7;return this.offset+=e,e}appendUint53(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<0||t>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");const e=Math.floor(t/4294967296),n=(4294967295&t)>>>0;return this.appendUint64(e,n)}appendInt53(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");const e=Math.floor(t/4294967296),n=(4294967295&t)>>>0;return this.appendInt64(e,n)}appendUint64(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))throw new RangeError("value is not an integer");if(t<0||t>4294967295||e<0||e>4294967295)throw new RangeError("number out of range");if(0===t)return this.appendUint32(e);const n=Math.ceil((64-Math.clz32(t))/7);this.offset+n>this.buf.byteLength&&this.grow();for(let r=0;r<4;r++)this.buf[this.offset+r]=127&e|128,e>>>=7;this.buf[this.offset+4]=15&e|(7&t)<<4|(5===n?0:128),t>>>=3;for(let r=5;r<n;r++)this.buf[this.offset+r]=127&t|(r===n-1?0:128),t>>>=7;return this.offset+=n,n}appendInt64(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))throw new RangeError("value is not an integer");if(t<-2147483648||t>2147483647||e<-2147483648||e>4294967295)throw new RangeError("number out of range");if(e>>>=0,0===t&&e<=2147483647)return this.appendInt32(e);if(-1===t&&e>=2147483648)return this.appendInt32(e-4294967296);const n=Math.ceil((65-Math.clz32(t>=0?t:-t-1))/7);this.offset+n>this.buf.byteLength&&this.grow();for(let r=0;r<4;r++)this.buf[this.offset+r]=127&e|128,e>>>=7;this.buf[this.offset+4]=15&e|(7&t)<<4|(5===n?0:128),t>>=3;for(let r=5;r<n;r++)this.buf[this.offset+r]=127&t|(r===n-1?0:128),t>>=7;return this.offset+=n,n}appendRawBytes(t){return this.offset+t.byteLength>this.buf.byteLength&&this.grow(this.offset+t.byteLength),this.buf.set(t,this.offset),this.offset+=t.byteLength,t.byteLength}appendRawString(t){if("string"!=typeof t)throw new TypeError("value is not a string");return this.appendRawBytes(Ci(t))}appendPrefixedBytes(t){return this.appendUint53(t.byteLength),this.appendRawBytes(t),this}appendPrefixedString(t){if("string"!=typeof t)throw new TypeError("value is not a string");return this.appendPrefixedBytes(Ci(t)),this}appendHexString(t){return this.appendPrefixedBytes(Ui(t)),this}finish(){}}class Ni{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError(`Not a byte array: ${t}`);this.buf=t,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(t){if(this.offset+t>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=t}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let t=0,e=0;for(;this.offset<this.buf.byteLength;){const n=this.buf[this.offset];if(28===e&&0!=(240&n))throw new RangeError("number out of range");if(t=(t|(127&n)<<e)>>>0,e+=7,this.offset++,0==(128&n))return t}throw new RangeError("buffer ended with incomplete number")}readInt32(){let t=0,e=0;for(;this.offset<this.buf.byteLength;){const n=this.buf[this.offset];if(28===e&&0!=(128&n)||28===e&&0==(64&n)&&0!=(56&n)||28===e&&0!=(64&n)&&56!=(56&n))throw new RangeError("number out of range");if(t|=(127&n)<<e,e+=7,this.offset++,0==(128&n))return 0==(64&n)||e>28?t:t|-1<<e}throw new RangeError("buffer ended with incomplete number")}readUint53(){const{low32:t,high32:e}=this.readUint64();if(e<0||e>2097151)throw new RangeError("number out of range");return 4294967296*e+t}readInt53(){const{low32:t,high32:e}=this.readInt64();if(e<-2097152||-2097152===e&&0===t||e>2097151)throw new RangeError("number out of range");return 4294967296*e+t}readUint64(){let t=0,e=0,n=0;for(;this.offset<this.buf.byteLength&&n<=28;){const r=this.buf[this.offset];if(t=(t|(127&r)<<n)>>>0,28===n&&(e=(112&r)>>>4),n+=7,this.offset++,0==(128&r))return{high32:e,low32:t}}for(n=3;this.offset<this.buf.byteLength;){const r=this.buf[this.offset];if(31===n&&0!=(254&r))throw new RangeError("number out of range");if(e=(e|(127&r)<<n)>>>0,n+=7,this.offset++,0==(128&r))return{high32:e,low32:t}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let t=0,e=0,n=0;for(;this.offset<this.buf.byteLength&&n<=28;){const r=this.buf[this.offset];if(t=(t|(127&r)<<n)>>>0,28===n&&(e=(112&r)>>>4),n+=7,this.offset++,0==(128&r))return 0!=(64&r)&&(n<32&&(t=(t|-1<<n)>>>0),e|=-1<<Math.max(n-32,0)),{high32:e,low32:t}}for(n=3;this.offset<this.buf.byteLength;){const r=this.buf[this.offset];if(31===n&&0!==r&&127!==r)throw new RangeError("number out of range");if(e|=(127&r)<<n,n+=7,this.offset++,0==(128&r))return 0!=(64&r)&&n<32&&(e|=-1<<n),{high32:e,low32:t}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(t){const e=this.offset;if(e+t>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=t,this.buf.subarray(e,this.offset)}readRawString(t){return Ti(this.readRawBytes(t))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return Ti(this.readPrefixedBytes())}readHexString(){return Li(this.readPrefixedBytes())}}class Bi extends zi{constructor(t){super(),this.type=t,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(t,e=1){this._appendValue(t,e)}_appendValue(t,e=1){e<=0||("empty"===this.state?(this.state=null===t?"nulls":1===e?"loneValue":"repetition",this.lastValue=t,this.count=e):"loneValue"===this.state?null===t?(this.flush(),this.state="nulls",this.count=e):t===this.lastValue?(this.state="repetition",this.count=1+e):e>1?(this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.state="literal",this.literal=[this.lastValue],this.lastValue=t):"repetition"===this.state?null===t?(this.flush(),this.state="nulls",this.count=e):t===this.lastValue?this.count+=e:e>1?(this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.flush(),this.state="loneValue",this.lastValue=t):"literal"===this.state?null===t?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=e):t===this.lastValue?(this.flush(),this.state="repetition",this.count=1+e):e>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.literal.push(this.lastValue),this.lastValue=t):"nulls"===this.state&&(null===t?this.count+=e:e>1?(this.flush(),this.state="repetition",this.count=e,this.lastValue=t):(this.flush(),this.state="loneValue",this.lastValue=t)))}copyFrom(t,e={}){const{count:n,sumValues:r,sumShift:o}=e;if(!(t instanceof Mi)||t.type!==this.type)throw new TypeError("incompatible type of decoder");let i="number"==typeof n?n:Number.MAX_SAFE_INTEGER,s=0,a=0;if(n&&i>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(0===i||t.done)return r?{nonNullValues:s,sum:a}:{nonNullValues:s};let u=t.readValue();if(null===u){const e=Math.min(t.count+1,i);if(i-=e,t.count-=e-1,this.appendValue(null,e),n&&i>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(0===i||t.done)return r?{nonNullValues:s,sum:a}:{nonNullValues:s};if(u=t.readValue(),null===u)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(u),i--,s++,r&&(a+=o?u>>>o:u),n&&i>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(0===i||t.done)return r?{nonNullValues:s,sum:a}:{nonNullValues:s};let c=t.count>0;for(;i>0&&!t.done;){c||t.readRecord();const e=Math.min(t.count,i);if(t.count-=e,"literal"===t.state){s+=e;for(let n=0;n<e;n++){if(t.done)throw new RangeError("incomplete literal");const e=t.readRawValue();if(e===t.lastValue)throw new RangeError("Repetition of values is not allowed in literal");t.lastValue=e,this._appendValue(e),r&&(a+=o?e>>>o:e)}}else if("repetition"===t.state){s+=e,r&&(a+=e*(o?t.lastValue>>>o:t.lastValue));const n=t.lastValue;if(this._appendValue(n),e>1){if(this._appendValue(n),"repetition"!==this.state)throw new RangeError(`Unexpected state ${this.state}`);this.count+=e-2}}else if("nulls"===t.state){if(this._appendValue(null),"nulls"!==this.state)throw new RangeError(`Unexpected state ${this.state}`);this.count+=e-1}c=!1,i-=e}if(n&&i>0&&t.done)throw new RangeError(`cannot copy ${n} values`);return r?{nonNullValues:s,sum:a}:{nonNullValues:s}}flush(){if("loneValue"===this.state)this.appendInt32(-1),this.appendRawValue(this.lastValue);else if("repetition"===this.state)this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if("literal"===this.state){this.appendInt53(-this.literal.length);for(let t of this.literal)this.appendRawValue(t)}else"nulls"===this.state&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(t){if("int"===this.type)this.appendInt53(t);else if("uint"===this.type)this.appendUint53(t);else{if("utf8"!==this.type)throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`);this.appendPrefixedString(t)}}finish(){"literal"===this.state&&this.literal.push(this.lastValue),("nulls"!==this.state||this.offset>0)&&this.flush()}}class Mi extends Ni{constructor(t,e){super(e),this.type=t,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return 0===this.count&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(0===this.count&&this.readRecord(),this.count-=1,"literal"===this.state){const t=this.readRawValue();if(t===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=t,t}return this.lastValue}skipValues(t){for(;t>0&&!this.done;){0===this.count&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=t?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));const e=Math.min(t,this.count);"literal"===this.state&&this.skipRawValues(e),t-=e,this.count-=e}}readRecord(){if(this.count=this.readInt53(),this.count>1){const t=this.readRawValue();if(("repetition"===this.state||"literal"===this.state)&&this.lastValue===t)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=t}else{if(1===this.count)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,"literal"===this.state)throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if("nulls"===this.state)throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),0===this.count)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if("int"===this.type)return this.readInt53();if("uint"===this.type)return this.readUint53();if("utf8"===this.type)return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(t){if("utf8"===this.type)for(let e=0;e<t;e++)this.skip(this.readUint53());else{for(;t>0&&this.offset<this.buf.byteLength;)0==(128&this.buf[this.offset])&&t--,this.offset++;if(t>0)throw new RangeError("cannot skip beyond end of buffer")}}}class $i extends Mi{constructor(t){super("int",t),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){const t=super.readValue();return null===t?null:(this.absoluteValue+=t,this.absoluteValue)}skipValues(t){for(;t>0&&!this.done;){0===this.count&&this.readRecord();const e=Math.min(t,this.count);if("literal"===this.state)for(let t=0;t<e;t++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else"repetition"===this.state&&(this.absoluteValue+=e*this.lastValue);t-=e,this.count-=e}}}class Vi extends Ni{constructor(t){super(t),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return 0===this.count&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;0===this.count;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,0===this.count&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(t){for(;t>0&&!this.done;){if(0===this.count&&(this.count=this.readUint53(),this.lastValue=!this.lastValue,0===this.count))throw new RangeError("Zero-length runs are not allowed");this.count<t?(t-=this.count,this.count=0):(this.count-=t,t=0)}}}var Di,qi={stringToUtf8:Ci,utf8ToString:Ti,hexStringToBytes:Ui,bytesToHexString:Li,Encoder:zi,Decoder:Ni,RLEEncoder:Bi,RLEDecoder:Mi,DeltaEncoder:class extends Bi{constructor(){super("int"),this.absoluteValue=0}appendValue(t,e=1){e<=0||("number"==typeof t?(super.appendValue(t-this.absoluteValue,1),this.absoluteValue=t,e>1&&super.appendValue(0,e-1)):super.appendValue(t,e))}copyFrom(t,e={}){if(e.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(t instanceof $i))throw new TypeError("incompatible type of decoder");let n=e.count;if(n>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(0===n||t.done)return;let r=t.readValue(),o=0;if(this.appendValue(r),null===r){if(o=t.count+1,void 0!==n&&n<o&&(o=n),t.count-=o-1,this.count+=o-1,n>o&&t.done)throw new RangeError(`cannot copy ${n} values`);if(n===o||t.done)return;0===t.count&&this.appendValue(t.readValue())}void 0!==n&&(n-=o+1);const{nonNullValues:i,sum:s}=super.copyFrom(t,{count:n,sumValues:!0});i>0&&(this.absoluteValue=s,t.absoluteValue=s)}},DeltaDecoder:$i,BooleanEncoder:class extends zi{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(t,e=1){if(!1!==t&&!0!==t)throw new RangeError(`Unsupported value for BooleanEncoder: ${t}`);e<=0||(this.lastValue===t?this.count+=e:(this.appendUint53(this.count),this.lastValue=t,this.count=e))}copyFrom(t,e={}){if(!(t instanceof Vi))throw new TypeError("incompatible type of decoder");const{count:n}=e;let r="number"==typeof n?n:Number.MAX_SAFE_INTEGER;if(n&&r>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(0===r||t.done)return;this.appendValue(t.readValue()),r--;const o=Math.min(t.count,r);for(this.count+=o,t.count-=o,r-=o;r>0&&!t.done;){if(t.count=t.readUint53(),0===t.count)throw new RangeError("Zero-length runs are not allowed");t.lastValue=!t.lastValue,this.appendUint53(this.count);const e=Math.min(t.count,r);this.count=e,this.lastValue=t.lastValue,t.count-=e,r-=e}if(n&&r>0&&t.done)throw new RangeError(`cannot copy ${n} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},BooleanDecoder:Vi},Pi={exports:{}};Di=Pi,function(t,e){var n={};!function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function n(t,n,r,o,i){for(var s,a,u,c,l,h,f,d,p,g,y,b,_;i>=64;){for(s=n[0],a=n[1],u=n[2],c=n[3],l=n[4],h=n[5],f=n[6],d=n[7],g=0;g<16;g++)y=o+4*g,t[g]=(255&r[y])<<24|(255&r[y+1])<<16|(255&r[y+2])<<8|255&r[y+3];for(g=16;g<64;g++)b=((p=t[g-2])>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,_=((p=t[g-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,t[g]=(b+t[g-7]|0)+(_+t[g-16]|0);for(g=0;g<64;g++)b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&h^~l&f)|0)+(d+(e[g]+t[g]|0)|0)|0,_=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&a^s&u^a&u)|0,d=f,f=h,h=l,l=c+b|0,c=u,u=a,a=s,s=b+_|0;n[0]+=s,n[1]+=a,n[2]+=u,n[3]+=c,n[4]+=l,n[5]+=h,n[6]+=f,n[7]+=d,o+=64,i-=64}return o}var r=function(){function e(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var t=0;t<this.buffer.length;t++)this.buffer[t]=0;for(t=0;t<this.temp.length;t++)this.temp[t]=0;this.reset()},e.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this.bytesHashed+=e,this.bufferLength>0){for(;this.bufferLength<64&&e>0;)this.buffer[this.bufferLength++]=t[r++],e--;64===this.bufferLength&&(n(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(e>=64&&(r=n(this.temp,this.state,t,r,e),e%=64);e>0;)this.buffer[this.bufferLength++]=t[r++],e--;return this},e.prototype.finish=function(t){if(!this.finished){var e=this.bytesHashed,r=this.bufferLength,o=e/536870912|0,i=e<<3,s=e%64<56?64:128;this.buffer[r]=128;for(var a=r+1;a<s-8;a++)this.buffer[a]=0;this.buffer[s-8]=o>>>24&255,this.buffer[s-7]=o>>>16&255,this.buffer[s-6]=o>>>8&255,this.buffer[s-5]=o>>>0&255,this.buffer[s-4]=i>>>24&255,this.buffer[s-3]=i>>>16&255,this.buffer[s-2]=i>>>8&255,this.buffer[s-1]=i>>>0&255,n(this.temp,this.state,this.buffer,0,s),this.finished=!0}for(a=0;a<8;a++)t[4*a+0]=this.state[a]>>>24&255,t[4*a+1]=this.state[a]>>>16&255,t[4*a+2]=this.state[a]>>>8&255,t[4*a+3]=this.state[a]>>>0&255;return this},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype._saveState=function(t){for(var e=0;e<this.state.length;e++)t[e]=this.state[e]},e.prototype._restoreState=function(t,e){for(var n=0;n<this.state.length;n++)this.state[n]=t[n];this.bytesHashed=e,this.finished=!1,this.bufferLength=0},e}();t.Hash=r;var o=function(){function t(t){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var e=new Uint8Array(this.blockSize);if(t.length>this.blockSize)(new r).update(t).finish(e).clean();else for(var n=0;n<t.length;n++)e[n]=t[n];for(n=0;n<e.length;n++)e[n]^=54;for(this.inner.update(e),n=0;n<e.length;n++)e[n]^=106;for(this.outer.update(e),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),n=0;n<e.length;n++)e[n]=0}return t.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},t.prototype.clean=function(){for(var t=0;t<this.istate.length;t++)this.ostate[t]=this.istate[t]=0;this.inner.clean(),this.outer.clean()},t.prototype.update=function(t){return this.inner.update(t),this},t.prototype.finish=function(t){return this.outer.finished?this.outer.finish(t):(this.inner.finish(t),this.outer.update(t,this.digestLength).finish(t)),this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t}();function i(t){var e=(new r).update(t),n=e.digest();return e.clean(),n}function s(t,e){var n=new o(t).update(e),r=n.digest();return n.clean(),r}function a(t,e,n,r){var o=r[0];if(0===o)throw new Error("hkdf: cannot expand more");e.reset(),o>1&&e.update(t),n&&e.update(n),e.update(r),e.finish(t),r[0]++}t.HMAC=o,t.hash=i,t.default=i,t.hmac=s;var u=new Uint8Array(t.digestLength);function c(t,e,n,r){void 0===e&&(e=u),void 0===r&&(r=32);for(var i=new Uint8Array([1]),c=s(e,t),l=new o(c),h=new Uint8Array(l.digestLength),f=h.length,d=new Uint8Array(r),p=0;p<r;p++)f===h.length&&(a(h,l,n,i),f=0),d[p]=h[f++];return l.clean(),h.fill(0),i.fill(0),d}function l(t,e,n,r){for(var i=new o(t),s=i.digestLength,a=new Uint8Array(4),u=new Uint8Array(s),c=new Uint8Array(s),l=new Uint8Array(r),h=0;h*s<r;h++){var f=h+1;a[0]=f>>>24&255,a[1]=f>>>16&255,a[2]=f>>>8&255,a[3]=f>>>0&255,i.reset(),i.update(e),i.update(a),i.finish(c);for(var d=0;d<s;d++)u[d]=c[d];for(d=2;d<=n;d++){i.reset(),i.update(c).finish(c);for(var p=0;p<s;p++)u[p]^=c[p]}for(d=0;d<s&&h*s+d<r;d++)l[h*s+d]=u[d]}for(h=0;h<s;h++)u[h]=c[h]=0;for(h=0;h<4;h++)a[h]=0;return i.clean(),l}t.hkdf=c,t.pbkdf2=l}(n);var r=n.default;for(var o in n)r[o]=n[o];Di.exports=r}();const Fi=kn,{copyObject:Ki,parseOpId:Hi,equalBytes:Zi}=Vt,{utf8ToString:Gi,hexStringToBytes:Wi,bytesToHexString:Yi,Encoder:Ji,Decoder:Xi,RLEEncoder:Qi,RLEDecoder:ts,DeltaEncoder:es,DeltaDecoder:ns,BooleanEncoder:rs,BooleanDecoder:os}=qi,{Hash:is}=Pi.exports,ss=new Uint8Array([133,111,74,131]),as={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},us={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},cs=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],ls={makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},hs={objActor:0|as.ACTOR_ID,objCtr:0|as.INT_RLE,keyActor:16|as.ACTOR_ID,keyCtr:16|as.INT_DELTA,keyStr:16|as.STRING_RLE,idActor:32|as.ACTOR_ID,idCtr:32|as.INT_DELTA,insert:48|as.BOOLEAN,action:64|as.INT_RLE,valLen:80|as.VALUE_LEN,valRaw:80|as.VALUE_RAW,chldActor:96|as.ACTOR_ID,chldCtr:96|as.INT_DELTA},fs=Object.assign({predNum:112|as.GROUP_CARD,predActor:112|as.ACTOR_ID,predCtr:112|as.INT_DELTA},hs),ds=Object.assign({succNum:128|as.GROUP_CARD,succActor:128|as.ACTOR_ID,succCtr:128|as.INT_DELTA},hs),ps=Object.entries(ds).reduce(((t,[e,n])=>(t[n]=e,t)),[]),gs={actor:0|as.ACTOR_ID,seq:0|as.INT_DELTA,maxOp:16|as.INT_DELTA,time:32|as.INT_DELTA,message:48|as.STRING_RLE,depsNum:64|as.GROUP_CARD,depsIndex:64|as.INT_DELTA,extraLen:80|as.VALUE_LEN,extraRaw:80|as.VALUE_RAW};function ys(t,e,n){if(1===e.length)t[e[0]]=n;else{let r=Object.assign({},t[e[0]]);ys(r,e.slice(1),n),t[e[0]]=r}}function bs(t,e){if(!t||!t.actorId)return t;const n=t.counter,r=e.indexOf(t.actorId);if(r<0)throw new RangeError("missing actorId");return{counter:n,actorNum:r,actorId:t.actorId}}function _s(t,e){return t.counter<e.counter?-1:t.counter>e.counter?1:t.actorId<e.actorId?-1:t.actorId>e.actorId?1:0}function vs(t,e){const n={},r=[];for(let i of t)i=Ki(i),n[i.actor]=!0,i.ops=Os(i.ops,i.startOp,i.actor),i.ops=i.ops.map((t=>{"_root"!==(t=Ki(t)).obj&&(t.obj=Hi(t.obj)),t.elemId&&"_head"!==t.elemId&&(t.elemId=Hi(t.elemId)),t.child&&(t.child=Hi(t.child)),t.pred&&(t.pred=t.pred.map(Hi)),t.obj.actorId&&(n[t.obj.actorId]=!0),t.elemId&&t.elemId.actorId&&(n[t.elemId.actorId]=!0),t.child&&t.child.actorId&&(n[t.child.actorId]=!0);for(let e of t.pred)n[e.actorId]=!0;return t})),r.push(i);let o=Object.keys(n).sort();e&&(o=[t[0].actor].concat(o.filter((e=>e!==t[0].actor))));for(let i of r){i.actorNum=o.indexOf(i.actor);for(let t=0;t<i.ops.length;t++){let e=i.ops[t];e.id={counter:i.startOp+t,actorNum:i.actorNum,actorId:i.actor},e.obj=bs(e.obj,o),e.elemId=bs(e.elemId,o),e.child=bs(e.child,o),e.pred=e.pred.map((t=>bs(t,o)))}}return{changes:r,actorIds:o}}function ms(t,e){if("_root"===t.obj)e.objActor.appendValue(null),e.objCtr.appendValue(null);else{if(!(t.obj.actorNum>=0&&t.obj.counter>0))throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(t.obj)}`);e.objActor.appendValue(t.obj.actorNum),e.objCtr.appendValue(t.obj.counter)}}function ws(t,e){if(t.key)e.keyActor.appendValue(null),e.keyCtr.appendValue(null),e.keyStr.appendValue(t.key);else if("_head"===t.elemId&&t.insert)e.keyActor.appendValue(null),e.keyCtr.appendValue(0),e.keyStr.appendValue(null);else{if(!(t.elemId&&t.elemId.actorNum>=0&&t.elemId.counter>0))throw new RangeError(`Unexpected operation key: ${JSON.stringify(t)}`);e.keyActor.appendValue(t.elemId.actorNum),e.keyCtr.appendValue(t.elemId.counter),e.keyStr.appendValue(null)}}function Is(t,e){const n=cs.indexOf(t.action);if(n>=0)e.action.appendValue(n);else{if("number"!=typeof t.action)throw new RangeError(`Unexpected operation action: ${t.action}`);e.action.appendValue(t.action)}}function ks(t,e,n){let r;t<0||e>0?(r=n.valRaw.appendInt53(t),e||(e=us.LEB128_INT)):(r=n.valRaw.appendUint53(t),e=us.LEB128_UINT),n.valLen.appendValue(r<<4|e)}function xs(t,e){if("set"!==t.action&&"inc"!==t.action||null===t.value)e.valLen.appendValue(us.NULL);else if(!1===t.value)e.valLen.appendValue(us.FALSE);else if(!0===t.value)e.valLen.appendValue(us.TRUE);else if("string"==typeof t.value){const n=e.valRaw.appendRawString(t.value);e.valLen.appendValue(n<<4|us.UTF8)}else if(ArrayBuffer.isView(t.value)){const n=e.valRaw.appendRawBytes(new Uint8Array(t.value.buffer));e.valLen.appendValue(n<<4|us.BYTES)}else if("counter"===t.datatype&&"number"==typeof t.value)ks(t.value,us.COUNTER,e);else if("timestamp"===t.datatype&&"number"==typeof t.value)ks(t.value,us.TIMESTAMP,e);else if("number"==typeof t.datatype&&t.datatype>=us.MIN_UNKNOWN&&t.datatype<=us.MAX_UNKNOWN&&t.value instanceof Uint8Array){const n=e.valRaw.appendRawBytes(t.value);e.valLen.appendValue(n<<4|t.datatype)}else{if(t.datatype)throw new RangeError(`Unknown datatype ${t.datatype} for value ${t.value}`);if("number"!=typeof t.value)throw new RangeError(`Unsupported value in operation: ${t.value}`);if(Number.isInteger(t.value)&&t.value<=Number.MAX_SAFE_INTEGER&&t.value>=Number.MIN_SAFE_INTEGER)ks(t.value,0,e);else{const n=new ArrayBuffer(4),r=new DataView(n);if(r.setFloat32(0,t.value,!0),r.getFloat32(0,!0)===t.value)e.valRaw.appendRawBytes(new Uint8Array(n)),e.valLen.appendValue(64|us.IEEE754);else{const n=new ArrayBuffer(8);new DataView(n).setFloat64(0,t.value,!0),e.valRaw.appendRawBytes(new Uint8Array(n)),e.valLen.appendValue(128|us.IEEE754)}}}}function Es(t,e){if(t===us.NULL)return{value:null};if(t===us.FALSE)return{value:!1};if(t===us.TRUE)return{value:!0};if(t%16===us.UTF8)return{value:Gi(e)};if(t%16===us.LEB128_UINT)return{value:new Xi(e).readUint53()};if(t%16===us.LEB128_INT)return{value:new Xi(e).readInt53()};if(t%16===us.IEEE754){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);if(4===e.byteLength)return{value:t.getFloat32(0,!0)};if(8===e.byteLength)return{value:t.getFloat64(0,!0)};throw new RangeError(`Invalid length for floating point number: ${e.byteLength}`)}return t%16===us.COUNTER?{value:new Xi(e).readInt53(),datatype:"counter"}:t%16===us.TIMESTAMP?{value:new Xi(e).readInt53(),datatype:"timestamp"}:{value:e,datatype:t%16}}function Ss(t,e,n,r){const{columnId:o,columnName:i,decoder:s}=t[e];if(o%8===as.VALUE_LEN&&e+1<t.length&&t[e+1].columnId===o+1){const n=s.readValue(),o=t[e+1].decoder.readRawBytes(n>>4),{value:a,datatype:u}=Es(n,o);return r[i]=a,u&&(r[i+"_datatype"]=u),2}if(o%8===as.ACTOR_ID){const t=s.readValue();if(null===t)r[i]=null;else{if(!n[t])throw new RangeError(`No actor index ${t}`);r[i]=n[t]}}else r[i]=s.readValue();return 1}function As(t,e){const n={objActor:new Qi("uint"),objCtr:new Qi("uint"),keyActor:new Qi("uint"),keyCtr:new es,keyStr:new Qi("utf8"),insert:new rs,action:new Qi("uint"),valLen:new Qi("uint"),valRaw:new Ji,chldActor:new Qi("uint"),chldCtr:new es};e?(n.idActor=new Qi("uint"),n.idCtr=new es,n.succNum=new Qi("uint"),n.succActor=new Qi("uint"),n.succCtr=new es):(n.predNum=new Qi("uint"),n.predCtr=new es,n.predActor=new Qi("uint"));for(let o of t)if(ms(o,n),ws(o,n),n.insert.appendValue(!!o.insert),Is(o,n),xs(o,n),o.child&&o.child.counter?(n.chldActor.appendValue(o.child.actorNum),n.chldCtr.appendValue(o.child.counter)):(n.chldActor.appendValue(null),n.chldCtr.appendValue(null)),e){n.idActor.appendValue(o.id.actorNum),n.idCtr.appendValue(o.id.counter),n.succNum.appendValue(o.succ.length),o.succ.sort(_s);for(let t=0;t<o.succ.length;t++)n.succActor.appendValue(o.succ[t].actorNum),n.succCtr.appendValue(o.succ[t].counter)}else{n.predNum.appendValue(o.pred.length),o.pred.sort(_s);for(let t=0;t<o.pred.length;t++)n.predActor.appendValue(o.pred[t].actorNum),n.predCtr.appendValue(o.pred[t].counter)}let r=[];for(let[o,i]of Object.entries(e?ds:fs))n[o]&&r.push({id:i,name:o,encoder:n[o]});return r.sort(((t,e)=>t.id-e.id))}function Os(t,e,n){let r=e,o=[];for(const i of t)if("set"===i.action&&i.values&&i.insert){if(0!==i.pred.length)throw new RangeError("multi-insert pred must be empty");let t=i.elemId;for(const e of i.values)o.push({action:"set",obj:i.obj,elemId:t,value:e,pred:[],insert:!0}),t=`${r}@${n}`,r+=1}else if("del"===i.action&&i.multiOp>1){if(1!==i.pred.length)throw new RangeError("multiOp deletion must have exactly one pred");const t=Hi(i.elemId),e=Hi(i.pred[0]);for(let n=0;n<i.multiOp;n++){const s=`${t.counter+n}@${t.actorId}`,a=[`${e.counter+n}@${e.actorId}`];o.push({action:"del",obj:i.obj,elemId:s,pred:a}),r+=1}}else o.push(i),r+=1;return o}function js(t,e){const n=[];for(let r of t){const t=null===r.objCtr?"_root":`${r.objCtr}@${r.objActor}`,o=r.keyStr?void 0:0===r.keyCtr?"_head":`${r.keyCtr}@${r.keyActor}`,i=cs[r.action]||r.action,s=o?{obj:t,elemId:o,action:i}:{obj:t,key:r.keyStr,action:i};if(s.insert=!!r.insert,"set"!==cs[r.action]&&"inc"!==cs[r.action]||(s.value=r.valLen,r.valLen_datatype&&(s.datatype=r.valLen_datatype)),!!r.chldCtr!=!!r.chldActor)throw new RangeError(`Mismatched child columns: ${r.chldCtr} and ${r.chldActor}`);null!==r.chldCtr&&(s.child=`${r.chldCtr}@${r.chldActor}`),e?(s.id=`${r.idCtr}@${r.idActor}`,s.succ=r.succNum.map((t=>`${t.succCtr}@${t.succActor}`)),Rs(r.succNum.map((t=>({counter:t.succCtr,actorId:t.succActor}))))):(s.pred=r.predNum.map((t=>`${t.predCtr}@${t.predActor}`)),Rs(r.predNum.map((t=>({counter:t.predCtr,actorId:t.predActor}))))),n.push(s)}return n}function Rs(t){let e=null;for(let n of t){if(e&&-1!==_s(e,n))throw new RangeError("operation IDs are not in ascending order");e=n}}function Cs(t){return(7&t)===as.INT_DELTA?new es:(7&t)===as.BOOLEAN?new rs:(7&t)===as.STRING_RLE?new Qi("utf8"):(7&t)===as.VALUE_RAW?new Ji:new Qi("uint")}function Ts(t,e){return(7&t)===as.INT_DELTA?new ns(e):(7&t)===as.BOOLEAN?new os(e):(7&t)===as.STRING_RLE?new ts("utf8",e):(7&t)===as.VALUE_RAW?new Xi(e):new ts("uint",e)}function Us(t,e){const n=new Uint8Array(0),r={};for(let i of Object.values(e))r[i]=Ts(i,n);for(let i of t)r[i.columnId]=Ts(i.columnId,i.buffer);let o=[];for(let i of Object.keys(r).map((t=>parseInt(t,10))).sort(((t,e)=>t-e))){let[t]=Object.entries(e).find((([,t])=>t===i));t||(t=i.toString()),o.push({columnId:i,columnName:t,decoder:r[i]})}return o}function Ls(t,e,n){t=Us(t,n);let r=[];for(;t.some((t=>!t.decoder.done));){let n={},o=0;for(;o<t.length;){const r=t[o].columnId;let i=r>>4,s=1;for(;o+s<t.length&&t[o+s].columnId>>4===i;)s++;if(r%8===as.GROUP_CARD){const r=[],i=t[o].decoder.readValue();for(let n=0;n<i;n++){let n={};for(let r=1;r<s;r++)Ss(t,o+r,e,n);r.push(n)}n[t[o].columnName]=r,o+=s}else o+=Ss(t,o,e,n)}r.push(n)}return r}function zs(t){const e=-9>>>0;let n=-1,r=[],o=t.readUint53();for(let i=0;i<o;i++){const o=t.readUint53(),i=t.readUint53();if((o&e)<=(n&e))throw new RangeError("Columns must be in ascending order");n=o,r.push({columnId:o,bufferLen:i})}return r}function Ns(t,e){const n=e.filter((t=>t.encoder.buffer.byteLength>0));t.appendUint53(n.length);for(let r of n)t.appendUint53(r.id),t.appendUint53(r.encoder.buffer.byteLength)}function Bs(t){const e=t.readUint53(),n=[];for(let s=0;s<e;s++)n.push(Yi(t.readRawBytes(32)));let r={actor:t.readHexString(),seq:t.readUint53(),startOp:t.readUint53(),time:t.readInt53(),message:t.readPrefixedString(),deps:n};const o=[r.actor],i=t.readUint53();for(let s=0;s<i;s++)o.push(t.readHexString());return r.actorIds=o,r}function Ms(t,e){const n=ss.byteLength+4+1+5,r=new Ji;r.appendRawBytes(new Uint8Array(n)),e(r);const o=r.buffer,i=new Ji;i.appendByte(t),i.appendUint53(o.byteLength-n);const s=i.buffer,a=new is;a.update(s),a.update(o.subarray(n));const u=a.digest(),c=u.subarray(0,4);return o.set(ss,n-s.byteLength-4-ss.byteLength),o.set(c,n-s.byteLength-4),o.set(s,n-s.byteLength),{hash:u,bytes:o.subarray(n-s.byteLength-4-ss.byteLength)}}function $s(t,e){if(!Zi(t.readRawBytes(ss.byteLength),ss))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");const n=t.readRawBytes(4),r=t.offset,o=t.readByte(),i=t.readUint53(),s={chunkType:o,chunkLength:i,chunkData:t.readRawBytes(i)};if(e){const e=new is;e.update(t.buf.subarray(r,t.offset));const o=e.digest();if(!Zi(o.subarray(0,4),n))throw new RangeError("checksum does not match data");s.hash=Yi(o)}return s}function Vs(t){const{changes:e,actorIds:n}=vs([t],!0),r=e[0],{hash:o,bytes:i}=Ms(1,(t=>{if(!Array.isArray(r.deps))throw new TypeError("deps is not an array");t.appendUint53(r.deps.length);for(let n of r.deps.slice().sort())t.appendRawBytes(Wi(n));t.appendHexString(r.actor),t.appendUint53(r.seq),t.appendUint53(r.startOp),t.appendInt53(r.time),t.appendPrefixedString(r.message||""),t.appendUint53(n.length-1);for(let r of n.slice(1))t.appendHexString(r);const e=As(r.ops,!1);Ns(t,e);for(let n of e)t.appendRawBytes(n.encoder.buffer);r.extraBytes&&t.appendRawBytes(r.extraBytes)})),s=Yi(o);if(t.hash&&t.hash!==s)throw new RangeError(`Change hash does not match encoding: ${t.hash} != ${s}`);return i.byteLength>=256?function(t){const e=$s(new Xi(t),!1);if(1!==e.chunkType)throw new RangeError(`Unexpected chunk type: ${e.chunkType}`);const n=Fi.deflateRaw(e.chunkData),r=new Ji;return r.appendRawBytes(t.subarray(0,8)),r.appendByte(2),r.appendUint53(n.byteLength),r.appendRawBytes(n),r.buffer}(i):i}function Ds(t){const e=new Xi(t),n=$s(e,!0),r=new Xi(n.chunkData);if(!e.done)throw new RangeError("Encoded change has trailing data");if(1!==n.chunkType)throw new RangeError(`Unexpected chunk type: ${n.chunkType}`);const o=Bs(r),i=zs(r);for(let s=0;s<i.length;s++){if(0!=(8&i[s].columnId))throw new RangeError("change must not contain deflated columns");i[s].buffer=r.readRawBytes(i[s].bufferLen)}if(!r.done){const t=r.buf.byteLength-r.offset;o.extraBytes=r.readRawBytes(t)}return o.columns=i,o.hash=n.hash,o}function qs(t){2===t[8]&&(t=Ps(t));const e=Ds(t);return e.ops=js(Ls(e.columns,e.actorIds,fs),!1),delete e.actorIds,delete e.columns,e}function Ps(t){const e=$s(new Xi(t),!1);if(2!==e.chunkType)throw new RangeError(`Unexpected chunk type: ${e.chunkType}`);const n=Fi.inflateRaw(e.chunkData),r=new Ji;return r.appendRawBytes(t.subarray(0,8)),r.appendByte(1),r.appendUint53(n.byteLength),r.appendRawBytes(n),r.buffer}function Fs(t){let e=new Xi(t),n=[],r=0;for(;!e.done;)$s(e,!1),n.push(t.subarray(r,e.offset)),r=e.offset;return n}function Ks(t){let e=[];for(let n of t)for(let t of Fs(n))0===t[8]?e=e.concat(Ws(t)):1!==t[8]&&2!==t[8]||e.push(qs(t));return e}function Hs(t,e){if(t===e)return 0;if("_root"===t)return-1;if("_root"===e)return 1;const n=Hi(t),r=Hi(e);return n.counter<r.counter?-1:n.counter>r.counter?1:n.actorId<r.actorId?-1:n.actorId>r.actorId?1:0}function Zs(t){const{changes:e,actorIds:n}=vs(Ks(t),!1),{changesColumns:r,heads:o}=function(t){const e={actor:new Qi("uint"),seq:new es,maxOp:new es,time:new es,message:new Qi("utf8"),depsNum:new Qi("uint"),depsIndex:new es,extraLen:new Qi("uint"),extraRaw:new Ji};let n={},r={};for(let i=0;i<t.length;i++){const o=t[i];n[o.hash]=i,r[o.hash]=!0,e.actor.appendValue(o.actorNum),e.seq.appendValue(o.seq),e.maxOp.appendValue(o.startOp+o.ops.length-1),e.time.appendValue(o.time),e.message.appendValue(o.message),e.depsNum.appendValue(o.deps.length);for(let t of o.deps){if("number"!=typeof n[t])throw new RangeError(`Unknown dependency hash: ${t}`);e.depsIndex.appendValue(n[t]),r[t]&&delete r[t]}o.extraBytes?(e.extraLen.appendValue(o.extraBytes.byteLength<<4|us.BYTES),e.extraRaw.appendRawBytes(o.extraBytes)):e.extraLen.appendValue(us.BYTES)}let o=[];for(let[i,s]of Object.entries(gs))o.push({id:s,name:i,encoder:e[i]});return o.sort(((t,e)=>t.id-e.id)),{changesColumns:o,heads:Object.keys(r).sort()}}(e),i=As(function(t){let e={},n={},r={};for(let i of t)for(let t=0;t<i.ops.length;t++){const o=i.ops[t],s=`${o.id.counter}@${o.id.actorId}`,a="_root"===o.obj?"_root":`${o.obj.counter}@${o.obj.actorId}`;let u;if(o.action.startsWith("make")&&(r[s]=o.action,"makeList"!==o.action&&"makeText"!==o.action||(n[s]={_head:[]})),"_root"===a||"makeMap"===r[a]||"makeTable"===r[a])u=o.key;else{if("makeList"!==r[a]&&"makeText"!==r[a])throw new RangeError(`Unknown object type for object ${a}`);if(o.insert){u=s;const t="_head"===o.elemId?"_head":`${o.elemId.counter}@${o.elemId.actorId}`;n[a][t].push(s),n[a][s]=[]}else u=`${o.elemId.counter}@${o.elemId.actorId}`}e[a]||(e[a]={}),e[a][u]||(e[a][u]={}),e[a][u][s]=o,o.succ=[];for(let t of o.pred){const n=`${t.counter}@${t.actorId}`;if(!e[a][u][n])throw new RangeError(`No predecessor operation ${n}`);e[a][u][n].succ.push(o.id)}}let o=[];for(let i of Object.keys(e).sort(Hs)){let t=[];if("makeList"===r[i]||"makeText"===r[i]){let e=["_head"];for(;e.length>0;){const r=e.pop();"_head"!==r&&t.push(r);for(let t of n[i][r].sort(Hs))e.push(t)}}else t=Object.keys(e[i]).sort();for(let n of t)for(let t of Object.keys(e[i][n]).sort(Hs)){const r=e[i][n][t];"del"!==r.action&&o.push(r)}}return o}(e),!0);for(let s of r)Ys(s);for(let s of i)Ys(s);return Ms(0,(t=>{t.appendUint53(n.length);for(let e of n)t.appendHexString(e);t.appendUint53(o.length);for(let e of o.sort())t.appendRawBytes(Wi(e));Ns(t,r),Ns(t,i);for(let e of r)t.appendRawBytes(e.encoder.buffer);for(let e of i)t.appendRawBytes(e.encoder.buffer)})).bytes}function Gs(t){const e=new Xi(t),n=$s(e,!0),r=new Xi(n.chunkData);if(!e.done)throw new RangeError("Encoded document has trailing data");if(0!==n.chunkType)throw new RangeError(`Unexpected chunk type: ${n.chunkType}`);const o=[],i=r.readUint53();for(let l=0;l<i;l++)o.push(r.readHexString());const s=[],a=r.readUint53();for(let l=0;l<a;l++)s.push(Yi(r.readRawBytes(32)));const u=zs(r),c=zs(r);for(let l=0;l<u.length;l++)u[l].buffer=r.readRawBytes(u[l].bufferLen),Js(u[l]);for(let l=0;l<c.length;l++)c[l].buffer=r.readRawBytes(c[l].bufferLen),Js(c[l]);return{changesColumns:u,opsColumns:c,actorIds:o,heads:s,extraBytes:r.readRawBytes(r.buf.byteLength-r.offset)}}function Ws(t){const{changesColumns:e,opsColumns:n,actorIds:r,heads:o}=Gs(t),i=Ls(e,r,gs);return function(t,e){let n={};for(let o of t){if(o.ops=[],n[o.actor]||(n[o.actor]=[]),o.seq!==n[o.actor].length+1)throw new RangeError(`Expected seq = ${n[o.actor].length+1}, got ${o.seq}`);if(o.seq>1&&n[o.actor][o.seq-2].maxOp>o.maxOp)throw new RangeError("maxOp must increase monotonically per actor");n[o.actor].push(o)}let r={};for(let o of e){if("del"===o.action)throw new RangeError("document should not contain del operations");o.pred=r[o.id]?r[o.id].pred:[],r[o.id]=o;for(let t of o.succ){if(!r[t])if(o.elemId){const e=o.insert?o.id:o.elemId;r[t]={id:t,action:"del",obj:o.obj,elemId:e,pred:[]}}else r[t]={id:t,action:"del",obj:o.obj,key:o.key,pred:[]};r[t].pred.push(o.id)}delete o.succ}for(let o of Object.values(r))"del"===o.action&&e.push(o);for(let o of e){const{counter:t,actorId:e}=Hi(o.id),r=n[e];let i=0,s=r.length;for(;i<s;){const e=Math.floor((i+s)/2);r[e].maxOp<t?i=e+1:s=e}if(i>=r.length)throw new RangeError(`Operation ID ${o.id} outside of allowed range`);r[i].ops.push(o)}for(let o of t){o.ops.sort(((t,e)=>Hs(t.id,e.id))),o.startOp=o.maxOp-o.ops.length+1,delete o.maxOp;for(let t=0;t<o.ops.length;t++){const e=o.ops[t],n=`${o.startOp+t}@${o.actor}`;if(e.id!==n)throw new RangeError(`Expected opId ${n}, got ${e.id}`);delete e.id}}}(i,js(Ls(n,r,ds),!0)),function(t,e){let n={};for(let s=0;s<t.length;s++){let e=t[s];e.deps=[];for(let r of e.depsNum.map((t=>t.depsIndex))){if(!t[r]||!t[r].hash)throw new RangeError(`No hash for index ${r} while processing index ${s}`);const o=t[r].hash;e.deps.push(o),n[o]&&delete n[o]}if(e.deps.sort(),delete e.depsNum,e.extraLen_datatype!==us.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${us.BYTES}`);e.extraBytes=e.extraLen,delete e.extraLen_datatype,t[s]=qs(Vs(e)),n[t[s].hash]=!0}const r=Object.keys(n).sort();let o=r.length===e.length,i=0;for(;o&&i<r.length;)o=r[i]===e[i],i++;if(!o)throw new RangeError(`Mismatched heads hashes: expected ${e.join(", ")}, got ${r.join(", ")}`)}(i,o),i}function Ys(t){t.encoder.buffer.byteLength>=256&&(t.encoder={buffer:Fi.deflateRaw(t.encoder.buffer)},t.id|=8)}function Js(t){0!=(8&t.columnId)&&(t.buffer=Fi.inflateRaw(t.buffer),t.columnId^=8)}function Xs(t,e){let n={},r=null;for(let o of e.ops)if("set"===o.actionName&&"counter"===o.value.datatype){r||(r={opId:o.opId,value:0,succ:{}}),r.value+=o.value.value;for(let t of o.succ)r.succ[t]=!0}else if("inc"===o.actionName){if(!r)throw new RangeError(`inc operation ${o.opId} without a counter`);r.value+=o.value.value,delete r.succ[o.opId];for(let t of o.succ)r.succ[t]=!0}else if(0===o.succ.length)if(o.actionName.startsWith("make"))n[o.opId]=t[o.opId];else if("set"===o.actionName)n[o.opId]={value:o.value.value,type:"value"},o.value.datatype&&(n[o.opId].datatype=o.value.datatype);else{if("link"!==o.actionName)throw new RangeError(`Unexpected action type: ${o.actionName}`);if(!o.childId)throw new RangeError(`link operation ${o.opId} without a childId`);n[o.opId]=t[o.childId]}if(r&&0===Object.keys(r.succ).length&&(n[r.opId]={type:"value",value:r.value,datatype:"counter"}),Object.keys(n).length>0){let r=t[e.objId];return"map"===r.type||"table"===r.type?r.props[e.key]=n:"list"!==r.type&&"text"!==r.type||function(t,e,n,r){let o=!0;const i=Object.keys(e).sort(((t,e)=>_s(Hi(t),Hi(e))));for(const s of i)o?t.edits.push({action:"insert",value:e[s],elemId:n,opId:s,index:r}):t.edits.push({action:"update",value:e[s],opId:s,index:r}),o=!1}(r,n,e.key,e.index),!0}return!1}function Qs(t){if("list"===t.type||"text"===t.type){t.edits.forEach((t=>Qs(t.value)));let e=t.edits;t.edits=[];for(const n of e)ta(t.edits,n)}else if("map"===t.type||"table"===t.type)for(const e of Object.keys(t.props))for(const n of Object.keys(t.props[e]))Qs(t.props[e][n])}function ta(t,e){if(0===t.length)return void t.push(e);let n=t[t.length-1];"insert"===n.action&&"insert"===e.action&&n.index===e.index-1&&"value"===n.value.type&&"value"===e.value.type&&n.elemId===n.opId&&e.elemId===e.opId&&ea(n.elemId,e.elemId,1)?(n.action="multi-insert",n.values=[n.value.value,e.value.value],delete n.value,delete n.opId):"multi-insert"===n.action&&"insert"===e.action&&n.index+n.values.length===e.index&&"value"===e.value.type&&e.elemId===e.opId&&ea(n.elemId,e.elemId,n.values.length)?n.values.push(e.value.value):"remove"===n.action&&"remove"===e.action&&n.index===e.index?n.count+=e.count:t.push(e)}function ea(t,e,n=1){const r=Hi(t),o=Hi(e);return r.actorId===o.actorId&&r.counter+n===o.counter}function na(t,e,n){const{objActor:r,objCtr:o,keyActor:i,keyCtr:s,keyStr:a,idActor:u,idCtr:c,insert:l}=t,[h,f,,,d,p,g,y,b,,,,,_]=e.map((t=>t.decoder));let v=0,m=0,w=!1,I=null,k=null,x=null,E=null,S=null,A=null,O=0;if(null!==o)for(;(!f.done||!h.done||!b.done)&&(k=f.readValue(),I=n[h.readValue()],b.skipValues(1),null===k||!I||k<o||k===o&&I<r);)v+=1;if(k!==o||I!==r)return{skipCount:v,visibleCount:m};if(null!==a){for(d.skipValues(v);!d.done;){const t=h.readValue();if(I=null===t?null:n[t],k=f.readValue(),S=d.readValue(),!(null!==S&&S<a&&k===o&&I===r))break;v+=1}return{skipCount:v,visibleCount:m}}if(g.skipValues(v),p.skipValues(v),y.skipValues(v),_.skipValues(v),E=g.readValue(),x=n[p.readValue()],A=y.readValue(),O=_.readValue(),l){if(null!==s&&s>0&&null!==i){for(v+=1;!(g.done||p.done||E===s&&x===i)&&(A&&(w=!1),0!==O||w||(m+=1,w=!0),E=g.readValue(),x=n[p.readValue()],k=f.readValue(),I=n[h.readValue()],A=y.readValue(),O=_.readValue(),k===o&&I===r);)v+=1;if(k!==o||I!==r||E!==s||x!==i||!A)throw new RangeError(`Reference element not found: ${s}@${i}`);if(A&&(w=!1),0!==O||w||(m+=1,w=!0),g.done||p.done)return{skipCount:v,visibleCount:m};E=g.readValue(),x=n[p.readValue()],k=f.readValue(),I=n[h.readValue()],A=y.readValue(),O=_.readValue()}for(;(!A||E>c||E===c&&x>u)&&k===o&&I===r&&(v+=1,A&&(w=!1),0!==O||w||(m+=1,w=!0),!g.done&&!p.done);)E=g.readValue(),x=n[p.readValue()],k=f.readValue(),I=n[h.readValue()],A=y.readValue(),O=_.readValue()}else if(null!==s&&s>0&&null!==i){for(;!(A&&E===s&&x===i||k!==o||I!==r||(v+=1,A&&(w=!1),0!==O||w||(m+=1,w=!0),g.done||p.done));)E=g.readValue(),x=n[p.readValue()],k=f.readValue(),I=n[h.readValue()],A=y.readValue(),O=_.readValue();if(k!==o||I!==r||E!==s||x!==i||!A)throw new RangeError(`Element not found for update: ${s}@${i}`)}return{skipCount:v,visibleCount:m}}function ra(t,e,n){if(0===n)return;let r=0,o=-1,i=0,s=-1,a=0;for(let u of t){for(;r<e.length&&e[r].columnId<u.columnId;)r++;let t=null;r<e.length&&e[r].columnId===u.columnId&&e[r].decoder.buf.byteLength>0&&(t=e[r].decoder);const c=u.columnId>>4===o?i:n;if(u.columnId%8===as.GROUP_CARD)o=u.columnId>>4,t?i=u.encoder.copyFrom(t,{count:n,sumValues:!0}).sum:(u.encoder.appendValue(0,n),i=0);else if(u.columnId%8===as.VALUE_LEN)if(t){if(r+1===e.length||e[r+1].columnId!==u.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");s=u.columnId+1,a=u.encoder.copyFrom(t,{count:c,sumValues:!0,sumShift:4}).sum}else u.encoder.appendValue(null,c),s=u.columnId+1,a=0;else if(u.columnId%8===as.VALUE_RAW){if(u.columnId!==s)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");a>0&&u.encoder.appendRawBytes(t.readRawBytes(a))}else if(t)u.encoder.copyFrom(t,{count:c});else{const t=u.columnId%8!==as.BOOLEAN&&null;u.encoder.appendValue(t,c)}}}function oa(t,e){let n,r=[],o=-1,i=0,s=-1,a=0;for(let u of t){if(u.columnId%8===as.VALUE_RAW){if(u.columnId!==s)throw new RangeError("unexpected VALUE_RAW column");n=u.decoder.readRawBytes(a)}else if(u.columnId%8===as.GROUP_CARD)o=u.columnId>>4,i=u.decoder.readValue()||0,n=i;else if(u.columnId>>4===o){n=[],u.columnId%8===as.VALUE_LEN&&(s=u.columnId+1,a=0);for(let t=0;t<i;t++){let t=u.decoder.readValue();u.columnId%8===as.ACTOR_ID&&e&&"number"==typeof t&&(t=e[t]),u.columnId%8===as.VALUE_LEN&&(a+=n>>>4),n.push(t)}}else n=u.decoder.readValue(),u.columnId%8===as.ACTOR_ID&&e&&"number"==typeof n&&(n=e[n]),u.columnId%8===as.VALUE_LEN&&(s=u.columnId+1,a=n>>>4);r.push(n)}return r}function ia(t,e,n){let r=0,o=-1,i=0;for(let s of t){for(;r<e.length&&e[r].columnId<s.columnId;)r++;if(r<e.length&&e[r].columnId===s.columnId){const t=n[r];if(s.columnId%8===as.GROUP_CARD)o=s.columnId>>4,i=t,s.encoder.appendValue(t);else if(s.columnId>>4===o){if(!Array.isArray(t)||t.length!==i)throw new RangeError("bad group value");for(let e of t)s.encoder.appendValue(e)}else s.columnId%8===as.VALUE_RAW?s.encoder.appendRawBytes(t):s.encoder.appendValue(t)}else if(s.columnId%8===as.GROUP_CARD)o=s.columnId>>4,i=0,s.encoder.appendValue(0);else if(s.columnId%8!==as.VALUE_RAW){const t=s.columnId>>4===o?i:1;let e=null;s.columnId%8===as.BOOLEAN&&(e=!1),s.columnId%8===as.VALUE_LEN&&(e=0),s.encoder.appendValue(e,t)}}}function sa(t,e,n){const r=t.actorIds[0],[o,i,s,a,u,,,c,l]=e.map((t=>t.decoder));let h={},f=null,d=null,p=t.startOp,g=[],y={};for(;!l.done;){const e=o.readValue(),b=s.readValue(),_={objActor:null===e?null:t.actorIds[e],objCtr:i.readValue(),keyActor:null===b?null:t.actorIds[b],keyCtr:a.readValue(),keyStr:u.readValue(),idActor:r,idCtr:p,insert:c.readValue(),action:l.readValue(),idActorIndex:-1,consecutiveOps:1};if(null===_.objCtr&&null!==_.objActor||null!==_.objCtr&&"string"!=typeof _.objActor)throw new RangeError(`Mismatched object reference: (${_.objCtr}, ${_.objActor})`);if(null===_.keyCtr&&null!==_.keyActor||0===_.keyCtr&&null!==_.keyActor||_.keyCtr>0&&"string"!=typeof _.keyActor)throw new RangeError(`Mismatched operation key: (${_.keyCtr}, ${_.keyActor})`);if(_.opId=`${_.idCtr}@${_.idActor}`,_.objId=null===_.objCtr?"_root":`${_.objCtr}@${_.objActor}`,y[_.objId]=!0,_.action%2==0){let t;t=null!==_.keyStr?_.keyStr:_.insert?_.opId:`${_.keyCtr}@${_.keyActor}`;const e=_.action<cs.length?ls[cs[_.action]]:null;n[_.opId]={parentObj:_.objId,parentKey:t,opId:_.opId,type:e,children:{}},y[_.opId]=!0,ys(n,[_.objId,"children",t,_.opId],{objectId:_.opId,type:e,props:{}})}f?_.objActor===d.objActor&&_.objCtr===d.objCtr&&(null!==_.keyStr&&null!==d.keyStr&&d.keyStr<=_.keyStr||null===_.keyStr&&null===d.keyStr&&!d.insert&&!_.insert||null===_.keyStr&&null===d.keyStr&&d.insert&&_.insert&&_.keyActor===d.idActor&&_.keyCtr===d.idCtr)?(f.consecutiveOps+=1,d=_):(h[_.objId]=!0,g.push(f),f=_,d=_):(f=_,d=_),p+=1}return f&&g.push(f),{opSequences:g,objectIds:Object.keys(y)}}class aa{constructor(t){if(this.maxOp=0,this.changes=[],this.changeByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},t){const e=Gs(t);for(let n of Ks([t])){const t=Vs(n);this.changes.push(t),this.changeByHash[n.hash]=t,this.clock[n.actor]=Math.max(n.seq,this.clock[n.actor]||0)}this.actorIds=e.actorIds,this.heads=e.heads,this.docColumns=Us(e.opsColumns,ds),this.numOps=0,this.objectMeta={}}else this.docColumns=Us([],ds),this.numOps=0,this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}}}clone(){let t=new aa;return t.maxOp=this.maxOp,t.changes=this.changes,t.changeByHash=this.changeByHash,t.actorIds=this.actorIds,t.heads=this.heads,t.clock=this.clock,t.docColumns=this.docColumns,t.numOps=this.numOps,t.objectMeta=this.objectMeta,t}updatePatchProperty(t,e,n,r,o,i,s){const a=e.objId,u=n[4]?n[4]:n[7]?`${n[6]}@${r.actorIds[n[5]]}`:`${n[3]}@${r.actorIds[n[2]]}`,c=void 0!==s&&n[13]>0;t[a]||(t[a]={objectId:a,type:r.objectMeta[a].type,props:{}});let l=t[a];if(null===n[4]?(l.edits||(l.edits=[]),c||(o[u]?"remove"===o[u].action&&(l.edits.pop(),o[u].action="update"):(l.edits.push({action:"insert",index:i,elemId:u}),o[u]={action:"insert",visibleOps:[],hasChild:!1})),0===s&&(o[u]?"insert"===o[u].action&&(l.edits.pop(),o[u].action="update"):(l.edits.push({action:"remove",index:i}),o[u]={action:"remove",visibleOps:[],hasChild:!1})),!l.props[i]&&o[u]&&["insert","update"].includes(o[u].action)&&(l.props[i]={})):l.props[n[4]]||(l.props[n[4]]={}),!c&&(o[u]||(o[u]={visibleOps:[],hasChild:!1}),o[u].visibleOps.push(n),o[u].hasChild=o[u].hasChild||n[8]%2==0,o[u].hasChild)){let t={};for(let e of o[u].visibleOps){const n=`${e[6]}@${r.actorIds[e[5]]}`;if("set"===cs[e[8]])t[n]=Es(e[9],e[10]);else if(e[8]%2==0){const r=e[8]<cs.length?ls[cs[e[8]]]:null;t[n]={objectId:n,type:r,props:{}}}}ys(r.objectMeta,[a,"children",u],t)}const h=`${n[6]}@${r.actorIds[n[5]]}`,f=null!==n[4]?n[4]:i;if(c&&"set"===cs[n[8]]&&(15&n[9])===us.COUNTER){o[u]||(o[u]={visibleOps:[],hasChild:!1}),o[u].counterStates||(o[u].counterStates={});let t=o[u].counterStates,e={opId:h,value:Es(n[9],n[10]).value,succs:{}};for(let o=0;o<n[13];o++){const i=`${n[15][o]}@${r.actorIds[n[14][o]]}`;t[i]=e,e.succs[i]=!0}}else if("inc"===cs[n[8]]){if(!o[u]||!o[u].counterStates||!o[u].counterStates[h])throw new RangeError(`increment operation ${h} for unknown counter`);let t=o[u].counterStates[h];t.value+=Es(n[9],n[10]).value,delete t.succs[h],0===Object.keys(t.succs).length&&l.props[f]&&(l.props[f][t.opId]={datatype:"counter",value:t.value})}else if(l.props[f]&&!c)if("set"===cs[n[8]])l.props[f][h]=Es(n[9],n[10]);else if(n[8]%2==0){if(!t[h]){const e=n[8]<cs.length?ls[cs[n[8]]]:null;t[h]={objectId:h,type:e,props:{}}}l.props[f][h]=t[h]}}mergeDocChangeOps(t,e,n,r,o,i){if(o.opsCols[0].columnId!==ds.objActor||r[0].columnId!==fs.objActor||o.opsCols[1].columnId!==ds.objCtr||r[1].columnId!==fs.objCtr||o.opsCols[2].columnId!==ds.keyActor||r[2].columnId!==fs.keyActor||o.opsCols[3].columnId!==ds.keyCtr||r[3].columnId!==fs.keyCtr||o.opsCols[4].columnId!==ds.keyStr||r[4].columnId!==fs.keyStr||o.opsCols[5].columnId!==ds.idActor||r[5].columnId!==fs.idActor||o.opsCols[6].columnId!==ds.idCtr||r[6].columnId!==fs.idCtr||o.opsCols[7].columnId!==ds.insert||r[7].columnId!==fs.insert||o.opsCols[8].columnId!==ds.action||r[8].columnId!==fs.action||o.opsCols[9].columnId!==ds.valLen||r[9].columnId!==fs.valLen||o.opsCols[10].columnId!==ds.valRaw||r[10].columnId!==fs.valRaw||o.opsCols[13].columnId!==ds.succNum||r[13].columnId!==fs.predNum||o.opsCols[14].columnId!==ds.succActor||r[14].columnId!==fs.predActor||o.opsCols[15].columnId!==ds.succCtr||r[15].columnId!==fs.predCtr)throw new RangeError("unexpected columnId");let s=n.consecutiveOps,a=0,u=n.idCtr,c=!1,l=!1,h={},f=o.opsCols[8].decoder.done?null:oa(o.opsCols),d=null===f?0:1,p=null===f?0:f[13],g=null,y=null,b=[],_=[];for(;;){if(0===b.length)for(c=!1;0===b.length||n.insert||null!==y[4]&&y[4]===b[0][4]||null===y[4]&&y[2]===b[0][2]&&y[3]===b[0][3];){if(null!==y&&(b.push(y),_.push(new Array(y[13]))),0===s){y=null;break}y=oa(r,o.actorTable),y[5]=n.idActorIndex,y[6]=u,s--,u++}b.length>0&&(g=b[0]);const v=f&&f[0]===g[0]&&f[1]===g[1],m=f&&null!==f[4]&&f[4]===g[4],w=f&&null===f[4]&&null===g[4]&&(!f[7]&&f[2]===g[2]&&f[3]===g[3]||f[7]&&f[5]===g[2]&&f[6]===g[3]);if(0===b.length&&(!v||!m&&!w))break;let I=!1,k=0;if(n.insert||!v||null===f[4]&&null!==g[4]||null!==f[4]&&null!==g[4]&&g[4]<f[4]){if(k=b.length,!v&&!c&&null===g[4]&&!g[7])throw new RangeError(`could not find list element with ID: ${g[3]}@${o.actorIds[g[2]]}`)}else if(m||w||c){for(let t=0;t<b.length;t++){const e=b[t];for(let r=0;r<e[13];r++)if(e[14][r]===f[5]&&e[15][r]===f[6]){let i=0;for(;i<f[13]&&(f[15][i]<e[6]||f[15][i]===e[6]&&o.actorIds[f[14][i]]<n.idActor);)i++;f[15].splice(i,0,e[6]),f[14].splice(i,0,n.idActorIndex),f[13]++,_[t][r]=!0;break}}if(w&&(c=!0),c&&!w)k=b.length;else if(0===b.length||f[6]<g[6]||f[6]===g[6]&&o.actorIds[f[5]]<n.idActor){I=!0,this.updatePatchProperty(t,n,f,o,h,i,p);for(let t=b.length-1;t>=0;t--){let e=!0;for(let n=0;n<b[t][13];n++)_[t][n]||(e=!1);"del"===cs[b[t][8]]&&e&&(b.splice(t,1),_.splice(t,1))}}else{if(f[6]===g[6]&&o.actorIds[f[5]]===n.idActor)throw new RangeError(`duplicate operation ID: ${g[6]}@${n.idActor}`);k=1}}else I=!0;if(I&&(ia(e,o.opsCols,f),f[7]&&l&&(l=!1,i++),0===f[13]&&(l=!0),a++,f=o.opsCols[8].decoder.done?null:oa(o.opsCols),null!==f&&(d++,p=f[13])),k>0){for(let s=0;s<k;s++){let a=b[s];for(let t=0;t<a[13];t++)if(!_[s][t])throw new RangeError(`no matching operation for pred: ${a[15][t]}@${o.actorIds[a[14][t]]}`);this.updatePatchProperty(t,n,a,o,h,i),ia(e,r,a),a[7]?(l=!1,i++):l=!0}k===b.length?(b.length=0,_.length=0):(b.splice(0,k),_.splice(0,k)),a+=k}}return f&&(ia(e,o.opsCols,f),a++),{opsAppended:a,docOpsConsumed:d}}applyOps(t,e,n,r){for(let c of r.opsCols)c.decoder.reset();const{skipCount:o,visibleCount:i}=na(e,r.opsCols,r.actorIds);if(r.lastIndex[e.objId]&&i<r.lastIndex[e.objId])throw new RangeError("list element accesses must occur in ascending order");r.lastIndex[e.objId]=i;for(let c of r.opsCols)c.decoder.reset();let s=r.allCols.map((t=>({columnId:t,encoder:Cs(t)})));ra(s,r.opsCols,o);const{opsAppended:a,docOpsConsumed:u}=this.mergeDocChangeOps(t,s,e,n,r,i);ra(s,r.opsCols,r.numOps-o-u);for(let c of r.opsCols)if(!c.decoder.done)throw new RangeError(`excess ops in ${c.columnName} column`);r.opsCols=s.map((t=>{const e=Ts(t.columnId,t.encoder.buffer);return{columnId:t.columnId,columnName:ps[t.columnId],decoder:e}})),r.numOps=r.numOps+a-u}getAllColumns(t){const e=["objActor","objCtr","keyActor","keyCtr","keyStr","idActor","idCtr","insert","action","valLen","valRaw","chldActor","chldCtr","predNum","predActor","predCtr"];let n={};for(let r=0;r<e.length;r++)if(t[r].columnName!==e[r])throw new RangeError(`Expected column ${e[r]} at index ${r}, got ${t[r].columnName}`);for(let r of t)n[r.columnId]=!0;for(let r of Object.values(ds))n[r]=!0;return delete n[fs.predNum],delete n[fs.predActor],delete n[fs.predCtr],Object.keys(n).map((t=>parseInt(t,10))).sort(((t,e)=>t-e))}getActorTable(t,e){if(t.indexOf(e.actorIds[0])<0){if(1!==e.seq)throw new RangeError(`Seq ${e.seq} is the first change for actor ${e.actorIds[0]}`);t=t.concat([e.actorIds[0]])}const n=[];for(let r of e.actorIds){const e=t.indexOf(r);if(e<0)throw new RangeError(`actorId ${r} is not known to document`);n.push(e)}return{actorIds:t,actorTable:n}}setupPatches(t,e,n){for(let r of e){let e=n.objectMeta[r],o=null,i=!1;for(;;){if(t[r]||(t[r]={objectId:r,type:e.type,props:{}}),o){let s=o.parentKey;if("list"===e.type||"text"===e.type){const t=Hi(r),e=Hi(s),o={objActor:t.actorId,objCtr:t.counter,keyActor:e.actorId,keyCtr:e.counter,keyStr:null,insert:!1},{visibleCount:i}=na(o,n.opsCols,n.actorIds);s=i}t[r].props[s]||(t[r].props[s]={});let a=t[r].props[s];for(let[n,r]of Object.entries(e.children[o.parentKey]))a[n]?i=!0:r.objectId?(t[r.objectId]||(t[r.objectId]=Object.assign({},r,{props:{}})),a[n]=t[r.objectId]):a[n]=r;if(!a[o.opId])throw new RangeError(`object metadata did not contain child entry for ${o.opId}`)}if(i||!e.parentObj)break;o=e,r=e.parentObj,e=n.objectMeta[r]}}return t}applyChanges(t,e=!1){let n={_root:{objectId:"_root",type:"map",props:{}}},r={actorIds:this.actorIds,opsCols:this.docColumns,numOps:this.numOps,objectMeta:Object.assign({},this.objectMeta),lastIndex:{}},o={},i=Object.assign({},this.changeByHash),s=this.maxOp,a={},u=Object.assign({},this.clock);for(let h of this.heads)a[h]=!0;let c=[];for(let h of t){const t=Ds(h);c.push(t);for(let n of t.deps){if(!i[n])throw new RangeError(`missing dependency ${n}`);delete a[n]}i[t.hash]=h,a[t.hash]=!0;const e=(u[t.actor]||0)+1;if(t.seq!==e)throw new RangeError(`Expected seq ${e}, got seq ${t.seq} from actor ${t.actor}`);u[t.actor]=t.seq;const l=Us(t.columns,fs);r.allCols=this.getAllColumns(l),Object.assign(r,this.getActorTable(r.actorIds,t));const f=r.actorIds.indexOf(t.actorIds[0]),{opSequences:d,objectIds:p}=sa(t,l,r.objectMeta);for(let n of p)o[n]=!0;const g=d[d.length-1];g&&(s=Math.max(s,g.idCtr+g.consecutiveOps-1));for(let n of l)n.decoder.reset();for(let o of d)o.idActorIndex=f,this.applyOps(n,o,l,r)}this.setupPatches(n,Object.keys(o),r),this.maxOp=s,this.changes=this.changes.concat(t),this.changeByHash=i,this.actorIds=r.actorIds,this.heads=Object.keys(a).sort(),this.clock=u,this.docColumns=r.opsCols,this.numOps=r.numOps,this.objectMeta=r.objectMeta;for(let h of c)1===h.seq&&(this.hashesByActor[h.actor]=[]),this.hashesByActor[h.actor].push(h.hash);let l={maxOp:s,clock:u,deps:this.heads,diffs:n._root};return e&&1===c.length&&(l.actor=c[0].actor,l.seq=c[0].seq),l}getChanges(t){const e={},n=this.changes.map(Ds);for(let o of t)e[o]=!0;for(let o=n.length-1;o>=0;o--)if(e[n[o].hash])for(let t of n[o].deps)e[t]=!0;let r=[];for(let o=0;o<n.length;o++)e[n[o].hash]||r.push(this.changes[o]);return r}getMissingDeps(){return[]}save(){return Zs(this.changes)}}var ua={COLUMN_TYPE:as,VALUE_TYPE:us,ACTIONS:cs,DOC_OPS_COLUMNS:ds,CHANGE_COLUMNS:fs,DOCUMENT_COLUMNS:gs,splitContainers:Fs,encodeChange:Vs,decodeChange:qs,decodeChangeMeta:function(t,e){2===t[8]&&(t=Ps(t));const n=$s(new Xi(t),e);if(1!==n.chunkType)throw new RangeError("Buffer chunk type is not a change");const r=Bs(new Xi(n.chunkData));return r.change=t,e&&(r.hash=n.hash),r},decodeChanges:Ks,encodeDocument:Zs,decodeDocument:Ws,getChangeChecksum:function(t){if(t[0]!==ss[0]||t[1]!==ss[1]||t[2]!==ss[2]||t[3]!==ss[3])throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");return(t[4]<<24|t[5]<<16|t[6]<<8|t[7])>>>0},appendEdit:ta,constructPatch:function(t){const{opsColumns:e,actorIds:n}=Gs(t),r=Us(e,ds).reduce(((t,e)=>Object.assign(t,{[e.columnName]:e.decoder})),{});let o={_root:{objectId:"_root",type:"map",props:{}}},i=null;for(;!r.idActor.done;){const t=`${r.idCtr.readValue()}@${n[r.idActor.readValue()]}`,e=r.action.readValue(),s=cs[e];if(e%2==0){const e=ls[s]||"unknown";o[t]="list"===e||"text"===e?{objectId:t,type:e,edits:[]}:{objectId:t,type:e,props:{}}}const a=r.objActor.readValue(),u=r.objCtr.readValue(),c=null===a?"_root":`${u}@${n[a]}`;let l=o[c];if(!l)throw new RangeError(`Operation for nonexistent object: ${c}`);const h=r.keyActor.readValue(),f=r.keyCtr.readValue(),d=r.keyStr.readValue(),p=!!r.insert.readValue(),g=r.chldActor.readValue(),y=r.chldCtr.readValue(),b=null===g?null:`${y}@${n[g]}`,_=r.valLen.readValue(),v=Es(_,r.valRaw.readRawBytes(_>>4)),m=r.succNum.readValue();let w,I=[];for(let o=0;o<m;o++)I.push(`${r.succCtr.readValue()}@${n[r.succActor.readValue()]}`);if(s&&"unknown"!==l.type){if("list"===l.type||"text"===l.type){if(null===f||0===f&&!p)throw new RangeError(`Operation ${t} on ${l.type} object has no key`);w=p?t:`${f}@${n[h]}`}else{if(null===d)throw new RangeError(`Operation ${t} on ${l.type} object has no key`);w=d}if(!i||i.objId!==c||i.key!==w){let t=0;i&&(t=i.index,Xs(o,i)&&(t+=1),i.objId!==c&&(t=0)),i={objId:c,key:w,index:t,ops:[]}}i.ops.push({opId:t,actionName:s,value:v,childId:b,succ:I})}}return i&&Xs(o,i),Qs(o._root),o._root},BackendDoc:aa},ca={exports:{}};ca.exports=function(){var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return s(t)?t:Z(t)}function r(t){return a(t)?t:G(t)}function o(t){return u(t)?t:W(t)}function i(t){return s(t)&&!c(t)?t:Y(t)}function s(t){return!(!t||!t[h])}function a(t){return!(!t||!t[f])}function u(t){return!(!t||!t[d])}function c(t){return a(t)||u(t)}function l(t){return!(!t||!t[p])}e(r,n),e(o,n),e(i,n),n.isIterable=s,n.isKeyed=a,n.isIndexed=u,n.isAssociative=c,n.isOrdered=l,n.Keyed=r,n.Indexed=o,n.Set=i;var h="@@__IMMUTABLE_ITERABLE__@@",f="@@__IMMUTABLE_KEYED__@@",d="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",g="delete",y=5,b=1<<y,_=b-1,v={},m={value:!1},w={value:!1};function I(t){return t.value=!1,t}function k(t){t&&(t.value=!0)}function x(){}function E(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),o=0;o<n;o++)r[o]=t[o+e];return r}function S(t){return void 0===t.size&&(t.size=t.__iterate(O)),t.size}function A(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?S(t)+e:e}function O(){return!0}function j(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function R(t,e){return T(t,e,0)}function C(t,e){return T(t,e,e)}function T(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var U=0,L=1,z=2,N="function"==typeof Symbol&&Symbol.iterator,B="@@iterator",M=N||B;function $(t){this.next=t}function V(t,e,n,r){var o=0===t?e:1===t?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function D(){return{value:void 0,done:!0}}function q(t){return!!K(t)}function P(t){return t&&"function"==typeof t.next}function F(t){var e=K(t);return e&&e.call(t)}function K(t){var e=t&&(N&&t[N]||t[B]);if("function"==typeof e)return e}function H(t){return t&&"number"==typeof t.length}function Z(t){return null==t?st():s(t)?t.toSeq():ct(t)}function G(t){return null==t?st().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():at(t)}function W(t){return null==t?st():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():ut(t)}function Y(t){return(null==t?st():s(t)?a(t)?t.entrySeq():t:ut(t)).toSetSeq()}$.prototype.toString=function(){return"[Iterator]"},$.KEYS=U,$.VALUES=L,$.ENTRIES=z,$.prototype.inspect=$.prototype.toSource=function(){return this.toString()},$.prototype[M]=function(){return this},e(Z,n),Z.of=function(){return Z(arguments)},Z.prototype.toSeq=function(){return this},Z.prototype.toString=function(){return this.__toString("Seq {","}")},Z.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Z.prototype.__iterate=function(t,e){return ht(this,t,e,!0)},Z.prototype.__iterator=function(t,e){return ft(this,t,e,!0)},e(G,Z),G.prototype.toKeyedSeq=function(){return this},e(W,Z),W.of=function(){return W(arguments)},W.prototype.toIndexedSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq [","]")},W.prototype.__iterate=function(t,e){return ht(this,t,e,!1)},W.prototype.__iterator=function(t,e){return ft(this,t,e,!1)},e(Y,Z),Y.of=function(){return Y(arguments)},Y.prototype.toSetSeq=function(){return this},Z.isSeq=it,Z.Keyed=G,Z.Set=Y,Z.Indexed=W;var J,X,Q,tt="@@__IMMUTABLE_SEQ__@@";function et(t){this._array=t,this.size=t.length}function nt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function rt(t){this._iterable=t,this.size=t.length||t.size}function ot(t){this._iterator=t,this._iteratorCache=[]}function it(t){return!(!t||!t[tt])}function st(){return J||(J=new et([]))}function at(t){var e=Array.isArray(t)?new et(t).fromEntrySeq():P(t)?new ot(t).fromEntrySeq():q(t)?new rt(t).fromEntrySeq():"object"==typeof t?new nt(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function ut(t){var e=lt(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ct(t){var e=lt(t)||"object"==typeof t&&new nt(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function lt(t){return H(t)?new et(t):P(t)?new ot(t):q(t)?new rt(t):void 0}function ht(t,e,n,r){var o=t._cache;if(o){for(var i=o.length-1,s=0;s<=i;s++){var a=o[n?i-s:s];if(!1===e(a[1],r?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function ft(t,e,n,r){var o=t._cache;if(o){var i=o.length-1,s=0;return new $((function(){var t=o[n?i-s:s];return s++>i?D():V(e,r?t[0]:s-1,t[1])}))}return t.__iteratorUncached(e,n)}function dt(t,e){return e?pt(e,t,"",{"":t}):gt(t)}function pt(t,e,n,r){return Array.isArray(e)?t.call(r,n,W(e).map((function(n,r){return pt(t,n,r,e)}))):yt(e)?t.call(r,n,G(e).map((function(n,r){return pt(t,n,r,e)}))):e}function gt(t){return Array.isArray(t)?W(t).map(gt).toList():yt(t)?G(t).map(gt).toMap():t}function yt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function bt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function _t(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||u(t)!==u(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!c(t);if(l(t)){var r=t.entries();return e.every((function(t,e){var o=r.next().value;return o&&bt(o[1],t)&&(n||bt(o[0],e))}))&&r.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var h=!0,f=e.__iterate((function(e,r){if(n?!t.has(e):o?!bt(e,t.get(r,v)):!bt(t.get(r,v),e))return h=!1,!1}));return h&&t.size===f}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(X)return X;X=this}}function mt(t,e){if(!t)throw new Error(e)}function wt(t,e,n){if(!(this instanceof wt))return new wt(t,e,n);if(mt(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Q)return Q;Q=this}}function It(){throw TypeError("Abstract")}function kt(){}function xt(){}function Et(){}Z.prototype[tt]=!0,e(et,W),et.prototype.get=function(t,e){return this.has(t)?this._array[A(this,t)]:e},et.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(!1===t(n[e?r-o:o],o,this))return o+1;return o},et.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,o=0;return new $((function(){return o>r?D():V(t,o,n[e?r-o++:o++])}))},e(nt,G),nt.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},nt.prototype.has=function(t){return this._object.hasOwnProperty(t)},nt.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,o=r.length-1,i=0;i<=o;i++){var s=r[e?o-i:i];if(!1===t(n[s],s,this))return i+1}return i},nt.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,o=r.length-1,i=0;return new $((function(){var s=r[e?o-i:i];return i++>o?D():V(t,s,n[s])}))},nt.prototype[p]=!0,e(rt,W),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=F(this._iterable),r=0;if(P(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=F(this._iterable);if(!P(n))return new $(D);var r=0;return new $((function(){var e=n.next();return e.done?e:V(t,r++,e.value)}))},e(ot,W),ot.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===t(o[i],i++,this))return i;for(;!(n=r.next()).done;){var s=n.value;if(o[i]=s,!1===t(s,i++,this))break}return i},ot.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,o=0;return new $((function(){if(o>=r.length){var e=n.next();if(e.done)return e;r[o]=e.value}return V(t,o,r[o++])}))},e(vt,W),vt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},vt.prototype.get=function(t,e){return this.has(t)?this._value:e},vt.prototype.includes=function(t){return bt(this._value,t)},vt.prototype.slice=function(t,e){var n=this.size;return j(t,e,n)?this:new vt(this._value,C(e,n)-R(t,n))},vt.prototype.reverse=function(){return this},vt.prototype.indexOf=function(t){return bt(this._value,t)?0:-1},vt.prototype.lastIndexOf=function(t){return bt(this._value,t)?this.size:-1},vt.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},vt.prototype.__iterator=function(t,e){var n=this,r=0;return new $((function(){return r<n.size?V(t,r++,n._value):D()}))},vt.prototype.equals=function(t){return t instanceof vt?bt(this._value,t._value):_t(t)},e(wt,W),wt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},wt.prototype.get=function(t,e){return this.has(t)?this._start+A(this,t)*this._step:e},wt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},wt.prototype.slice=function(t,e){return j(t,e,this.size)?this:(t=R(t,this.size),(e=C(e,this.size))<=t?new wt(0,0):new wt(this.get(t,this._end),this.get(e,this._end),this._step))},wt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},wt.prototype.lastIndexOf=function(t){return this.indexOf(t)},wt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,o=e?this._start+n*r:this._start,i=0;i<=n;i++){if(!1===t(o,i,this))return i+1;o+=e?-r:r}return i},wt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,o=e?this._start+n*r:this._start,i=0;return new $((function(){var s=o;return o+=e?-r:r,i>n?D():V(t,i++,s)}))},wt.prototype.equals=function(t){return t instanceof wt?this._start===t._start&&this._end===t._end&&this._step===t._step:_t(this,t)},e(It,n),e(kt,It),e(xt,It),e(Et,It),It.Keyed=kt,It.Indexed=xt,It.Set=Et;var St="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function At(t){return t>>>1&1073741824|3221225471&t}function Ot(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return At(n)}if("string"===e)return t.length>$t?jt(t):Rt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return Ct(t);if("function"==typeof t.toString)return Rt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function jt(t){var e=qt[t];return void 0===e&&(e=Rt(t),Dt===Vt&&(Dt=0,qt={}),Dt++,qt[t]=e),e}function Rt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return At(e)}function Ct(t){var e;if(Nt&&void 0!==(e=zt.get(t)))return e;if(void 0!==(e=t[Mt]))return e;if(!Ut){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Mt]))return e;if(void 0!==(e=Lt(t)))return e}if(e=++Bt,1073741824&Bt&&(Bt=0),Nt)zt.set(t,e);else{if(void 0!==Tt&&!1===Tt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Ut)Object.defineProperty(t,Mt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Mt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Mt]=e}}return e}var Tt=Object.isExtensible,Ut=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Lt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var zt,Nt="function"==typeof WeakMap;Nt&&(zt=new WeakMap);var Bt=0,Mt="__immutablehash__";"function"==typeof Symbol&&(Mt=Symbol(Mt));var $t=16,Vt=255,Dt=0,qt={};function Pt(t){mt(t!==1/0,"Cannot perform this action with an infinite size.")}function Ft(t){return null==t?oe():Kt(t)&&!l(t)?t:oe().withMutations((function(e){var n=r(t);Pt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Kt(t){return!(!t||!t[Zt])}e(Ft,kt),Ft.of=function(){var e=t.call(arguments,0);return oe().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},Ft.prototype.toString=function(){return this.__toString("Map {","}")},Ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Ft.prototype.set=function(t,e){return ie(this,t,e)},Ft.prototype.setIn=function(t,e){return this.updateIn(t,v,(function(){return e}))},Ft.prototype.remove=function(t){return ie(this,t,v)},Ft.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return v}))},Ft.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Ft.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=ye(this,In(t),e,n);return r===v?void 0:r},Ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):oe()},Ft.prototype.merge=function(){return fe(this,void 0,arguments)},Ft.prototype.mergeWith=function(e){return fe(this,e,t.call(arguments,1))},Ft.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,oe(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},Ft.prototype.mergeDeep=function(){return fe(this,de,arguments)},Ft.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return fe(this,pe(e),n)},Ft.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,oe(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},Ft.prototype.sort=function(t){return qe(hn(this,t))},Ft.prototype.sortBy=function(t,e){return qe(hn(this,e,t))},Ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new x)},Ft.prototype.asImmutable=function(){return this.__ensureOwner()},Ft.prototype.wasAltered=function(){return this.__altered},Ft.prototype.__iterator=function(t,e){return new te(this,t,e)},Ft.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},Ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?re(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ft.isMap=Kt;var Ht,Zt="@@__IMMUTABLE_MAP__@@",Gt=Ft.prototype;function Wt(t,e){this.ownerID=t,this.entries=e}function Yt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Jt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Xt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Qt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function te(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&ne(t._root)}function ee(t,e){return V(t,e[0],e[1])}function ne(t,e){return{node:t,index:0,__prev:e}}function re(t,e,n,r){var o=Object.create(Gt);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function oe(){return Ht||(Ht=re(0))}function ie(t,e,n){var r,o;if(t._root){var i=I(m),s=I(w);if(r=se(t._root,t.__ownerID,0,void 0,e,n,i,s),!s.value)return t;o=t.size+(i.value?n===v?-1:1:0)}else{if(n===v)return t;o=1,r=new Wt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?re(o,r):oe()}function se(t,e,n,r,o,i,s,a){return t?t.update(e,n,r,o,i,s,a):i===v?t:(k(a),k(s),new Qt(e,r,[o,i]))}function ae(t){return t.constructor===Qt||t.constructor===Xt}function ue(t,e,n,r,o){if(t.keyHash===r)return new Xt(e,r,[t.entry,o]);var i,s=(0===n?t.keyHash:t.keyHash>>>n)&_,a=(0===n?r:r>>>n)&_;return new Yt(e,1<<s|1<<a,s===a?[ue(t,e,n+y,r,o)]:(i=new Qt(e,r,o),s<a?[t,i]:[i,t]))}function ce(t,e,n,r){t||(t=new x);for(var o=new Qt(t,Ot(n),[n,r]),i=0;i<e.length;i++){var s=e[i];o=o.update(t,0,void 0,s[0],s[1])}return o}function le(t,e,n,r){for(var o=0,i=0,s=new Array(n),a=0,u=1,c=e.length;a<c;a++,u<<=1){var l=e[a];void 0!==l&&a!==r&&(o|=u,s[i++]=l)}return new Yt(t,o,s)}function he(t,e,n,r,o){for(var i=0,s=new Array(b),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[i++]:void 0;return s[r]=o,new Jt(t,i+1,s)}function fe(t,e,n){for(var o=[],i=0;i<n.length;i++){var a=n[i],u=r(a);s(a)||(u=u.map((function(t){return dt(t)}))),o.push(u)}return ge(t,e,o)}function de(t,e,n){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):bt(t,e)?t:e}function pe(t){return function(e,n,r){if(e&&e.mergeDeepWith&&s(n))return e.mergeDeepWith(t,n);var o=t(e,n,r);return bt(e,o)?e:o}}function ge(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var r=e?function(n,r){t.update(r,v,(function(t){return t===v?n:e(t,n,r)}))}:function(e,n){t.set(n,e)},o=0;o<n.length;o++)n[o].forEach(r)})):t.constructor(n[0])}function ye(t,e,n,r){var o=t===v,i=e.next();if(i.done){var s=o?n:t,a=r(s);return a===s?t:a}mt(o||t&&t.set,"invalid keyPath");var u=i.value,c=o?v:t.get(u,v),l=ye(c,e,n,r);return l===c?t:l===v?t.remove(u):(o?oe():t).set(u,l)}function be(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function _e(t,e,n,r){var o=r?t:E(t);return o[e]=n,o}function ve(t,e,n,r){var o=t.length+1;if(r&&e+1===o)return t[e]=n,t;for(var i=new Array(o),s=0,a=0;a<o;a++)a===e?(i[a]=n,s=-1):i[a]=t[a+s];return i}function me(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var o=new Array(r),i=0,s=0;s<r;s++)s===e&&(i=1),o[s]=t[s+i];return o}Gt[Zt]=!0,Gt[g]=Gt.remove,Gt.removeIn=Gt.deleteIn,Wt.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(bt(n,o[i][0]))return o[i][1];return r},Wt.prototype.update=function(t,e,n,r,o,i,s){for(var a=o===v,u=this.entries,c=0,l=u.length;c<l&&!bt(r,u[c][0]);c++);var h=c<l;if(h?u[c][1]===o:a)return this;if(k(s),(a||!h)&&k(i),!a||1!==u.length){if(!h&&!a&&u.length>=we)return ce(t,u,r,o);var f=t&&t===this.ownerID,d=f?u:E(u);return h?a?c===l-1?d.pop():d[c]=d.pop():d[c]=[r,o]:d.push([r,o]),f?(this.entries=d,this):new Wt(t,d)}},Yt.prototype.get=function(t,e,n,r){void 0===e&&(e=Ot(n));var o=1<<((0===t?e:e>>>t)&_),i=this.bitmap;return 0==(i&o)?r:this.nodes[be(i&o-1)].get(t+y,e,n,r)},Yt.prototype.update=function(t,e,n,r,o,i,s){void 0===n&&(n=Ot(r));var a=(0===e?n:n>>>e)&_,u=1<<a,c=this.bitmap,l=0!=(c&u);if(!l&&o===v)return this;var h=be(c&u-1),f=this.nodes,d=l?f[h]:void 0,p=se(d,t,e+y,n,r,o,i,s);if(p===d)return this;if(!l&&p&&f.length>=Ie)return he(t,f,c,a,p);if(l&&!p&&2===f.length&&ae(f[1^h]))return f[1^h];if(l&&p&&1===f.length&&ae(p))return p;var g=t&&t===this.ownerID,b=l?p?c:c^u:c|u,m=l?p?_e(f,h,p,g):me(f,h,g):ve(f,h,p,g);return g?(this.bitmap=b,this.nodes=m,this):new Yt(t,b,m)},Jt.prototype.get=function(t,e,n,r){void 0===e&&(e=Ot(n));var o=(0===t?e:e>>>t)&_,i=this.nodes[o];return i?i.get(t+y,e,n,r):r},Jt.prototype.update=function(t,e,n,r,o,i,s){void 0===n&&(n=Ot(r));var a=(0===e?n:n>>>e)&_,u=o===v,c=this.nodes,l=c[a];if(u&&!l)return this;var h=se(l,t,e+y,n,r,o,i,s);if(h===l)return this;var f=this.count;if(l){if(!h&&--f<ke)return le(t,c,f,a)}else f++;var d=t&&t===this.ownerID,p=_e(c,a,h,d);return d?(this.count=f,this.nodes=p,this):new Jt(t,f,p)},Xt.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(bt(n,o[i][0]))return o[i][1];return r},Xt.prototype.update=function(t,e,n,r,o,i,s){void 0===n&&(n=Ot(r));var a=o===v;if(n!==this.keyHash)return a?this:(k(s),k(i),ue(this,t,e,n,[r,o]));for(var u=this.entries,c=0,l=u.length;c<l&&!bt(r,u[c][0]);c++);var h=c<l;if(h?u[c][1]===o:a)return this;if(k(s),(a||!h)&&k(i),a&&2===l)return new Qt(t,this.keyHash,u[1^c]);var f=t&&t===this.ownerID,d=f?u:E(u);return h?a?c===l-1?d.pop():d[c]=d.pop():d[c]=[r,o]:d.push([r,o]),f?(this.entries=d,this):new Xt(t,this.keyHash,d)},Qt.prototype.get=function(t,e,n,r){return bt(n,this.entry[0])?this.entry[1]:r},Qt.prototype.update=function(t,e,n,r,o,i,s){var a=o===v,u=bt(r,this.entry[0]);return(u?o===this.entry[1]:a)?this:(k(s),a?void k(i):u?t&&t===this.ownerID?(this.entry[1]=o,this):new Qt(t,this.keyHash,[r,o]):(k(i),ue(this,t,e,Ot(r),[r,o])))},Wt.prototype.iterate=Xt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===t(n[e?o-r:r]))return!1},Yt.prototype.iterate=Jt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[e?o-r:r];if(i&&!1===i.iterate(t,e))return!1}},Qt.prototype.iterate=function(t,e){return t(this.entry)},e(te,$),te.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,o=e.index++;if(r.entry){if(0===o)return ee(t,r.entry)}else if(r.entries){if(o<=(n=r.entries.length-1))return ee(t,r.entries[this._reverse?n-o:o])}else if(o<=(n=r.nodes.length-1)){var i=r.nodes[this._reverse?n-o:o];if(i){if(i.entry)return ee(t,i.entry);e=this._stack=ne(i,e)}continue}e=this._stack=this._stack.__prev}return D()};var we=b/4,Ie=b/2,ke=b/4;function xe(t){var e=Le();if(null==t)return e;if(Ee(t))return t;var n=o(t),r=n.size;return 0===r?e:(Pt(r),r>0&&r<b?Ue(0,r,y,null,new Oe(n.toArray())):e.withMutations((function(t){t.setSize(r),n.forEach((function(e,n){return t.set(n,e)}))})))}function Ee(t){return!(!t||!t[Se])}e(xe,xt),xe.of=function(){return this(arguments)},xe.prototype.toString=function(){return this.__toString("List [","]")},xe.prototype.get=function(t,e){if((t=A(this,t))>=0&&t<this.size){var n=Me(this,t+=this._origin);return n&&n.array[t&_]}return e},xe.prototype.set=function(t,e){return ze(this,t,e)},xe.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},xe.prototype.insert=function(t,e){return this.splice(t,0,e)},xe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=y,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Le()},xe.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){$e(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},xe.prototype.pop=function(){return $e(this,0,-1)},xe.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){$e(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},xe.prototype.shift=function(){return $e(this,1)},xe.prototype.merge=function(){return Ve(this,void 0,arguments)},xe.prototype.mergeWith=function(e){return Ve(this,e,t.call(arguments,1))},xe.prototype.mergeDeep=function(){return Ve(this,de,arguments)},xe.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Ve(this,pe(e),n)},xe.prototype.setSize=function(t){return $e(this,0,t)},xe.prototype.slice=function(t,e){var n=this.size;return j(t,e,n)?this:$e(this,R(t,n),C(e,n))},xe.prototype.__iterator=function(t,e){var n=0,r=Te(this,e);return new $((function(){var e=r();return e===Ce?D():V(t,n++,e)}))},xe.prototype.__iterate=function(t,e){for(var n,r=0,o=Te(this,e);(n=o())!==Ce&&!1!==t(n,r++,this););return r},xe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ue(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},xe.isList=Ee;var Se="@@__IMMUTABLE_LIST__@@",Ae=xe.prototype;function Oe(t,e){this.array=t,this.ownerID=e}Ae[Se]=!0,Ae[g]=Ae.remove,Ae.setIn=Gt.setIn,Ae.deleteIn=Ae.removeIn=Gt.removeIn,Ae.update=Gt.update,Ae.updateIn=Gt.updateIn,Ae.mergeIn=Gt.mergeIn,Ae.mergeDeepIn=Gt.mergeDeepIn,Ae.withMutations=Gt.withMutations,Ae.asMutable=Gt.asMutable,Ae.asImmutable=Gt.asImmutable,Ae.wasAltered=Gt.wasAltered,Oe.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&_;if(r>=this.array.length)return new Oe([],t);var o,i=0===r;if(e>0){var s=this.array[r];if((o=s&&s.removeBefore(t,e-y,n))===s&&i)return this}if(i&&!o)return this;var a=Be(this,t);if(!i)for(var u=0;u<r;u++)a.array[u]=void 0;return o&&(a.array[r]=o),a},Oe.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,o=n-1>>>e&_;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((r=i&&i.removeAfter(t,e-y,n))===i&&o===this.array.length-1)return this}var s=Be(this,t);return s.array.splice(o+1),r&&(s.array[o]=r),s};var je,Re,Ce={};function Te(t,e){var n=t._origin,r=t._capacity,o=De(r),i=t._tail;return s(t._root,t._level,0);function s(t,e,n){return 0===e?a(t,n):u(t,e,n)}function a(t,s){var a=s===o?i&&i.array:t&&t.array,u=s>n?0:n-s,c=r-s;return c>b&&(c=b),function(){if(u===c)return Ce;var t=e?--c:u++;return a&&a[t]}}function u(t,o,i){var a,u=t&&t.array,c=i>n?0:n-i>>o,l=1+(r-i>>o);return l>b&&(l=b),function(){for(;;){if(a){var t=a();if(t!==Ce)return t;a=null}if(c===l)return Ce;var n=e?--l:c++;a=s(u&&u[n],o-y,i+(n<<o))}}}}function Ue(t,e,n,r,o,i,s){var a=Object.create(Ae);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=o,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function Le(){return je||(je=Ue(0,0,y))}function ze(t,e,n){if((e=A(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?$e(t,e).set(0,n):$e(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,o=t._root,i=I(w);return e>=De(t._capacity)?r=Ne(r,t.__ownerID,0,e,n,i):o=Ne(o,t.__ownerID,t._level,e,n,i),i.value?t.__ownerID?(t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Ue(t._origin,t._capacity,t._level,o,r):t}function Ne(t,e,n,r,o,i){var s,a=r>>>n&_,u=t&&a<t.array.length;if(!u&&void 0===o)return t;if(n>0){var c=t&&t.array[a],l=Ne(c,e,n-y,r,o,i);return l===c?t:((s=Be(t,e)).array[a]=l,s)}return u&&t.array[a]===o?t:(k(i),s=Be(t,e),void 0===o&&a===s.array.length-1?s.array.pop():s.array[a]=o,s)}function Be(t,e){return e&&t&&e===t.ownerID?t:new Oe(t?t.array.slice():[],e)}function Me(t,e){if(e>=De(t._capacity))return t._tail;if(e<1<<t._level+y){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&_],r-=y;return n}}function $e(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new x,o=t._origin,i=t._capacity,s=o+e,a=void 0===n?i:n<0?i+n:o+n;if(s===o&&a===i)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,l=0;s+l<0;)c=new Oe(c&&c.array.length?[void 0,c]:[],r),l+=1<<(u+=y);l&&(s+=l,o+=l,a+=l,i+=l);for(var h=De(i),f=De(a);f>=1<<u+y;)c=new Oe(c&&c.array.length?[c]:[],r),u+=y;var d=t._tail,p=f<h?Me(t,a-1):f>h?new Oe([],r):d;if(d&&f>h&&s<i&&d.array.length){for(var g=c=Be(c,r),b=u;b>y;b-=y){var v=h>>>b&_;g=g.array[v]=Be(g.array[v],r)}g.array[h>>>y&_]=d}if(a<i&&(p=p&&p.removeAfter(r,0,a)),s>=f)s-=f,a-=f,u=y,c=null,p=p&&p.removeBefore(r,0,s);else if(s>o||f<h){for(l=0;c;){var m=s>>>u&_;if(m!==f>>>u&_)break;m&&(l+=(1<<u)*m),u-=y,c=c.array[m]}c&&s>o&&(c=c.removeBefore(r,u,s-l)),c&&f<h&&(c=c.removeAfter(r,u,f-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=p,t.__hash=void 0,t.__altered=!0,t):Ue(s,a,u,c,p)}function Ve(t,e,n){for(var r=[],i=0,a=0;a<n.length;a++){var u=n[a],c=o(u);c.size>i&&(i=c.size),s(u)||(c=c.map((function(t){return dt(t)}))),r.push(c)}return i>t.size&&(t=t.setSize(i)),ge(t,e,r)}function De(t){return t<b?0:t-1>>>y<<y}function qe(t){return null==t?Ke():Pe(t)?t:Ke().withMutations((function(e){var n=r(t);Pt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Pe(t){return Kt(t)&&l(t)}function Fe(t,e,n,r){var o=Object.create(qe.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=n,o.__hash=r,o}function Ke(){return Re||(Re=Fe(oe(),Le()))}function He(t,e,n){var r,o,i=t._map,s=t._list,a=i.get(e),u=void 0!==a;if(n===v){if(!u)return t;s.size>=b&&s.size>=2*i.size?(r=(o=s.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=o.__ownerID=t.__ownerID)):(r=i.remove(e),o=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;r=i,o=s.set(a,[e,n])}else r=i.set(e,s.size),o=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=o,t.__hash=void 0,t):Fe(r,o)}function Ze(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ge(t){this._iter=t,this.size=t.size}function We(t){this._iter=t,this.size=t.size}function Ye(t){this._iter=t,this.size=t.size}function Je(t){var e=vn(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=mn,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(e===z){var r=t.__iterator(e,n);return new $((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===L?U:L,n)},e}function Xe(t,e,n){var r=vn(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,o){var i=t.get(r,v);return i===v?o:e.call(n,i,r,t)},r.__iterateUncached=function(r,o){var i=this;return t.__iterate((function(t,o,s){return!1!==r(e.call(n,t,o,s),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=t.__iterator(z,o);return new $((function(){var o=i.next();if(o.done)return o;var s=o.value,a=s[0];return V(r,a,e.call(n,s[1],a,t),o)}))},r}function Qe(t,e){var n=vn(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Je(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=mn,n.__iterate=function(e,n){var r=this;return t.__iterate((function(t,n){return e(t,n,r)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function tn(t,e,n,r){var o=vn(t);return r&&(o.has=function(r){var o=t.get(r,v);return o!==v&&!!e.call(n,o,r,t)},o.get=function(r,o){var i=t.get(r,v);return i!==v&&e.call(n,i,r,t)?i:o}),o.__iterateUncached=function(o,i){var s=this,a=0;return t.__iterate((function(t,i,u){if(e.call(n,t,i,u))return a++,o(t,r?i:a-1,s)}),i),a},o.__iteratorUncached=function(o,i){var s=t.__iterator(z,i),a=0;return new $((function(){for(;;){var i=s.next();if(i.done)return i;var u=i.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return V(o,r?c:a++,l,i)}}))},o}function en(t,e,n){var r=Ft().asMutable();return t.__iterate((function(o,i){r.update(e.call(n,o,i,t),0,(function(t){return t+1}))})),r.asImmutable()}function nn(t,e,n){var r=a(t),o=(l(t)?qe():Ft()).asMutable();t.__iterate((function(i,s){o.update(e.call(n,i,s,t),(function(t){return(t=t||[]).push(r?[s,i]:i),t}))}));var i=_n(t);return o.map((function(e){return gn(t,i(e))}))}function rn(t,e,n,r){var o=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=o:n|=0),j(e,n,o))return t;var i=R(e,o),s=C(n,o);if(i!=i||s!=s)return rn(t.toSeq().cacheResult(),e,n,r);var a,u=s-i;u==u&&(a=u<0?0:u);var c=vn(t);return c.size=0===a?a:t.size&&a||void 0,!r&&it(t)&&a>=0&&(c.get=function(e,n){return(e=A(this,e))>=0&&e<a?t.get(e+i,n):n}),c.__iterateUncached=function(e,n){var o=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,u=!0,c=0;return t.__iterate((function(t,n){if(!u||!(u=s++<i))return c++,!1!==e(t,r?n:c-1,o)&&c!==a})),c},c.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var o=0!==a&&t.__iterator(e,n),s=0,u=0;return new $((function(){for(;s++<i;)o.next();if(++u>a)return D();var t=o.next();return r||e===L?t:V(e,u-1,e===U?void 0:t.value[1],t)}))},c}function on(t,e,n){var r=vn(t);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var s=0;return t.__iterate((function(t,o,a){return e.call(n,t,o,a)&&++s&&r(t,o,i)})),s},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var s=t.__iterator(z,o),a=!0;return new $((function(){if(!a)return D();var t=s.next();if(t.done)return t;var o=t.value,u=o[0],c=o[1];return e.call(n,c,u,i)?r===z?t:V(r,u,c,t):(a=!1,D())}))},r}function sn(t,e,n,r){var o=vn(t);return o.__iterateUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterate(o,i);var a=!0,u=0;return t.__iterate((function(t,i,c){if(!a||!(a=e.call(n,t,i,c)))return u++,o(t,r?i:u-1,s)})),u},o.__iteratorUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterator(o,i);var a=t.__iterator(z,i),u=!0,c=0;return new $((function(){var t,i,l;do{if((t=a.next()).done)return r||o===L?t:V(o,c++,o===U?void 0:t.value[1],t);var h=t.value;i=h[0],l=h[1],u&&(u=e.call(n,l,i,s))}while(u);return o===z?t:V(o,i,l,t)}))},o}function an(t,e){var n=a(t),o=[t].concat(e).map((function(t){return s(t)?n&&(t=r(t)):t=n?at(t):ut(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===o.length)return t;if(1===o.length){var i=o[0];if(i===t||n&&a(i)||u(t)&&u(i))return i}var c=new et(o);return n?c=c.toKeyedSeq():u(t)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=o.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),c}function un(t,e,n){var r=vn(t);return r.__iterateUncached=function(r,o){var i=0,a=!1;function u(t,c){var l=this;t.__iterate((function(t,o){return(!e||c<e)&&s(t)?u(t,c+1):!1===r(t,n?o:i++,l)&&(a=!0),!a}),o)}return u(t,0),i},r.__iteratorUncached=function(r,o){var i=t.__iterator(r,o),a=[],u=0;return new $((function(){for(;i;){var t=i.next();if(!1===t.done){var c=t.value;if(r===z&&(c=c[1]),e&&!(a.length<e)||!s(c))return n?t:V(r,u++,c,t);a.push(i),i=c.__iterator(r,o)}else i=a.pop()}return D()}))},r}function cn(t,e,n){var r=_n(t);return t.toSeq().map((function(o,i){return r(e.call(n,o,i,t))})).flatten(!0)}function ln(t,e){var n=vn(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return t.__iterate((function(t,r){return(!i||!1!==n(e,i++,o))&&!1!==n(t,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=t.__iterator(L,r),s=0;return new $((function(){return(!o||s%2)&&(o=i.next()).done?o:s%2?V(n,s++,e):V(n,s++,o.value,o)}))},n}function hn(t,e,n){e||(e=wn);var r=a(t),o=0,i=t.toSeq().map((function(e,r){return[r,e,o++,n?n(e,r,t):e]})).toArray();return i.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),r?G(i):u(t)?W(i):Y(i)}function fn(t,e,n){if(e||(e=wn),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return dn(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return dn(e,t,n)?n:t}))}function dn(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function pn(t,e,r){var o=vn(t);return o.size=new et(r).map((function(t){return t.size})).min(),o.__iterate=function(t,e){for(var n,r=this.__iterator(L,e),o=0;!(n=r.next()).done&&!1!==t(n.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=r.map((function(t){return t=n(t),F(o?t.reverse():t)})),s=0,a=!1;return new $((function(){var n;return a||(n=i.map((function(t){return t.next()})),a=n.some((function(t){return t.done}))),a?D():V(t,s++,e.apply(null,n.map((function(t){return t.value}))))}))},o}function gn(t,e){return it(t)?e:t.constructor(e)}function yn(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function bn(t){return Pt(t.size),S(t)}function _n(t){return a(t)?r:u(t)?o:i}function vn(t){return Object.create((a(t)?G:u(t)?W:Y).prototype)}function mn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Z.prototype.cacheResult.call(this)}function wn(t,e){return t>e?1:t<e?-1:0}function In(t){var e=F(t);if(!e){if(!H(t))throw new TypeError("Expected iterable or array-like: "+t);e=F(n(t))}return e}function kn(t,e){var n,r=function(i){if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var s=Object.keys(t);An(o,s),o.size=s.length,o._name=e,o._keys=s,o._defaultValues=t}this._map=Ft(i)},o=r.prototype=Object.create(xn);return o.constructor=r,r}e(qe,Ft),qe.of=function(){return this(arguments)},qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},qe.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ke()},qe.prototype.set=function(t,e){return He(this,t,e)},qe.prototype.remove=function(t){return He(this,t,v)},qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},qe.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},qe.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},qe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Fe(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},qe.isOrderedMap=Pe,qe.prototype[p]=!0,qe.prototype[g]=qe.prototype.remove,e(Ze,G),Ze.prototype.get=function(t,e){return this._iter.get(t,e)},Ze.prototype.has=function(t){return this._iter.has(t)},Ze.prototype.valueSeq=function(){return this._iter.valueSeq()},Ze.prototype.reverse=function(){var t=this,e=Qe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Ze.prototype.map=function(t,e){var n=this,r=Xe(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},Ze.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?bn(this):0,function(o){return t(o,e?--n:n++,r)}),e)},Ze.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(L,e),r=e?bn(this):0;return new $((function(){var o=n.next();return o.done?o:V(t,e?--r:r++,o.value,o)}))},Ze.prototype[p]=!0,e(Ge,W),Ge.prototype.includes=function(t){return this._iter.includes(t)},Ge.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate((function(e){return t(e,r++,n)}),e)},Ge.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e),r=0;return new $((function(){var e=n.next();return e.done?e:V(t,r++,e.value,e)}))},e(We,Y),We.prototype.has=function(t){return this._iter.includes(t)},We.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},We.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new $((function(){var e=n.next();return e.done?e:V(t,e.value,e.value,e)}))},e(Ye,G),Ye.prototype.entrySeq=function(){return this._iter.toSeq()},Ye.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){yn(e);var r=s(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},Ye.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new $((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){yn(r);var o=s(r);return V(t,o?r.get(0):r[0],o?r.get(1):r[1],e)}}}))},Ge.prototype.cacheResult=Ze.prototype.cacheResult=We.prototype.cacheResult=Ye.prototype.cacheResult=mn,e(kn,kt),kn.prototype.toString=function(){return this.__toString(Sn(this)+" {","}")},kn.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},kn.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},kn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=En(this,oe()))},kn.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Sn(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:En(this,n)},kn.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:En(this,e)},kn.prototype.wasAltered=function(){return this._map.wasAltered()},kn.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},kn.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},kn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?En(this,e,t):(this.__ownerID=t,this._map=e,this)};var xn=kn.prototype;function En(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Sn(t){return t._name||t.constructor.name||"Record"}function An(t,e){try{e.forEach(On.bind(void 0,t))}catch(n){}}function On(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){mt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function jn(t){return null==t?Nn():Rn(t)&&!l(t)?t:Nn().withMutations((function(e){var n=i(t);Pt(n.size),n.forEach((function(t){return e.add(t)}))}))}function Rn(t){return!(!t||!t[Tn])}xn[g]=xn.remove,xn.deleteIn=xn.removeIn=Gt.removeIn,xn.merge=Gt.merge,xn.mergeWith=Gt.mergeWith,xn.mergeIn=Gt.mergeIn,xn.mergeDeep=Gt.mergeDeep,xn.mergeDeepWith=Gt.mergeDeepWith,xn.mergeDeepIn=Gt.mergeDeepIn,xn.setIn=Gt.setIn,xn.update=Gt.update,xn.updateIn=Gt.updateIn,xn.withMutations=Gt.withMutations,xn.asMutable=Gt.asMutable,xn.asImmutable=Gt.asImmutable,e(jn,Et),jn.of=function(){return this(arguments)},jn.fromKeys=function(t){return this(r(t).keySeq())},jn.prototype.toString=function(){return this.__toString("Set {","}")},jn.prototype.has=function(t){return this._map.has(t)},jn.prototype.add=function(t){return Ln(this,this._map.set(t,!0))},jn.prototype.remove=function(t){return Ln(this,this._map.remove(t))},jn.prototype.clear=function(){return Ln(this,this._map.clear())},jn.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},jn.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},jn.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},jn.prototype.merge=function(){return this.union.apply(this,arguments)},jn.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},jn.prototype.sort=function(t){return Bn(hn(this,t))},jn.prototype.sortBy=function(t,e){return Bn(hn(this,e,t))},jn.prototype.wasAltered=function(){return this._map.wasAltered()},jn.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,r){return t(r,r,n)}),e)},jn.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},jn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},jn.isSet=Rn;var Cn,Tn="@@__IMMUTABLE_SET__@@",Un=jn.prototype;function Ln(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function zn(t,e){var n=Object.create(Un);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Nn(){return Cn||(Cn=zn(oe()))}function Bn(t){return null==t?qn():Mn(t)?t:qn().withMutations((function(e){var n=i(t);Pt(n.size),n.forEach((function(t){return e.add(t)}))}))}function Mn(t){return Rn(t)&&l(t)}Un[Tn]=!0,Un[g]=Un.remove,Un.mergeDeep=Un.merge,Un.mergeDeepWith=Un.mergeWith,Un.withMutations=Gt.withMutations,Un.asMutable=Gt.asMutable,Un.asImmutable=Gt.asImmutable,Un.__empty=Nn,Un.__make=zn,e(Bn,jn),Bn.of=function(){return this(arguments)},Bn.fromKeys=function(t){return this(r(t).keySeq())},Bn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Bn.isOrderedSet=Mn;var $n,Vn=Bn.prototype;function Dn(t,e){var n=Object.create(Vn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function qn(){return $n||($n=Dn(Ke()))}function Pn(t){return null==t?Wn():Fn(t)?t:Wn().unshiftAll(t)}function Fn(t){return!(!t||!t[Hn])}Vn[p]=!0,Vn.__empty=qn,Vn.__make=Dn,e(Pn,xt),Pn.of=function(){return this(arguments)},Pn.prototype.toString=function(){return this.__toString("Stack [","]")},Pn.prototype.get=function(t,e){var n=this._head;for(t=A(this,t);n&&t--;)n=n.next;return n?n.value:e},Pn.prototype.peek=function(){return this._head&&this._head.value},Pn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Gn(t,e)},Pn.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;Pt(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Gn(e,n)},Pn.prototype.pop=function(){return this.slice(1)},Pn.prototype.unshift=function(){return this.push.apply(this,arguments)},Pn.prototype.unshiftAll=function(t){return this.pushAll(t)},Pn.prototype.shift=function(){return this.pop.apply(this,arguments)},Pn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Wn()},Pn.prototype.slice=function(t,e){if(j(t,e,this.size))return this;var n=R(t,this.size);if(C(e,this.size)!==this.size)return xt.prototype.slice.call(this,t,e);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):Gn(r,o)},Pn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Gn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Pn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},Pn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new $((function(){if(r){var e=r.value;return r=r.next,V(t,n++,e)}return D()}))},Pn.isStack=Fn;var Kn,Hn="@@__IMMUTABLE_STACK__@@",Zn=Pn.prototype;function Gn(t,e,n,r){var o=Object.create(Zn);return o.size=t,o._head=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Wn(){return Kn||(Kn=Gn(0))}function Yn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}Zn[Hn]=!0,Zn.withMutations=Gt.withMutations,Zn.asMutable=Gt.asMutable,Zn.asImmutable=Gt.asImmutable,Zn.wasAltered=Gt.wasAltered,n.Iterator=$,Yn(n,{toArray:function(){Pt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new Ge(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Ze(this,!0)},toMap:function(){return Ft(this.toKeyedSeq())},toObject:function(){Pt(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return qe(this.toKeyedSeq())},toOrderedSet:function(){return Bn(a(this)?this.valueSeq():this)},toSet:function(){return jn(a(this)?this.valueSeq():this)},toSetSeq:function(){return new We(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Pn(a(this)?this.valueSeq():this)},toList:function(){return xe(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return gn(this,an(this,t.call(arguments,0)))},includes:function(t){return this.some((function(e){return bt(e,t)}))},entries:function(){return this.__iterator(z)},every:function(t,e){Pt(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!t.call(e,r,o,i))return n=!1,!1})),n},filter:function(t,e){return gn(this,tn(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Pt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Pt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(U)},map:function(t,e){return gn(this,Xe(this,t,e))},reduce:function(t,e,n){var r,o;return Pt(this.size),arguments.length<2?o=!0:r=e,this.__iterate((function(e,i,s){o?(o=!1,r=e):r=t.call(n,r,e,i,s)})),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return gn(this,Qe(this,!0))},slice:function(t,e){return gn(this,rn(this,t,e,!0))},some:function(t,e){return!this.every(er(t),e)},sort:function(t){return gn(this,hn(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return S(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return en(this,t,e)},equals:function(t){return _t(this,t)},entrySeq:function(){var t=this;if(t._cache)return new et(t._cache);var e=t.toSeq().map(tr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(er(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,o,i){if(t.call(e,n,o,i))return r=[o,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(O)},flatMap:function(t,e){return gn(this,cn(this,t,e))},flatten:function(t){return gn(this,un(this,t,!0))},fromEntrySeq:function(){return new Ye(this)},get:function(t,e){return this.find((function(e,n){return bt(n,t)}),void 0,e)},getIn:function(t,e){for(var n,r=this,o=In(t);!(n=o.next()).done;){var i=n.value;if((r=r&&r.get?r.get(i,v):v)===v)return e}return r},groupBy:function(t,e){return nn(this,t,e)},has:function(t){return this.get(t,v)!==v},hasIn:function(t){return this.getIn(t,v)!==v},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return bt(e,t)}))},keySeq:function(){return this.toSeq().map(Qn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return fn(this,t)},maxBy:function(t,e){return fn(this,e,t)},min:function(t){return fn(this,t?nr(t):ir)},minBy:function(t,e){return fn(this,e?nr(e):ir,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return gn(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return gn(this,sn(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(er(t),e)},sortBy:function(t,e){return gn(this,hn(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return gn(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return gn(this,on(this,t,e))},takeUntil:function(t,e){return this.takeWhile(er(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=sr(this))}});var Jn=n.prototype;Jn[h]=!0,Jn[M]=Jn.values,Jn.__toJS=Jn.toArray,Jn.__toStringMapper=rr,Jn.inspect=Jn.toSource=function(){return this.toString()},Jn.chain=Jn.flatMap,Jn.contains=Jn.includes,Yn(r,{flip:function(){return gn(this,Je(this))},mapEntries:function(t,e){var n=this,r=0;return gn(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return gn(this,this.toSeq().flip().map((function(r,o){return t.call(e,r,o,n)})).flip())}});var Xn=r.prototype;function Qn(t,e){return e}function tr(t,e){return[e,t]}function er(t){return function(){return!t.apply(this,arguments)}}function nr(t){return function(){return-t.apply(this,arguments)}}function rr(t){return"string"==typeof t?JSON.stringify(t):String(t)}function or(){return E(arguments)}function ir(t,e){return t<e?1:t>e?-1:0}function sr(t){if(t.size===1/0)return 0;var e=l(t),n=a(t),r=e?1:0;return ar(t.__iterate(n?e?function(t,e){r=31*r+ur(Ot(t),Ot(e))|0}:function(t,e){r=r+ur(Ot(t),Ot(e))|0}:e?function(t){r=31*r+Ot(t)|0}:function(t){r=r+Ot(t)|0}),r)}function ar(t,e){return e=St(e,3432918353),e=St(e<<15|e>>>-15,461845907),e=St(e<<13|e>>>-13,5),e=St((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=At((e=St(e^e>>>13,3266489909))^e>>>16)}function ur(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Xn[f]=!0,Xn[M]=Jn.entries,Xn.__toJS=Jn.toObject,Xn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+rr(t)},Yn(o,{toKeyedSeq:function(){return new Ze(this,!1)},filter:function(t,e){return gn(this,tn(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return gn(this,Qe(this,!1))},slice:function(t,e){return gn(this,rn(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=R(t,t<0?this.count():this.size);var r=this.slice(0,t);return gn(this,1===n?r:r.concat(E(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return gn(this,un(this,t,!1))},get:function(t,e){return(t=A(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=A(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return gn(this,ln(this,t))},interleave:function(){var t=[this].concat(E(arguments)),e=pn(this.toSeq(),W.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),gn(this,n)},keySeq:function(){return wt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return gn(this,sn(this,t,e,!1))},zip:function(){return gn(this,pn(this,or,[this].concat(E(arguments))))},zipWith:function(t){var e=E(arguments);return e[0]=this,gn(this,pn(this,t,e))}}),o.prototype[d]=!0,o.prototype[p]=!0,Yn(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Jn.includes,i.prototype.contains=i.prototype.includes,Yn(G,r.prototype),Yn(W,o.prototype),Yn(Y,i.prototype),Yn(kt,r.prototype),Yn(xt,o.prototype),Yn(Et,i.prototype),{Iterable:n,Seq:Z,Collection:It,Map:Ft,OrderedMap:qe,List:xe,Stack:Pn,Set:jn,OrderedSet:Bn,Record:kn,Range:wt,Repeat:vt,is:bt,fromJS:dt}}();const{Map:la}=ca.exports;class ha{constructor(t,e,n,r,o,i,s){this.key=t,this.value=e,this.level=n,this.prevKey=r,this.nextKey=o,this.prevCount=i,this.nextCount=s}setValue(t){return new ha(this.key,t,this.level,this.prevKey,this.nextKey,this.prevCount,this.nextCount)}insertAfter(t,e,n,r){if(e>this.level&&null!==this.key)throw new RangeError("Cannot increase the level of a non-head node");const o=Math.max(this.level,e),i=this.nextKey.slice(),s=this.nextCount.slice();for(let a=n;a<o;a++)a<e?(i[a]=t,s[a]=r):s[a]+=1;return new ha(this.key,this.value,o,this.prevKey,i,this.prevCount,s)}insertBefore(t,e,n,r){if(e>this.level)throw new RangeError("Cannot increase node level");const o=this.prevKey.slice(),i=this.prevCount.slice();for(let s=n;s<this.level;s++)s<e?(o[s]=t,i[s]=r):i[s]+=1;return new ha(this.key,this.value,this.level,o,this.nextKey,i,this.nextCount)}removeAfter(t,e,n,r){const o=this.nextKey.slice(),i=this.nextCount.slice();for(let s=t;s<this.level;s++)s<e?(o[s]=n[s],i[s]=r[s]):i[s]-=1;return new ha(this.key,this.value,this.level,this.prevKey,o,this.prevCount,i)}removeBefore(t,e,n,r){const o=this.prevKey.slice(),i=this.prevCount.slice();for(let s=t;s<this.level;s++)s<e?(o[s]=n[s],i[s]=r[s]):i[s]-=1;return new ha(this.key,this.value,this.level,o,this.nextKey,i,this.nextCount)}}class fa{constructor(t){const e=new ha(null,null,1,[],[null],[],[null]),n=t?t():{next(){const t=Math.floor(4294967296*Math.random());let e=1;for(;t<1<<32-2*e&&e<16;)e+=1;return{value:e,done:!1}}};return da(0,la().set(null,e),n)}get headNode(){return this._nodes.get(null)}predecessors(t,e){const n=[t],r=[1];for(let o=1;o<e;o++){let t=n[o-1],e=r[o-1];for(;t;){let n=this._nodes.get(t);if(n.level>o)break;if(n.level<o)throw new RangeError("Node "+t+" below expected level "+(o-1));e+=n.prevCount[o-1],t=n.prevKey[o-1]}n[o]=t,r[o]=e}return{preKeys:n,preCounts:r}}successors(t,e){const n=[t],r=[1];for(let o=1;o<e;o++){let t=n[o-1],e=r[o-1];for(;t;){let n=this._nodes.get(t);if(n.level>o)break;if(n.level<o)throw new RangeError("Node "+t+" below expected level "+(o-1));e+=n.nextCount[o-1],t=n.nextKey[o-1]}n[o]=t,r[o]=e}return{sucKeys:n,sucCounts:r}}insertAfter(t,e,n){if("string"!=typeof e||""===e)throw new RangeError("Key must be a nonempty string");if(!this._nodes.has(t))throw new RangeError("The referenced predecessor key does not exist");if(this._nodes.has(e))throw new RangeError("Cannot insert a key that already exists");const r=this._randomSource.next().value,o=Math.max(r,this.headNode.level),i=this._nodes.get(t).nextKey[0]||null,{preKeys:s,preCounts:a}=this.predecessors(t,o),{sucKeys:u,sucCounts:c}=this.successors(i,o);return da(this.length+1,this._nodes.withMutations((t=>{let i=0,l=0;for(let n=1;n<=o;n++){const h=Math.min(n,r);n!==o&&s[n]===s[i]||(t.update(s[i],(t=>t.insertAfter(e,h,i,a[i]))),i=n),!u[l]||n!==o&&u[n]===u[l]||(t.update(u[l],(t=>t.insertBefore(e,h,l,c[l]))),l=n)}t.set(e,new ha(e,n,r,s.slice(0,r),u.slice(0,r),a.slice(0,r),c.slice(0,r)))})),this._randomSource)}insertIndex(t,e,n){if("number"!=typeof t||t<0)throw new RangeError("Index must be a non-negative integer");return 0===t?this.insertAfter(null,e,n):this.insertAfter(this.keyOf(t-1),e,n)}removeKey(t){if("string"!=typeof t||!this._nodes.has(t))throw new RangeError("The given key cannot be removed because it does not exist");const e=this._nodes.get(t),n=this.headNode.level,{preKeys:r,preCounts:o}=this.predecessors(e.prevKey[0],n),{sucKeys:i,sucCounts:s}=this.successors(e.nextKey[0],n),a=new Array(n);for(let u=0;u<n;u++)a[u]=o[u]+s[u]-1;return da(this.length-1,this._nodes.withMutations((o=>{o.remove(t);let s=0,u=0;for(let t=1;t<=n;t++){const c=Math.min(t,e.level);t!==n&&r[t]===r[s]||(o.update(r[s],(t=>t.removeAfter(s,c,i,a))),s=t),!i[u]||t!==n&&i[t]===i[u]||(o.update(i[u],(t=>t.removeBefore(u,c,r,a))),u=t)}})),this._randomSource)}removeIndex(t){return this.removeKey(this.keyOf(t))}indexOf(t){if("string"!=typeof t||""===t||!this._nodes.has(t))return-1;let e=this._nodes.get(t),n=0;for(;e&&e.key;)n+=e.prevCount[e.level-1],e=this._nodes.get(e.prevKey[e.level-1]);return n-1}keyOf(t){if("number"!=typeof t)return null;if(t<0&&(t+=this.length),t<0||t>=this.length)return null;let e=this._nodes.get(null),n=e.level-1,r=0;for(;;){if(r===t+1)return e.key;r+e.nextCount[n]>t+1?n-=1:(r+=e.nextCount[n],e=this._nodes.get(e.nextKey[n]))}}getValue(t){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");const e=this._nodes.get(t);return e&&e.value}setValue(t,e){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");let n=this._nodes.get(t);if(!n)throw new RangeError("The referenced key does not exist");return n=n.setValue(e),da(this.length,this._nodes.set(t,n),this._randomSource)}iterator(t){const e=this._nodes;let n=e.get(null).nextKey[0];return{next(){if(!n)return{value:void 0,done:!0};const r=e.get(n);let o;switch(t){case"keys":o={value:n,done:!1};break;case"values":o={value:r.value,done:!1};break;case"entries":o={value:[n,r.value],done:!1}}return n=r.nextKey[0],o},[Symbol.iterator]:()=>this.iterator(t)}}[Symbol.iterator](){return this.iterator("values")}}function da(t,e,n){const r=Object.create(fa.prototype);return r.length=t,r._nodes=e,r._randomSource=n,r}var pa={SkipList:fa};const{Map:ga,List:ya,Set:ba,fromJS:_a}=ca.exports,{SkipList:va}=pa,{decodeChange:ma,decodeChangeMeta:wa,appendEdit:Ia}=ua,{parseOpId:ka}=Vt;function xa(t,e){for(let n of e.deps)if(!t.hasIn(["hashes",n]))return!1;return!0}function Ea(t,e){if("_root"===e)return"map";const n=t.getIn(["byObject",e,"_init","action"]),r={makeMap:"map",makeTable:"table",makeList:"list",makeText:"text"}[n];if(!r)throw new RangeError(`Unknown object type ${n} for ${e}`);return r}function Sa(t,e,n){const r=Oa(e),o=e.get("action");if(t.hasIn(["byObject",r,"_keys"]))throw new Error(`Duplicate creation of object ${r}`);let i=ga({_init:e,_inbound:ba(),_keys:ga()});return"makeList"!==o&&"makeText"!==o||(i=i.set("_elemIds",new va)),t=t.setIn(["byObject",r],i),n&&(n.objectId=r,n.type=Ea(t,r),n.props={},"list"!==n.type&&"text"!==n.type||(n.edits=[])),t}function Aa(t){const e=t.get("action");return e.startsWith("make")||"link"===e}function Oa(t){return t.get("child",t.get("opId"))}function ja(t){const e=t.get("key");if(e)return e;const n=t.get("insert")?t.get("opId"):t.get("elemId");if(!n)throw new RangeError(`operation has no key: ${t}`);return n}function Ra(t,e,n){const r=e.get("obj"),o=e.get("action"),i=ja(e);if(!t.get("byObject").has(r))throw new RangeError(`Modification of unknown object ${r}`);const s=Ea(t,r);if(n){if(n.objectId=n.objectId||r,n.objectId!==r)throw new RangeError(`objectId mismatch in patch: ${n.objectId} != ${r}`);if(n.type=n.type||s,n.type!==s)throw new RangeError(`object type mismatch in patch: ${n.type} != ${s}`);"list"===s||"text"===s||n.props[i]||(n.props[i]={})}if(o.startsWith("make"))if(n){const r={};t=Sa(t,e,r),"map"!==s&&"table"!==s||(n.props[i][e.get("opId")]=r)}else t=Sa(t,e);"link"===o&&n&&(n.props[i][e.get("opId")]=Ha(t,Oa(e)));const a=Ma(t,r,i);let u,c;if("inc"===o)u=ya(),c=a.map((t=>"set"===t.get("action")&&"number"==typeof t.get("value")&&"counter"===t.get("datatype")&&e.get("pred").includes(t.get("opId"))?t.set("value",t.get("value")+e.get("value")):t));else{const t=a.groupBy((t=>e.get("pred").includes(t.get("opId"))));u=t.get(!0,ya()),c=t.get(!1,ya())}for(let l of u.filter(Aa))t=t.updateIn(["byObject",Oa(l),"_inbound"],(t=>t.remove(l)));return Aa(e)&&(t=t.updateIn(["byObject",Oa(e),"_inbound"],ba(),(t=>t.add(e)))),("set"===o||Aa(e))&&(c=c.push(e)),c=c.sort(Va).reverse(),t=t.setIn(["byObject",r,"_keys",i],c),"list"===s||"text"===s?t=function(t,e,n,r){const o=Ma(t,e,n);let i=t.getIn(["byObject",e,"_elemIds"]),s=i.indexOf(n);if(s>=0)i=o.isEmpty()?i.removeIndex(s):i.setValue(n,o.first().get("value")),La(t,e,n,s,!1,r);else{if(o.isEmpty())return t;let a=n;for(;s=-1,a=Fa(t,e,a),a&&(s=i.indexOf(a),!(s>=0)););s+=1,i=i.insertIndex(s,n,o.first().get("value")),La(t,e,n,s,!0,r)}return t.setIn(["byObject",e,"_elemIds"],i)}(t,r,i,n):Ua(t,r,i,n),t}function Ca(t,e,n){const r=e.get("obj"),o=e.get("opId"),i=ja(e),s=Ea(t,r);if(n.objectId=n.objectId||r,n.type=n.type||s,n.objectId!==r)throw new RangeError(`objectId mismatch in path: ${n.objectId} != ${r}`);if(n.type!==s)throw new RangeError(`object type mismatch in path: ${n.type} != ${s}`);if(!n.props[i]||!n.props[i][o])if("list"===s||"text"===s){const e=t.getIn(["byObject",r,"_elemIds"]).indexOf(i);La(t,r,i,e,!1,n)}else Ua(t,r,i,n);if(void 0===n.props[i][o])throw new RangeError(`field ops for ${i} did not contain opId ${o}`);return n.props[i][o]}function Ta(t,e){if("set"===e.get("action")){const t={type:"value",value:e.get("value")};return e.get("datatype")&&(t.datatype=e.get("datatype")),t}if(Aa(e)){const n=Oa(e),r=Ea(t,n);return"list"===r||"text"===r?{objectId:n,type:r,props:{},edits:[]}:{objectId:n,type:r,props:{}}}throw new RangeError(`Unexpected operation in field ops: ${e.get("action")}`)}function Ua(t,e,n,r){if(!r)return;r.props[n]||(r.props[n]={});const o={};for(let i of Ma(t,e,n)){const e=i.get("opId");o[e]=!0,Aa(i)&&r.props[n][e]||(r.props[n][e]=Ta(t,i))}for(let i of Object.keys(r.props[n]))o[i]||delete r.props[n][i]}function La(t,e,n,r,o,i){if(i)if(Ua(t,e,n,i),0!==Object.keys(i.props[n]).length){for(;!o&&i.edits.length>0&&i.edits[i.edits.length-1].index===r&&["insert","update"].includes(i.edits[i.edits.length-1].action);){o="insert"===i.edits.pop().action}for(const t of Object.keys(i.props[n]).sort(Da)){const e=i.props[n][t];Ia(i.edits,o?{action:"insert",index:r,elemId:n,opId:t,value:e}:{action:"update",index:r,opId:t,value:e}),o=!1}}else Ia(i.edits,{action:"remove",index:r,count:1})}function za(t,e,n){const r=e.get("actor"),o=e.get("startOp");let i=ba();return e.get("ops").forEach(((e,s)=>{const a=e.get("action"),u=e.get("obj"),c=e.get("insert");if(!["set","del","inc","link","makeMap","makeList","makeText","makeTable"].includes(a))throw new RangeError(`Unknown operation action: ${a}`);if(!e.get("pred"))throw new RangeError(`Missing 'pred' field in operation ${e}`);let l;if(n){const e=function(t,e){let n=[];for(;"_root"!==e;){const r=t.getIn(["byObject",e,"_inbound"],ba()).first();if(!r)return null;n.unshift(r),e=r.get("obj")}return n}(t,u);if(null!==e){l=n;for(let n of e)l=Ca(t,n,l)}}const h=e.merge({opId:`${o+s}@${r}`});c&&(t=function(t,e){const n=e.get("obj"),r=e.get("opId");if(!t.get("byObject").has(n))throw new Error(`Modification of unknown object ${n}`);if(t.hasIn(["byObject",n,"_insertion",r]))throw new Error(`Duplicate list element ID ${r}`);if(!e.get("elemId"))throw new RangeError("insert operation has no key");return t.updateIn(["byObject",n,"_following",e.get("elemId")],ya(),(t=>t.push(e))).setIn(["byObject",n,"_insertion",r],e)}(t,h)),a.startsWith("make")&&(i=i.add(Oa(h))),t=Ra(t,h,l)})),t}function Na(t,e,n){const r=_a(ma(e)),o=r.get("actor"),i=r.get("seq"),s=r.get("startOp"),a=r.get("hash");if("string"!=typeof o||"number"!=typeof i||"number"!=typeof s)throw new TypeError(`Missing change metadata: actor = ${o}, seq = ${i}, startOp = ${s}`);if(t.hasIn(["hashes",a]))return t;const u=t.getIn(["states",o],ya()).size+1;if(i!==u)throw new RangeError(`Expected change ${u} by ${o}, got change ${i}`);let c=0;for(let d of r.get("deps")){const e=t.getIn(["hashes",d,"maxOpId"]);if(void 0===e)throw new RangeError(`Unknown dependency hash ${d}`);c=Math.max(c,e),t=t.updateIn(["hashes",d,"depsFuture"],ba(),(t=>t.add(a)))}if(s!==c+1)throw new RangeError(`Expected startOp to be ${c+1}, was ${s}`);let l=r.get("deps"),h=1===i;for(;!h&&!l.isEmpty();){const e=t.getIn(["hashes",l.first()]);l=l.shift(),e.get("actor")===o&&e.get("seq")===i-1?h=!0:l=l.concat(e.get("depsPast"))}if(!h)throw new RangeError("Change lacks dependency on prior sequence number by the same actor");const f=ga({actor:o,seq:i,startOp:s,change:e,maxOpId:s+r.get("ops").size-1,depsPast:r.get("deps").toSet(),depsFuture:ba()});return(t=za(t,r,n)).setIn(["hashes",a],f).updateIn(["states",o],ya(),(t=>t.push(a))).update("deps",(t=>t.subtract(r.get("deps")).add(a))).update("maxOp",(t=>Math.max(t,f.get("maxOpId")))).update("history",(t=>t.push(a)))}function Ba(t,e){return t.getIn(["hashes",e,"change"])}function Ma(t,e,n){return t.getIn(["byObject",e,"_keys",n],ya())}function $a(t,e,n){if("_head"===n)return;const r=t.getIn(["byObject",e,"_insertion",n]);if(!r)throw new TypeError(`Missing index entry for list element ${n}`);return r.get("elemId")}function Va(t,e){return Da(t.get("opId"),e.get("opId"))}function Da(t,e){const n=ka(t),r=ka(e);return n.counter<r.counter?-1:n.counter>r.counter?1:n.actorId<r.actorId?-1:n.actorId>r.actorId?1:0}function qa(t,e,n,r){let o=null;return r&&(o=ga({opId:r})),t.getIn(["byObject",e,"_following",n],ya()).filter((t=>t.get("insert")&&(!o||Va(t,o)<0))).sort(Va).reverse().map((t=>t.get("opId")))}function Pa(t,e,n){const r=qa(t,e,n);if(!r.isEmpty())return r.first();let o;for(;;){if(o=$a(t,e,n),!o)return;const r=qa(t,e,o,n);if(!r.isEmpty())return r.first();n=o}}function Fa(t,e,n){const r=$a(t,e,n);let o,i=qa(t,e,r);if(i.first()===n)return"_head"===r?null:r;for(let s of i){if(s===n)break;o=s}for(;;){if(i=qa(t,e,o),i.isEmpty())return o;o=i.last()}}function Ka(t,e){if(Aa(e))return Ha(t,Oa(e));if("set"===e.get("action")){const t={value:e.get("value")};return e.get("datatype")&&(t.datatype=e.get("datatype")),t}throw new TypeError(`Unexpected operation action: ${e.get("action")}`)}function Ha(t,e){const n=Ea(t,e);if("map"===n||"table"===n)return function(t,e,n){const r={objectId:e,type:n,props:{}};for(let[o,i]of t.getIn(["byObject",e,"_keys"]).entries())if(!i.isEmpty()){r.props[o]={};for(let e of i)r.props[o][e.get("opId")]=Ka(t,e)}return r}(t,e,n);if("list"===n||"text"===n)return function(t,e,n){const r={objectId:e,type:n,props:{},edits:[]};let o="_head",i=0,s=0;for(;;){if(o=Pa(t,e,o),!o)return r;s=Math.max(s,ka(o).counter);const n=Ma(t,e,o);if(!n.isEmpty()){r.props[i]={};for(let e of n)r.props[i][e.get("opId")]=Ka(t,e);i+=1}}}(t,e,n);throw new RangeError(`Unknown object type: ${n}`)}var Za={init:function(){return ga().set("states",ga()).set("history",ya()).set("byObject",ga().set("_root",ga().set("_keys",ga()))).set("hashes",ga()).set("deps",ba()).set("maxOp",0).set("queue",ya())},addChange:function(t,e,n){return function(t,e){let n=ya();for(;;){for(let r of t.get("queue"))xa(t,wa(r,!1))?t=Na(t,r,e):n=n.push(r);if(n.count()===t.get("queue").count())return t;t=t.set("queue",n),n=ya()}}(t=t.update("queue",(t=>t.push(e))),n)},addLocalChange:function(t,e,n){return Na(t,e,n)},getHeads:function(t){return t.get("deps").toArray().sort()},getChangeByHash:Ba,getMissingChanges:function(t,e){if(e.isEmpty())return t.get("history").toArray().map((e=>Ba(t,e)));let n=ya(),r={},o=[];for(let i of e){r[i]=!0;const e=t.getIn(["hashes",i,"depsFuture"]);if(!e)throw new RangeError(`hash not found: ${i}`);n=n.concat(e)}for(;!n.isEmpty();){const e=n.last();if(r[e]=!0,o.push(e),!t.getIn(["hashes",e,"depsPast"]).every((t=>r[t])))break;n=n.pop().concat(t.getIn(["hashes",e,"depsFuture"]))}if(n.isEmpty()&&t.get("deps").every((t=>r[t])))return o.map((e=>Ba(t,e)));for(n=e,r={};!n.isEmpty();){const e=n.last();if(n=n.pop(),!r[e]){const o=t.getIn(["hashes",e,"depsPast"]);if(!o)throw new RangeError(`hash not found: ${e}`);n=n.concat(o),r[e]=!0}}return t.get("history").filter((t=>!r[t])).map((e=>Ba(t,e))).toArray()},getChangesAdded:function(t,e){let n=e.get("deps").toArray(),r={},o=[];for(;n.length>0;){const i=n.pop();r[i]||Ba(t,i)||(r[i]=!0,o.push(i),n.push(...e.getIn(["hashes",i,"depsPast"])))}return o.reverse().map((t=>Ba(e,t)))},getMissingDeps:function(t,e=[]){let n={},r={};for(let o of t.get("queue")){const e=wa(o,!0);r[e.hash]=!0;for(let r of e.deps)t.hasIn(["hashes",r])||(n[r]=!0)}for(let o of e)t.hasIn(["hashes",o])||(n[o]=!0);return Object.keys(n).filter((t=>!r[t])).sort()},constructObject:Ha,getFieldOps:Ma,getOperationKey:ja,finalizePatch:function t(e){if(e)if("list"===e.type||"text"===e.type){delete e.props;for(let n of e.edits)t(n.value)}else if("map"===e.type||"table"===e.type)for(const n of Object.keys(e.props))for(const r of Object.keys(e.props[n]))t(e.props[n][r])}};var Ga={backendState:function(t){if(t.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return t.state}};const{Map:Wa,List:Ya}=ca.exports,Ja=Za,{splitContainers:Xa,encodeChange:Qa,decodeChanges:tu,encodeDocument:eu,constructPatch:nu,BackendDoc:ru}=ua,{backendState:ou}=Ga;function iu(){return{state:Wa({opSet:Ja.init(),objectIds:Wa()}),heads:[]}}function su(t,e,n,r){const o={clock:t.getIn(["opSet","states"]).map((t=>t.size)).toObject(),deps:t.getIn(["opSet","deps"]).toArray().sort(),diffs:e,maxOp:t.getIn(["opSet","maxOp"],0),pendingChanges:Ja.getMissingDeps(t.get("opSet")).length};if(r&&n){o.actor=n.actor,o.seq=n.seq;const e=t.getIn(["opSet","states",n.actor,n.seq-1]);o.deps=o.deps.filter((t=>t!==e))}return o}function au(t,e,n,r){let o=r?{objectId:"_root",type:"map",props:{}}:null,i=t.get("opSet");for(let s of e)for(let t of Xa(s))i=n?Ja.addLocalChange(i,t,o):Ja.addChange(i,t,o);return Ja.finalizePatch(o),[t=t.set("opSet",i),r?su(t,o,n,!0):null]}function uu(t){return eu(lu(t))}function cu(t,e){const n=ou(t);{const[r]=au(n,e,null,!1);return t.frozen=!0,{state:r,heads:Ja.getHeads(r.get("opSet"))}}}function lu(t){return hu(t,[])}function hu(t,e){if(!Array.isArray(e))throw new TypeError("Pass an array of hashes to Backend.getChanges()");const n=ou(t);return Ja.getMissingChanges(n.get("opSet"),Ya(e))}var fu={init:iu,clone:function(t){return{state:ou(t),heads:t.heads}},free:function(t){t.state=null,t.frozen=!0},applyChanges:function(t,e){{let[n,r]=au(ou(t),e,null,!0);const o=Ja.getHeads(n.get("opSet"));return t.frozen=!0,[{state:n,heads:o},r]}},applyLocalChange:function(t,e){const n=ou(t);if(e.seq<=function(t,e){return t.getIn(["opSet","states",e],Ya()).size}(n,e.actor))throw new RangeError("Change request has already been applied");if(e.seq>1){const t=function(t,e,n){return t.getIn(["opSet","states",e,n])}(n,e.actor,e.seq-2);if(!t)throw new RangeError(`Cannot find hash of localChange before seq=${e.seq}`);let r={[t]:!0};for(let n of e.deps)r[n]=!0;e.deps=Object.keys(r).sort()}const r=Qa(e);{const o={actor:e.actor,seq:e.seq},[i,s]=au(n,[r],o,!0),a=Ja.getHeads(i.get("opSet"));return t.frozen=!0,[{state:i,heads:a},s,r]}},save:uu,load:function(t){{const e=tu([t]).map(Qa);return cu(iu(),e)}},loadChanges:cu,getPatch:function(t){return su(ou(t),nu(uu(t)),null,!1)},getHeads:function(t){return t.heads},getAllChanges:lu,getChanges:hu,getChangesAdded:function(t,e){const n=ou(t).get("opSet"),r=ou(e).get("opSet");return Ja.getChangesAdded(n,r)},getChangeByHash:function(t,e){const n=ou(t);return Ja.getChangeByHash(n.get("opSet"),e)},getMissingDeps:function(t,e=[]){const n=ou(t);return Ja.getMissingDeps(n.get("opSet"),e)}};const{List:du}=ca.exports,{backendState:pu}=Ga,gu=fu,yu=Za,{hexStringToBytes:bu,bytesToHexString:_u,Encoder:vu,Decoder:mu}=qi,{decodeChangeMeta:wu}=ua,{copyObject:Iu}=Vt;class ku{constructor(t){if(Array.isArray(t)){this.numEntries=t.length,this.numBitsPerEntry=10,this.numProbes=7,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let e of t)this.addHash(e)}else{if(!(t instanceof Uint8Array))throw new TypeError("invalid argument");if(0===t.byteLength)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=t;else{const e=new mu(t);this.numEntries=e.readUint32(),this.numBitsPerEntry=e.readUint32(),this.numProbes=e.readUint32(),this.bits=e.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}}}get bytes(){if(0===this.numEntries)return new Uint8Array(0);const t=new vu;return t.appendUint32(this.numEntries),t.appendUint32(this.numBitsPerEntry),t.appendUint32(this.numProbes),t.appendRawBytes(this.bits),t.buffer}getProbes(t){const e=bu(t),n=8*this.bits.byteLength;if(32!==e.byteLength)throw new RangeError(`Not a 256-bit hash: ${t}`);let r=((e[0]|e[1]<<8|e[2]<<16|e[3]<<24)>>>0)%n,o=((e[4]|e[5]<<8|e[6]<<16|e[7]<<24)>>>0)%n,i=((e[8]|e[9]<<8|e[10]<<16|e[11]<<24)>>>0)%n;const s=[r];for(let a=1;a<this.numProbes;a++)r=(r+o)%n,o=(o+i)%n,s.push(r);return s}addHash(t){for(let e of this.getProbes(t))this.bits[e>>>3]|=1<<(7&e)}containsHash(t){if(0===this.numEntries)return!1;for(let e of this.getProbes(t))if(0==(this.bits[e>>>3]&1<<(7&e)))return!1;return!0}}function xu(t,e){if(!Array.isArray(e))throw new TypeError("hashes must be an array");t.appendUint32(e.length);for(let n=0;n<e.length;n++){if(n>0&&e[n-1]>=e[n])throw new RangeError("hashes must be sorted");const r=bu(e[n]);if(32!==r.byteLength)throw new TypeError("heads hashes must be 256 bits");t.appendRawBytes(r)}}function Eu(t){let e=t.readUint32(),n=[];for(let r=0;r<e;r++)n.push(_u(t.readRawBytes(32)));return n}function Su(t){const e=new vu;e.appendByte(66),xu(e,t.heads),xu(e,t.need),e.appendUint32(t.have.length);for(let n of t.have)xu(e,n.lastSync),e.appendPrefixedBytes(n.bloom);e.appendUint32(t.changes.length);for(let n of t.changes)e.appendPrefixedBytes(n);return e.buffer}function Au(t){const e=new mu(t),n=e.readByte();if(66!==n)throw new RangeError(`Unexpected message type: ${n}`);const r=Eu(e),o=Eu(e),i=e.readUint32();let s={heads:r,need:o,have:[],changes:[]};for(let u=0;u<i;u++){const t=Eu(e),n=e.readPrefixedBytes(e);s.have.push({lastSync:t,bloom:n})}const a=e.readUint32();for(let u=0;u<a;u++){const t=e.readPrefixedBytes();s.changes.push(t)}return s}function Ou(t,e){const n=yu.getMissingChanges(t.get("opSet"),du(e)).map((t=>wu(t,!0).hash));return{lastSync:e,bloom:new ku(n).bytes}}function ju(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function Ru(t,e){return t.length===e.length&&t.every(((t,n)=>t===e[n]))}var Cu={receiveSyncMessage:function(t,e,n){if(!t)throw new Error("generateSyncMessage called with no Automerge document");if(!e)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:r,lastSentHeads:o,sentHashes:i}=e,s=null;const a=Au(n),u=gu.getHeads(t);a.changes.length>0&&([t,s]=gu.applyChanges(t,a.changes),r=function(t,e,n){const r=e.filter((e=>!t.includes(e))),o=n.filter((t=>e.includes(t)));return[...new Set([...r,...o])].sort()}(u,gu.getHeads(t),r)),0===a.changes.length&&Ru(a.heads,u)&&(o=a.heads);const c=a.heads.filter((e=>gu.getChangeByHash(t,e)));c.length===a.heads.length?(r=a.heads,0===a.heads.length&&(o=[],i=[])):r=[...new Set(c.concat(r))].sort();const l={sharedHeads:r,lastSentHeads:o,theirHave:a.have,theirHeads:a.heads,theirNeed:a.need,sentHashes:i};return[t,l,s]},generateSyncMessage:function(t,e){if(!t)throw new Error("generateSyncMessage called with no Automerge document");if(!e)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:n,lastSentHeads:r,theirHeads:o,theirNeed:i,theirHave:s,sentHashes:a}=e;const u=gu.getHeads(t),c=pu(t),l=gu.getMissingDeps(t,o||[]);let h=[];if(o&&!l.every((t=>o.includes(t)))||(h=[Ou(c,n)]),s&&s.length>0){if(!s[0].lastSync.every((e=>gu.getChangeByHash(t,e)))){return[e,Su({heads:u,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]})]}}let f=Array.isArray(s)&&Array.isArray(i)?function(t,e,n){const r=t.get("opSet");if(0===e.length)return n.map((t=>yu.getChangeByHash(r,t))).filter((t=>void 0!==t));let o={},i=[];for(let f of e){for(let t of f.lastSync)o[t]=!0;i.push(new ku(f.bloom))}const s=yu.getMissingChanges(r,du(Object.keys(o))).map((t=>wu(t,!0)));let a={},u={},c={};for(let f of s){a[f.hash]=!0;for(let t of f.deps)u[t]||(u[t]=[]),u[t].push(f.hash);i.every((t=>!t.containsHash(f.hash)))&&(c[f.hash]=!0)}let l=Object.keys(c);for(;l.length>0;){const t=l.pop();if(u[t])for(let e of u[t])c[e]||(c[e]=!0,l.push(e))}let h=[];for(let f of n)if(c[f]=!0,!a[f]){const t=yu.getChangeByHash(r,f);t&&h.push(t)}for(let f of s)c[f.hash]&&h.push(f.change);return h}(c,s,i):[];const d=Array.isArray(r)&&Ru(u,r),p=Array.isArray(o)&&Ru(u,o);if(d&&p&&0===f.length)return[e,null];f=f.filter((t=>!a[wu(t,!0).hash]));const g={heads:u,have:h,need:l,changes:f};if(f.length>0){a=Iu(a);for(const t of f)a[wu(t,!0).hash]=!0}return[e=Object.assign({},e,{lastSentHeads:u,sentHashes:a}),Su(g)]},encodeSyncMessage:Su,decodeSyncMessage:Au,initSyncState:ju,encodeSyncState:function(t){const e=new vu;return e.appendByte(67),xu(e,t.sharedHeads),e.buffer},decodeSyncState:function(t){const e=new mu(t),n=e.readByte();if(67!==n)throw new RangeError(`Unexpected record type: ${n}`);const r=Eu(e);return Object.assign({sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}},{sharedHeads:r})},BloomFilter:ku};const{init:Tu,clone:Uu,free:Lu,applyChanges:zu,applyLocalChange:Nu,save:Bu,load:Mu,loadChanges:$u,getPatch:Vu,getHeads:Du,getAllChanges:qu,getChanges:Pu,getChangesAdded:Fu,getChangeByHash:Ku,getMissingDeps:Hu}=fu,{receiveSyncMessage:Zu,generateSyncMessage:Gu,encodeSyncMessage:Wu,decodeSyncMessage:Yu,encodeSyncState:Ju,decodeSyncState:Xu,initSyncState:Qu}=Cu;var tc={init:Tu,clone:Uu,free:Lu,applyChanges:zu,applyLocalChange:Nu,save:Bu,load:Mu,loadChanges:$u,getPatch:Vu,getHeads:Du,getAllChanges:qu,getChanges:Pu,getChangesAdded:Fu,getChangeByHash:Ku,getMissingDeps:Hu,receiveSyncMessage:Zu,generateSyncMessage:Gu,encodeSyncMessage:Wu,decodeSyncMessage:Yu,encodeSyncState:Ju,decodeSyncState:Xu,initSyncState:Qu};!function(t){const e=Bt,n=In,{OPTIONS:r}=Mt,{encodeChange:o,decodeChange:i}=ua,{isObject:s}=Vt;let a=tc;function u(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!s(t))throw new TypeError(`Unsupported options for init(): ${t}`);return n.init(Object.assign({backend:a},t))}function c(t,e,r){const[o]=n.change(t,e,r);return o}function l(t){return a.getAllChanges(n.getBackendState(t,"getAllChanges"))}function h(t,e,o,i,s){const a=n.applyPatch(t,e,o),u=s.patchCallback||t[r].patchCallback;return u&&u(e,t,a,!1,i),a}function f(t,e,r={}){const o=n.getBackendState(t,"applyChanges"),[i,s]=a.applyChanges(o,e);return[h(t,s,i,e,r),s]}t.exports={init:u,from:function(t,e){return c(u(e),{message:"Initialization"},(e=>Object.assign(e,t)))},change:c,emptyChange:function(t,e){const[r]=n.emptyChange(t,e);return r},clone:function(t,e={}){const r=a.clone(n.getBackendState(t,"clone"));return h(u(e),a.getPatch(r),r,[],e)},free:function(t){a.free(n.getBackendState(t,"free"))},load:function(t,e={}){const n=a.load(t);return h(u(e),a.getPatch(n),n,[t],e)},save:function(t){return a.save(n.getBackendState(t,"save"))},merge:function(t,e){const r=n.getBackendState(t,"merge"),o=n.getBackendState(e,"merge","second");if(n.getActorId(t)===n.getActorId(e))throw new RangeError("Cannot merge an actor with itself");const i=a.getChangesAdded(r,o),[s]=f(t,i);return s},getChanges:function(t,e){const r=n.getBackendState(t,"getChanges"),o=n.getBackendState(e,"getChanges","second");return a.getChanges(o,a.getHeads(r))},getAllChanges:l,applyChanges:f,encodeChange:o,decodeChange:i,equals:function t(e,n){if(!s(e)||!s(n))return e===n;const r=Object.keys(e).sort(),o=Object.keys(n).sort();if(r.length!==o.length)return!1;for(let i=0;i<r.length;i++){if(r[i]!==o[i])return!1;if(!t(e[r[i]],n[o[i]]))return!1}return!0},getHistory:function(t){const e=n.getActorId(t),r=l(t);return r.map(((t,o)=>({get change(){return i(t)},get snapshot(){const t=a.loadChanges(a.init(),r.slice(0,o+1));return n.applyPatch(u(e),a.getPatch(t),t)}})))},uuid:e,Frontend:n,setDefaultBackend:function(t){a=t},generateSyncMessage:function(t,e){const r=n.getBackendState(t,"generateSyncMessage");return a.generateSyncMessage(r,e)},receiveSyncMessage:function(t,e,o){const i=n.getBackendState(t,"receiveSyncMessage"),[s,u,c]=a.receiveSyncMessage(i,e,o);if(!c)return[t,u,c];let l=null;return t[r].patchCallback&&(l=a.decodeSyncMessage(o).changes),[h(t,c,s,l,{}),u,c]},initSyncState:function(){return a.initSyncState()},get Backend(){return a}};for(let d of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable"])t.exports[d]=n[d]}(kt);var ec=kt.exports,nc={},rc={};Object.defineProperty(rc,"__esModule",{value:!0}),rc.debounce=void 0;const oc=()=>{};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function ic(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function sc(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}rc.debounce=function(t,e=0,n={}){let r=null,o=!1;const i=n.before||oc,s=n.after||oc;return function(...a){o||(o=!0,i()),null!=r&&(clearTimeout(r),r=null),n.isImmediate&&null==r?(o=!1,t.apply(this,a),s()):r=setTimeout((()=>{o=!1,r=null,t.apply(this,a),s()}),e)}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var e=rc;Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return e.debounce}})}(nc);var ac={exports:{}},uc=It(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}}));!function(t){var e=function(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;e++)n[e]=t[e];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=e(),s=e([1]),a=e([56129,1]),u=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,e,n,r){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n,t[e+4]=r>>24&255,t[e+5]=r>>16&255,t[e+6]=r>>8&255,t[e+7]=255&r}function p(t,e,n,r,o){var i,s=0;for(i=0;i<o;i++)s|=t[e+i]^n[r+i];return(1&s-1>>>8)-1}function g(t,e,n,r){return p(t,e,n,r,16)}function y(t,e,n,r){return p(t,e,n,r,32)}function b(t,e,n,r){!function(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,d=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,y=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,b=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,_=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,v=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,m=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=i,I=s,k=a,x=u,E=c,S=l,A=h,O=f,j=d,R=p,C=g,T=y,U=b,L=_,z=v,N=m,B=0;B<20;B+=2)w^=(o=(U^=(o=(j^=(o=(E^=(o=w+U|0)<<7|o>>>25)+w|0)<<9|o>>>23)+E|0)<<13|o>>>19)+j|0)<<18|o>>>14,S^=(o=(I^=(o=(L^=(o=(R^=(o=S+I|0)<<7|o>>>25)+S|0)<<9|o>>>23)+R|0)<<13|o>>>19)+L|0)<<18|o>>>14,C^=(o=(A^=(o=(k^=(o=(z^=(o=C+A|0)<<7|o>>>25)+C|0)<<9|o>>>23)+z|0)<<13|o>>>19)+k|0)<<18|o>>>14,N^=(o=(T^=(o=(O^=(o=(x^=(o=N+T|0)<<7|o>>>25)+N|0)<<9|o>>>23)+x|0)<<13|o>>>19)+O|0)<<18|o>>>14,w^=(o=(x^=(o=(k^=(o=(I^=(o=w+x|0)<<7|o>>>25)+w|0)<<9|o>>>23)+I|0)<<13|o>>>19)+k|0)<<18|o>>>14,S^=(o=(E^=(o=(O^=(o=(A^=(o=S+E|0)<<7|o>>>25)+S|0)<<9|o>>>23)+A|0)<<13|o>>>19)+O|0)<<18|o>>>14,C^=(o=(R^=(o=(j^=(o=(T^=(o=C+R|0)<<7|o>>>25)+C|0)<<9|o>>>23)+T|0)<<13|o>>>19)+j|0)<<18|o>>>14,N^=(o=(z^=(o=(L^=(o=(U^=(o=N+z|0)<<7|o>>>25)+N|0)<<9|o>>>23)+U|0)<<13|o>>>19)+L|0)<<18|o>>>14;w=w+i|0,I=I+s|0,k=k+a|0,x=x+u|0,E=E+c|0,S=S+l|0,A=A+h|0,O=O+f|0,j=j+d|0,R=R+p|0,C=C+g|0,T=T+y|0,U=U+b|0,L=L+_|0,z=z+v|0,N=N+m|0,t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=I>>>0&255,t[5]=I>>>8&255,t[6]=I>>>16&255,t[7]=I>>>24&255,t[8]=k>>>0&255,t[9]=k>>>8&255,t[10]=k>>>16&255,t[11]=k>>>24&255,t[12]=x>>>0&255,t[13]=x>>>8&255,t[14]=x>>>16&255,t[15]=x>>>24&255,t[16]=E>>>0&255,t[17]=E>>>8&255,t[18]=E>>>16&255,t[19]=E>>>24&255,t[20]=S>>>0&255,t[21]=S>>>8&255,t[22]=S>>>16&255,t[23]=S>>>24&255,t[24]=A>>>0&255,t[25]=A>>>8&255,t[26]=A>>>16&255,t[27]=A>>>24&255,t[28]=O>>>0&255,t[29]=O>>>8&255,t[30]=O>>>16&255,t[31]=O>>>24&255,t[32]=j>>>0&255,t[33]=j>>>8&255,t[34]=j>>>16&255,t[35]=j>>>24&255,t[36]=R>>>0&255,t[37]=R>>>8&255,t[38]=R>>>16&255,t[39]=R>>>24&255,t[40]=C>>>0&255,t[41]=C>>>8&255,t[42]=C>>>16&255,t[43]=C>>>24&255,t[44]=T>>>0&255,t[45]=T>>>8&255,t[46]=T>>>16&255,t[47]=T>>>24&255,t[48]=U>>>0&255,t[49]=U>>>8&255,t[50]=U>>>16&255,t[51]=U>>>24&255,t[52]=L>>>0&255,t[53]=L>>>8&255,t[54]=L>>>16&255,t[55]=L>>>24&255,t[56]=z>>>0&255,t[57]=z>>>8&255,t[58]=z>>>16&255,t[59]=z>>>24&255,t[60]=N>>>0&255,t[61]=N>>>8&255,t[62]=N>>>16&255,t[63]=N>>>24&255}(t,e,n,r)}function _(t,e,n,r){!function(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,d=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,y=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,b=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,_=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,v=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,m=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=0;w<20;w+=2)i^=(o=(b^=(o=(d^=(o=(c^=(o=i+b|0)<<7|o>>>25)+i|0)<<9|o>>>23)+c|0)<<13|o>>>19)+d|0)<<18|o>>>14,l^=(o=(s^=(o=(_^=(o=(p^=(o=l+s|0)<<7|o>>>25)+l|0)<<9|o>>>23)+p|0)<<13|o>>>19)+_|0)<<18|o>>>14,g^=(o=(h^=(o=(a^=(o=(v^=(o=g+h|0)<<7|o>>>25)+g|0)<<9|o>>>23)+v|0)<<13|o>>>19)+a|0)<<18|o>>>14,m^=(o=(y^=(o=(f^=(o=(u^=(o=m+y|0)<<7|o>>>25)+m|0)<<9|o>>>23)+u|0)<<13|o>>>19)+f|0)<<18|o>>>14,i^=(o=(u^=(o=(a^=(o=(s^=(o=i+u|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+a|0)<<18|o>>>14,l^=(o=(c^=(o=(f^=(o=(h^=(o=l+c|0)<<7|o>>>25)+l|0)<<9|o>>>23)+h|0)<<13|o>>>19)+f|0)<<18|o>>>14,g^=(o=(p^=(o=(d^=(o=(y^=(o=g+p|0)<<7|o>>>25)+g|0)<<9|o>>>23)+y|0)<<13|o>>>19)+d|0)<<18|o>>>14,m^=(o=(v^=(o=(_^=(o=(b^=(o=m+v|0)<<7|o>>>25)+m|0)<<9|o>>>23)+b|0)<<13|o>>>19)+_|0)<<18|o>>>14;t[0]=i>>>0&255,t[1]=i>>>8&255,t[2]=i>>>16&255,t[3]=i>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=g>>>0&255,t[9]=g>>>8&255,t[10]=g>>>16&255,t[11]=g>>>24&255,t[12]=m>>>0&255,t[13]=m>>>8&255,t[14]=m>>>16&255,t[15]=m>>>24&255,t[16]=h>>>0&255,t[17]=h>>>8&255,t[18]=h>>>16&255,t[19]=h>>>24&255,t[20]=f>>>0&255,t[21]=f>>>8&255,t[22]=f>>>16&255,t[23]=f>>>24&255,t[24]=d>>>0&255,t[25]=d>>>8&255,t[26]=d>>>16&255,t[27]=d>>>24&255,t[28]=p>>>0&255,t[29]=p>>>8&255,t[30]=p>>>16&255,t[31]=p>>>24&255}(t,e,n,r)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function m(t,e,n,r,o,i,s){var a,u,c=new Uint8Array(16),l=new Uint8Array(64);for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=i[u];for(;o>=64;){for(b(l,c,s,v),u=0;u<64;u++)t[e+u]=n[r+u]^l[u];for(a=1,u=8;u<16;u++)a=a+(255&c[u])|0,c[u]=255&a,a>>>=8;o-=64,e+=64,r+=64}if(o>0)for(b(l,c,s,v),u=0;u<o;u++)t[e+u]=n[r+u]^l[u];return 0}function w(t,e,n,r,o){var i,s,a=new Uint8Array(16),u=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=r[s];for(;n>=64;){for(b(u,a,o,v),s=0;s<64;s++)t[e+s]=u[s];for(i=1,s=8;s<16;s++)i=i+(255&a[s])|0,a[s]=255&i,i>>>=8;n-=64,e+=64}if(n>0)for(b(u,a,o,v),s=0;s<n;s++)t[e+s]=u[s];return 0}function I(t,e,n,r,o){var i=new Uint8Array(32);_(i,r,o,v);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=r[a+16];return w(t,e,n,s,i)}function k(t,e,n,r,o,i,s){var a=new Uint8Array(32);_(a,i,s,v);for(var u=new Uint8Array(8),c=0;c<8;c++)u[c]=i[c+16];return m(t,e,n,r,o,u,a)}var x=function(t){var e,n,r,o,i,s,a,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,n=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|n<<3),r=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(r>>>7|o<<9),i=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(s>>>11|a<<5),u=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function E(t,e,n,r,o,i){var s=new x(i);return s.update(n,r,o),s.finish(t,e),0}function S(t,e,n,r,o,i){var s=new Uint8Array(16);return E(s,0,n,r,o,i),g(t,e,s,0)}function A(t,e,n,r,o){var i;if(n<32)return-1;for(k(t,0,e,0,n,r,o),E(t,16,t,32,n-32,t),i=0;i<16;i++)t[i]=0;return 0}function O(t,e,n,r,o){var i,s=new Uint8Array(32);if(n<32)return-1;if(I(s,0,32,r,o),0!==S(e,16,e,32,n-32,s))return-1;for(k(t,0,e,0,n,r,o),i=0;i<32;i++)t[i]=0;return 0}function j(t,e){var n;for(n=0;n<16;n++)t[n]=0|e[n]}function R(t){var e,n,r=1;for(e=0;e<16;e++)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-65536*r;t[0]+=r-1+37*(r-1)}function C(t,e,n){for(var r,o=~(n-1),i=0;i<16;i++)r=o&(t[i]^e[i]),t[i]^=r,e[i]^=r}function T(t,n){var r,o,i,s=e(),a=e();for(r=0;r<16;r++)a[r]=n[r];for(R(a),R(a),R(a),o=0;o<2;o++){for(s[0]=a[0]-65517,r=1;r<15;r++)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,C(a,s,1-i)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function U(t,e){var n=new Uint8Array(32),r=new Uint8Array(32);return T(n,t),T(r,e),y(n,0,r,0)}function L(t){var e=new Uint8Array(32);return T(e,t),1&e[0]}function z(t,e){var n;for(n=0;n<16;n++)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}function N(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]+n[r]}function B(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]-n[r]}function M(t,e,n){var r,o,i=0,s=0,a=0,u=0,c=0,l=0,h=0,f=0,d=0,p=0,g=0,y=0,b=0,_=0,v=0,m=0,w=0,I=0,k=0,x=0,E=0,S=0,A=0,O=0,j=0,R=0,C=0,T=0,U=0,L=0,z=0,N=n[0],B=n[1],M=n[2],$=n[3],V=n[4],D=n[5],q=n[6],P=n[7],F=n[8],K=n[9],H=n[10],Z=n[11],G=n[12],W=n[13],Y=n[14],J=n[15];i+=(r=e[0])*N,s+=r*B,a+=r*M,u+=r*$,c+=r*V,l+=r*D,h+=r*q,f+=r*P,d+=r*F,p+=r*K,g+=r*H,y+=r*Z,b+=r*G,_+=r*W,v+=r*Y,m+=r*J,s+=(r=e[1])*N,a+=r*B,u+=r*M,c+=r*$,l+=r*V,h+=r*D,f+=r*q,d+=r*P,p+=r*F,g+=r*K,y+=r*H,b+=r*Z,_+=r*G,v+=r*W,m+=r*Y,w+=r*J,a+=(r=e[2])*N,u+=r*B,c+=r*M,l+=r*$,h+=r*V,f+=r*D,d+=r*q,p+=r*P,g+=r*F,y+=r*K,b+=r*H,_+=r*Z,v+=r*G,m+=r*W,w+=r*Y,I+=r*J,u+=(r=e[3])*N,c+=r*B,l+=r*M,h+=r*$,f+=r*V,d+=r*D,p+=r*q,g+=r*P,y+=r*F,b+=r*K,_+=r*H,v+=r*Z,m+=r*G,w+=r*W,I+=r*Y,k+=r*J,c+=(r=e[4])*N,l+=r*B,h+=r*M,f+=r*$,d+=r*V,p+=r*D,g+=r*q,y+=r*P,b+=r*F,_+=r*K,v+=r*H,m+=r*Z,w+=r*G,I+=r*W,k+=r*Y,x+=r*J,l+=(r=e[5])*N,h+=r*B,f+=r*M,d+=r*$,p+=r*V,g+=r*D,y+=r*q,b+=r*P,_+=r*F,v+=r*K,m+=r*H,w+=r*Z,I+=r*G,k+=r*W,x+=r*Y,E+=r*J,h+=(r=e[6])*N,f+=r*B,d+=r*M,p+=r*$,g+=r*V,y+=r*D,b+=r*q,_+=r*P,v+=r*F,m+=r*K,w+=r*H,I+=r*Z,k+=r*G,x+=r*W,E+=r*Y,S+=r*J,f+=(r=e[7])*N,d+=r*B,p+=r*M,g+=r*$,y+=r*V,b+=r*D,_+=r*q,v+=r*P,m+=r*F,w+=r*K,I+=r*H,k+=r*Z,x+=r*G,E+=r*W,S+=r*Y,A+=r*J,d+=(r=e[8])*N,p+=r*B,g+=r*M,y+=r*$,b+=r*V,_+=r*D,v+=r*q,m+=r*P,w+=r*F,I+=r*K,k+=r*H,x+=r*Z,E+=r*G,S+=r*W,A+=r*Y,O+=r*J,p+=(r=e[9])*N,g+=r*B,y+=r*M,b+=r*$,_+=r*V,v+=r*D,m+=r*q,w+=r*P,I+=r*F,k+=r*K,x+=r*H,E+=r*Z,S+=r*G,A+=r*W,O+=r*Y,j+=r*J,g+=(r=e[10])*N,y+=r*B,b+=r*M,_+=r*$,v+=r*V,m+=r*D,w+=r*q,I+=r*P,k+=r*F,x+=r*K,E+=r*H,S+=r*Z,A+=r*G,O+=r*W,j+=r*Y,R+=r*J,y+=(r=e[11])*N,b+=r*B,_+=r*M,v+=r*$,m+=r*V,w+=r*D,I+=r*q,k+=r*P,x+=r*F,E+=r*K,S+=r*H,A+=r*Z,O+=r*G,j+=r*W,R+=r*Y,C+=r*J,b+=(r=e[12])*N,_+=r*B,v+=r*M,m+=r*$,w+=r*V,I+=r*D,k+=r*q,x+=r*P,E+=r*F,S+=r*K,A+=r*H,O+=r*Z,j+=r*G,R+=r*W,C+=r*Y,T+=r*J,_+=(r=e[13])*N,v+=r*B,m+=r*M,w+=r*$,I+=r*V,k+=r*D,x+=r*q,E+=r*P,S+=r*F,A+=r*K,O+=r*H,j+=r*Z,R+=r*G,C+=r*W,T+=r*Y,U+=r*J,v+=(r=e[14])*N,m+=r*B,w+=r*M,I+=r*$,k+=r*V,x+=r*D,E+=r*q,S+=r*P,A+=r*F,O+=r*K,j+=r*H,R+=r*Z,C+=r*G,T+=r*W,U+=r*Y,L+=r*J,m+=(r=e[15])*N,s+=38*(I+=r*M),a+=38*(k+=r*$),u+=38*(x+=r*V),c+=38*(E+=r*D),l+=38*(S+=r*q),h+=38*(A+=r*P),f+=38*(O+=r*F),d+=38*(j+=r*K),p+=38*(R+=r*H),g+=38*(C+=r*Z),y+=38*(T+=r*G),b+=38*(U+=r*W),_+=38*(L+=r*Y),v+=38*(z+=r*J),i=(r=(i+=38*(w+=r*B))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),_=(r=_+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),_=(r=_+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=l,t[6]=h,t[7]=f,t[8]=d,t[9]=p,t[10]=g,t[11]=y,t[12]=b,t[13]=_,t[14]=v,t[15]=m}function $(t,e){M(t,e,e)}function V(t,n){var r,o=e();for(r=0;r<16;r++)o[r]=n[r];for(r=253;r>=0;r--)$(o,o),2!==r&&4!==r&&M(o,o,n);for(r=0;r<16;r++)t[r]=o[r]}function D(t,n){var r,o=e();for(r=0;r<16;r++)o[r]=n[r];for(r=250;r>=0;r--)$(o,o),1!==r&&M(o,o,n);for(r=0;r<16;r++)t[r]=o[r]}function q(t,n,r){var o,i,s=new Uint8Array(32),u=new Float64Array(80),c=e(),l=e(),h=e(),f=e(),d=e(),p=e();for(i=0;i<31;i++)s[i]=n[i];for(s[31]=127&n[31]|64,s[0]&=248,z(u,r),i=0;i<16;i++)l[i]=u[i],f[i]=c[i]=h[i]=0;for(c[0]=f[0]=1,i=254;i>=0;--i)C(c,l,o=s[i>>>3]>>>(7&i)&1),C(h,f,o),N(d,c,h),B(c,c,h),N(h,l,f),B(l,l,f),$(f,d),$(p,c),M(c,h,c),M(h,l,d),N(d,c,h),B(c,c,h),$(l,c),B(h,f,p),M(c,h,a),N(c,c,f),M(h,h,c),M(c,f,p),M(f,l,u),$(l,d),C(c,l,o),C(h,f,o);for(i=0;i<16;i++)u[i+16]=c[i],u[i+32]=h[i],u[i+48]=l[i],u[i+64]=f[i];var g=u.subarray(32),y=u.subarray(16);return V(g,g),M(y,y,g),T(t,y),0}function P(t,e){return q(t,e,o)}function F(t,e){return n(e,32),P(t,e)}function K(t,e,n){var o=new Uint8Array(32);return q(o,n,e),_(t,r,o,v)}x.prototype.blocks=function(t,e,n){for(var r,o,i,s,a,u,c,l,h,f,d,p,g,y,b,_,v,m,w,I=this.fin?0:2048,k=this.h[0],x=this.h[1],E=this.h[2],S=this.h[3],A=this.h[4],O=this.h[5],j=this.h[6],R=this.h[7],C=this.h[8],T=this.h[9],U=this.r[0],L=this.r[1],z=this.r[2],N=this.r[3],B=this.r[4],M=this.r[5],$=this.r[6],V=this.r[7],D=this.r[8],q=this.r[9];n>=16;)f=h=0,f+=(k+=8191&(r=255&t[e+0]|(255&t[e+1])<<8))*U,f+=(x+=8191&(r>>>13|(o=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*q),f+=(E+=8191&(o>>>10|(i=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*D),f+=(S+=8191&(i>>>7|(s=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*V),h=(f+=(A+=8191&(s>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*$))>>>13,f&=8191,f+=(O+=a>>>1&8191)*(5*M),f+=(j+=8191&(a>>>14|(u=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*B),f+=(R+=8191&(u>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*N),f+=(C+=8191&(c>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*z),d=h+=(f+=(T+=l>>>5|I)*(5*L))>>>13,d+=k*L,d+=x*U,d+=E*(5*q),d+=S*(5*D),h=(d+=A*(5*V))>>>13,d&=8191,d+=O*(5*$),d+=j*(5*M),d+=R*(5*B),d+=C*(5*N),h+=(d+=T*(5*z))>>>13,d&=8191,p=h,p+=k*z,p+=x*L,p+=E*U,p+=S*(5*q),h=(p+=A*(5*D))>>>13,p&=8191,p+=O*(5*V),p+=j*(5*$),p+=R*(5*M),p+=C*(5*B),g=h+=(p+=T*(5*N))>>>13,g+=k*N,g+=x*z,g+=E*L,g+=S*U,h=(g+=A*(5*q))>>>13,g&=8191,g+=O*(5*D),g+=j*(5*V),g+=R*(5*$),g+=C*(5*M),y=h+=(g+=T*(5*B))>>>13,y+=k*B,y+=x*N,y+=E*z,y+=S*L,h=(y+=A*U)>>>13,y&=8191,y+=O*(5*q),y+=j*(5*D),y+=R*(5*V),y+=C*(5*$),b=h+=(y+=T*(5*M))>>>13,b+=k*M,b+=x*B,b+=E*N,b+=S*z,h=(b+=A*L)>>>13,b&=8191,b+=O*U,b+=j*(5*q),b+=R*(5*D),b+=C*(5*V),_=h+=(b+=T*(5*$))>>>13,_+=k*$,_+=x*M,_+=E*B,_+=S*N,h=(_+=A*z)>>>13,_&=8191,_+=O*L,_+=j*U,_+=R*(5*q),_+=C*(5*D),v=h+=(_+=T*(5*V))>>>13,v+=k*V,v+=x*$,v+=E*M,v+=S*B,h=(v+=A*N)>>>13,v&=8191,v+=O*z,v+=j*L,v+=R*U,v+=C*(5*q),m=h+=(v+=T*(5*D))>>>13,m+=k*D,m+=x*V,m+=E*$,m+=S*M,h=(m+=A*B)>>>13,m&=8191,m+=O*N,m+=j*z,m+=R*L,m+=C*U,w=h+=(m+=T*(5*q))>>>13,w+=k*q,w+=x*D,w+=E*V,w+=S*$,h=(w+=A*M)>>>13,w&=8191,w+=O*B,w+=j*N,w+=R*z,w+=C*L,k=f=8191&(h=(h=((h+=(w+=T*U)>>>13)<<2)+h|0)+(f&=8191)|0),x=d+=h>>>=13,E=p&=8191,S=g&=8191,A=y&=8191,O=b&=8191,j=_&=8191,R=v&=8191,C=m&=8191,T=w&=8191,e+=16,n-=16;this.h[0]=k,this.h[1]=x,this.h[2]=E,this.h[3]=S,this.h[4]=A,this.h[5]=O,this.h[6]=j,this.h[7]=R,this.h[8]=C,this.h[9]=T},x.prototype.finish=function(t,e){var n,r,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,s[0]=this.h[0]+5,n=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+n,n=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,r=(1^n)-1,i=0;i<10;i++)s[i]&=r;for(r=~r,i=0;i<10;i++)this.h[i]=this.h[i]&r|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},x.prototype.update=function(t,e,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=t[e+r];if(n-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(t,e,o),e+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=t[e+r];this.leftover+=n}};var H=A,Z=O,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function W(t,e,n,r){for(var o,i,s,a,u,c,l,h,f,d,p,g,y,b,_,v,m,w,I,k,x,E,S,A,O,j,R=new Int32Array(16),C=new Int32Array(16),T=t[0],U=t[1],L=t[2],z=t[3],N=t[4],B=t[5],M=t[6],$=t[7],V=e[0],D=e[1],q=e[2],P=e[3],F=e[4],K=e[5],H=e[6],Z=e[7],W=0;r>=128;){for(I=0;I<16;I++)k=8*I+W,R[I]=n[k+0]<<24|n[k+1]<<16|n[k+2]<<8|n[k+3],C[I]=n[k+4]<<24|n[k+5]<<16|n[k+6]<<8|n[k+7];for(I=0;I<80;I++)if(o=T,i=U,s=L,a=z,u=N,c=B,l=M,f=V,d=D,p=q,g=P,y=F,b=K,_=H,S=65535&(E=Z),A=E>>>16,O=65535&(x=$),j=x>>>16,S+=65535&(E=(F>>>14|N<<18)^(F>>>18|N<<14)^(N>>>9|F<<23)),A+=E>>>16,O+=65535&(x=(N>>>14|F<<18)^(N>>>18|F<<14)^(F>>>9|N<<23)),j+=x>>>16,S+=65535&(E=F&K^~F&H),A+=E>>>16,O+=65535&(x=N&B^~N&M),j+=x>>>16,S+=65535&(E=G[2*I+1]),A+=E>>>16,O+=65535&(x=G[2*I]),j+=x>>>16,x=R[I%16],A+=(E=C[I%16])>>>16,O+=65535&x,j+=x>>>16,O+=(A+=(S+=65535&E)>>>16)>>>16,S=65535&(E=w=65535&S|A<<16),A=E>>>16,O=65535&(x=m=65535&O|(j+=O>>>16)<<16),j=x>>>16,S+=65535&(E=(V>>>28|T<<4)^(T>>>2|V<<30)^(T>>>7|V<<25)),A+=E>>>16,O+=65535&(x=(T>>>28|V<<4)^(V>>>2|T<<30)^(V>>>7|T<<25)),j+=x>>>16,A+=(E=V&D^V&q^D&q)>>>16,O+=65535&(x=T&U^T&L^U&L),j+=x>>>16,h=65535&(O+=(A+=(S+=65535&E)>>>16)>>>16)|(j+=O>>>16)<<16,v=65535&S|A<<16,S=65535&(E=g),A=E>>>16,O=65535&(x=a),j=x>>>16,A+=(E=w)>>>16,O+=65535&(x=m),j+=x>>>16,U=o,L=i,z=s,N=a=65535&(O+=(A+=(S+=65535&E)>>>16)>>>16)|(j+=O>>>16)<<16,B=u,M=c,$=l,T=h,D=f,q=d,P=p,F=g=65535&S|A<<16,K=y,H=b,Z=_,V=v,I%16==15)for(k=0;k<16;k++)x=R[k],S=65535&(E=C[k]),A=E>>>16,O=65535&x,j=x>>>16,x=R[(k+9)%16],S+=65535&(E=C[(k+9)%16]),A+=E>>>16,O+=65535&x,j+=x>>>16,m=R[(k+1)%16],S+=65535&(E=((w=C[(k+1)%16])>>>1|m<<31)^(w>>>8|m<<24)^(w>>>7|m<<25)),A+=E>>>16,O+=65535&(x=(m>>>1|w<<31)^(m>>>8|w<<24)^m>>>7),j+=x>>>16,m=R[(k+14)%16],A+=(E=((w=C[(k+14)%16])>>>19|m<<13)^(m>>>29|w<<3)^(w>>>6|m<<26))>>>16,O+=65535&(x=(m>>>19|w<<13)^(w>>>29|m<<3)^m>>>6),j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,R[k]=65535&O|j<<16,C[k]=65535&S|A<<16;S=65535&(E=V),A=E>>>16,O=65535&(x=T),j=x>>>16,x=t[0],A+=(E=e[0])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[0]=T=65535&O|j<<16,e[0]=V=65535&S|A<<16,S=65535&(E=D),A=E>>>16,O=65535&(x=U),j=x>>>16,x=t[1],A+=(E=e[1])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[1]=U=65535&O|j<<16,e[1]=D=65535&S|A<<16,S=65535&(E=q),A=E>>>16,O=65535&(x=L),j=x>>>16,x=t[2],A+=(E=e[2])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[2]=L=65535&O|j<<16,e[2]=q=65535&S|A<<16,S=65535&(E=P),A=E>>>16,O=65535&(x=z),j=x>>>16,x=t[3],A+=(E=e[3])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[3]=z=65535&O|j<<16,e[3]=P=65535&S|A<<16,S=65535&(E=F),A=E>>>16,O=65535&(x=N),j=x>>>16,x=t[4],A+=(E=e[4])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[4]=N=65535&O|j<<16,e[4]=F=65535&S|A<<16,S=65535&(E=K),A=E>>>16,O=65535&(x=B),j=x>>>16,x=t[5],A+=(E=e[5])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[5]=B=65535&O|j<<16,e[5]=K=65535&S|A<<16,S=65535&(E=H),A=E>>>16,O=65535&(x=M),j=x>>>16,x=t[6],A+=(E=e[6])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[6]=M=65535&O|j<<16,e[6]=H=65535&S|A<<16,S=65535&(E=Z),A=E>>>16,O=65535&(x=$),j=x>>>16,x=t[7],A+=(E=e[7])>>>16,O+=65535&x,j+=x>>>16,j+=(O+=(A+=(S+=65535&E)>>>16)>>>16)>>>16,t[7]=$=65535&O|j<<16,e[7]=Z=65535&S|A<<16,W+=128,r-=128}return r}function Y(t,e,n){var r,o=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),a=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,W(o,i,e,n),n%=128,r=0;r<n;r++)s[r]=e[a-n+r];for(s[n]=128,s[(n=256-128*(n<112?1:0))-9]=0,d(s,n-8,a/536870912|0,a<<3),W(o,i,s,n),r=0;r<8;r++)d(t,8*r,o[r],i[r]);return 0}function J(t,n){var r=e(),o=e(),i=e(),s=e(),a=e(),u=e(),l=e(),h=e(),f=e();B(r,t[1],t[0]),B(f,n[1],n[0]),M(r,r,f),N(o,t[0],t[1]),N(f,n[0],n[1]),M(o,o,f),M(i,t[3],n[3]),M(i,i,c),M(s,t[2],n[2]),N(s,s,s),B(a,o,r),B(u,s,i),N(l,s,i),N(h,o,r),M(t[0],a,u),M(t[1],h,l),M(t[2],l,u),M(t[3],a,h)}function X(t,e,n){var r;for(r=0;r<4;r++)C(t[r],e[r],n)}function Q(t,n){var r=e(),o=e(),i=e();V(i,n[2]),M(r,n[0],i),M(o,n[1],i),T(t,o),t[31]^=L(r)<<7}function tt(t,e,n){var r,o;for(j(t[0],i),j(t[1],s),j(t[2],s),j(t[3],i),o=255;o>=0;--o)X(t,e,r=n[o/8|0]>>(7&o)&1),J(e,t),J(t,t),X(t,e,r)}function et(t,n){var r=[e(),e(),e(),e()];j(r[0],l),j(r[1],h),j(r[2],s),M(r[3],l,h),tt(t,r,n)}function nt(t,r,o){var i,s=new Uint8Array(64),a=[e(),e(),e(),e()];for(o||n(r,32),Y(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,et(a,s),Q(t,a),i=0;i<32;i++)r[i+32]=t[i];return 0}var rt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ot(t,e){var n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)e[o]+=n-16*e[r]*rt[o-(r-32)],n=Math.floor((e[o]+128)/256),e[o]-=256*n;e[o]+=n,e[r]=0}for(n=0,o=0;o<32;o++)e[o]+=n-(e[31]>>4)*rt[o],n=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=n*rt[o];for(r=0;r<32;r++)e[r+1]+=e[r]>>8,t[r]=255&e[r]}function it(t){var e,n=new Float64Array(64);for(e=0;e<64;e++)n[e]=t[e];for(e=0;e<64;e++)t[e]=0;ot(t,n)}function st(t,n,r,o){var i,s,a=new Uint8Array(64),u=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),h=[e(),e(),e(),e()];Y(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=r+64;for(i=0;i<r;i++)t[64+i]=n[i];for(i=0;i<32;i++)t[32+i]=a[32+i];for(Y(c,t.subarray(32),r+32),it(c),et(h,c),Q(t,h),i=32;i<64;i++)t[i]=o[i];for(Y(u,t,r+64),it(u),i=0;i<64;i++)l[i]=0;for(i=0;i<32;i++)l[i]=c[i];for(i=0;i<32;i++)for(s=0;s<32;s++)l[i+s]+=u[i]*a[s];return ot(t.subarray(32),l),f}function at(t,n,r,o){var a,c=new Uint8Array(32),l=new Uint8Array(64),h=[e(),e(),e(),e()],d=[e(),e(),e(),e()];if(r<64)return-1;if(function(t,n){var r=e(),o=e(),a=e(),c=e(),l=e(),h=e(),d=e();return j(t[2],s),z(t[1],n),$(a,t[1]),M(c,a,u),B(a,a,t[2]),N(c,t[2],c),$(l,c),$(h,l),M(d,h,l),M(r,d,a),M(r,r,c),D(r,r),M(r,r,a),M(r,r,c),M(r,r,c),M(t[0],r,c),$(o,t[0]),M(o,o,c),U(o,a)&&M(t[0],t[0],f),$(o,t[0]),M(o,o,c),U(o,a)?-1:(L(t[0])===n[31]>>7&&B(t[0],i,t[0]),M(t[3],t[0],t[1]),0)}(d,o))return-1;for(a=0;a<r;a++)t[a]=n[a];for(a=0;a<32;a++)t[a+32]=o[a];if(Y(l,t,r),it(l),tt(h,d,l),et(d,n.subarray(32)),J(h,d),Q(c,h),r-=64,y(n,0,c,0)){for(a=0;a<r;a++)t[a]=0;return-1}for(a=0;a<r;a++)t[a]=n[a+64];return r}var ut,ct=16,lt=64,ht=32,ft=64;function dt(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function pt(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function gt(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:_,crypto_stream_xor:k,crypto_stream:I,crypto_stream_salsa20_xor:m,crypto_stream_salsa20:w,crypto_onetimeauth:E,crypto_onetimeauth_verify:S,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:A,crypto_secretbox_open:O,crypto_scalarmult:q,crypto_scalarmult_base:P,crypto_box_beforenm:K,crypto_box_afternm:H,crypto_box:function(t,e,n,r,o,i){var s=new Uint8Array(32);return K(s,o,i),H(t,e,n,r,s)},crypto_box_open:function(t,e,n,r,o,i){var s=new Uint8Array(32);return K(s,o,i),Z(t,e,n,r,s)},crypto_box_keypair:F,crypto_hash:Y,crypto_sign:st,crypto_sign_keypair:nt,crypto_sign_open:at,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ct,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:lt,crypto_sign_PUBLICKEYBYTES:ht,crypto_sign_SECRETKEYBYTES:ft,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:e,D:u,L:rt,pack25519:T,unpack25519:z,M:M,A:N,S:$,Z:B,pow2523:D,add:J,set25519:j,modL:ot,scalarmult:tt,scalarbase:et},t.randomBytes=function(t){var e=new Uint8Array(t);return n(e,t),e},t.secretbox=function(t,e,n){pt(t,e,n),dt(n,e);for(var r=new Uint8Array(32+t.length),o=new Uint8Array(r.length),i=0;i<t.length;i++)r[i+32]=t[i];return A(o,r,r.length,e,n),o.subarray(ct)},t.secretbox.open=function(t,e,n){pt(t,e,n),dt(n,e);for(var r=new Uint8Array(ct+t.length),o=new Uint8Array(r.length),i=0;i<t.length;i++)r[i+ct]=t[i];return r.length<32||0!==O(o,r,r.length,e,n)?null:o.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=ct,t.scalarMult=function(t,e){if(pt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var n=new Uint8Array(32);return q(n,t,e),n},t.scalarMult.base=function(t){if(pt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return P(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,n,r,o){var i=t.box.before(r,o);return t.secretbox(e,n,i)},t.box.before=function(t,e){pt(t,e),function(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")}(t,e);var n=new Uint8Array(32);return K(n,t,e),n},t.box.after=t.secretbox,t.box.open=function(e,n,r,o){var i=t.box.before(r,o);return t.secretbox.open(e,n,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return F(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(pt(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return P(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(pt(t,e),e.length!==ft)throw new Error("bad secret key size");var n=new Uint8Array(lt+t.length);return st(n,t,t.length,e),n},t.sign.open=function(t,e){if(pt(t,e),e.length!==ht)throw new Error("bad public key size");var n=new Uint8Array(t.length),r=at(n,t,t.length,e);if(r<0)return null;for(var o=new Uint8Array(r),i=0;i<o.length;i++)o[i]=n[i];return o},t.sign.detached=function(e,n){for(var r=t.sign(e,n),o=new Uint8Array(lt),i=0;i<o.length;i++)o[i]=r[i];return o},t.sign.detached.verify=function(t,e,n){if(pt(t,e,n),e.length!==lt)throw new Error("bad signature size");if(n.length!==ht)throw new Error("bad public key size");var r,o=new Uint8Array(lt+t.length),i=new Uint8Array(lt+t.length);for(r=0;r<lt;r++)o[r]=e[r];for(r=0;r<t.length;r++)o[r+lt]=t[r];return at(i,o,o.length,n)>=0},t.sign.keyPair=function(){var t=new Uint8Array(ht),e=new Uint8Array(ft);return nt(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(pt(t),t.length!==ft)throw new Error("bad secret key size");for(var e=new Uint8Array(ht),n=0;n<e.length;n++)e[n]=t[32+n];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(pt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(ht),n=new Uint8Array(ft),r=0;r<32;r++)n[r]=t[r];return nt(e,n,!0),{publicKey:e,secretKey:n}},t.sign.publicKeyLength=ht,t.sign.secretKeyLength=ft,t.sign.seedLength=32,t.sign.signatureLength=lt,t.hash=function(t){pt(t);var e=new Uint8Array(64);return Y(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return pt(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===p(t,0,e,0,t.length)},t.setPRNG=function(t){n=t},(ut="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&ut.getRandomValues?t.setPRNG((function(t,e){var n,r=new Uint8Array(e);for(n=0;n<e;n+=65536)ut.getRandomValues(r.subarray(n,n+Math.min(e-n,65536)));for(n=0;n<e;n++)t[n]=r[n];gt(r)})):"undefined"!=typeof require&&(ut=uc)&&ut.randomBytes&&t.setPRNG((function(t,e){var n,r=ut.randomBytes(e);for(n=0;n<e;n++)t[n]=r[n];gt(r)}))}(ac.exports?ac.exports:self.nacl=self.nacl||{});!function(t){var e,n;e=mt,n=function(){var t={};function e(t){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(t){if("string"!=typeof t)throw new TypeError("expected string");var e,n=unescape(encodeURIComponent(t)),r=new Uint8Array(n.length);for(e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r},t.encodeUTF8=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push(String.fromCharCode(t[e]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(t.encodeBase64=function(t){return Buffer.from(t).toString("base64")},t.decodeBase64=function(t){return e(t),new Uint8Array(Array.prototype.slice.call(Buffer.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new Buffer(t).toString("base64")},t.decodeBase64=function(t){return e(t),new Uint8Array(Array.prototype.slice.call(new Buffer(t,"base64"),0))}):(t.encodeBase64=function(t){var e,n=[],r=t.length;for(e=0;e<r;e++)n.push(String.fromCharCode(t[e]));return btoa(n.join(""))},t.decodeBase64=function(t){e(t);var n,r=atob(t),o=new Uint8Array(r.length);for(n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return o}),t},t.exports?t.exports=n():(e.nacl||(e.nacl={}),e.nacl.util=n())}({exports:{}}),ac.exports.secretbox.keyLength;var cc={returner:function(t,e){return function(n){e||(e=n);var r=typeof e;if("number"!==r&&"string"!==r)return t;switch(e){case 1:case"quiet":return;case 2:case"console":console.log(t);break;case 3:case"break":throw t instanceof Error?(t.message||(t.message="No value"),t):new Error(t||"No result");case 4:case"truthy":return null!=t&&!1!==t;case 5:case"typeof":if(null===t)return"null";if(void 0===t)return"undefined";if(t instanceof Error)return"error";try{return t.map((function(t){return t})),"array"}catch(o){return typeof t}case 6:case"trace":console.trace("TRACE: "+t);break;case 7:case"passthrough":case"default":default:return t}}},logger:function(t,e){return function(n){e||(e=n);var r=typeof e;if(("number"===r||"string"===r)&&t)switch(e){case 1:case"none":return;case 2:case"string":return t;case 3:case"trace":return void console.trace("TRACE: "+t);case 4:case"console":return void console.error(t);case 5:case"throw":throw t instanceof Error?(t.message||(t.message="No message"),t):new Error(t||"No result")}}},maybeCurry:function(t){return function(e){return"function"==typeof t?t(e):e}},jsonPurify:function(t){var e,n=void 0===t?{}:t,r=n.model,o=n.maxLen,i={};return function(t){return ic(this,void 0,void 0,(function(){return sc(this,(function(n){try{return o&&t.length>o?[2,null]:("object"!=typeof(e=JSON.parse(t))||Array.isArray(e)?i=e:r.forEach((function(t){e.hasOwnProperty(t)&&(i[t]=e[t])})),[2,i])}catch(s){return[2,s]}return[2]}))}))}}},lc={exports:{}},hc=lc.exports=function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){var n=e[s][1][t];return o(n||t)}),l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){(function(t){var n,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,s=new o(l),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}function h(t){1!==c.push(t)||r||n()}e.exports=h}).call(this,void 0!==mt?mt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var r=t(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==o&&d(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r((function(){var r;try{r=e(n)}catch(o){return i.reject(t,o)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function o(e){n||(n=!0,i.resolve(t,e))}function s(){e(o,r)}var a=p(s);"error"===a.status&&r(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}function g(t){return t instanceof this?t:i.resolve(new this(o),t)}function y(t){var e=new this(o);return i.reject(e,t)}function b(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,c=new this(o);++u<n;)l(t[u],u);return c;function l(t,o){function u(t){s[o]=t,++a!==n||r||(r=!0,i.resolve(c,s))}e.resolve(t).then(u,(function(t){r||(r=!0,i.reject(c,t))}))}}function _(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(o);++s<n;)u(t[s]);return a;function u(t){e.resolve(t).then((function(t){r||(r=!0,i.resolve(a,t))}),(function(t){r||(r=!0,i.reject(a,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(o);return this.state!==u?h(n,this.state===a?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=p(f,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=a,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=g,c.reject=y,c.all=b,c.race=_},{1:1}],3:[function(t,e,n){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==mt?mt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var s=i();function a(){try{if(!s||!s.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}function u(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var c=Promise;function l(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function h(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function f(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,y={},b=Object.prototype.toString,_="readonly",v="readwrite";function m(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}function w(t){return new c((function(e){var n=t.transaction(p,v),r=u([""]);n.objectStore(p).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function I(t){return"boolean"==typeof g?c.resolve(g):w(t).then((function(t){return g=t}))}function k(t){var e=y[t.name],n={};n.promise=new c((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function x(t){var e=y[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function E(t,e){var n=y[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function S(t,e){return new c((function(n,r){if(y[t.name]=y[t.name]||N(),t.db){if(!e)return n(t.db);k(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var i=s.open.apply(s,o);e&&(i.onupgradeneeded=function(e){var n=i.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(p)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),i.onerror=function(t){t.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),x(t)}}))}function A(t){return S(t,!1)}function O(t){return S(t,!0)}function j(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function R(t){return new c((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)}))}function C(t){return u([m(atob(t.data))],{type:t.type})}function T(t){return t&&t.__local_forage_encoded_blob}function U(t){var e=this,n=e._initReady().then((function(){var t=y[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return h(n,t,t),n}function L(t){k(t);for(var e=y[t.name],n=e.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,A(t).then((function(e){return t.db=e,j(t)?O(t):e})).then((function(r){t.db=e.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(e){throw E(t,e),e}))}function z(t,e,n,r){void 0===r&&(r=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),O(t)})).then((function(){return L(t).then((function(){z(t,e,n,r-1)}))})).catch(n);n(i)}}function N(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var o=y[n.name];o||(o=N(),y[n.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=U);var i=[];function s(){return c.resolve()}for(var a=0;a<o.forages.length;a++){var u=o.forages[a];u!==e&&i.push(u._initReady().catch(s))}var l=o.forages.slice(0);return c.all(i).then((function(){return n.db=o.db,A(n)})).then((function(t){return n.db=t,j(n,e._defaultConfig.version)?O(n):t})).then((function(t){n.db=o.db=t,e._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==e&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function M(t,e){var n=this;t=f(t);var r=new c((function(e,r){n.ready().then((function(){z(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),T(t)&&(t=C(t)),e(t)},s.onerror=function(){r(s.error)}}catch(a){r(a)}}))})).catch(r)}));return l(r,e),r}function $(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){z(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;T(r)&&(r=C(r));var o=t(r,n.key,a++);void 0!==o?e(o):n.continue()}else e()},s.onerror=function(){r(s.error)}}catch(u){r(u)}}))})).catch(r)}));return l(r,e),r}function V(t,e,n){var r=this;t=f(t);var o=new c((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===b.call(e)?I(i.db).then((function(t){return t?e:R(e)})):e})).then((function(e){z(r._dbInfo,v,(function(i,s){if(i)return o(i);try{var a=s.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var u=a.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),n(e)},s.onabort=s.onerror=function(){var t=u.error?u.error:u.transaction.error;o(t)}}catch(c){o(c)}}))})).catch(o)}));return l(o,n),o}function D(t,e){var n=this;t=f(t);var r=new c((function(e,r){n.ready().then((function(){z(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(s.error)},i.onabort=function(){var t=s.error?s.error:s.transaction.error;r(t)}}catch(a){r(a)}}))})).catch(r)}));return l(r,e),r}function q(t){var e=this,n=new c((function(t,n){e.ready().then((function(){z(e._dbInfo,v,(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;n(t)}}catch(s){n(s)}}))})).catch(n)}));return l(n,t),n}function P(t){var e=this,n=new c((function(t,n){e.ready().then((function(){z(e._dbInfo,_,(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return l(n,t),n}function F(t,e){var n=this,r=new c((function(e,r){t<0?e(null):n.ready().then((function(){z(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName),a=!1,u=s.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},u.onerror=function(){r(u.error)}}catch(c){r(c)}}))})).catch(r)}));return l(r,e),r}function K(t){var e=this,n=new c((function(t,n){e.ready().then((function(){z(e._dbInfo,_,(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var e=i.result;e?(s.push(e.key),e.continue()):t(s)},i.onerror=function(){n(i.error)}}catch(a){n(a)}}))})).catch(n)}));return l(n,t),n}function H(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var i=t.name===n.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):A(t).then((function(e){var n=y[t.name],r=n.forages;n.db=e;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=e;return e}));r=t.storeName?i.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;k(t);var r=y[t.name],o=r.forages;e.close();for(var i=0;i<o.length;i++){var a=o[i];a._dbInfo.db=null,a._dbInfo.version=n}return new c((function(e,r){var o=s.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,x(n._dbInfo)}})).catch((function(e){throw(E(t,e)||c.resolve()).catch((function(){})),e}))}})):i.then((function(e){k(t);var n=y[t.name],r=n.forages;e.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new c((function(e,n){var r=s.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)x(r[e]._dbInfo)})).catch((function(e){throw(E(t,e)||c.resolve()).catch((function(){})),e}))}))}else r=c.reject("Invalid arguments");return l(r,e),r}var Z={_driver:"asyncStorage",_initStorage:B,_support:a(),iterate:$,getItem:M,setItem:V,removeItem:D,clear:q,length:P,key:F,keys:K,dropInstance:H};function G(){return"function"==typeof openDatabase}var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,tt="arbf",et="blob",nt="si08",rt="ui08",ot="uic8",it="si16",st="si32",at="ur16",ut="ui32",ct="fl32",lt="fl64",ht=Q+tt.length,ft=Object.prototype.toString;function dt(t){var e,n,r,o,i,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(e=0;e<a;e+=4)n=W.indexOf(t[e]),r=W.indexOf(t[e+1]),o=W.indexOf(t[e+2]),i=W.indexOf(t[e+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return c}function pt(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=W[n[e]>>2],r+=W[(3&n[e])<<4|n[e+1]>>4],r+=W[(15&n[e+1])<<2|n[e+2]>>6],r+=W[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function gt(t,e){var n="";if(t&&(n=ft.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===ft.call(t.buffer))){var r,o=X;t instanceof ArrayBuffer?(r=t,o+=tt):(r=t.buffer,"[object Int8Array]"===n?o+=nt:"[object Uint8Array]"===n?o+=rt:"[object Uint8ClampedArray]"===n?o+=ot:"[object Int16Array]"===n?o+=it:"[object Uint16Array]"===n?o+=at:"[object Int32Array]"===n?o+=st:"[object Uint32Array]"===n?o+=ut:"[object Float32Array]"===n?o+=ct:"[object Float64Array]"===n?o+=lt:e(new Error("Failed to get type for BinaryArray"))),e(o+pt(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Y+t.type+"~"+pt(this.result);e(X+et+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(s){console.error("Couldn't convert value into a JSON string: ",t),e(null,s)}}function yt(t){if(t.substring(0,Q)!==X)return JSON.parse(t);var e,n=t.substring(ht),r=t.substring(Q,ht);if(r===et&&J.test(n)){var o=n.match(J);e=o[1],n=n.substring(o[0].length)}var i=dt(n);switch(r){case tt:return i;case et:return u([i],{type:e});case nt:return new Int8Array(i);case rt:return new Uint8Array(i);case ot:return new Uint8ClampedArray(i);case it:return new Int16Array(i);case at:return new Uint16Array(i);case st:return new Int32Array(i);case ut:return new Uint32Array(i);case ct:return new Float32Array(i);case lt:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var bt={serialize:gt,deserialize:yt,stringToBuffer:dt,bufferToString:pt};function _t(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function vt(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var o=new c((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(o){return r(o)}n.db.transaction((function(o){_t(o,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=bt,o}function mt(t,e,n,r,o,i){t.executeSql(n,r,o,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,a){a.rows.length?i(t,s):_t(t,e,(function(){t.executeSql(n,r,o,i)}),i)}),i):i(t,s)}),i)}function wt(t,e){var n=this;t=f(t);var r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){mt(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function It(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){mt(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,s=i.length,a=0;a<s;a++){var u=i.item(a),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=t(c,u.key,a+1)))return void e(c)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function kt(t,e,n,r){var o=this;t=f(t);var i=new c((function(i,s){o.ready().then((function(){void 0===e&&(e=null);var a=e,u=o._dbInfo;u.serializer.serialize(e,(function(e,c){c?s(c):u.db.transaction((function(n){mt(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(a)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(kt.apply(o,[t,a,n,r-1]));s(e)}}))}))})).catch(s)}));return l(i,n),i}function xt(t,e,n){return kt.apply(this,[t,e,n,1])}function Et(t,e){var n=this;t=f(t);var r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){mt(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function St(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){mt(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,t),n}function At(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){mt(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,t),n}function Ot(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){mt(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function jt(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){mt(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,t),n}function Rt(t){return new c((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}function Ct(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;return l(r=t.name?new c((function(e){var r;r=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(Rt(r))})).then((function(t){return new c((function(e,n){t.db.transaction((function(r){function o(t){return new c((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var i=[],s=0,a=t.storeNames.length;s<a;s++)i.push(o(t.storeNames[s]));c.all(i).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):c.reject("Invalid arguments"),e),r}var Tt={_driver:"webSQLStorage",_initStorage:vt,_support:G(),iterate:It,getItem:wt,setItem:xt,removeItem:Et,clear:St,length:At,key:Ot,keys:jt,dropInstance:Ct};function Ut(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Lt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function zt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(e){return!0}}function Nt(){return!zt()||localStorage.length>0}function Bt(t){var e=this,n={};if(t)for(var r in t)n[r]=t[r];return n.keyPrefix=Lt(t,e._defaultConfig),Nt()?(e._dbInfo=n,n.serializer=bt,c.resolve()):c.reject()}function Mt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return l(n,t),n}function $t(t,e){var n=this;t=f(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return l(r,e),r}function Vt(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,o=r.length,i=localStorage.length,s=1,a=0;a<i;a++){var u=localStorage.key(a);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,u.substring(o),s++)))return c}}}));return l(r,e),r}function Dt(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(o){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return l(r,e),r}function qt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&r.push(i.substring(t.keyPrefix.length))}return r}));return l(n,t),n}function Pt(t){var e=this.keys().then((function(t){return t.length}));return l(e,t),e}function Ft(t,e){var n=this;t=f(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return l(r,e),r}function Kt(t,e,n){var r=this;t=f(t);var o=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new c((function(o,i){var s=r._dbInfo;s.serializer.serialize(e,(function(e,r){if(r)i(r);else try{localStorage.setItem(s.keyPrefix+t,e),o(n)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||i(a),i(a)}}))}))}));return l(o,n),o}function Ht(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,o=this;return l(r=t.name?new c((function(e){t.storeName?e(Lt(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),e),r}var Zt={_driver:"localStorageWrapper",_initStorage:Bt,_support:Ut(),iterate:Vt,getItem:$t,setItem:Kt,removeItem:Ft,clear:Mt,length:Pt,key:Dt,keys:qt,dropInstance:Ht},Gt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Wt=function(t,e){for(var n=t.length,r=0;r<n;){if(Gt(t[r],e))return!0;r++}return!1},Yt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Jt={},Xt={},Qt={INDEXEDDB:Z,WEBSQL:Tt,LOCALSTORAGE:Zt},te=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],ee=["dropInstance"],ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),re={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function oe(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function ie(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Yt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var se=new(function(){function t(e){for(var n in o(this,t),Qt)if(Qt.hasOwnProperty(n)){var r=Qt[n],i=r._driver;this[n]=i,Jt[i]||this.defineDriver(r)}this._defaultConfig=ie({},re),this._config=ie({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new c((function(e,n){try{var r=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var i=ne.concat("_initStorage"),s=0,a=i.length;s<a;s++){var u=i[s];if((!Wt(ee,u)||t[u])&&"function"!=typeof t[u])return void n(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=c.reject(e);return l(n,arguments[arguments.length-1]),n}},n=0,r=ee.length;n<r;n++){var o=ee[n];t[o]||(t[o]=e(o))}}();var h=function(n){Jt[r]&&console.info("Redefining LocalForage driver: "+r),Jt[r]=t,Xt[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,n):h(!!t._support):h(!0)}catch(f){n(f)}}));return h(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=Jt[t]?c.resolve(Jt[t]):c.reject(new Error("Driver not found."));return h(r,e,n),r},t.prototype.getSerializer=function(t){var e=c.resolve(bt);return h(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return h(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;Yt(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){r._config.driver=r.driver()}function s(t){return r._extend(t),i(),r._ready=r._initStorage(r._config),r._ready}function a(t){return function(){var e=0;function n(){for(;e<t.length;){var o=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var a=new Error("No available storage method found.");return r._driverSet=c.reject(a),r._driverSet}return n()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var t=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){i();var t=new Error("No available storage method found.");return r._driverSet=c.reject(t),r._driverSet})),h(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Xt[t]},t.prototype._extend=function(t){ie(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ne.length;t<e;t++)oe(this,ne[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=se},{3:3}]},{},[4])(4);function fc(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function dc(t){return function e(n){return 0===arguments.length||fc(n)?e:t.apply(this,arguments)}}function pc(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return fc(n)?e:dc((function(e){return t(n,e)}));default:return fc(n)&&fc(r)?e:fc(n)?dc((function(e){return t(e,r)})):fc(r)?dc((function(e){return t(n,e)})):t(n,r)}}}function gc(t){return function e(n,r,o){switch(arguments.length){case 0:return e;case 1:return fc(n)?e:pc((function(e,r){return t(n,e,r)}));case 2:return fc(n)&&fc(r)?e:fc(n)?pc((function(e,n){return t(e,r,n)})):fc(r)?pc((function(e,r){return t(n,e,r)})):dc((function(e){return t(n,r,e)}));default:return fc(n)&&fc(r)&&fc(o)?e:fc(n)&&fc(r)?pc((function(e,n){return t(e,n,o)})):fc(n)&&fc(o)?pc((function(e,n){return t(e,r,n)})):fc(r)&&fc(o)?pc((function(e,r){return t(n,e,r)})):fc(n)?dc((function(e){return t(e,r,o)})):fc(r)?dc((function(e){return t(n,e,o)})):fc(o)?dc((function(e){return t(n,r,e)})):t(n,r,o)}}}var yc=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function bc(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function _c(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!yc(o)){for(var i=0;i<t.length;){if("function"==typeof o[t[i]])return o[t[i]].apply(o,r);i+=1}if(bc(o)){var s=e.apply(null,r);return s(o)}}return n.apply(this,arguments)}}var vc=function(){return this.xf["@@transducer/init"]()},mc=function(t){return this.xf["@@transducer/result"](t)};function wc(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}function Ic(t){return"[object String]"===Object.prototype.toString.call(t)}var kc=dc((function(t){return!!yc(t)||!!t&&("object"==typeof t&&(!Ic(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),xc=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var Ec=pc((function(t,e){return function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,i){return e.apply(this,arguments)};case 6:return function(t,n,r,o,i,s){return e.apply(this,arguments)};case 7:return function(t,n,r,o,i,s,a){return e.apply(this,arguments)};case 8:return function(t,n,r,o,i,s,a,u){return e.apply(this,arguments)};case 9:return function(t,n,r,o,i,s,a,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,o,i,s,a,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(t.length,(function(){return t.apply(e,arguments)}))}));function Sc(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function Ac(t,e,n,r){return t["@@transducer/result"](n[r](Ec(t["@@transducer/step"],t),e))}var Oc="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function jc(t,e,n){if("function"==typeof t&&(t=function(t){return new xc(t)}(t)),kc(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return Ac(t,e,n,"fantasy-land/reduce");if(null!=n[Oc])return Sc(t,e,n[Oc]());if("function"==typeof n.next)return Sc(t,e,n);if("function"==typeof n.reduce)return Ac(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}function Rc(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var Cc=Object.prototype.toString,Tc=function(){return"[object Arguments]"===Cc.call(arguments)?function(t){return"[object Arguments]"===Cc.call(t)}:function(t){return Rc("callee",t)}}(),Uc=!{toString:null}.propertyIsEnumerable("toString"),Lc=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],zc=function(){return arguments.propertyIsEnumerable("length")}(),Nc=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},Bc="function"!=typeof Object.keys||zc?dc((function(t){if(Object(t)!==t)return[];var e,n,r=[],o=zc&&Tc(t);for(e in t)!Rc(e,t)||o&&"length"===e||(r[r.length]=e);if(Uc)for(n=Lc.length-1;n>=0;)Rc(e=Lc[n],t)&&!Nc(r,e)&&(r[r.length]=e),n-=1;return r})):dc((function(t){return Object(t)!==t?[]:Object.keys(t)}));function Mc(t){return"[object Function]"===Object.prototype.toString.call(t)}var $c=dc((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function Vc(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function Dc(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}var qc="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function Pc(t,e,n,r){var o=Vc(t);function i(t,e){return Fc(t,e,n.slice(),r.slice())}return!Dc((function(t,e){return!Dc(i,e,t)}),Vc(e),o)}function Fc(t,e,n,r){if(qc(t,e))return!0;var o,i,s=$c(t);if(s!==$c(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(o=t.constructor,null==(i=String(o).match(/^function (\w*)/))?"":i[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!qc(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!qc(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var a=n.length-1;a>=0;){if(n[a]===t)return r[a]===e;a-=1}switch(s){case"Map":return t.size===e.size&&Pc(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&Pc(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=Bc(t);if(u.length!==Bc(e).length)return!1;var c=n.concat([t]),l=r.concat([e]);for(a=u.length-1;a>=0;){var h=u[a];if(!Rc(h,e)||!Fc(e[h],t[h],c,l))return!1;a-=1}return!0}var Kc=pc((function(t,e){return Fc(t,e,[],[])}));function Hc(t,e){return function(t,e,n){var r,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(o=t[n])&&1/o===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(o=t[n])&&o!=o)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(Kc(t[n],e))return n;n+=1}return-1}(e,t,0)>=0}function Zc(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var Gc=function(t){return(t<10?"0":"")+t},Wc="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+Gc(t.getUTCMonth()+1)+"-"+Gc(t.getUTCDate())+"T"+Gc(t.getUTCHours())+":"+Gc(t.getUTCMinutes())+":"+Gc(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Yc(t){return"[object Object]"===Object.prototype.toString.call(t)}var Jc=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=vc,t.prototype["@@transducer/result"]=mc,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),Xc=pc(_c(["filter"],pc((function(t,e){return new Jc(t,e)})),(function(t,e){return Yc(e)?jc((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},Bc(e)):function(t,e){for(var n=0,r=e.length,o=[];n<r;)t(e[n])&&(o[o.length]=e[n]),n+=1;return o}(t,e)}))),Qc=pc((function(t,e){return Xc((n=t,function(){return!n.apply(this,arguments)}),e);var n}));function tl(t,e){var n=function(n){var r=e.concat([t]);return Hc(n,r)?"<Circular>":tl(n,r)},r=function(t,e){return wc((function(e){return Zc(e)+": "+n(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+wc(n,t).join(", ")+"))";case"[object Array]":return"["+wc(n,t).concat(r(t,Qc((function(t){return/^\d+$/.test(t)}),Bc(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):Zc(Wc(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+n(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+n(t.valueOf())+")":Zc(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var o=t.toString();if("[object Object]"!==o)return o}return"{"+r(t,Bc(t)).join(", ")+"}"}}var el=dc((function(t){return tl(t,[])})),nl=pc((function(t,e){if(yc(t)){if(yc(e))return t.concat(e);throw new TypeError(el(e)+" is not an array")}if(Ic(t)){if(Ic(e))return t+e;throw new TypeError(el(e)+" is not a string")}if(null!=t&&Mc(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&Mc(t.concat))return t.concat(e);throw new TypeError(el(t)+' does not have a method named "concat" or "fantasy-land/concat"')}));var rl="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var i in o)Rc(i,o)&&(e[i]=o[i]);n+=1}return e},ol=gc((function(t,e,n){var r,o={};for(r in e)Rc(r,e)&&(o[r]=Rc(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)Rc(r,n)&&!Rc(r,o)&&(o[r]=n[r]);return o})),il=gc((function t(e,n,r){return ol((function(n,r,o){return Yc(r)&&Yc(o)?t(e,r,o):e(n,r,o)}),n,r)})),sl=pc((function(t,e){return il((function(t,e,n){return n}),t,e)})),al=gc((function(t,e,n){return il((function(e,n,r){return t(n,r)}),e,n)})),ul=pc((function(t,e){return rl({},t,e)})),cl=gc((function(t,e,n){return ol((function(e,n,r){return t(n,r)}),e,n)})),ll={getItem:function(t){var e=void 0===t?{}:t,n=e.key,r=e.logger,o=e.returner,i=e.before,s=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,a,u=this;return sc(this,(function(c){switch(c.label){case 0:return[4,fl({store:s})];case 1:return e=c.sent(),i?[4,cc.maybeCurry(t||null)(n)]:[3,3];case 2:return a=c.sent(),[3,4];case 3:a=n,c.label=4;case 4:return n=a,[2,cc.returner(e.getItem(n).then((function(e){return ic(u,void 0,void 0,(function(){return sc(this,(function(n){return[2,i?e:cc.maybeCurry(t||null)(e)]}))}))})).catch((function(t){return cc.logger(t)(r)})))(o)]}}))}))}},getKeyValue:function(t){var e=void 0===t?{}:t,n=e.key,r=e.value,o=e.logger,i=e.returner,s=e.before,a=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,u;return sc(this,(function(c){switch(c.label){case 0:return[4,fl({store:a})];case 1:return e=c.sent(),s?[4,cc.maybeCurry(t||null)(r)]:[3,3];case 2:return u=c.sent(),[3,4];case 3:u=r,c.label=4;case 4:return r=u,[2,cc.returner(e.getItem(n).then((function(e){return s?e[r]:cc.maybeCurry(t||null)(e[r])})).catch((function(t){return cc.logger(t)(o)})))(i)]}}))}))}},setItem:function(t){var e=void 0===t?{}:t,n=e.key,r=e.value,o=e.logger,i=e.returner,s=e.before,a=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,u,c=this;return sc(this,(function(l){switch(l.label){case 0:return e=fl({store:a}),s?[4,cc.maybeCurry(t||null)(r)]:[3,2];case 1:return u=l.sent(),[3,3];case 2:u=r,l.label=3;case 3:return r=u,[2,cc.returner(e.setItem(n,r).then((function(e){return ic(c,void 0,void 0,(function(){return sc(this,(function(n){return[2,s?e:cc.maybeCurry(t||null)(e)]}))}))})).catch((function(t){return cc.logger(t)(o)})))(i)]}}))}))}},key:function(t){var e=void 0===t?{}:t,n=e.index,r=e.logger,o=e.returner,i=e.before,s=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,a;return sc(this,(function(u){switch(u.label){case 0:return[4,fl({store:s})];case 1:return e=u.sent(),i?[4,cc.maybeCurry(t||null)(n)]:[3,3];case 2:return a=u.sent(),[3,4];case 3:a=n,u.label=4;case 4:return n=a,[2,cc.returner(e.key(n).then((function(e){return i?e:cc.maybeCurry(t||null)(e)})).catch((function(t){return cc.logger(t)(r)})))(o)]}}))}))}},mergeItem:function(t){var e=void 0===t?{}:t,n=e.key,r=e.value,o=e.type,i=e.returner,s=e.logger,a=e.before,u=e.store,c=function(t,e,n){return"values"===t?nl(e,n):n};return function(t){return ic(this,void 0,void 0,(function(){var e,l,h,f,d=this;return sc(this,(function(p){switch(p.label){case 0:return e=fl({store:u}),a?[4,cc.maybeCurry(t||null)(r)]:[3,2];case 1:return l=p.sent(),[3,3];case 2:l=r,p.label=3;case 3:return r=l,f=(h=cc).returner,[4,e.getItem(n).then((function(i){return ic(d,void 0,void 0,(function(){var a,u,l,h,f,d,p,g;return sc(this,(function(y){switch(y.label){case 0:switch(o){case"custom":return[3,1];case"right":return[3,5];case"deepRight":return[3,8];case"with":return[3,11];case"withKey":return[3,14];case"deepWith":return[3,15];case"deepWithKey":return[3,16]}return[3,16];case 1:return y.trys.push([1,4,,5]),u=(a=e).setItem,l=[n],[4,cc.maybeCurry(t)(i)];case 2:return[4,u.apply(a,l.concat([y.sent()]))];case 3:return[2,y.sent()];case 4:return h=y.sent(),[2,cc.logger(h)(s)];case 5:return y.trys.push([5,7,,8]),[4,e.setItem(n,ul(i,r))];case 6:return[2,y.sent()];case 7:return f=y.sent(),[2,cc.logger(f)(s)];case 8:return y.trys.push([8,10,,11]),[4,e.setItem(n,sl(i,r))];case 9:return[2,y.sent()];case 10:return d=y.sent(),[2,cc.logger(d)(s)];case 11:return y.trys.push([11,13,,14]),[4,e.setItem(n,cl(nl,i,r))];case 12:return[2,y.sent()];case 13:return p=y.sent(),[2,cc.logger(p)(s)];case 14:try{return[2,e.setItem(n,ol(c,i,r))]}catch(b){return[2,cc.logger(b)(s)]}y.label=15;case 15:try{return[2,e.setItem(n,al(nl,i,r))]}catch(b){return[2,cc.logger(b)(s)]}y.label=16;case 16:return y.trys.push([16,18,,19]),[4,e.setItem(n,il(c,i,r))];case 17:return[2,y.sent()];case 18:return g=y.sent(),[2,cc.logger(g)(s)];case 19:return[2]}}))}))})).catch((function(t){return cc.logger(t)(s)}))];case 4:return[2,f.apply(h,[p.sent()])(i)]}}))}))}},removeItem:function(t){var e=void 0===t?{}:t,n=e.key,r=e.logger,o=e.returner,i=e.before,s=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,a,u,c;return sc(this,(function(l){switch(l.label){case 0:return i?[4,cc.maybeCurry(t||null)(n)]:[3,2];case 1:return e=l.sent(),[3,3];case 2:e=n,l.label=3;case 3:return n=e,[4,fl({store:s})];case 4:return a=l.sent(),c=(u=cc).returner,[4,a.removeItem(n).then((function(){return!0})).catch((function(t){return cc.logger(t)(r)}))];case 5:return[2,c.apply(u,[l.sent()])(o)]}}))}))}},deleteItemKey:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return ic(this,void 0,void 0,(function(){var r;return sc(this,(function(o){return r=hl(n),[2,hc.getItem(t).then((function(n){return"string"==typeof e?delete n[e]:typeof e==typeof[]&&e.forEach((function(t){return delete n[t]})),hc.setItem(t,n).then((function(t){return t})).catch((function(t){return cc.logger(t,r[0].logger)}))})).catch((function(t){return cc.logger(t,r[0].logger)}))]}))}))},clear:function(t){var e=void 0===t?{}:t,n=e.logger,r=void 0===n?"none":n,o=e.store;return function(t){return ic(this,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return[4,fl({store:o})];case 1:return[2,e.sent().clear().then((function(){return cc.maybeCurry(t||null)(!0)})).catch((function(t){return cc.logger(t)(r)}))]}}))}))}},length:function(t){var e=void 0===t?{}:t,n=e.logger,r=e.returner,o=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,i,s;return sc(this,(function(a){switch(a.label){case 0:return[4,fl({store:o})];case 1:return e=a.sent(),s=(i=cc).returner,[4,e.length().then((function(e){return cc.maybeCurry(t||null)(e)})).catch((function(t){return cc.logger(t)(n)}))];case 2:return[2,s.apply(i,[a.sent()])(r)]}}))}))}},keys:function(t){var e=void 0===t?{}:t,n=e.logger,r=e.returner,o=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,i,s;return sc(this,(function(a){switch(a.label){case 0:return[4,fl({store:o})];case 1:return e=a.sent(),s=(i=cc).returner,[4,e.keys().then((function(e){return cc.maybeCurry(t||null)(e)})).catch((function(t){return cc.logger(t)(n)}))];case 2:return[2,s.apply(i,[a.sent()])(r)]}}))}))}},hasKey:function(t){var e=void 0===t?{}:t,n=e.key,r=e.logger,o=e.returner,i=e.store;return function(t){return ic(this,void 0,void 0,(function(){var e,s,a;return sc(this,(function(u){switch(u.label){case 0:return[4,fl({store:i})];case 1:return e=u.sent(),a=(s=cc).returner,[4,e.keys().then((function(e){return cc.maybeCurry(t||null)(e.includes(n))})).catch((function(t){return cc.logger(t)(r)}))];case 2:return[2,a.apply(s,[u.sent()])(o)]}}))}))}},hasKeyValue:function(t){var e=void 0===t?{}:t,n=e.key,r=e.value,o=e.logger,i=e.returner;return function(t){return ic(this,void 0,void 0,(function(){var e,s;return sc(this,(function(a){switch(a.label){case 0:return s=(e=cc).returner,[4,hc.getItem(n).then((function(e){return cc.maybeCurry(t)(!!e[r])})).catch((function(t){return cc.logger(t)(o)}))];case 1:return[2,s.apply(e,[a.sent()])(i)]}}))}))}},iterate:function(t,e){hc.iterate(t,e)},config:function(t){return hc.config(t)},driver:function(){return hc.driver()},ready:function(){return ic(this,void 0,void 0,(function(){return sc(this,(function(t){return[2,hc.ready().then((function(){return!0})).catch((function(t){return console.error(t),!1}))]}))}))},createInstance:function(t){var e=void 0===t?{}:t,n=e.name;return e.logger,hc.createInstance({name:n||"tauriForage"})},dropInstance:function(t){var e=t.name;return ic(this,void 0,void 0,(function(){return sc(this,(function(t){return[2,hc.dropInstance({name:e}).then((function(){return!0})).catch((function(t){return console.log(t),!1}))]}))}))},dropAll:function(){return ic(this,void 0,void 0,(function(){return sc(this,(function(t){return[2,hc.dropInstance({}).then((function(){return!0})).catch((function(t){return console.log(t),!1}))]}))}))},dropStore:function(t){var e=t.name,n=t.storeName;return hc.dropInstance({name:e,storeName:n})}},hl=function(t){return t?t.map((function(t){switch(typeof t){case"function":return{curry:t};case"string":return{logger:t};case"number":return{returner:t};case"boolean":return{before:t};default:return{curry:t}}})):[]},fl=function(t){var e=(void 0===t?{}:t).store;return e?ll.createInstance({name:e}):hc};
/*
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class dl{constructor(t,e=""){this.source=t.source,this.flags=e}setGroup(t,e){let n="string"==typeof e?e:e.source;return n=n.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(t,n),this}getRegexp(){return new RegExp(this.source,this.flags)}}
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */const pl=/[&<>"']/,gl=/[&<>"']/g,yl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bl=/[<>"']|&(?!#?\w+;)/,_l=/[<>"']|&(?!#?\w+;)/g;function vl(t,e){if(e){if(pl.test(t))return t.replace(gl,(t=>yl[t]))}else if(bl.test(t))return t.replace(_l,(t=>yl[t]));return t}function ml(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}
/**
 * @license
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */var wl,Il;(Il=wl||(wl={}))[Il.space=1]="space",Il[Il.text=2]="text",Il[Il.paragraph=3]="paragraph",Il[Il.heading=4]="heading",Il[Il.listStart=5]="listStart",Il[Il.listEnd=6]="listEnd",Il[Il.looseItemStart=7]="looseItemStart",Il[Il.looseItemEnd=8]="looseItemEnd",Il[Il.listItemStart=9]="listItemStart",Il[Il.listItemEnd=10]="listItemEnd",Il[Il.blockquoteStart=11]="blockquoteStart",Il[Il.blockquoteEnd=12]="blockquoteEnd",Il[Il.code=13]="code",Il[Il.table=14]="table",Il[Il.html=15]="html",Il[Il.hr=16]="hr";
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class kl{constructor(t){this.options=t||Sl.options}code(t,e,n,r){if(this.options.highlight){const r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}const o=n?t:this.options.escape(t,!0);if(!e)return`\n<pre><code>${o}\n</code></pre>\n`;return`\n<pre><code class="${this.options.langPrefix+this.options.escape(e,!0)}">${o}\n</code></pre>\n`}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,n){return`<h${e} id="${this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")}">${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e){const n=e?"ol":"ul";return`\n<${n}>\n${t}</${n}>\n`}listitem(t){return"<li>"+t+"</li>\n"}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return`\n<table>\n<thead>\n${t}</thead>\n<tbody>\n${e}</tbody>\n</table>\n`}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,n){if(this.options.sanitize){let e;try{e=decodeURIComponent(this.options.unescape(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return n}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return n}let r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){let r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">",r}text(t){return t}}
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */class xl{constructor(t,e,n=Sl.options,r){if(this.staticThis=t,this.links=e,this.options=n,this.renderer=r||this.options.renderer||new kl(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(t,e,n){return new this(this,e,n).output(t)}static getRulesBase(){if(this.rulesBase)return this.rulesBase;const t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};return t.link=new dl(t.link).setGroup("inside",t._inside).setGroup("href",t._href).getRegexp(),t.reflink=new dl(t.reflink).setGroup("inside",t._inside).getRegexp(),this.rulesBase=t}static getRulesPedantic(){return this.rulesPedantic?this.rulesPedantic:this.rulesPedantic=Object.assign(Object.assign({},this.getRulesBase()),{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})}static getRulesGfm(){if(this.rulesGfm)return this.rulesGfm;const t=this.getRulesBase(),e=new dl(t.escape).setGroup("])","~|])").getRegexp(),n=new dl(t.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp();return this.rulesGfm=Object.assign(Object.assign({},t),{escape:e,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:n})}static getRulesBreaks(){if(this.rulesBreaks)return this.rulesBreaks;const t=this.getRulesGfm(),e=this.getRulesGfm();return this.rulesBreaks=Object.assign(Object.assign({},e),{br:new dl(t.br).setGroup("{2,}","*").getRegexp(),text:new dl(e.text).setGroup("{2,}","*").getRegexp()})}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.url}output(t){let e;t=t;let n="";for(;t;)if(e=this.rules.escape.exec(t))t=t.substring(e[0].length),n+=e[1];else if(e=this.rules.autolink.exec(t)){let r,o;t=t.substring(e[0].length),"@"===e[2]?(r=this.options.escape(":"===e[1].charAt(6)?this.mangle(e[1].substring(7)):this.mangle(e[1])),o=this.mangle("mailto:")+r):(r=this.options.escape(e[1]),o=r),n+=this.renderer.link(o,null,r)}else if(!this.inLink&&this.hasRulesGfm&&(e=this.rules.url.exec(t))){let r,o;t=t.substring(e[0].length),r=this.options.escape(e[1]),o=r,n+=this.renderer.link(o,null,r)}else if(e=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(e[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(e[0])&&(this.inLink=!1),t=t.substring(e[0].length),n+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):this.options.escape(e[0]):e[0];else if(e=this.rules.link.exec(t))t=t.substring(e[0].length),this.inLink=!0,n+=this.outputLink(e,{href:e[2],title:e[3]}),this.inLink=!1;else if((e=this.rules.reflink.exec(t))||(e=this.rules.nolink.exec(t))){t=t.substring(e[0].length);const r=(e[2]||e[1]).replace(/\s+/g," "),o=this.links[r.toLowerCase()];if(!o||!o.href){n+=e[0].charAt(0),t=e[0].substring(1)+t;continue}this.inLink=!0,n+=this.outputLink(e,o),this.inLink=!1}else if(e=this.rules.strong.exec(t))t=t.substring(e[0].length),n+=this.renderer.strong(this.output(e[2]||e[1]));else if(e=this.rules.em.exec(t))t=t.substring(e[0].length),n+=this.renderer.em(this.output(e[2]||e[1]));else if(e=this.rules.code.exec(t))t=t.substring(e[0].length),n+=this.renderer.codespan(this.options.escape(e[2].trim(),!0));else if(e=this.rules.br.exec(t))t=t.substring(e[0].length),n+=this.renderer.br();else if(this.hasRulesGfm&&(e=this.rules.del.exec(t)))t=t.substring(e[0].length),n+=this.renderer.del(this.output(e[1]));else if(e=this.rules.text.exec(t))t=t.substring(e[0].length),n+=this.renderer.text(this.options.escape(this.smartypants(e[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return n}outputLink(t,e){const n=this.options.escape(e.href),r=e.title?this.options.escape(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,this.options.escape(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;let e="";const n=t.length;for(let r=0;r<n;r++){let n;Math.random()>.5&&(n="x"+t.charCodeAt(r).toString(16)),e+="&#"+n+";"}return e}}xl.rulesBase=null,xl.rulesPedantic=null,xl.rulesGfm=null,xl.rulesBreaks=null;
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class El{constructor(t){this.simpleRenderers=[],this.line=0,this.tokens=[],this.token=null,this.options=t||Sl.options,this.renderer=this.options.renderer||new kl(this.options)}static parse(t,e,n){return new this(n).parse(e,t)}parse(t,e){this.inlineLexer=new xl(xl,t,this.options,this.renderer),this.tokens=e.reverse();let n="";for(;this.next();)n+=this.tok();return n}debug(t,e){this.inlineLexer=new xl(xl,t,this.options,this.renderer),this.tokens=e.reverse();let n="";for(;this.next();){const t=this.tok();this.token.line=this.line+=t.split("\n").length-1,n+=t}return n}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let t,e=this.token.text;for(;(t=this.getNextElement())&&t.type==wl.text;)e+="\n"+this.next().text;return this.inlineLexer.output(e)}tok(){switch(this.token.type){case wl.space:return"";case wl.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case wl.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case wl.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case wl.listStart:{let t="";const e=this.token.ordered;for(;this.next().type!=wl.listEnd;)t+=this.tok();return this.renderer.list(t,e)}case wl.listItemStart:{let t="";for(;this.next().type!=wl.listItemEnd;)t+=this.token.type==wl.text?this.parseText():this.tok();return this.renderer.listitem(t)}case wl.looseItemStart:{let t="";for(;this.next().type!=wl.listItemEnd;)t+=this.tok();return this.renderer.listitem(t)}case wl.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case wl.table:{let t,e="",n="";t="";for(let r=0;r<this.token.header.length;r++){const e={header:!0,align:this.token.align[r]},n=this.inlineLexer.output(this.token.header[r]);t+=this.renderer.tablecell(n,e)}e+=this.renderer.tablerow(t);for(const r of this.token.cells){t="";for(let e=0;e<r.length;e++)t+=this.renderer.tablecell(this.inlineLexer.output(r[e]),{header:!1,align:this.token.align[e]});n+=this.renderer.tablerow(t)}return this.renderer.table(e,n)}case wl.blockquoteStart:{let t="";for(;this.next().type!=wl.blockquoteEnd;)t+=this.tok();return this.renderer.blockquote(t)}case wl.hr:return this.renderer.hr();case wl.html:{const t=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text);return this.renderer.html(t)}default:{if(this.simpleRenderers.length)for(let e=0;e<this.simpleRenderers.length;e++)if(this.token.type=="simpleRule"+(e+1))return this.simpleRenderers[e].call(this.renderer,this.token.execArr);const t=`Token with "${this.token.type}" type was not found.`;if(!this.options.silent)throw new Error(t);console.log(t)}}}}
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */class Sl{static setOptions(t){return Object.assign(this.options,t),this}static setBlockRule(t,e=(()=>"")){return Al.simpleRules.push(t),this.simpleRenderers.push(e),this}static parse(t,e=this.options){try{const{tokens:n,links:r}=this.callBlockLexer(t,e);return this.callParser(n,r,e)}catch(n){return this.callMe(n)}}static debug(t,e=this.options){const{tokens:n,links:r}=this.callBlockLexer(t,e);let o=n.slice();const i=new El(e);i.simpleRenderers=this.simpleRenderers;const s=i.debug(r,n);return o=o.map((t=>{t.type=wl[t.type]||t.type;const e=t.line;return delete t.line,e?Object.assign({line:e},t):t})),{tokens:o,links:r,result:s}}static callBlockLexer(t="",e){if("string"!=typeof t)throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof t}'`);return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),Al.lex(t,e,!0)}static callParser(t,e,n){if(this.simpleRenderers.length){const r=new El(n);return r.simpleRenderers=this.simpleRenderers,r.parse(e,t)}return El.parse(t,e,n)}static callMe(t){if(t.message+="\nPlease report this to https://github.com/ts-stack/markdown",this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(t.message+"",!0)+"</pre>";throw t}}Sl.options=new class{constructor(){this.gfm=!0,this.tables=!0,this.breaks=!1,this.pedantic=!1,this.sanitize=!1,this.mangle=!0,this.smartLists=!1,this.silent=!1,this.langPrefix="lang-",this.smartypants=!1,this.headerPrefix="",this.xhtml=!1,this.escape=vl,this.unescape=ml}},Sl.simpleRenderers=[];
/**
 * @license
 *
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 *
 * Copyright (c) 2018-2021, Костя Третяк. (MIT Licensed)
 * https://github.com/ts-stack/markdown
 */
class Al{constructor(t,e){this.staticThis=t,this.links={},this.tokens=[],this.options=e||Sl.options,this.setRules()}static lex(t,e,n,r){return new this(this,e).getTokens(t,n,r)}static getRulesBase(){if(this.rulesBase)return this.rulesBase;const t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};t.item=new dl(t.item,"gm").setGroup(/bull/g,t.bullet).getRegexp(),t.list=new dl(t.list).setGroup(/bull/g,t.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+t.def.source+")").getRegexp();const e="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";return t.html=new dl(t.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,e).getRegexp(),t.paragraph=new dl(t.paragraph).setGroup("hr",t.hr).setGroup("heading",t.heading).setGroup("lheading",t.lheading).setGroup("blockquote",t.blockquote).setGroup("tag","<"+e).setGroup("def",t.def).getRegexp(),this.rulesBase=t}static getRulesGfm(){if(this.rulesGfm)return this.rulesGfm;const t=this.getRulesBase(),e=Object.assign(Object.assign({},t),{fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n=e.fences.source.replace("\\1","\\2"),r=t.list.source.replace("\\1","\\3");return e.paragraph=new dl(t.paragraph).setGroup("(?!",`(?!${n}|${r}|`).getRegexp(),this.rulesGfm=e}static getRulesTable(){return this.rulesTables?this.rulesTables:this.rulesTables=Object.assign(Object.assign({},this.getRulesGfm()),{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table}getTokens(t,e,n){let r,o=t;t:for(;o;)if((r=this.rules.newline.exec(o))&&(o=o.substring(r[0].length),r[0].length>1&&this.tokens.push({type:wl.space})),r=this.rules.code.exec(o)){o=o.substring(r[0].length);const t=r[0].replace(/^ {4}/gm,"");this.tokens.push({type:wl.code,text:this.options.pedantic?t:t.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(r=this.rules.fences.exec(o)))o=o.substring(r[0].length),this.tokens.push({type:wl.code,meta:r[2],lang:r[3],text:r[4]||""});else if(r=this.rules.heading.exec(o))o=o.substring(r[0].length),this.tokens.push({type:wl.heading,depth:r[1].length,text:r[2]});else if(e&&this.hasRulesTables&&(r=this.rules.nptable.exec(o))){o=o.substring(r[0].length);const t={type:wl.table,header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let n=0;n<t.align.length;n++)/^ *-+: *$/.test(t.align[n])?t.align[n]="right":/^ *:-+: *$/.test(t.align[n])?t.align[n]="center":/^ *:-+ *$/.test(t.align[n])?t.align[n]="left":t.align[n]=null;const e=r[3].replace(/\n$/,"").split("\n");for(let n=0;n<e.length;n++)t.cells[n]=e[n].split(/ *\| */);this.tokens.push(t)}else if(r=this.rules.lheading.exec(o))o=o.substring(r[0].length),this.tokens.push({type:wl.heading,depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(o))o=o.substring(r[0].length),this.tokens.push({type:wl.hr});else if(r=this.rules.blockquote.exec(o)){o=o.substring(r[0].length),this.tokens.push({type:wl.blockquoteStart});const t=r[0].replace(/^ *> ?/gm,"");this.getTokens(t),this.tokens.push({type:wl.blockquoteEnd})}else if(r=this.rules.list.exec(o)){o=o.substring(r[0].length);const t=r[2];this.tokens.push({type:wl.listStart,ordered:t.length>1});const e=r[0].match(this.rules.item),i=e.length;let s,a,u,c=!1;for(let r=0;r<i;r++){let l=e[r];s=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),-1!==l.indexOf("\n ")&&(s-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+s+"}","gm"),"")),this.options.smartLists&&r!==i-1&&(a=this.staticThis.getRulesBase().bullet.exec(e[r+1])[0],t===a||t.length>1&&a.length>1||(o=e.slice(r+1).join("\n")+o,r=i-1)),u=c||/\n\n(?!\s*$)/.test(l),r!==i-1&&(c="\n"===l.charAt(l.length-1),u||(u=c)),this.tokens.push({type:u?wl.looseItemStart:wl.listItemStart}),this.getTokens(l,!1,n),this.tokens.push({type:wl.listItemEnd})}this.tokens.push({type:wl.listEnd})}else if(r=this.rules.html.exec(o)){o=o.substring(r[0].length);const t=r[1],e="pre"===t||"script"===t||"style"===t;this.tokens.push({type:this.options.sanitize?wl.paragraph:wl.html,pre:!this.options.sanitizer&&e,text:r[0]})}else if(e&&(r=this.rules.def.exec(o)))o=o.substring(r[0].length),this.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(e&&this.hasRulesTables&&(r=this.rules.table.exec(o))){o=o.substring(r[0].length);const t={type:wl.table,header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let n=0;n<t.align.length;n++)/^ *-+: *$/.test(t.align[n])?t.align[n]="right":/^ *:-+: *$/.test(t.align[n])?t.align[n]="center":/^ *:-+ *$/.test(t.align[n])?t.align[n]="left":t.align[n]=null;const e=r[3].replace(/(?: *\| *)?\n$/,"").split("\n");for(let n=0;n<e.length;n++)t.cells[n]=e[n].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(t)}else{if(this.staticThis.simpleRules.length){const t=this.staticThis.simpleRules;for(let e=0;e<t.length;e++)if(r=t[e].exec(o)){o=o.substring(r[0].length);const t="simpleRule"+(e+1);this.tokens.push({type:t,execArr:r});continue t}}if(e&&(r=this.rules.paragraph.exec(o)))o=o.substring(r[0].length),"\n"===r[1].slice(-1)?this.tokens.push({type:wl.paragraph,text:r[1].slice(0,-1)}):this.tokens.push({type:this.tokens.length>0?wl.paragraph:wl.text,text:r[1]});else if(r=this.rules.text.exec(o))o=o.substring(r[0].length),this.tokens.push({type:wl.text,text:r[0]});else if(o)throw new Error("Infinite loop on byte: "+o.charCodeAt(0)+`, near text '${o.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}Al.simpleRules=[],Al.rulesBase=null,Al.rulesGfm=null,Al.rulesTables=null;export{Sl as $,e as A,rt as B,vt as C,l as D,p as E,f as F,t as G,L as H,R as I,I as J,Y as K,C as L,b as M,o as N,c as O,T as P,ll as Q,nc as R,bt as S,ec as T,u as U,d as V,ut as W,q as X,U as Y,at as Z,K as _,E as a,M as a0,k as a1,D as a2,i as a3,wt as a4,mt as a5,x as b,S as c,y as d,_ as e,g as f,A as g,j as h,yt as i,ht as j,m as k,w as l,ft as m,O as n,dt as o,ct as p,lt as q,st as r,s,v as t,ot as u,it as v,pt as w,P as x,V as y,$ as z};
