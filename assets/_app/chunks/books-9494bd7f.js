import{P as e,Q as n,R as t,C as a,T as u,U as s}from"./vendor-c9b40f2c.js";let c;const o=[];function i(){return new Promise((e=>c?e(c):o.push(e)))}function r(n,c,o=5e3){const r=a(u.from(c)),d=[];const f=s.debounce((async function(){await e.setItem({key:n,value:u.save(t(r))})()}),o);function m(e){r.update((n=>u.change(n,e))),f()}return async function(){const[t,a]=await Promise.all([i(),e.getItem({key:n})()]);a&&r.set(u.load(a,t)),d.forEach((e=>e())),d.length=0}(),{subscribe:r.subscribe,get:()=>t(r),change:function(e){d.length?d.push((()=>{m(e)})):m(e)}}}function d(e){return{uuid:e.uuid,name:e.name.toString()}}function f(e){return{uuid:e.uuid,name:new n.Text(e.name)}}!async function(){let t=await e.getItem({key:"actor_id"})();t||(t=n.uuid(),await e.setItem({key:"actor_id",value:t})()),c=t,o.forEach((e=>e(t))),o.length=0}();const m=r("books",{table:new n.Table});function l(e){const t=n.uuid();return m.change((({table:a})=>{a.add({uuid:t,name:new n.Text(e)})})),t}export{f as a,m as b,l as c,d,i as g,r as p};
