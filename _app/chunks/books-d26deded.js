import{N as e,O as t,P as n,C as a,Q as s,R as o}from"./vendor-1b736329.js";let c=null;const u=[];function i(){return new Promise((e=>c?e(c):u.push(e)))}function r(t,c,u=5e3){const r=a(s.from(c)),l=[];const f=o.debounce((async function(){await e.setItem({key:t,value:s.save(n(r))})()}),u);function b(e){r.update((t=>s.change(t,e))),f()}return async function(){const[n,a]=await Promise.all([i(),e.getItem({key:t})()]);a&&r.set(s.load(a,n)),l.forEach((e=>e())),l.length=0}(),{subscribe:r.subscribe,get:()=>n(r),change:function(e){l.length?l.push((()=>{b(e)})):b(e)}}}!async function(){let n=await e.getItem({key:"actor_id"})();n||(n=t.uuid(),await e.setItem({key:"actor_id",value:n})),c=n,u.forEach((e=>e(n))),u.length=0}();const l=r("books",{table:new t.Table});function f(e){let n;return l.change((({table:a})=>{n=a.add({name:new t.Text(e)})})),n}export{l as b,f as c,i as g,r as p};
