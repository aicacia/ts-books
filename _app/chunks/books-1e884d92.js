import{N as e,O as a,P as t,Q as n,C as s,R as o,T as c}from"./vendor-10d7273b.js";const i=e.none(),u=[];function r(e,t,r=5e3){const f=s(o.from(t)),l=[];const b=c.debounce((async function(){await a.setItem({key:e,value:o.save(n(f))})()}),r);function d(e){f.update((a=>o.change(a,e))),b()}return async function(){const t=await new Promise((e=>i.ifSome(e).ifNone((()=>u.push(e))))),n=await a.getItem({key:e})();n&&f.set(o.load(n,t)),l.forEach((e=>e())),l.length=0}(),{subscribe:f.subscribe,get:()=>n(f),change:function(e){l.length?l.push((()=>{d(e)})):d(e)}}}!async function(){let e=await a.getItem({key:"actor_id"})();e||(e=t.uuid(),await a.setItem({key:"actor_id",value:e})),i.replace(e),u.forEach((a=>a(e))),u.length=0}();const f=r("books",{table:new t.Table});function l(e){let a;return f.change((({table:t})=>{a=t.add({name:e})})),a}export{f as b,l as c,r as p};
